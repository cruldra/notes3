---
sidebar_position: 2
---
# 在现有项目中安装 Remotion

Remotion 可以安装到现有项目中，例如 [Next.JS](https://nextjs.org/)、[React Router](https://reactrouter.com/)、[Vite](https://vitejs.dev/guide/) 或 [Create React App](https://create-react-app.dev/)，以及仅运行在 Node.JS 上的服务端项目。首先添加以下包：

```bash
npm i --save-exact remotion@4.0.409 @remotion/cli@4.0.409
```

或者使用其他包管理器：

```bash
pnpm i remotion@4.0.409 @remotion/cli@4.0.409
```

```bash
bun i remotion@4.0.409 @remotion/cli@4.0.409
```

```bash
yarn --exact add remotion@4.0.409 @remotion/cli@4.0.409
```

这里假设你使用的是 Remotion v4.0.409 版本。
请同时更新 `remotion` 和所有 `@remotion/*` 包到相同版本。
移除版本号前的 `^` 符号，以避免版本冲突。

*   如果你想在现有的 React 应用中嵌入 Remotion 视频，请同时安装 [`@remotion/player`](https://www.remotion.dev/docs/player/installation)。
*   如果你想使用 Node.JS API 渲染视频，请同时安装 [`@remotion/renderer`](https://www.remotion.dev/docs/renderer)。
*   如果你想在 Remotion Lambda 上触发渲染，请同时安装 [`@remotion/lambda`](https://www.remotion.dev/docs/lambda/setup)。

## 设置文件夹结构

创建一个新文件夹用于存放 Remotion 文件。它可以是任何位置和名称，在这个例子中我们将它命名为 `remotion` 并放在项目的根目录下。在你创建的文件夹中，创建 3 个文件：

`remotion/Composition.tsx`

```tsx
export const MyComposition = () => {
  return null;
};
```

`remotion/Root.tsx`

```tsx
import React from 'react';
import {Composition} from 'remotion';
import {MyComposition} from './Composition';

export const RemotionRoot: React.FC = () => {
  return (
    <>
      <Composition
        id="Empty"
        component={MyComposition}
        durationInFrames={60}
        fps={30}
        width={1280}
        height={720}
      />
    </>
  );
};
```

`remotion/index.ts`

```ts
import { registerRoot } from "remotion";
import { RemotionRoot } from "./Root";

registerRoot(RemotionRoot);
```

调用 [`registerRoot()`](https://www.remotion.dev/docs/register-root) 的文件现在就是你的 Remotion [**入口点**](https://www.remotion.dev/docs/terminology/entry-point)。

> **注意**
>
> 留意你的 `tsconfig.json` 中的导入别名，这可能会将 `import {...} from "remotion"` 解析到 `remotion` 文件夹。我们建议不要使用没有前缀的 `paths`。

## 启动 Studio

使用以下命令启动 Remotion Studio：

```bash
npx remotion studio remotion/index.ts
```

如有必要，将 `remotion/index.ts` 替换为你的入口点。

## 渲染视频

使用以下命令渲染视频：

```bash
npx remotion render remotion/index.ts MyComp out.mp4
```

将入口点、合成名称和输出文件名替换为对应你用例的值。

## 安装 ESLint 插件

Remotion 有一个 ESLint 插件，用于警告 Remotion API 的不当使用。要将其添加到现有项目，请安装它：

```bash
npm i -D @remotion/eslint-plugin
```

或者：

```bash
yarn add -D @remotion/eslint-plugin
```

```bash
pnpm i -D @remotion/eslint-plugin
```

此片段将仅为 Remotion 文件启用推荐规则：

`.eslintrc`

```json
{
  "plugins": ["@remotion"],
  "overrides": [
    {
      "files": ["remotion/*.{ts,tsx}"],
      "extends": ["plugin:@remotion/recommended"]
    }
  ]
}
```

## 在 React 应用中嵌入 Remotion 视频

你可以使用 `<Player>` 组件在 React 项目中显示 Remotion 视频。请阅读关于它的[单独页面](https://www.remotion.dev/docs/player/integration)以获取说明。
