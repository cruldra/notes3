<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Tools/Comfyui/ComfyUI项目目录结构" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">ComfyUI 项目目录结构 | Cruldra</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/notes3/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/notes3/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/notes3/docs/Tools/Comfyui/ComfyUI项目目录结构"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ComfyUI 项目目录结构 | Cruldra"><meta data-rh="true" name="description" content="项目概览"><meta data-rh="true" property="og:description" content="项目概览"><link data-rh="true" rel="icon" href="/notes3/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/notes3/docs/Tools/Comfyui/ComfyUI项目目录结构"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/notes3/docs/Tools/Comfyui/ComfyUI项目目录结构" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/notes3/docs/Tools/Comfyui/ComfyUI项目目录结构" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"ComfyUI 项目目录结构","item":"https://your-docusaurus-site.example.com/notes3/docs/Tools/Comfyui/ComfyUI项目目录结构"}]}</script><link rel="alternate" type="application/rss+xml" href="/notes3/blog/rss.xml" title="Cruldra RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/notes3/blog/atom.xml" title="Cruldra Atom Feed"><link rel="stylesheet" href="/notes3/assets/css/styles.5589a8a1.css">
<script src="/notes3/assets/js/runtime~main.2b8b0459.js" defer="defer"></script>
<script src="/notes3/assets/js/main.c435b383.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/notes3/img/logo.svg"><style data-mantine-styles="classes">@media (max-width: 35.99375em) {.mantine-visible-from-xs {display: none !important;}}@media (min-width: 36em) {.mantine-hidden-from-xs {display: none !important;}}@media (max-width: 47.99375em) {.mantine-visible-from-sm {display: none !important;}}@media (min-width: 48em) {.mantine-hidden-from-sm {display: none !important;}}@media (max-width: 61.99375em) {.mantine-visible-from-md {display: none !important;}}@media (min-width: 62em) {.mantine-hidden-from-md {display: none !important;}}@media (max-width: 74.99375em) {.mantine-visible-from-lg {display: none !important;}}@media (min-width: 75em) {.mantine-hidden-from-lg {display: none !important;}}@media (max-width: 87.99375em) {.mantine-visible-from-xl {display: none !important;}}@media (min-width: 88em) {.mantine-hidden-from-xl {display: none !important;}}</style><div role="region" aria-label="Skip to main content"><a class="skipToContent_XTLC" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/notes3/"><div class="navbar__logo"><img src="/notes3/img/logo.svg" alt="My Site Logo" class="themedComponent_t6CT themedComponent--light_qEB_"><img src="/notes3/img/logo.svg" alt="My Site Logo" class="themedComponent_t6CT themedComponent--dark_k8rB"></div><b class="navbar__title text--truncate">Cruldra</b></a><a class="navbar__item navbar__link" href="/notes3/docs/category/设计模式">JVM</a><a class="navbar__item navbar__link" href="/notes3/docs/category/css">前端</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/notes3/docs/category/astrbot">工具</a><a class="navbar__item navbar__link" href="/notes3/docs/category/ai电竞酒店">个人</a><a class="navbar__item navbar__link" href="/notes3/docs/AI/Agno/介绍">AI</a><a class="navbar__item navbar__link" href="/notes3/docs/category/内置模块">Python</a><a class="navbar__item navbar__link" href="/notes3/docs/category/actix-web">Rust</a><a class="navbar__item navbar__link" href="/notes3/docs/category/数据库系统">软件工程</a><a class="navbar__item navbar__link" href="/notes3/docs/category/上古卷轴5">游戏</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbarSearchContainer_yKmy"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_N29d"><div class="docsWrapper_EARV"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_LCZS" type="button"></button><div class="docRoot_rMos"><aside class="theme-doc-sidebar-container docSidebarContainer_kmUt"><div class="sidebarViewport_dUwD"><div class="sidebar_GMqB"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_fCzY"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/notes3/docs/category/astrbot">AstrBot</a><button aria-label="Expand sidebar category &#x27;AstrBot&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/notes3/docs/category/dify">Dify</a><button aria-label="Expand sidebar category &#x27;Dify&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/Tools/OpenAI">OpenAI</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/notes3/docs/category/rpa">RPA</a><button aria-label="Expand sidebar category &#x27;RPA&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/notes3/docs/category/内网穿透">内网穿透</a><button aria-label="Expand sidebar category &#x27;内网穿透&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/notes3/docs/category/操作系统">操作系统</a><button aria-label="Expand sidebar category &#x27;操作系统&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/notes3/docs/category/数据库">数据库</a><button aria-label="Expand sidebar category &#x27;数据库&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/notes3/docs/category/版本控制">版本控制</a><button aria-label="Expand sidebar category &#x27;版本控制&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/notes3/docs/category/编程">编程</a><button aria-label="Expand sidebar category &#x27;编程&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/notes3/docs/category/虚拟化和容器">虚拟化和容器</a><button aria-label="Expand sidebar category &#x27;虚拟化和容器&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/notes3/docs/category/证书">证书</a><button aria-label="Expand sidebar category &#x27;证书&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/notes3/docs/category/集成开发环境">集成开发环境</a><button aria-label="Expand sidebar category &#x27;集成开发环境&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/notes3/docs/category/音视频">音视频</a><button aria-label="Expand sidebar category &#x27;音视频&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/notes3/docs/Tools/Comfyui/AI模型文件分发策略差异分析">Comfyui</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/Tools/Comfyui/AI模型文件分发策略差异分析">AI模型文件分发策略差异分析</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/Tools/Comfyui/CLIPTextEncode节点详细分析">CLIPTextEncode 节点详细分析</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/Tools/Comfyui/CheckpointLoaderSimple节点分析">CheckpointLoaderSimple 节点详细分析</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/Tools/Comfyui/ComfyUI与Qwen-Image模型完整教程口播文案">ComfyUI与Qwen-Image模型完整教程口播文案</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/Tools/Comfyui/ComfyUI介绍口播文稿">ComfyUI介绍口播文稿</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/Tools/Comfyui/ComfyUI安装指南">ComfyUI 安装指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/Tools/Comfyui/ComfyUI架构详解">ComfyUI 架构详解</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/Tools/Comfyui/ComfyUI模型路径配置指南">ComfyUI 模型路径配置指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/notes3/docs/Tools/Comfyui/ComfyUI项目目录结构">ComfyUI 项目目录结构</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/Tools/Comfyui/EmptyLatentImage节点详细分析">EmptyLatentImage 节点详细分析</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/Tools/Comfyui/KSampler节点详细分析">KSampler 节点详细分析</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/Tools/Comfyui/LoraLoaderModelOnly节点详细分析">LoraLoaderModelOnly 节点详细分析</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/Tools/Comfyui/MMDiT模型详解">MMDiT (Multimodal Diffusion Transformer) 模型详解</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/Tools/Comfyui/UNETLoader节点详细分析">UNETLoader 节点详细分析</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/Tools/Comfyui/VAEDecode节点详细分析">VAEDecode 节点详细分析</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/Tools/Comfyui/端口配置指南">ComfyUI 端口配置指南</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/Tools/Docusaurus">Docusaurus</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/notes3/docs/Tools/Gitea/作为容器注册表">Gitea</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/notes3/docs/Tools/Github/高级搜索语法">Github</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/Tools/Jenkins">Jenkins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/Tools/Ollama">Ollama</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/notes3/docs/Tools/figma/Figma原型交互">figma</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_GvdX"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_Zxmv"><div class="docItemContainer_bH49"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_lAiQ" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/notes3/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_wapv"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Comfyui</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">ComfyUI 项目目录结构</span></li></ul></nav><div class="tocCollapsible_ISCz theme-doc-toc-mobile tocMobile_y31C"><button type="button" class="clean-btn tocCollapsibleButton_SdVn">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ComfyUI 项目目录结构</h1></header>
<h2 class="anchor anchorWithStickyNavbar_eLV6" id="项目概览">项目概览<a href="#项目概览" class="hash-link" aria-label="Direct link to 项目概览" title="Direct link to 项目概览">​</a></h2>
<p>ComfyUI是一个基于节点的图形化界面，用于Stable Diffusion和其他AI图像生成模型。本文档详细介绍了项目的目录结构和各部分的功能。</p>
<h2 class="anchor anchorWithStickyNavbar_eLV6" id="根目录文件">根目录文件<a href="#根目录文件" class="hash-link" aria-label="Direct link to 根目录文件" title="Direct link to 根目录文件">​</a></h2>
<div class="language-text codeBlockContainer_Um2F theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_S5dr"><pre tabindex="0" class="prism-code language-text codeBlock_XWlS thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xg5f"><span class="token-line" style="color:#393A34"><span class="token plain">ComfyUI/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── main.py                    # 主程序入口文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── server.py                  # Web服务器启动文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── execution.py               # 工作流执行引擎</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes.py                   # 核心节点定义</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── folder_paths.py            # 路径管理模块</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── requirements.txt           # Python依赖包列表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── pyproject.toml            # 项目配置文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── README.md                 # 项目说明文档</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── README_ZH.MD              # 中文说明文档</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── LICENSE                   # 开源许可证</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── CONTRIBUTING.md           # 贡献指南</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── CODEOWNERS               # 代码所有者配置</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_eLV6" id="核心模块目录">核心模块目录<a href="#核心模块目录" class="hash-link" aria-label="Direct link to 核心模块目录" title="Direct link to 核心模块目录">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_eLV6" id="1-comfy---核心功能模块">1. comfy/ - 核心功能模块<a href="#1-comfy---核心功能模块" class="hash-link" aria-label="Direct link to 1. comfy/ - 核心功能模块" title="Direct link to 1. comfy/ - 核心功能模块">​</a></h3>
<div class="language-text codeBlockContainer_Um2F theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_S5dr"><pre tabindex="0" class="prism-code language-text codeBlock_XWlS thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xg5f"><span class="token-line" style="color:#393A34"><span class="token plain">comfy/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── model_management.py      # 模型内存管理</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── model_patcher.py         # 模型补丁系统</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── sd.py                    # Stable Diffusion核心</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── clip_model.py            # CLIP文本编码器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── clip_vision.py           # CLIP视觉编码器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── lora.py                  # LoRA权重处理</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── controlnet.py            # ControlNet支持</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── samplers.py              # 采样器实现</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── sample.py                # 采样核心逻辑</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── model_base.py            # 模型基类</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── model_detection.py       # 模型类型检测</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── supported_models.py      # 支持的模型列表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── latent_formats.py        # 潜在空间格式</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── diffusers_convert.py     # Diffusers格式转换</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── diffusers_load.py        # Diffusers模型加载</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── hooks.py                 # 钩子系统</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── options.py               # 配置选项</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── ops.py                   # 操作符重载</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── float.py                 # 浮点数处理</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── conds.py                 # 条件处理</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── gligen.py                # GLIGEN支持</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── checkpoint_pickle.py     # 检查点序列化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── cli_args.py              # 命令行参数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── context_windows.py       # 上下文窗口</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── patcher_extension.py     # 补丁扩展</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── rmsnorm.py               # RMSNorm实现</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── sampler_helpers.py       # 采样器辅助函数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── model_sampling.py        # 模型采样配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── lora_convert.py          # LoRA格式转换</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── comfy_types/             # 类型定义</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── ldm/                     # Latent Diffusion Models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── k_diffusion/             # K-Diffusion采样器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── cldm/                    # ControlLDM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── t2i_adapter/             # Text-to-Image适配器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── extra_samplers/          # 额外采样器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── audio_encoders/          # 音频编码器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── image_encoders/          # 图像编码器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── sd1_tokenizer/           # SD1.x分词器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── 配置文件/                 # 各种JSON配置文件</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_eLV6" id="2-comfy_extras---扩展节点">2. comfy_extras/ - 扩展节点<a href="#2-comfy_extras---扩展节点" class="hash-link" aria-label="Direct link to 2. comfy_extras/ - 扩展节点" title="Direct link to 2. comfy_extras/ - 扩展节点">​</a></h3>
<div class="language-text codeBlockContainer_Um2F theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_S5dr"><pre tabindex="0" class="prism-code language-text codeBlock_XWlS thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xg5f"><span class="token-line" style="color:#393A34"><span class="token plain">comfy_extras/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_advanced_samplers.py    # 高级采样器节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_model_merging.py         # 模型合并节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_controlnet.py            # ControlNet节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_flux.py                  # Flux模型节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_audio.py                 # 音频处理节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_images.py                # 图像处理节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_latent.py                # 潜在空间节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_mask.py                  # 遮罩处理节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_compositing.py           # 图像合成节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_cond.py                  # 条件处理节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_cfg.py                   # CFG相关节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_hypernetwork.py          # Hypernetwork节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_lora_extract.py          # LoRA提取节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_model_advanced.py        # 高级模型节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_model_patch.py           # 模型补丁节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_upscale.py               # 图像放大节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_video.py                 # 视频处理节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_3d.py                    # 3D相关节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_hunyuan.py               # 混元模型节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_mochi.py                 # Mochi模型节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_cosmos.py                # Cosmos模型节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── chainner_models/               # ChaiNNer模型支持</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_eLV6" id="3-comfy_api---api接口">3. comfy_api/ - API接口<a href="#3-comfy_api---api接口" class="hash-link" aria-label="Direct link to 3. comfy_api/ - API接口" title="Direct link to 3. comfy_api/ - API接口">​</a></h3>
<div class="language-text codeBlockContainer_Um2F theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_S5dr"><pre tabindex="0" class="prism-code language-text codeBlock_XWlS thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xg5f"><span class="token-line" style="color:#393A34"><span class="token plain">comfy_api/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── version_list.py          # API版本列表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── feature_flags.py         # 功能标志</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── generate_api_stubs.py    # API存根生成</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── util.py                  # 工具函数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── v0_0_1/                  # API v0.0.1版本</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── v0_0_2/                  # API v0.0.2版本</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── latest/                  # 最新API版本</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── input/                   # 输入处理</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── input_impl/              # 输入实现</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── internal/                # 内部API</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── torch_helpers/           # PyTorch辅助</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── util/                    # 工具模块</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_eLV6" id="4-comfy_api_nodes---api节点">4. comfy_api_nodes/ - API节点<a href="#4-comfy_api_nodes---api节点" class="hash-link" aria-label="Direct link to 4. comfy_api_nodes/ - API节点" title="Direct link to 4. comfy_api_nodes/ - API节点">​</a></h3>
<div class="language-text codeBlockContainer_Um2F theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_S5dr"><pre tabindex="0" class="prism-code language-text codeBlock_XWlS thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xg5f"><span class="token-line" style="color:#393A34"><span class="token plain">comfy_api_nodes/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── __init__.py              # 模块初始化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── apinode_utils.py         # API节点工具</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── mapper_utils.py          # 映射工具</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── canary.py                # 金丝雀测试</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_openai.py          # OpenAI API节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_stability.py       # Stability AI节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_runway.py          # Runway ML节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_bfl.py             # Black Forest Labs节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_gemini.py          # Google Gemini节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_ideogram.py        # Ideogram节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_kling.py           # Kling节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_luma.py            # Luma AI节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_minimax.py         # MiniMax节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_moonvalley.py      # MoonValley节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_pika.py            # Pika Labs节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_pixverse.py        # PixVerse节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_recraft.py         # Recraft节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_rodin.py           # Rodin节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_tripo.py           # Tripo节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_veo2.py            # Google Veo2节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── nodes_vidu.py            # Vidu节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── apis/                    # API定义</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── util/                    # 工具函数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── redocly.yaml             # API文档配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── redocly-dev.yaml         # 开发环境配置</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_eLV6" id="5-comfy_execution---执行引擎">5. comfy_execution/ - 执行引擎<a href="#5-comfy_execution---执行引擎" class="hash-link" aria-label="Direct link to 5. comfy_execution/ - 执行引擎" title="Direct link to 5. comfy_execution/ - 执行引擎">​</a></h3>
<div class="language-text codeBlockContainer_Um2F theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_S5dr"><pre tabindex="0" class="prism-code language-text codeBlock_XWlS thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xg5f"><span class="token-line" style="color:#393A34"><span class="token plain">comfy_execution/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── graph.py                 # 图结构处理</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── graph_utils.py           # 图工具函数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── caching.py               # 缓存机制</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── progress.py              # 进度跟踪</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── utils.py                 # 工具函数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── validation.py            # 验证逻辑</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_eLV6" id="6-comfy_config---配置管理">6. comfy_config/ - 配置管理<a href="#6-comfy_config---配置管理" class="hash-link" aria-label="Direct link to 6. comfy_config/ - 配置管理" title="Direct link to 6. comfy_config/ - 配置管理">​</a></h3>
<div class="language-text codeBlockContainer_Um2F theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_S5dr"><pre tabindex="0" class="prism-code language-text codeBlock_XWlS thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xg5f"><span class="token-line" style="color:#393A34"><span class="token plain">comfy_config/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── config_parser.py         # 配置解析器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── types.py                 # 配置类型定义</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_eLV6" id="应用层目录">应用层目录<a href="#应用层目录" class="hash-link" aria-label="Direct link to 应用层目录" title="Direct link to 应用层目录">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_eLV6" id="7-app---应用程序层">7. app/ - 应用程序层<a href="#7-app---应用程序层" class="hash-link" aria-label="Direct link to 7. app/ - 应用程序层" title="Direct link to 7. app/ - 应用程序层">​</a></h3>
<div class="language-text codeBlockContainer_Um2F theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_S5dr"><pre tabindex="0" class="prism-code language-text codeBlock_XWlS thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xg5f"><span class="token-line" style="color:#393A34"><span class="token plain">app/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── __init__.py              # 模块初始化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── app_settings.py          # 应用设置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── custom_node_manager.py   # 自定义节点管理</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── frontend_management.py   # 前端管理</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── logger.py                # 日志系统</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── model_manager.py         # 模型管理器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── user_manager.py          # 用户管理</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── database/                # 数据库相关</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_eLV6" id="8-api_server---api服务器">8. api_server/ - API服务器<a href="#8-api_server---api服务器" class="hash-link" aria-label="Direct link to 8. api_server/ - API服务器" title="Direct link to 8. api_server/ - API服务器">​</a></h3>
<div class="language-text codeBlockContainer_Um2F theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_S5dr"><pre tabindex="0" class="prism-code language-text codeBlock_XWlS thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xg5f"><span class="token-line" style="color:#393A34"><span class="token plain">api_server/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── __init__.py              # 模块初始化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── routes/                  # 路由定义</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── services/                # 服务层</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── utils/                   # 工具函数</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_eLV6" id="资源和数据目录">资源和数据目录<a href="#资源和数据目录" class="hash-link" aria-label="Direct link to 资源和数据目录" title="Direct link to 资源和数据目录">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_eLV6" id="9-models---模型存储">9. models/ - 模型存储<a href="#9-models---模型存储" class="hash-link" aria-label="Direct link to 9. models/ - 模型存储" title="Direct link to 9. models/ - 模型存储">​</a></h3>
<div class="language-text codeBlockContainer_Um2F theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_S5dr"><pre tabindex="0" class="prism-code language-text codeBlock_XWlS thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xg5f"><span class="token-line" style="color:#393A34"><span class="token plain">models/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── checkpoints/             # 完整模型检查点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── diffusion_models/        # 扩散模型（UNET）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── clip/                    # CLIP文本编码器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── clip_vision/             # CLIP视觉编码器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── vae/                     # VAE编码器/解码器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── loras/                   # LoRA权重文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── controlnet/              # ControlNet模型</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── upscale_models/          # 图像放大模型</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── embeddings/              # 文本嵌入</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── hypernetworks/           # Hypernetwork</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── style_models/            # 风格模型</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── gligen/                  # GLIGEN模型</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── photomaker/              # PhotoMaker模型</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── text_encoders/           # 文本编码器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── unet/                    # UNET模型</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── diffusers/               # Diffusers格式模型</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── vae_approx/              # VAE近似模型</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── audio_encoders/          # 音频编码器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── model_patches/           # 模型补丁</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── configs/                 # 模型配置文件</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_eLV6" id="10-input---输入文件">10. input/ - 输入文件<a href="#10-input---输入文件" class="hash-link" aria-label="Direct link to 10. input/ - 输入文件" title="Direct link to 10. input/ - 输入文件">​</a></h3>
<div class="language-text codeBlockContainer_Um2F theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_S5dr"><pre tabindex="0" class="prism-code language-text codeBlock_XWlS thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xg5f"><span class="token-line" style="color:#393A34"><span class="token plain">input/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── example.png              # 示例图片</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── [用户上传的图片文件]</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_eLV6" id="11-output---输出文件">11. output/ - 输出文件<a href="#11-output---输出文件" class="hash-link" aria-label="Direct link to 11. output/ - 输出文件" title="Direct link to 11. output/ - 输出文件">​</a></h3>
<div class="language-text codeBlockContainer_Um2F theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_S5dr"><pre tabindex="0" class="prism-code language-text codeBlock_XWlS thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xg5f"><span class="token-line" style="color:#393A34"><span class="token plain">output/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── _output_images_will_be_put_here  # 输出说明</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── [生成的图片文件]</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_eLV6" id="12-custom_nodes---自定义节点">12. custom_nodes/ - 自定义节点<a href="#12-custom_nodes---自定义节点" class="hash-link" aria-label="Direct link to 12. custom_nodes/ - 自定义节点" title="Direct link to 12. custom_nodes/ - 自定义节点">​</a></h3>
<div class="language-text codeBlockContainer_Um2F theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_S5dr"><pre tabindex="0" class="prism-code language-text codeBlock_XWlS thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xg5f"><span class="token-line" style="color:#393A34"><span class="token plain">custom_nodes/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── example_node.py.example  # 节点示例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── websocket_image_save.py  # WebSocket图片保存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── [第三方自定义节点]</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_eLV6" id="开发和测试目录">开发和测试目录<a href="#开发和测试目录" class="hash-link" aria-label="Direct link to 开发和测试目录" title="Direct link to 开发和测试目录">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_eLV6" id="13-tests---集成测试">13. tests/ - 集成测试<a href="#13-tests---集成测试" class="hash-link" aria-label="Direct link to 13. tests/ - 集成测试" title="Direct link to 13. tests/ - 集成测试">​</a></h3>
<div class="language-text codeBlockContainer_Um2F theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_S5dr"><pre tabindex="0" class="prism-code language-text codeBlock_XWlS thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xg5f"><span class="token-line" style="color:#393A34"><span class="token plain">tests/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── __init__.py              # 测试模块初始化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── README.md                # 测试说明</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── conftest.py              # 测试配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── compare/                 # 对比测试</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── inference/               # 推理测试</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_eLV6" id="14-tests-unit---单元测试">14. tests-unit/ - 单元测试<a href="#14-tests-unit---单元测试" class="hash-link" aria-label="Direct link to 14. tests-unit/ - 单元测试" title="Direct link to 14. tests-unit/ - 单元测试">​</a></h3>
<div class="language-text codeBlockContainer_Um2F theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_S5dr"><pre tabindex="0" class="prism-code language-text codeBlock_XWlS thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xg5f"><span class="token-line" style="color:#393A34"><span class="token plain">tests-unit/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── README.md                # 单元测试说明</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── requirements.txt         # 测试依赖</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── app_test/                # 应用层测试</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── comfy_test/              # 核心模块测试</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── comfy_api_test/          # API测试</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── comfy_api_nodes_test/    # API节点测试</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── comfy_extras_test/       # 扩展节点测试</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── execution_test/          # 执行引擎测试</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── folder_paths_test/       # 路径管理测试</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── prompt_server_test/      # 提示服务器测试</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── server/                  # 服务器测试</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── utils/                   # 工具测试</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── feature_flags_test.py    # 功能标志测试</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── websocket_feature_flags_test.py  # WebSocket功能测试</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_eLV6" id="15-script_examples---脚本示例">15. script_examples/ - 脚本示例<a href="#15-script_examples---脚本示例" class="hash-link" aria-label="Direct link to 15. script_examples/ - 脚本示例" title="Direct link to 15. script_examples/ - 脚本示例">​</a></h3>
<div class="language-text codeBlockContainer_Um2F theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_S5dr"><pre tabindex="0" class="prism-code language-text codeBlock_XWlS thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xg5f"><span class="token-line" style="color:#393A34"><span class="token plain">script_examples/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── basic_api_example.py     # 基础API示例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── websockets_api_example.py  # WebSocket API示例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── websockets_api_example_ws_images.py  # WebSocket图片示例</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_eLV6" id="16-utils---工具模块">16. utils/ - 工具模块<a href="#16-utils---工具模块" class="hash-link" aria-label="Direct link to 16. utils/ - 工具模块" title="Direct link to 16. utils/ - 工具模块">​</a></h3>
<div class="language-text codeBlockContainer_Um2F theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_S5dr"><pre tabindex="0" class="prism-code language-text codeBlock_XWlS thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xg5f"><span class="token-line" style="color:#393A34"><span class="token plain">utils/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── __init__.py              # 模块初始化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── extra_config.py          # 额外配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── install_util.py          # 安装工具</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── json_util.py             # JSON工具</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_eLV6" id="17-docs---文档目录">17. docs/ - 文档目录<a href="#17-docs---文档目录" class="hash-link" aria-label="Direct link to 17. docs/ - 文档目录" title="Direct link to 17. docs/ - 文档目录">​</a></h3>
<div class="language-text codeBlockContainer_Um2F theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_S5dr"><pre tabindex="0" class="prism-code language-text codeBlock_XWlS thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xg5f"><span class="token-line" style="color:#393A34"><span class="token plain">docs/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── ComfyUI项目目录结构.md           # 本文档</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── ComfyUI架构详解.md               # 架构详解</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── ComfyUI安装指南.md               # 安装指南</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── ComfyUI介绍口播文稿.md           # 介绍文稿</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── 端口配置指南.md                  # 端口配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── AI模型文件分发策略差异分析.md     # 模型分发分析</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── CheckpointLoaderSimple节点分析.md # 节点分析文档</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── CLIPTextEncode节点详细分析.md     # 节点分析文档</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── EmptyLatentImage节点详细分析.md   # 节点分析文档</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── KSampler节点详细分析.md          # 节点分析文档</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── LoraLoaderModelOnly节点详细分析.md # 节点分析文档</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── UNETLoader节点详细分析.md        # 节点分析文档</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── VAEDecode节点详细分析.md         # 节点分析文档</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_eLV6" id="数据库和配置">数据库和配置<a href="#数据库和配置" class="hash-link" aria-label="Direct link to 数据库和配置" title="Direct link to 数据库和配置">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_eLV6" id="18-alembic_db---数据库迁移">18. alembic_db/ - 数据库迁移<a href="#18-alembic_db---数据库迁移" class="hash-link" aria-label="Direct link to 18. alembic_db/ - 数据库迁移" title="Direct link to 18. alembic_db/ - 数据库迁移">​</a></h3>
<div class="language-text codeBlockContainer_Um2F theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_S5dr"><pre tabindex="0" class="prism-code language-text codeBlock_XWlS thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xg5f"><span class="token-line" style="color:#393A34"><span class="token plain">alembic_db/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── README.md                # 数据库说明</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── env.py                   # 环境配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── script.py.mako           # 脚本模板</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_eLV6" id="19-配置文件">19. 配置文件<a href="#19-配置文件" class="hash-link" aria-label="Direct link to 19. 配置文件" title="Direct link to 19. 配置文件">​</a></h3>
<div class="language-text codeBlockContainer_Um2F theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_S5dr"><pre tabindex="0" class="prism-code language-text codeBlock_XWlS thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xg5f"><span class="token-line" style="color:#393A34"><span class="token plain">├── alembic.ini              # Alembic配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── pytest.ini              # Pytest配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── extra_model_paths.yaml.example  # 模型路径示例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── comfyui_version.py       # 版本信息</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── cuda_malloc.py           # CUDA内存分配</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── hook_breaker_ac10a0.py   # 钩子断路器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── latent_preview.py        # 潜在空间预览</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── new_updater.py           # 更新器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── node_helpers.py          # 节点辅助函数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── protocol.py              # 协议定义</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_eLV6" id="目录结构特点">目录结构特点<a href="#目录结构特点" class="hash-link" aria-label="Direct link to 目录结构特点" title="Direct link to 目录结构特点">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_eLV6" id="1-模块化设计">1. 模块化设计<a href="#1-模块化设计" class="hash-link" aria-label="Direct link to 1. 模块化设计" title="Direct link to 1. 模块化设计">​</a></h3>
<ul>
<li><strong>核心功能</strong>：comfy/ 包含所有核心AI功能</li>
<li><strong>扩展功能</strong>：comfy_extras/ 包含额外节点</li>
<li><strong>API层</strong>：comfy_api/ 和 comfy_api_nodes/ 提供API接口</li>
<li><strong>应用层</strong>：app/ 和 api_server/ 处理应用逻辑</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_eLV6" id="2-清晰的职责分离">2. 清晰的职责分离<a href="#2-清晰的职责分离" class="hash-link" aria-label="Direct link to 2. 清晰的职责分离" title="Direct link to 2. 清晰的职责分离">​</a></h3>
<ul>
<li><strong>模型管理</strong>：models/ 目录统一管理所有AI模型</li>
<li><strong>输入输出</strong>：input/ 和 output/ 分别处理输入和输出文件</li>
<li><strong>自定义扩展</strong>：custom_nodes/ 支持第三方节点</li>
<li><strong>测试覆盖</strong>：tests/ 和 tests-unit/ 提供完整测试</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_eLV6" id="3-开发友好">3. 开发友好<a href="#3-开发友好" class="hash-link" aria-label="Direct link to 3. 开发友好" title="Direct link to 3. 开发友好">​</a></h3>
<ul>
<li><strong>文档完善</strong>：docs/ 目录包含详细文档</li>
<li><strong>示例丰富</strong>：script_examples/ 提供使用示例</li>
<li><strong>工具齐全</strong>：utils/ 提供各种工具函数</li>
<li><strong>配置灵活</strong>：多种配置文件支持不同需求</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_eLV6" id="4-扩展性强">4. 扩展性强<a href="#4-扩展性强" class="hash-link" aria-label="Direct link to 4. 扩展性强" title="Direct link to 4. 扩展性强">​</a></h3>
<ul>
<li><strong>插件系统</strong>：支持自定义节点和扩展</li>
<li><strong>API接口</strong>：提供完整的API访问能力</li>
<li><strong>模型支持</strong>：支持多种AI模型格式</li>
<li><strong>平台兼容</strong>：跨平台设计，支持多种部署方式</li>
</ul>
<p>这个目录结构体现了ComfyUI作为一个成熟的AI图像生成平台的设计理念：模块化、可扩展、易维护。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Tools/Comfyui/ComfyUI项目目录结构.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_HMM5" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_IqsD"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/notes3/docs/Tools/Comfyui/ComfyUI模型路径配置指南"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">ComfyUI 模型路径配置指南</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/notes3/docs/Tools/Comfyui/EmptyLatentImage节点详细分析"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">EmptyLatentImage 节点详细分析</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_zkeJ thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#项目概览" class="table-of-contents__link toc-highlight">项目概览</a></li><li><a href="#根目录文件" class="table-of-contents__link toc-highlight">根目录文件</a></li><li><a href="#核心模块目录" class="table-of-contents__link toc-highlight">核心模块目录</a><ul><li><a href="#1-comfy---核心功能模块" class="table-of-contents__link toc-highlight">1. comfy/ - 核心功能模块</a></li><li><a href="#2-comfy_extras---扩展节点" class="table-of-contents__link toc-highlight">2. comfy_extras/ - 扩展节点</a></li><li><a href="#3-comfy_api---api接口" class="table-of-contents__link toc-highlight">3. comfy_api/ - API接口</a></li><li><a href="#4-comfy_api_nodes---api节点" class="table-of-contents__link toc-highlight">4. comfy_api_nodes/ - API节点</a></li><li><a href="#5-comfy_execution---执行引擎" class="table-of-contents__link toc-highlight">5. comfy_execution/ - 执行引擎</a></li><li><a href="#6-comfy_config---配置管理" class="table-of-contents__link toc-highlight">6. comfy_config/ - 配置管理</a></li></ul></li><li><a href="#应用层目录" class="table-of-contents__link toc-highlight">应用层目录</a><ul><li><a href="#7-app---应用程序层" class="table-of-contents__link toc-highlight">7. app/ - 应用程序层</a></li><li><a href="#8-api_server---api服务器" class="table-of-contents__link toc-highlight">8. api_server/ - API服务器</a></li></ul></li><li><a href="#资源和数据目录" class="table-of-contents__link toc-highlight">资源和数据目录</a><ul><li><a href="#9-models---模型存储" class="table-of-contents__link toc-highlight">9. models/ - 模型存储</a></li><li><a href="#10-input---输入文件" class="table-of-contents__link toc-highlight">10. input/ - 输入文件</a></li><li><a href="#11-output---输出文件" class="table-of-contents__link toc-highlight">11. output/ - 输出文件</a></li><li><a href="#12-custom_nodes---自定义节点" class="table-of-contents__link toc-highlight">12. custom_nodes/ - 自定义节点</a></li></ul></li><li><a href="#开发和测试目录" class="table-of-contents__link toc-highlight">开发和测试目录</a><ul><li><a href="#13-tests---集成测试" class="table-of-contents__link toc-highlight">13. tests/ - 集成测试</a></li><li><a href="#14-tests-unit---单元测试" class="table-of-contents__link toc-highlight">14. tests-unit/ - 单元测试</a></li><li><a href="#15-script_examples---脚本示例" class="table-of-contents__link toc-highlight">15. script_examples/ - 脚本示例</a></li><li><a href="#16-utils---工具模块" class="table-of-contents__link toc-highlight">16. utils/ - 工具模块</a></li><li><a href="#17-docs---文档目录" class="table-of-contents__link toc-highlight">17. docs/ - 文档目录</a></li></ul></li><li><a href="#数据库和配置" class="table-of-contents__link toc-highlight">数据库和配置</a><ul><li><a href="#18-alembic_db---数据库迁移" class="table-of-contents__link toc-highlight">18. alembic_db/ - 数据库迁移</a></li><li><a href="#19-配置文件" class="table-of-contents__link toc-highlight">19. 配置文件</a></li></ul></li><li><a href="#目录结构特点" class="table-of-contents__link toc-highlight">目录结构特点</a><ul><li><a href="#1-模块化设计" class="table-of-contents__link toc-highlight">1. 模块化设计</a></li><li><a href="#2-清晰的职责分离" class="table-of-contents__link toc-highlight">2. 清晰的职责分离</a></li><li><a href="#3-开发友好" class="table-of-contents__link toc-highlight">3. 开发友好</a></li><li><a href="#4-扩展性强" class="table-of-contents__link toc-highlight">4. 扩展性强</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_Mzni"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_Mzni"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_Mzni"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/notes3/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_Mzni"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>