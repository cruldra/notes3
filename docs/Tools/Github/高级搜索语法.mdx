# GitHub代码搜索语法指南

您可以使用专门的代码限定符、正则表达式和布尔运算来构建搜索查询以获得所需结果。

## 目录

- [关于代码搜索查询结构](#关于代码搜索查询结构)
- [精确匹配查询](#精确匹配查询)
- [搜索引号和反斜杠](#搜索引号和反斜杠)
- [使用布尔运算](#使用布尔运算)
- [使用限定符](#使用限定符)
- [使用正则表达式](#使用正则表达式)
- [分隔搜索词](#分隔搜索词)
- [大小写敏感性](#大小写敏感性)

## 关于代码搜索查询结构

本文中的搜索语法仅适用于GitHub代码搜索。请注意，搜索非代码内容(如issues、用户和讨论)的语法和限定符与代码搜索不同。

搜索查询由搜索词(您要搜索的文本)和限定符(缩小搜索范围)组成。

没有限定符的裸词将匹配文件内容或文件路径。

例如以下查询：

```
http-push
```

上述查询将匹配文件`docs/http-push.txt`，即使它不包含术语`http-push`。如果文件`example.txt`包含术语`http-push`，它也会匹配。

您可以输入多个用空格分隔的术语来搜索满足所有术语的文档。

例如以下查询：

```
sparse index
```

搜索结果将包括包含术语`sparse`和`index`的所有文档，顺序不限。例如，它将匹配包含`SparseIndexVector`的文件、包含短语`index for sparse trees`的文件，甚至是名为`index.txt`且包含术语`sparse`的文件。

用空格分隔多个术语的搜索等同于搜索`hello AND world`。也支持其他布尔运算，如`hello OR world`。

代码搜索还支持搜索包含空格的精确字符串。您可以使用专门的限定符(如`repo:`、`language:`和`path:`)来缩小代码搜索范围。您还可以通过在表达式周围加上斜杠来在搜索中使用正则表达式。

## 精确匹配查询

要搜索包含空格的精确字符串，可以用引号将字符串括起来。例如：

```
"sparse index"
```

您也可以在限定符中使用带引号的字符串，例如：

```
path:git language:"protocol buffers"
```

## 搜索引号和反斜杠

要搜索包含引号的代码，可以使用反斜杠转义引号。例如，要查找精确字符串`name = "tensorflow"`，可以搜索：

```
"name = \"tensorflow\""
```

要搜索包含反斜杠`\`的代码，请使用双反斜杠`\\`。

转义序列`\\`和`\"`也可以在引号外使用。不支持其他转义序列。不后跟`"`或`\`的反斜杠将原样包含在搜索中。

正则表达式中支持其他转义序列，如`\n`匹配换行符。

## 使用布尔运算

代码搜索支持布尔表达式。您可以使用运算符`AND`、`OR`和`NOT`组合搜索词。

默认情况下，用空格分隔的相邻术语等同于使用`AND`运算符。例如，搜索查询`sparse index`与`sparse AND index`相同，意味着搜索结果将包括包含术语`sparse`和`index`的所有文档，顺序不限。

要搜索包含一个术语或另一个术语的文档，可以使用`OR`运算符。例如，以下查询将匹配包含`sparse`或`index`的文档：

```
sparse OR index
```

要从搜索结果中排除文件，可以使用`NOT`运算符。例如，要排除`__testing__`目录中的文件，可以搜索：

```
"fatal error" NOT path:__testing__
```

您可以使用括号表示更复杂的布尔表达式。例如：

```
(language:ruby OR language:python) AND NOT path:"/tests/"
```

## 使用限定符

您可以使用专门的关键字来限定搜索。

### 仓库限定符

要在仓库内搜索，请使用`repo:`限定符。您必须提供完整的仓库名称，包括所有者。例如：

```
repo:github-linguist/linguist
```

要在一组仓库中搜索，可以将多个`repo:`限定符与布尔运算符`OR`组合使用。例如：

```
repo:github-linguist/linguist OR repo:tree-sitter/tree-sitter
```

注意：代码搜索目前不支持仓库名称的正则表达式或部分匹配。

### 组织和用户限定符

要在组织内搜索文件，请使用`org:`限定符。例如：

```
org:github
```

要在个人帐户中搜索文件，请使用`user:`限定符。例如：

```
user:octocat
```

### 语言限定符

要缩小到特定语言，请使用`language:`限定符。例如：

```
language:ruby OR language:cpp OR language:csharp
```

### 路径限定符

要在文件路径中搜索，请使用`path:`限定符。这将匹配在其文件路径中任何位置包含术语的文件。例如，要查找路径中包含术语`unit_tests`的文件，请使用：

```
path:unit_tests
```

要仅匹配特定文件名(而不是路径的一部分)，可以使用正则表达式：

```
path:/(^|\/)README\.md$/
```

您还可以在`path:`限定符中使用一些有限的glob表达式。

### 符号限定符

您可以使用`symbol:`限定符搜索代码中的符号定义，如函数或类定义。符号搜索基于使用开源Tree-sitter解析器生态系统解析您的代码。

例如，搜索名为`WithContext`的符号：

```
language:go symbol:WithContext
```

### 内容限定符

默认情况下，裸词搜索路径和文件内容。要严格匹配文件内容而不匹配文件路径，请使用`content:`限定符。例如：

```
content:README.md
```

### Is限定符

要根据仓库属性进行过滤，可以使用`is:`限定符。`is:`支持以下值：

- `archived`：将搜索限制为存档的仓库。
- `fork`：将搜索限制为fork的仓库。
- `vendored`：将搜索限制为检测为vendored的内容。
- `generated`：将搜索限制为检测为生成的内容。

## 使用正则表达式

代码搜索支持正则表达式来搜索代码中的模式。您可以在裸搜索词以及许多限定符中使用正则表达式，方法是在正则表达式周围加上斜杠。

例如，要搜索正则表达式`sparse.*index`，您可以使用：

```
/sparse.*index/
```

在正则表达式中，`\n`代表换行符，`\t`代表制表符，`\x{hhhh}`可用于转义任何Unicode字符。

## 分隔搜索词

搜索的所有部分(如搜索词、精确字符串、正则表达式、限定符、括号和布尔关键字`AND`、`OR`和`NOT`)必须用空格彼此分隔。唯一的例外是括号`(` `)`内的项目不需要与括号分隔。

## 大小写敏感性

默认情况下，代码搜索不区分大小写，结果将包括大写和小写结果。您可以通过使用关闭不区分大小写的正则表达式来进行区分大小写的搜索。例如，要搜索字符串"True"，您可以使用：

```
/(?-i)True/
