---
sidebar_position: 8
---

我们现在已经完成了游戏的所有功能。下面是一些剩余的步骤，用于添加一点 “果汁 (juice)” 以改善游戏体验。

你可以根据自己的想法随意扩展游戏玩法。

## 背景 (Background)

默认的灰色背景不是很有吸引力，所以让我们改变它的颜色。一种方法是使用 [ColorRect](https://docs.godotengine.org/en/stable/classes/class_colorrect.html) 节点。将其设为 `Main` 下的第一个节点，这样它就会被绘制在其他节点的后面。`ColorRect` 只有一个属性：`Color` (颜色)。选择一种你喜欢的颜色，并在视口顶部的工具栏或检查器中选择 **Layout -> Anchors Preset -> Full Rect** (全矩形)，使其覆盖整个屏幕。

如果你有背景图片，也可以通过改用 [TextureRect](https://docs.godotengine.org/en/stable/classes/class_texturerect.html) 节点来添加。

## 音效 (Sound effects)

声音和音乐是增加游戏体验吸引力的最有效方式。在你的游戏 **art** 文件夹中，有两个声音文件：“House In a Forest Loop.ogg” 用于背景音乐，“gameover.wav” 用于玩家失败时。

添加两个 [AudioStreamPlayer](https://docs.godotengine.org/en/stable/classes/class_audiostreamplayer.html) 节点作为 `Main` 的子节点。将其中一个命名为 `Music`，另一个命名为 `DeathSound`。在每一个节点上，点击 `Stream` (流) 属性，选择 “加载”，并选择对应的音频文件。

所有音频在导入时默认都会禁用 `Loop` (循环) 设置。如果你希望音乐无缝循环，点击 Stream 文件旁边的箭头，选择 **Make Unique** (设为唯一)，然后点击 Stream 文件并勾选 `Loop` 框。

![Unique Resource Music](https://docs.godotengine.org/en/stable/_images/unique_resource_music.webp)

要播放音乐，在 `new_game()` 函数中添加 `$Music.play()`，在 `game_over()` 函数中添加 `$Music.stop()`。

最后，在 `game_over()` 函数中添加 `$DeathSound.play()`。

```gdscript
func game_over():
	# ...
	$Music.stop()
	$DeathSound.play()

func new_game():
	# ...
	$Music.play()
```

```csharp
public void GameOver()
{
    // ...
    GetNode<AudioStreamPlayer>("Music").Stop();
    GetNode<AudioStreamPlayer>("DeathSound").Play();
}

public void NewGame()
{
    // ...
    GetNode<AudioStreamPlayer>("Music").Play();
}
```

## 键盘快捷键 (Keyboard shortcut)

既然游戏是用键盘控制的，如果能通过按键盘上的键来开始游戏也会很方便。我们可以利用 `Button` 节点的 “Shortcut” (快捷键) 属性来实现这一点。

在之前的课程中，我们创建了四个用于移动角色的输入动作。我们将创建一个类似的输入动作来映射到开始按钮。

选择 **项目 -> 项目设置**，然后点击 **输入映射 (Input Map)** 选项卡。以创建移动输入动作相同的方式，创建一个名为 `start_game` 的新输入动作，并为 Enter 键添加按键映射。

![Input Mapping Start Game](https://docs.godotengine.org/en/stable/_images/input-mapping-start_game.webp)

如果你有手柄，现在也是添加控制器支持的好时机。连接或配对你的控制器，然后在你希望添加控制器支持的每个输入动作下，点击 “+” 按钮并按下你想要映射到相应输入动作的按钮、方向键或摇杆方向。

在 `HUD` 场景中，选中 `StartButton` 并在检查器中找到它的 **Shortcut** 属性。通过点击方框内创建一个新的 [Shortcut](https://docs.godotengine.org/en/stable/classes/class_shortcut.html) 资源，打开 **Events** 数组，并点击 **Array[InputEvent] (size 0)** 向其中添加一个新的数组元素。

![Start Button Shortcut](https://docs.godotengine.org/en/stable/_images/start_button_shortcut.webp)

创建一个新的 [InputEventAction](https://docs.godotengine.org/en/stable/classes/class_inputeventaction.html) 并选择 `start_game` 动作。

![Start Button Shortcut 2](https://docs.godotengine.org/en/stable/_images/start_button_shortcut2.webp)

现在，当开始按钮出现时，你可以点击它或按 Enter 键来开始游戏。

就这样，你完成了在 Godot 中的第一个 2D 游戏。

![Dodge Preview](https://docs.godotengine.org/en/stable/_images/dodge_preview.gif)

你制作了一个由玩家控制的角色、会在游戏板周围随机生成的敌人、统计分数、实现了游戏结束和重新开始、用户界面、音效等等。恭喜你！

还有很多东西需要学习，但你可以花点时间欣赏一下你所取得的成就。

当你准备好时，可以继续学习 [你的第一个 3D 游戏](https://docs.godotengine.org/en/stable/getting_started/first_3d_game/index.html)，学习如何在 Godot 中从头开始创建一个完整的 3D 游戏。

## 与他人分享完成的游戏 (Sharing the finished game with others)

如果你想让人们无需安装 Godot 就能试玩你的游戏，你需要为你希望游戏运行的每个操作系统导出项目。请参阅 [导出项目](https://docs.godotengine.org/en/stable/tutorials/export/exporting_projects.html) 以获取说明。

导出项目后，将导出的可执行文件和 PCK 文件（不是原始项目文件）压缩成 ZIP 文件，然后将此 ZIP 文件上传到文件分享网站。
