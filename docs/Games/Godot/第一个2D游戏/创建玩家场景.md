---
sidebar_position: 3
---

项目设置完成后，我们可以开始处理玩家控制的角色了。

第一个场景将定义 `Player` (玩家) 对象。创建一个独立的玩家场景的好处之一是，我们甚至可以在创建游戏其他部分之前，对其进行单独测试。

## 节点结构 (Node structure)

首先，我们需要为玩家对象选择一个根节点。作为一般规则，场景的根节点应反映对象的预期功能——即该对象 “是什么”。在左上角的 “场景” 选项卡中，点击 “其它节点” 按钮，并向场景中添加一个 [Area2D](https://docs.godotengine.org/en/stable/classes/class_area2d.html) 节点。

![Add Node](https://docs.godotengine.org/en/stable/_images/add_node.webp)

当你添加 `Area2D` 节点时，Godot 会在场景树中其旁边显示以下 **警告图标**：

![No Shape Warning](https://docs.godotengine.org/en/stable/_images/no_shape_warning.webp)

此警告告诉我们 `Area2D` 节点需要一个形状 (shape) 来检测碰撞或重叠。我们可以 **暂时忽略该警告**，因为我们将首先设置玩家的外观（使用动画精灵）。外观准备好后，我们将添加一个碰撞形状作为子节点。这将允许我们根据精灵的外观准确地调整形状的大小和位置。

使用 `Area2D`，我们可以检测重叠或撞击玩家的对象。双击节点将其名称更改为 `Player`。既然我们已经设置了场景的根节点，我们就可以添加额外的节点来赋予它更多功能。

在向 `Player` 节点添加任何子节点之前，我们要确保不会因点击它们而意外地移动或调整它们的大小。选中该节点并点击锁图标右侧的图标。其工具提示显示 “将选中的节点与其子节点分组。这使得在 2D 和 3D 视图中点击任何子节点时都会选中父节点。”

![Lock Children](https://docs.godotengine.org/en/stable/_images/lock_children.webp)

将场景保存为 `player.tscn`。点击 **场景 > 保存**，或在 Windows/Linux 上按 **Ctrl + S** (macOS 为 **Cmd + S**)。

> **注意**
>
> 在这个项目中，我们将遵循 Godot 的命名规范。
>
> *   **GDScript**：类（节点）使用 PascalCase，变量和函数使用 snake_case，常量使用 ALL_CAPS（参见 [GDScript 风格指南](https://docs.godotengine.org/en/stable/tutorials/scripting/gdscript/gdscript_styleguide.html)）。
> *   **C#**：类、导出变量和方法使用 PascalCase，私有字段使用 _camelCase，局部变量和参数使用 camelCase（参见 [C# 风格指南](https://docs.godotengine.org/en/stable/tutorials/scripting/c_sharp/c_sharp_style_guide.html)）。在连接信号时，请务必准确输入方法名称。

## 精灵动画 (Sprite animation)

点击 `Player` 节点并添加（Ctrl + A）一个子节点 [AnimatedSprite2D](https://docs.godotengine.org/en/stable/classes/class_animatedsprite2d.html)。`AnimatedSprite2D` 将处理玩家的外观和动画。注意节点旁边有一个警告符号。`AnimatedSprite2D` 需要一个 [SpriteFrames](https://docs.godotengine.org/en/stable/classes/class_spriteframes.html) 资源，这是一份它可以显示的动画列表。确保选中了 `AnimatedSprite2D`，然后在检查器中的 `Animation` 部分下找到 `Sprite Frames` 属性，点击 “[空]” -> “新建 SpriteFrames”：

![New SpriteFrames](https://docs.godotengine.org/en/stable/_images/new_spriteframes.webp)

点击你刚刚创建的 `SpriteFrames` 以打开 “SpriteFrames” 面板：

![SpriteFrames Panel](https://docs.godotengine.org/en/stable/_images/spriteframes_panel.webp)

左侧是动画列表。点击 `default` 那一个并将其重命名为 `walk`。然后点击 **添加动画 (Add Animation)** 按钮创建第二个名为 `up` 的动画。

在 “文件系统” 面板中找到玩家图像——它们在你之前解压的 `art` 文件夹中。将每个动画对应的两张图像拖入面板中对应动画的 **动画帧 (Animation Frames)** 一侧：

*   `walk` 动画使用 `playerGrey_walk1` 和 `playerGrey_walk2`
*   `up` 动画使用 `playerGrey_up1` 和 `playerGrey_up2`

![SpriteFrames Panel 2](https://docs.godotengine.org/en/stable/_images/spriteframes_panel2.webp)

玩家图像相对于游戏窗口来说有点太大了，所以我们需要缩小它们。点击 `AnimatedSprite2D` 节点并将 `Scale` (缩放) 属性设置为 `(0.5, 0.5)`。你可以在检查器的 `Node2D` 标题下找到它。

![Player Scale](https://docs.godotengine.org/en/stable/_images/player_scale.webp)

最后，添加一个 [CollisionShape2D](https://docs.godotengine.org/en/stable/classes/class_collisionshape2d.html) 作为 `Player` 的子节点。这将决定玩家的 “受击箱 (hitbox)”，即其碰撞区域的边界。对于这个角色，`CapsuleShape2D` (胶囊形状) 节点最为合适，因此在检查器中 “Shape” 旁边，点击 “[空]” -> “新建 CapsuleShape2D”。使用两个尺寸句柄，调整形状大小以覆盖精灵：

![Player Coll Shape](https://docs.godotengine.org/en/stable/_images/player_coll_shape.webp)

完成后，你的 `Player` 场景应该是这样的：

![Player Scene Nodes](https://docs.godotengine.org/en/stable/_images/player_scene_nodes.webp)

一旦完成这些操作，`Area2D` 节点上的警告就会消失，因为它现在已经分配了形状，可以与其他对象交互了。

完成这些更改后，请务必再次保存场景。

在下一部分中，我们将向玩家节点添加一个脚本，以实现移动和动画。然后，我们将设置碰撞检测，以便知道玩家何时被某物击中。
