---
sidebar_position: 10
---

本节课将为你概述 Godot 中可用的脚本语言。你将了解每种选择的优缺点。在下一部分中，你将使用 GDScript 编写你的第一个脚本。

**脚本附加到节点上并扩展其行为**。这意味着脚本继承了它们所附加节点的所有函数和属性。

例如，在一个 `Camera2D` 节点跟随飞船的游戏中。`Camera2D` 节点默认跟随其父级。想象一下，你希望当玩家受到伤害时摄像机会抖动。由于此功能并未内置在 Godot 中，你可以给 `Camera2D` 节点附加一个脚本并编写抖动代码。

![Camera Shake](https://docs.godotengine.org/en/stable/_images/scripting_camera_shake.gif)

## 可用的脚本语言

Godot 提供 **四种游戏开发语言**：GDScript、C#，以及通过其 GDExtension 技术支持的 C 和 C++。此外还有更多社区支持的语言，但这些是官方支持的。

你可以在单个项目中使用多种语言。例如，在一个团队中，你可以用 GDScript 编写游戏逻辑，因为它编写速度快；并使用 C# 或 C++ 来实现复杂算法以最大限度提高性能。或者你可以完全使用 GDScript 或 C#。这取决于你的选择。

我们提供这种灵活性是为了满足不同游戏项目和开发者的需求。

## 我应该使用哪种语言？

如果你是初学者，我们建议 **从 GDScript 开始**。我们专门为 Godot 和游戏开发者的需求开发了这种语言。它具有轻量级且简单的语法，并与 Godot 实现了最紧密的集成。

![GDScript](https://docs.godotengine.org/en/stable/_images/scripting_gdscript.webp)

对于 C#，你需要一个外部代码编辑器，如 [VSCode](https://code.visualstudio.com/) 或 Visual Studio。虽然 C# 的支持现在已经成熟，但与 GDScript 相比，你会发现它的学习资源相对较少。这就是为什么我们主要向已经具备该语言经验的用户推荐 C#。

让我们看看每种语言的特性以及优缺点。

### GDScript

[GDScript](https://docs.godotengine.org/en/stable/tutorials/scripting/gdscript/index.html) 是一种为 Godot 构建的 [面向对象](https://en.wikipedia.org/wiki/Object-oriented_programming) 和 [命令式](https://en.wikipedia.org/wiki/Imperative_programming) 编程语言。它是为游戏开发者量身定制的，旨在节省你编写游戏代码的时间。其特性包括：

*   简单的语法，使得文件简短。
*   极快的编译和加载时间。
*   紧密的编辑器集成，带有节点、信号以及来自所附加场景更多信息的代码补全。
*   内置向量 (vector) 和变换 (transform) 类型，使得大量使用线性代数（游戏必备）时非常高效。
*   支持多线程，效率与静态类型语言相当。
*   没有 [垃圾回收 (garbage collection)](https://en.wikipedia.org/wiki/Garbage_collection_(computer_science))，因为该特性在制作游戏时最终会造成阻碍。引擎会默认进行引用计数并为你管理大部分内存，但如果需要，你也可以手动控制内存。
*   [渐进式类型 (Gradual typing)](https://en.wikipedia.org/wiki/Gradual_typing)。变量默认具有动态类型，但你也可以使用类型提示 (type hints) 进行强类型检查。

GDScript 看起来像 Python，因为你使用缩进来组织代码块，但在实践中它们的工作方式不同。它受到了 Squirrel、Lua 和 Python 等多种语言的启发。

> **注意**
>
> 为什么我们不直接使用 Python 或 Lua？
>
> 多年前，Godot 使用过 Python，然后是 Lua。这两种语言的集成都需要大量工作，并且存在严重的局限性。例如，Python 的多线程支持是一个巨大的挑战。
>
> 开发一种专用语言并不需要我们更多的工作，而且我们可以根据游戏开发者的需求进行定制。我们现在正在进行性能优化和特性开发，而使用第三方语言很难提供这些。

### .NET / C#

由于微软的 [C#](https://en.wikipedia.org/wiki/C_Sharp_(programming_language)) 在游戏开发者中备受青睐，我们官方对其提供了支持。C# 是一种成熟且灵活的语言，拥有海量的第三方库。由于微软的慷慨捐赠，我们得以增加对它的支持。

![C#](https://docs.godotengine.org/en/stable/_images/scripting_csharp.png)

C# 在性能和易用性之间提供了很好的折衷，尽管你应该注意它的垃圾回收机制。

> **注意**
>
> 你必须使用 .NET 版的 Godot 编辑器才能使用 C# 编写脚本。你可以在 Godot 网站的 [下载](https://godotengine.org/download/) 页面下载。
>
> 由于 Godot 使用 .NET 8，理论上你可以在 Godot 中使用任何第三方 .NET 库或框架，以及任何符合公共语言基础结构 (CLI) 的编程语言，如 F#、Boo 或 ClojureCLR。然而，C# 是唯一官方支持的 .NET 选项。

> **注意**
>
> GDScript 代码本身的执行速度不如编译后的 C# 或 C++ 快。然而，大多数脚本代码调用的是引擎内部使用 C++ 编写的高效函数。在许多情况下，使用 GDScript、C# 或 C++ 编写游戏逻辑不会对性能产生重大影响。

> **注意**
>
> 使用 Godot 4 编写的 C# 项目目前无法导出到 Web 平台。要在该平台使用 C#，请考虑使用 Godot 3。从 Godot 4.2 开始支持 Android 和 iOS 平台，但仍处于实验阶段且 [存在一些限制](https://docs.godotengine.org/en/stable/tutorials/scripting/c_sharp/index.html#doc-c-sharp-platforms)。

> **另见**
>
> 要了解有关 C# 的更多信息，请前往 [C#/.NET](https://docs.godotengine.org/en/stable/tutorials/scripting/c_sharp/index.html) 部分。

### 通过 GDExtension 使用 C++

GDExtension 允许你使用 C++ 编写游戏代码，而无需重新编译 Godot。

![C++](https://docs.godotengine.org/en/stable/_images/scripting_cpp.png)

由于我们使用了内部 C API 桥接，你可以使用任何版本的语言，或者为生成的共享库混合编译器品牌和版本。

GDExtension 是追求性能的最佳选择。你不需要在整个游戏中使用它，因为你可以用 GDScript 或 C# 编写其他部分。

在使用 GDExtension 时，可用的类型、函数和属性与 Godot 实际的 C++ API 非常接近。

## 总结

脚本是包含代码的文件，你将其附加到节点上以扩展其功能。

Godot 支持四种官方脚本语言，在性能和易用性之间为你提供了灵活性。

你可以混合使用多种语言，例如，使用 C 或 C++ 实现高负载算法，并使用 GDScript 或 C# 编写大部分游戏逻辑。
