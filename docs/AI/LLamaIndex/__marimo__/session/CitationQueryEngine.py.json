{
  "version": "1",
  "metadata": {
    "marimo_version": "0.19.2"
  },
  "cells": [
    {
      "id": "Hbol",
      "code_hash": "4f95c0db79f3531f500cf448b3149186",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/markdown": "<span class=\"markdown prose dark:prose-invert contents\"><h1 id=\"llamaindex-citationqueryengine\">LlamaIndex CitationQueryEngine \u6f14\u793a</h1>\n<span class=\"paragraph\">\u672c\u7b14\u8bb0\u672c\u6f14\u793a\u5982\u4f55\u4f7f\u7528 LlamaIndex \u7684 CitationQueryEngine \u6765\u751f\u6210\u5e26\u6709\u5f15\u7528\u7684\u56de\u7b54\u3002</span>\n<span class=\"paragraph\">CitationQueryEngine \u53ef\u4e0e\u4efb\u4f55\u73b0\u6709\u7d22\u5f15\u4e00\u8d77\u4f7f\u7528\uff0c\u5e76\u63d0\u4f9b\u5f15\u7528\u6eaf\u6e90\u529f\u80fd\u3002</span></span>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "MJUe",
      "code_hash": "c5b7a397fc1e623329a74934fb6d4e91",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/markdown": "<span class=\"markdown prose dark:prose-invert contents\"><h2 id=\"_1\">\u5b89\u88c5\u4f9d\u8d56</h2>\n<span class=\"paragraph\">\u5982\u679c\u60a8\u5728 colab \u4e0a\u6253\u5f00\u6b64\u7b14\u8bb0\u672c\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u5b89\u88c5 LlamaIndex \ud83e\udd99\u3002</span></span>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "vblA",
      "code_hash": "bfb4220a78b10f06d94fdc3c14db1bd3",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/markdown": "<span class=\"markdown prose dark:prose-invert contents\"><h2 id=\"_1\">\u5bfc\u5165\u5fc5\u8981\u7684\u5e93</h2></span>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "PKri",
      "code_hash": "0b94153bc6642a0c73dce0218e40dbd8",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/markdown": "<span class=\"markdown prose dark:prose-invert contents\"><h2 id=\"_1\">\u4e0b\u8f7d\u6570\u636e</h2>\n<span class=\"paragraph\">\u6211\u4eec\u5c06\u4f7f\u7528 Paul Graham \u7684\u6587\u7ae0\u4f5c\u4e3a\u793a\u4f8b\u6570\u636e\u3002</span></span>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "SFPL",
      "code_hash": "daa1b5b936327070c60808fb708774e7",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/markdown": "<span class=\"markdown prose dark:prose-invert contents\"><h2 id=\"_1\">\u521b\u5efa\u6216\u52a0\u8f7d\u7d22\u5f15</h2></span>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "RGSE",
      "code_hash": "9bc13dba3ed736def1e6e389571d1156",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/markdown": "<span class=\"markdown prose dark:prose-invert contents\"><h2 id=\"citationqueryengine\">\u4f7f\u7528\u9ed8\u8ba4\u53c2\u6570\u521b\u5efa CitationQueryEngine</h2></span>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "emfo",
      "code_hash": "8ea8ec1934bdab573aab5393b7cb1d18",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/markdown": "<span class=\"markdown prose dark:prose-invert contents\"><h2 id=\"_1\">\u8fdb\u884c\u67e5\u8be2</h2></span>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "ZHCJ",
      "code_hash": "b985103620dc6d1c90990bf43d3b4261",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/markdown": "<span class=\"markdown prose dark:prose-invert contents\"><h3 id=\"_1\">\u68c0\u67e5\u5b9e\u9645\u6765\u6e90</h3>\n<span class=\"paragraph\">\u6765\u6e90\u4ece 1 \u5f00\u59cb\u8ba1\u6570\uff0c\u4f46 Python \u6570\u7ec4\u4ece 0 \u5f00\u59cb\u8ba1\u6570\uff01</span>\n<span class=\"paragraph\">\u8ba9\u6211\u4eec\u786e\u8ba4\u4e00\u4e0b\u6765\u6e90\u662f\u5426\u5408\u7406\u3002</span></span>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "TqIu",
      "code_hash": "84b42b659ac0083ede989a4cc2216e9d",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/markdown": "<span class=\"markdown prose dark:prose-invert contents\"><h2 id=\"_1\">\u8c03\u6574\u8bbe\u7f6e</h2>\n<span class=\"paragraph\">\u8bf7\u6ce8\u610f\uff0c\u5c06 chunk size\uff08\u5757\u5927\u5c0f\uff09\u8bbe\u7f6e\u4e3a\u5927\u4e8e\u8282\u70b9\u7684\u539f\u59cb chunk size \u5c06\u4e0d\u4f1a\u4ea7\u751f\u4efb\u4f55\u6548\u679c\u3002</span>\n<span class=\"paragraph\">\u9ed8\u8ba4\u7684\u8282\u70b9\u5757\u5927\u5c0f\u662f 1024\uff0c\u56e0\u6b64\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u5e76\u6ca1\u6709\u8ba9\u5f15\u7528\u8282\u70b9\u53d8\u5f97\u66f4\u7ec6\u7c92\u5ea6\u3002</span></span>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "Pvdt",
      "code_hash": "fc5054ed0253d5af7afe5818697513b0",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/markdown": "<span class=\"markdown prose dark:prose-invert contents\"><h3 id=\"_1\">\u68c0\u67e5\u5b9e\u9645\u6765\u6e90</h3></span>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "aLJB",
      "code_hash": "5023a331f3e5543656c3031fa5f8f785",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/markdown": "<span class=\"markdown prose dark:prose-invert contents\"><h2 id=\"_1\">\u66f4\u591a\u67e5\u8be2\u793a\u4f8b</h2></span>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "xXTn",
      "code_hash": "971a9e872b149bc68f009490e5997f1b",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/markdown": "<span class=\"markdown prose dark:prose-invert contents\"><h2 id=\"_1\">\u603b\u7ed3</h2>\n<span class=\"paragraph\">CitationQueryEngine \u63d0\u4f9b\u4e86\u4ee5\u4e0b\u529f\u80fd\uff1a</span>\n<ol>\n<li><strong>\u5f15\u7528\u6eaf\u6e90</strong>\uff1a\u56de\u7b54\u4e2d\u5305\u542b\u4e86\u5f15\u7528\u6807\u8bb0\uff08\u5982 [1], [2]\uff09</li>\n<li><strong>\u7c92\u5ea6\u63a7\u5236</strong>\uff1a\u901a\u8fc7 <code>citation_chunk_size</code> \u53c2\u6570\u63a7\u5236\u5f15\u7528\u5757\u7684\u7c92\u5ea6</li>\n<li><strong>\u6765\u6e90\u8bbf\u95ee</strong>\uff1a\u53ef\u4ee5\u901a\u8fc7 <code>response.source_nodes</code> \u8bbf\u95ee\u539f\u59cb\u7684\u6765\u6e90\u8282\u70b9</li>\n<li><strong>\u7075\u6d3b\u6027</strong>\uff1a\u53ef\u4e0e\u4efb\u4f55 LlamaIndex \u7d22\u5f15\u4e00\u8d77\u4f7f\u7528</li>\n</ol>\n<span class=\"paragraph\">\u901a\u8fc7\u8c03\u6574 <code>citation_chunk_size</code>\uff0c\u60a8\u53ef\u4ee5\u63a7\u5236\u5f15\u7528\u7c92\u5ea6\uff1a</span>\n<ul>\n<li>\u8f83\u5c0f\u7684\u503c\uff1a\u66f4\u7ec6\u7c92\u5ea6\u7684\u5f15\u7528\uff0c\u4f46\u53ef\u80fd\u66f4\u5206\u6563</li>\n<li>\u8f83\u5927\u7684\u503c\uff1a\u66f4\u5927\u5757\u7684\u5f15\u7528\uff0c\u63d0\u4f9b\u66f4\u5b8c\u6574\u7684\u4e0a\u4e0b\u6587</li>\n</ul></span>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "bkHC",
      "code_hash": "63724b4140ed42f8bdeff551b2bea2ce",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/plain": ""
          }
        }
      ],
      "console": [
        {
          "type": "stream",
          "name": "stderr",
          "text": "None of PyTorch, TensorFlow >= 2.0, or Flax have been found. Models won't be available and only tokenizers, configuration and file/data utilities can be used.\n",
          "mimetype": "text/plain"
        }
      ]
    },
    {
      "id": "lEQa",
      "code_hash": "6b88ae84815f9ae9cf6f624bb4364273",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/plain": ""
          }
        }
      ],
      "console": []
    },
    {
      "id": "Xref",
      "code_hash": "512d98a5cdeb62497f0c8955bdddb363",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/plain": ""
          }
        }
      ],
      "console": []
    },
    {
      "id": "BYtC",
      "code_hash": "59fe0ba3ce49e350dd4fcac58fd65c5e",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/plain": ""
          }
        }
      ],
      "console": [
        {
          "type": "stream",
          "name": "stdout",
          "text": "\u4ece ./citation \u52a0\u8f7d\u5df2\u6709\u7d22\u5f15\n",
          "mimetype": "text/plain"
        }
      ]
    },
    {
      "id": "Kclp",
      "code_hash": "4f1b04ccf15b889fefdbc4af70fc011a",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/plain": ""
          }
        }
      ],
      "console": []
    },
    {
      "id": "Hstk",
      "code_hash": "1c3dd453e7e7839d32966d5bbdcd4f21",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/plain": ""
          }
        }
      ],
      "console": []
    },
    {
      "id": "nWHF",
      "code_hash": "07fabe2f5d580c672f857f93419899c0",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/plain": ""
          }
        }
      ],
      "console": [
        {
          "type": "stream",
          "name": "stdout",
          "text": "Growing up, the author worked on writing and programming outside of school. He wrote short stories, which he described as awful, and attempted to write programs on an IBM 1401 using an early version of Fortran. However, he found the 1401 puzzling and was limited by the lack of data stored on punched cards. His programming experience changed with the advent of microcomputers, which allowed for more interactive programming experiences [1].\n",
          "mimetype": "text/plain"
        }
      ]
    },
    {
      "id": "iLit",
      "code_hash": "9cf6c3a13d1a510efaac096cd126a45e",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/plain": ""
          }
        }
      ],
      "console": [
        {
          "type": "stream",
          "name": "stdout",
          "text": "\u6765\u6e90\u8282\u70b9\u6570\u91cf: 6\n",
          "mimetype": "text/plain"
        }
      ]
    },
    {
      "id": "ROlb",
      "code_hash": "04549cd864ede37b76068e662fbe9899",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/plain": ""
          }
        }
      ],
      "console": [
        {
          "type": "stream",
          "name": "stdout",
          "text": "=== \u6765\u6e90 1 ===\nSource 1:\nWhat I Worked On\n\nFebruary 2021\n\nBefore college the two main things I worked on, outside of school, were writing and programming. I didn't write essays. I wrote what beginning writers were supposed to write then, and probably still are: short stories. My stories were awful. They had hardly any plot, just characters with strong feelings, which I imagined made them deep.\n\nThe first programs I tried writing were on the IBM 1401 that our school district used for what was then called \"data ...\n",
          "mimetype": "text/plain"
        }
      ]
    },
    {
      "id": "qnkX",
      "code_hash": "ac84f1c24e9faa3fd441d58907859cd4",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/plain": ""
          }
        }
      ],
      "console": [
        {
          "type": "stream",
          "name": "stdout",
          "text": "=== \u6765\u6e90 2 ===\nSource 2:\n[1]\n\nThe first of my friends to get a microcomputer built it himself. It was sold as a kit by Heathkit. I remember vividly how impressed and envious I felt watching him sitting in front of it, typing programs right into the computer.\n\nComputers were expensive in those days and it took me years of nagging before I convinced my father to buy one, a TRS-80, in about 1980. The gold standard then was the Apple II, but a TRS-80 was good enough. This was when I really started programming. I w...\n",
          "mimetype": "text/plain"
        }
      ]
    },
    {
      "id": "Vxnm",
      "code_hash": "29092862d49deb48119c4563b34fa917",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/plain": ""
          }
        }
      ],
      "console": []
    },
    {
      "id": "DnEU",
      "code_hash": "a83b6b35287d1c7ebab20c120a8aa416",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/plain": ""
          }
        }
      ],
      "console": []
    },
    {
      "id": "ulZA",
      "code_hash": "824c17605b2ddc7ed62320b49e854b25",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/plain": ""
          }
        }
      ],
      "console": [
        {
          "type": "stream",
          "name": "stdout",
          "text": "Growing up, the author worked on writing and programming outside of school. He wrote short stories, which he described as awful, and experimented with programming on an IBM 1401 using an early version of Fortran. He later started programming more seriously on a TRS-80 microcomputer, writing simple games and other programs [1].\n",
          "mimetype": "text/plain"
        }
      ]
    },
    {
      "id": "ecfG",
      "code_hash": "dd5e1d1ca0c3caebea47259322274853",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/plain": ""
          }
        }
      ],
      "console": [
        {
          "type": "stream",
          "name": "stdout",
          "text": "\u6765\u6e90\u8282\u70b9\u6570\u91cf: 3\n",
          "mimetype": "text/plain"
        }
      ]
    },
    {
      "id": "ZBYS",
      "code_hash": "435796f794cb8578f62472125144efb7",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/plain": ""
          }
        }
      ],
      "console": [
        {
          "type": "stream",
          "name": "stdout",
          "text": "=== \u6765\u6e90 1 (\u5927\u5757) ===\nSource 1:\nWhat I Worked On\n\nFebruary 2021\n\nBefore college the two main things I worked on, outside of school, were writing and programming. I didn't write essays. I wrote what beginning writers were supposed to write then, and probably still are: short stories. My stories were awful. They had hardly any plot, just characters with strong feelings, which I imagined made them deep.\n\nThe first programs I tried writing were on the IBM 1401 that our school district used for what was then called \"data processing.\" This was in 9th grade, so I was 13 or 14. The school district's 1401 happened to be in the basement of our junior high school, and my friend Rich Draves and I got permission to use it. It was like a mini Bond villain's lair down there, with all these alien-looking machines \u2014 CPU, disk d...\n",
          "mimetype": "text/plain"
        }
      ]
    },
    {
      "id": "nHfw",
      "code_hash": "ebdd62249f969c686add24a52a949ea7",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/plain": ""
          }
        }
      ],
      "console": [
        {
          "type": "stream",
          "name": "stdout",
          "text": "\u95ee\u9898: What influenced the author to study AI?\n\u56de\u7b54: The author was influenced to study AI by two main factors: a novel by Heinlein called \"The Moon is a Harsh Mistress,\" which featured an intelligent computer named Mike, and a PBS documentary that showed Terry Winograd using SHRDLU. These influences made the author believe that the development of intelligent computers was imminent, which sparked their interest in AI [2][3].\n\u6765\u6e90\u6570\u91cf: 6\n\n\u90e8\u5206\u6765\u6e90\u5185\u5bb9:\nSource 1:\nWhat I Worked On\n\nFebruary 2021\n\nBefore college the two main things I worked on, outside of school, were writing and programming. I didn't write essays. I wrote what beginning writers were supposed to write then, and probably still are: short stories. My stories were awful. They had hardly...\n",
          "mimetype": "text/plain"
        }
      ]
    },
    {
      "id": "AjVT",
      "code_hash": "1d0db38904205bec4d6f6f6a1f6cec3e",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/plain": ""
          }
        }
      ],
      "console": []
    }
  ]
}