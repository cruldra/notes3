<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-AI/CrewAI/智能体" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">智能体 | Cruldra</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/notes3/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/notes3/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/notes3/docs/AI/CrewAI/智能体"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="智能体 | Cruldra"><meta data-rh="true" name="description" content="这是 CrewAI 官方文档中关于 Agents (智能体) 章节的中文翻译。"><meta data-rh="true" property="og:description" content="这是 CrewAI 官方文档中关于 Agents (智能体) 章节的中文翻译。"><link data-rh="true" rel="icon" href="/notes3/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/notes3/docs/AI/CrewAI/智能体"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/notes3/docs/AI/CrewAI/智能体" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/notes3/docs/AI/CrewAI/智能体" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"智能体","item":"https://your-docusaurus-site.example.com/notes3/docs/AI/CrewAI/智能体"}]}</script><link rel="alternate" type="application/rss+xml" href="/notes3/blog/rss.xml" title="Cruldra RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/notes3/blog/atom.xml" title="Cruldra Atom Feed"><link rel="stylesheet" href="/notes3/assets/css/styles.8c4657fb.css">
<script src="/notes3/assets/js/runtime~main.92689785.js" defer="defer"></script>
<script src="/notes3/assets/js/main.a3b21eab.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme",window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.documentElement.setAttribute("data-theme-choice","system"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/notes3/img/logo.svg"><style data-mantine-styles="classes">@media (max-width: 35.99375em) {.mantine-visible-from-xs {display: none !important;}}@media (min-width: 36em) {.mantine-hidden-from-xs {display: none !important;}}@media (max-width: 47.99375em) {.mantine-visible-from-sm {display: none !important;}}@media (min-width: 48em) {.mantine-hidden-from-sm {display: none !important;}}@media (max-width: 61.99375em) {.mantine-visible-from-md {display: none !important;}}@media (min-width: 62em) {.mantine-hidden-from-md {display: none !important;}}@media (max-width: 74.99375em) {.mantine-visible-from-lg {display: none !important;}}@media (min-width: 75em) {.mantine-hidden-from-lg {display: none !important;}}@media (max-width: 87.99375em) {.mantine-visible-from-xl {display: none !important;}}@media (min-width: 88em) {.mantine-hidden-from-xl {display: none !important;}}</style><div role="region" aria-label="Skip to main content"><a class="skipToContent_aA1M" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/notes3/"><div class="navbar__logo"><img src="/notes3/img/logo.svg" alt="My Site Logo" class="themedComponent_E3Xm themedComponent--light_DVqC"><img src="/notes3/img/logo.svg" alt="My Site Logo" class="themedComponent_E3Xm themedComponent--dark_B_L3"></div><b class="navbar__title text--truncate">Cruldra</b></a><a class="navbar__item navbar__link" href="/notes3/docs/category/设计模式">JVM</a><a class="navbar__item navbar__link" href="/notes3/docs/category/css">前端</a><a class="navbar__item navbar__link" href="/notes3/docs/category/astrbot">工具</a><a class="navbar__item navbar__link" href="/notes3/docs/category/ai电竞酒店">个人</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/notes3/docs/AI/Agno/介绍">AI</a><a class="navbar__item navbar__link" href="/notes3/docs/category/内置模块">Python</a><a class="navbar__item navbar__link" href="/notes3/docs/category/actix-web">Rust</a><a class="navbar__item navbar__link" href="/notes3/docs/category/数据库系统">软件工程</a><a class="navbar__item navbar__link" href="/notes3/docs/category/上古卷轴5">游戏</a><a class="navbar__item navbar__link" href="/notes3/docs/Go/Go-Python-Java三语言全方位对比">Go</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbarSearchContainer_PufJ"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_ctfR"><div class="docsWrapper_ByIB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_KwvU" type="button"></button><div class="docRoot_hD6z"><aside class="theme-doc-sidebar-container docSidebarContainer_KuHC"><div class="sidebarViewport_LCjr"><div class="sidebar_L77d"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_VYAF"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_NhDl menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/notes3/docs/AI/Agno/介绍"><span title="Agno" class="categoryLinkLabel_FHN4">Agno</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_NhDl menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/notes3/docs/AI/CrewAI/CLI"><span title="CrewAI" class="categoryLinkLabel_FHN4">CrewAI</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/AI/CrewAI/CLI"><span title="CLI" class="linkLabel__RqX">CLI</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/AI/CrewAI/事件监听器"><span title="事件监听器" class="linkLabel__RqX">事件监听器</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/AI/CrewAI/任务"><span title="任务" class="linkLabel__RqX">任务</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/AI/CrewAI/协作"><span title="协作" class="linkLabel__RqX">协作</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_NhDl menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/notes3/docs/AI/CrewAI/可观测性/MLflow"><span title="可观测性" class="categoryLinkLabel_FHN4">可观测性</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/AI/CrewAI/命名哲学"><span title="命名哲学" class="linkLabel__RqX">命名哲学</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/AI/CrewAI/团队"><span title="团队" class="linkLabel__RqX">团队</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_NhDl menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/notes3/docs/AI/CrewAI/学习/模型选择指南"><span title="学习" class="categoryLinkLabel_FHN4">学习</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/AI/CrewAI/工作流"><span title="工作流" class="linkLabel__RqX">工作流</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/AI/CrewAI/工具"><span title="工具" class="linkLabel__RqX">工具</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/AI/CrewAI/快速开始"><span title="快速开始" class="linkLabel__RqX">快速开始</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/AI/CrewAI/执行流程"><span title="执行流程" class="linkLabel__RqX">执行流程</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/AI/CrewAI/推理"><span title="推理" class="linkLabel__RqX">推理</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/notes3/docs/AI/CrewAI/智能体"><span title="智能体" class="linkLabel__RqX">智能体</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/AI/CrewAI/知识库"><span title="知识库" class="linkLabel__RqX">知识库</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/AI/CrewAI/简介"><span title="什么是 CrewAI?" class="linkLabel__RqX">什么是 CrewAI?</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/AI/CrewAI/训练"><span title="训练" class="linkLabel__RqX">训练</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes3/docs/AI/CrewAI/记忆"><span title="记忆" class="linkLabel__RqX">记忆</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/AI/DALLE成本计算"><span title="DALL-E 画图成本计算" class="linkLabel__RqX">DALL-E 画图成本计算</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_NhDl menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/notes3/docs/AI/MCP/MCP-Python-SDK"><span title="MCP" class="categoryLinkLabel_FHN4">MCP</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/AI/Transformer"><span title="Transformer" class="linkLabel__RqX">Transformer</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_NhDl menu__link menu__link--sublist" href="/notes3/docs/AI/vllm/"><span title="vLLM 学习资料" class="categoryLinkLabel_FHN4">vLLM 学习资料</span></a><button aria-label="Expand sidebar category &#x27;vLLM 学习资料&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/AI/一些概念1"><span title="一些概念1" class="linkLabel__RqX">一些概念1</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/AI/一些概念2"><span title="一些概念2" class="linkLabel__RqX">一些概念2</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/AI/一些概念3"><span title="一些概念3" class="linkLabel__RqX">一些概念3</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/AI/一些概念4"><span title="一些概念4" class="linkLabel__RqX">一些概念4</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/AI/一些概念5"><span title="一些概念5" class="linkLabel__RqX">一些概念5</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/AI/候选模型"><span title="候选模型" class="linkLabel__RqX">候选模型</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/AI/变分自编码器详解"><span title="变分自编码器（VAE）详解" class="linkLabel__RqX">变分自编码器（VAE）详解</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/AI/大模型核心概念通俗解释"><span title="大模型核心概念通俗解释" class="linkLabel__RqX">大模型核心概念通俗解释</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/AI/大模型训练中的随机种子：为什么需要它？"><span title="大模型训练中的随机种子：为什么需要它？" class="linkLabel__RqX">大模型训练中的随机种子：为什么需要它？</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_NhDl menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/notes3/docs/AI/嵌入和向量/Chroma与PGVector对比"><span title="嵌入和向量" class="categoryLinkLabel_FHN4">嵌入和向量</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/AI/感知机"><span title="感知机" class="linkLabel__RqX">感知机</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_NhDl menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/notes3/docs/AI/提示词工程/DSPy/参考/1"><span title="提示词工程" class="categoryLinkLabel_FHN4">提示词工程</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/AI/智能体"><span title="智能体(Agent)" class="linkLabel__RqX">智能体(Agent)</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_NhDl menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/notes3/docs/AI/深度学习/入门"><span title="深度学习" class="categoryLinkLabel_FHN4">深度学习</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/AI/理解大模型：从函数视角看AI的本质"><span title="理解大模型：从函数视角看AI的本质" class="linkLabel__RqX">理解大模型：从函数视角看AI的本质</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/AI/知识蒸馏"><span title="知识蒸馏" class="linkLabel__RqX">知识蒸馏</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/AI/联邦学习概念"><span title="联邦学习概念" class="linkLabel__RqX">联邦学习概念</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_NhDl menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/notes3/docs/AI/通义千问/阿里云百炼"><span title="通义千问" class="categoryLinkLabel_FHN4">通义千问</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/AI/金丝雀发布和AB测试"><span title="金丝雀发布和AB测试" class="linkLabel__RqX">金丝雀发布和AB测试</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_WxcZ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_Zd2x"><div class="docItemContainer_EEW4"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_xL_w" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/notes3/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_zA1U"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">CrewAI</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">智能体</span></li></ul></nav><div class="tocCollapsible_aZGz theme-doc-toc-mobile tocMobile_ShCt"><button type="button" class="clean-btn tocCollapsibleButton_fxzH">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>智能体</h1></header><p>这是 CrewAI 官方文档中关于 <strong>Agents (智能体)</strong> 章节的中文翻译。</p>
<hr>
<h1>智能体 (Agents)</h1>
<blockquote>
<p>关于在 CrewAI 框架中创建和管理智能体的详细指南。</p>
</blockquote>
<h2 class="anchor anchorTargetStickyNavbar_aDle" id="智能体概览">智能体概览<a href="#智能体概览" class="hash-link" aria-label="Direct link to 智能体概览" title="Direct link to 智能体概览" translate="no">​</a></h2>
<p>在 CrewAI 框架中，<code>Agent</code>（智能体）是一个自主单元，它可以：</p>
<ul>
<li class="">执行特定任务</li>
<li class="">根据其角色和目标做决策</li>
<li class="">使用工具完成目标</li>
<li class="">与其他智能体沟通和协作</li>
<li class="">保持交互记忆</li>
<li class="">在允许的情况下委派任务</li>
</ul>
<blockquote>
<p><strong>提示</strong>
可以把智能体想象成具有特定技能、专业知识和职责的专家团队成员。例如，<code>Researcher</code>（研究员）智能体可能擅长收集和分析信息，而 <code>Writer</code>（作家）智能体可能更擅长创作内容。</p>
</blockquote>
<blockquote>
<p><strong>信息：企业级增强功能 - 可视化智能体构建器</strong>
CrewAI AOP 包含一个可视化智能体构建器，无需编写代码即可简化智能体的创建和配置。您可以可视化地设计智能体并实时测试它们。</p>
<p>可视化智能体构建器支持：</p>
<ul>
<li class="">通过表单界面进行直观的智能体配置</li>
<li class="">实时测试和验证</li>
<li class="">包含预配置智能体类型的模板库</li>
<li class="">轻松自定义智能体属性和行为</li>
</ul>
</blockquote>
<h2 class="anchor anchorTargetStickyNavbar_aDle" id="智能体属性-agent-attributes">智能体属性 (Agent Attributes)<a href="#智能体属性-agent-attributes" class="hash-link" aria-label="Direct link to 智能体属性 (Agent Attributes)" title="Direct link to 智能体属性 (Agent Attributes)" translate="no">​</a></h2>
<table><thead><tr><th style="text-align:left">属性</th><th style="text-align:left">参数</th><th style="text-align:left">类型</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left"><strong>Role (角色)</strong></td><td style="text-align:left"><code>role</code></td><td style="text-align:left"><code>str</code></td><td style="text-align:left">定义智能体在团队中的职能和专长。</td></tr><tr><td style="text-align:left"><strong>Goal (目标)</strong></td><td style="text-align:left"><code>goal</code></td><td style="text-align:left"><code>str</code></td><td style="text-align:left">指导智能体决策的个人目标。</td></tr><tr><td style="text-align:left"><strong>Backstory (背景故事)</strong></td><td style="text-align:left"><code>backstory</code></td><td style="text-align:left"><code>str</code></td><td style="text-align:left">为智能体提供上下文和个性，丰富交互内容。</td></tr><tr><td style="text-align:left"><strong>LLM (大语言模型)</strong> <em>(可选)</em></td><td style="text-align:left"><code>llm</code></td><td style="text-align:left"><code>Union[str, LLM, Any]</code></td><td style="text-align:left">驱动智能体的语言模型。默认为 <code>OPENAI_MODEL_NAME</code> 中指定的模型或 &quot;gpt-4&quot;。</td></tr><tr><td style="text-align:left"><strong>Tools (工具)</strong> <em>(可选)</em></td><td style="text-align:left"><code>tools</code></td><td style="text-align:left"><code>List[BaseTool]</code></td><td style="text-align:left">智能体可用的能力或功能。默认为空列表。</td></tr><tr><td style="text-align:left"><strong>Function Calling LLM</strong> <em>(可选)</em></td><td style="text-align:left"><code>function_calling_llm</code></td><td style="text-align:left"><code>Optional[Any]</code></td><td style="text-align:left">用于工具调用的语言模型，如果指定，将覆盖智能体的主 LLM。</td></tr><tr><td style="text-align:left"><strong>Max Iterations (最大迭代次数)</strong> <em>(可选)</em></td><td style="text-align:left"><code>max_iter</code></td><td style="text-align:left"><code>int</code></td><td style="text-align:left">智能体必须提供最佳答案前的最大迭代次数。默认为 20。</td></tr><tr><td style="text-align:left"><strong>Max RPM (最大每分钟请求数)</strong> <em>(可选)</em></td><td style="text-align:left"><code>max_rpm</code></td><td style="text-align:left"><code>Optional[int]</code></td><td style="text-align:left">每分钟最大请求数，用于避免速率限制。</td></tr><tr><td style="text-align:left"><strong>Max Execution Time (最大执行时间)</strong> <em>(可选)</em></td><td style="text-align:left"><code>max_execution_time</code></td><td style="text-align:left"><code>Optional[int]</code></td><td style="text-align:left">任务执行的最长时间（秒）。</td></tr><tr><td style="text-align:left"><strong>Verbose (详细模式)</strong> <em>(可选)</em></td><td style="text-align:left"><code>verbose</code></td><td style="text-align:left"><code>bool</code></td><td style="text-align:left">启用详细的执行日志以便调试。默认为 False。</td></tr><tr><td style="text-align:left"><strong>Allow Delegation (允许委派)</strong> <em>(可选)</em></td><td style="text-align:left"><code>allow_delegation</code></td><td style="text-align:left"><code>bool</code></td><td style="text-align:left">允许智能体将任务委派给其他智能体。默认为 False。</td></tr><tr><td style="text-align:left"><strong>Step Callback (步骤回调)</strong> <em>(可选)</em></td><td style="text-align:left"><code>step_callback</code></td><td style="text-align:left"><code>Optional[Any]</code></td><td style="text-align:left">智能体每一步后调用的函数，覆盖 Crew 的回调。</td></tr><tr><td style="text-align:left"><strong>Cache (缓存)</strong> <em>(可选)</em></td><td style="text-align:left"><code>cache</code></td><td style="text-align:left"><code>bool</code></td><td style="text-align:left">启用工具使用的缓存。默认为 True。</td></tr><tr><td style="text-align:left"><strong>System Template (系统模板)</strong> <em>(可选)</em></td><td style="text-align:left"><code>system_template</code></td><td style="text-align:left"><code>Optional[str]</code></td><td style="text-align:left">智能体的自定义系统提示词模板。</td></tr><tr><td style="text-align:left"><strong>Prompt Template (提示词模板)</strong> <em>(可选)</em></td><td style="text-align:left"><code>prompt_template</code></td><td style="text-align:left"><code>Optional[str]</code></td><td style="text-align:left">智能体的自定义提示词模板。</td></tr><tr><td style="text-align:left"><strong>Response Template (响应模板)</strong> <em>(可选)</em></td><td style="text-align:left"><code>response_template</code></td><td style="text-align:left"><code>Optional[str]</code></td><td style="text-align:left">智能体的自定义响应模板。</td></tr><tr><td style="text-align:left"><strong>Allow Code Execution (允许代码执行)</strong> <em>(可选)</em></td><td style="text-align:left"><code>allow_code_execution</code></td><td style="text-align:left"><code>Optional[bool]</code></td><td style="text-align:left">启用智能体的代码执行功能。默认为 False。</td></tr><tr><td style="text-align:left"><strong>Max Retry Limit (最大重试限制)</strong> <em>(可选)</em></td><td style="text-align:left"><code>max_retry_limit</code></td><td style="text-align:left"><code>int</code></td><td style="text-align:left">发生错误时的最大重试次数。默认为 2。</td></tr><tr><td style="text-align:left"><strong>Respect Context Window (尊重上下文窗口)</strong> <em>(可选)</em></td><td style="text-align:left"><code>respect_context_window</code></td><td style="text-align:left"><code>bool</code></td><td style="text-align:left">通过摘要保持消息在上下文窗口大小限制内。默认为 True。</td></tr><tr><td style="text-align:left"><strong>Code Execution Mode (代码执行模式)</strong> <em>(可选)</em></td><td style="text-align:left"><code>code_execution_mode</code></td><td style="text-align:left"><code>Literal[&quot;safe&quot;, &quot;unsafe&quot;]</code></td><td style="text-align:left">代码执行模式：&#x27;safe&#x27;（使用 Docker）或 &#x27;unsafe&#x27;（直接执行）。默认为 &#x27;safe&#x27;。</td></tr><tr><td style="text-align:left"><strong>Multimodal (多模态)</strong> <em>(可选)</em></td><td style="text-align:left"><code>multimodal</code></td><td style="text-align:left"><code>bool</code></td><td style="text-align:left">智能体是否支持多模态能力。默认为 False。</td></tr><tr><td style="text-align:left"><strong>Inject Date (注入日期)</strong> <em>(可选)</em></td><td style="text-align:left"><code>inject_date</code></td><td style="text-align:left"><code>bool</code></td><td style="text-align:left">是否自动将当前日期注入到任务中。默认为 False。</td></tr><tr><td style="text-align:left"><strong>Date Format (日期格式)</strong> <em>(可选)</em></td><td style="text-align:left"><code>date_format</code></td><td style="text-align:left"><code>str</code></td><td style="text-align:left">当启用 <code>inject_date</code> 时的日期格式字符串。默认为 &quot;%Y-%m-%d&quot; (ISO 格式)。</td></tr><tr><td style="text-align:left"><strong>Reasoning (推理)</strong> <em>(可选)</em></td><td style="text-align:left"><code>reasoning</code></td><td style="text-align:left"><code>bool</code></td><td style="text-align:left">智能体是否应该在执行任务前进行反思并制定计划。默认为 False。</td></tr><tr><td style="text-align:left"><strong>Max Reasoning Attempts (最大推理尝试次数)</strong> <em>(可选)</em></td><td style="text-align:left"><code>max_reasoning_attempts</code></td><td style="text-align:left"><code>Optional[int]</code></td><td style="text-align:left">执行任务前的最大推理尝试次数。如果为 None，将尝试直到准备好为止。</td></tr><tr><td style="text-align:left"><strong>Embedder (嵌入器)</strong> <em>(可选)</em></td><td style="text-align:left"><code>embedder</code></td><td style="text-align:left"><code>Optional[Dict[str, Any]]</code></td><td style="text-align:left">智能体使用的嵌入器配置。</td></tr><tr><td style="text-align:left"><strong>Knowledge Sources (知识源)</strong> <em>(可选)</em></td><td style="text-align:left"><code>knowledge_sources</code></td><td style="text-align:left"><code>Optional[List[BaseKnowledgeSource]]</code></td><td style="text-align:left">智能体可用的知识源。</td></tr><tr><td style="text-align:left"><strong>Use System Prompt (使用系统提示词)</strong> <em>(可选)</em></td><td style="text-align:left"><code>use_system_prompt</code></td><td style="text-align:left"><code>Optional[bool]</code></td><td style="text-align:left">是否使用系统提示词（用于支持 o1 模型）。默认为 True。</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_aDle" id="创建智能体">创建智能体<a href="#创建智能体" class="hash-link" aria-label="Direct link to 创建智能体" title="Direct link to 创建智能体" translate="no">​</a></h2>
<p>在 CrewAI 中创建智能体有两种方式：使用 <strong>YAML 配置（推荐）</strong> 或 <strong>直接在代码中定义</strong>。</p>
<h3 class="anchor anchorTargetStickyNavbar_aDle" id="yaml-配置推荐">YAML 配置（推荐）<a href="#yaml-配置推荐" class="hash-link" aria-label="Direct link to YAML 配置（推荐）" title="Direct link to YAML 配置（推荐）" translate="no">​</a></h3>
<p>使用 YAML 配置提供了一种更清晰、更易于维护的定义智能体的方式。我们强烈建议在您的 CrewAI 项目中使用这种方法。</p>
<p>按照安装部分的说明创建 CrewAI 项目后，导航到 <code>src/latest_ai_development/config/agents.yaml</code> 文件并修改模板以满足您的需求。</p>
<blockquote>
<p><strong>注意</strong>
在运行 Crew 时，YAML 文件中的变量（如 <code>{topic}</code>）将被输入中的值替换：</p>
<div class="language-python codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-python codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token plain">crew</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kickoff</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">inputs</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;topic&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;AI Agents&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
</blockquote>
<p>以下是如何使用 YAML 配置智能体的示例：</p>
<div class="language-yaml codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-yaml codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># src/latest_ai_development/config/agents.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">researcher</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">role</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    {topic} 高级数据研究员</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">goal</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    揭示 {topic} 领域的前沿发展</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">backstory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    你是一名经验丰富的研究员，擅长发掘 {topic} 领域的最新动态。</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    你以能够找到最相关的信息并以清晰简洁的方式呈现而闻名。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">reporting_analyst</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">role</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    {topic} 报告分析师</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">goal</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    基于 {topic} 数据分析和研究发现创建详细报告</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">backstory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    你是一名一丝不苟的分析师，拥有敏锐的细节洞察力。</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    你以能够将复杂数据转化为清晰简洁的报告而闻名，</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    这使得他人很容易理解并依据你提供的信息采取行动。</span><br></span></code></pre></div></div>
<p>要在代码中使用此 YAML 配置，请创建一个继承自 <code>CrewBase</code> 的 Crew 类：</p>
<div class="language-python codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-python codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># src/latest_ai_development/crew.py</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> crewai </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Agent</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Crew</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Process</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> crewai</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">project </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> CrewBase</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> agent</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> crew</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> crewai_tools </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> SerperDevTool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@CrewBase</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">LatestAiDevelopmentCrew</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;LatestAiDevelopment crew&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  agents_config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;config/agents.yaml&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token decorator annotation punctuation" style="color:#393A34">@agent</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">researcher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Agent</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> Agent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      config</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">agents_config</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;researcher&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># type: ignore[index]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      verbose</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      tools</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">SerperDevTool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token decorator annotation punctuation" style="color:#393A34">@agent</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">reporting_analyst</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Agent</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> Agent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      config</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">agents_config</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;reporting_analyst&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># type: ignore[index]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      verbose</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<blockquote>
<p><strong>注意</strong>
您在 YAML 文件（<code>agents.yaml</code>）中使用的名称应与 Python 代码中的方法名称相匹配。</p>
</blockquote>
<h3 class="anchor anchorTargetStickyNavbar_aDle" id="直接代码定义">直接代码定义<a href="#直接代码定义" class="hash-link" aria-label="Direct link to 直接代码定义" title="Direct link to 直接代码定义" translate="no">​</a></h3>
<p>您可以通过实例化 <code>Agent</code> 类直接在代码中创建智能体。下面是一个展示所有可用参数的综合示例：</p>
<div class="language-python codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-python codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> crewai </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Agent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> crewai_tools </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> SerperDevTool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 创建一个带有所有可用参数的智能体</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">agent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Agent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;高级数据科学家&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    goal</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;分析和解释复杂数据集以提供可操作的见解&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    backstory</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;拥有超过10年的数据科学和机器学习经验，&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token string" style="color:#e3116c">&quot;你擅长在复杂数据集中发现模式。&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    llm</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;gpt-4&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 默认: OPENAI_MODEL_NAME 或 &quot;gpt-4&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function_calling_llm</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 可选: 用于工具调用的独立 LLM</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    verbose</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 默认: False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    allow_delegation</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 默认: False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max_iter</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 默认: 20 次迭代</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max_rpm</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 可选: API 调用速率限制</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max_execution_time</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 可选: 最大执行时间（秒）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max_retry_limit</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 默认: 出错时重试 2 次</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    allow_code_execution</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 默认: False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    code_execution_mode</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;safe&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 默认: &quot;safe&quot; (选项: &quot;safe&quot;, &quot;unsafe&quot;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    respect_context_window</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 默认: True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    use_system_prompt</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 默认: True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    multimodal</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 默认: False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    inject_date</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 默认: False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    date_format</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;%Y-%m-%d&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 默认: ISO 格式</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reasoning</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 默认: False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max_reasoning_attempts</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 默认: None</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tools</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">SerperDevTool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 可选: 工具列表</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    knowledge_sources</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 可选: 知识源列表</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    embedder</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 可选: 自定义嵌入器配置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    system_template</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 可选: 自定义系统提示词模板</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    prompt_template</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 可选: 自定义提示词模板</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    response_template</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 可选: 自定义响应模板</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    step_callback</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 可选: 用于监控的回调函数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>让我们针对常见用例分解一些关键参数组合：</p>
<h4 class="anchor anchorTargetStickyNavbar_aDle" id="基础研究员智能体">基础研究员智能体<a href="#基础研究员智能体" class="hash-link" aria-label="Direct link to 基础研究员智能体" title="Direct link to 基础研究员智能体" translate="no">​</a></h4>
<div class="language-python codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-python codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token plain">research_agent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Agent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;研究分析师&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    goal</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;查找并总结有关特定主题的信息&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    backstory</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;你是一位注重细节且经验丰富的研究员&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tools</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">SerperDevTool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    verbose</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 启用日志以便调试</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_aDle" id="代码开发智能体">代码开发智能体<a href="#代码开发智能体" class="hash-link" aria-label="Direct link to 代码开发智能体" title="Direct link to 代码开发智能体" translate="no">​</a></h4>
<div class="language-python codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-python codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token plain">dev_agent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Agent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;高级 Python 开发人员&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    goal</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;编写和调试 Python 代码&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    backstory</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;拥有10年经验的 Python 开发专家&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    allow_code_execution</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    code_execution_mode</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;safe&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 使用 Docker 确保安全</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max_execution_time</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">300</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 5分钟超时</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max_retry_limit</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">3</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 针对复杂代码任务增加重试次数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_aDle" id="长期运行分析智能体">长期运行分析智能体<a href="#长期运行分析智能体" class="hash-link" aria-label="Direct link to 长期运行分析智能体" title="Direct link to 长期运行分析智能体" translate="no">​</a></h4>
<div class="language-python codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-python codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token plain">analysis_agent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Agent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;数据分析师&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    goal</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;对大型数据集进行深度分析&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    backstory</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;专注于大数据分析和模式识别&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    memory</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    respect_context_window</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max_rpm</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 限制 API 调用</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function_calling_llm</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;gpt-4o-mini&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 使用更便宜的模型进行工具调用</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_aDle" id="自定义模板智能体">自定义模板智能体<a href="#自定义模板智能体" class="hash-link" aria-label="Direct link to 自定义模板智能体" title="Direct link to 自定义模板智能体" translate="no">​</a></h4>
<div class="language-python codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-python codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token plain">custom_agent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Agent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;客户服务代表&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    goal</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;协助客户解决咨询问题&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    backstory</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;在客户支持方面经验丰富，注重满意度&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    system_template</span><span class="token operator" style="color:#393A34">=</span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;&lt;|start_header_id|&gt;system&lt;|end_header_id|&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">                        {{ .System }}&lt;|eot_id|&gt;&quot;&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    prompt_template</span><span class="token operator" style="color:#393A34">=</span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;&lt;|start_header_id|&gt;user&lt;|end_header_id|&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">                        {{ .Prompt }}&lt;|eot_id|&gt;&quot;&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    response_template</span><span class="token operator" style="color:#393A34">=</span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;&lt;|start_header_id|&gt;assistant&lt;|end_header_id|&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">                        {{ .Response }}&lt;|eot_id|&gt;&quot;&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_aDle" id="具有日期感知和推理能力的智能体">具有日期感知和推理能力的智能体<a href="#具有日期感知和推理能力的智能体" class="hash-link" aria-label="Direct link to 具有日期感知和推理能力的智能体" title="Direct link to 具有日期感知和推理能力的智能体" translate="no">​</a></h4>
<div class="language-python codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-python codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token plain">strategic_agent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Agent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;市场分析师&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    goal</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;通过精确的日期参考和战略规划跟踪市场动向&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    backstory</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;时效性金融分析和战略报告专家&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    inject_date</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 自动将当前日期注入任务</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    date_format</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;%B %d, %Y&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 格式如 &quot;May 21, 2025&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reasoning</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 启用战略规划</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max_reasoning_attempts</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 限制规划迭代次数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    verbose</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_aDle" id="推理智能体">推理智能体<a href="#推理智能体" class="hash-link" aria-label="Direct link to 推理智能体" title="Direct link to 推理智能体" translate="no">​</a></h4>
<div class="language-python codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-python codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token plain">reasoning_agent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Agent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;战略规划师&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    goal</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;分析复杂问题并制定详细的执行计划&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    backstory</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;有条不紊地分解复杂挑战的战略规划专家&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reasoning</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 启用推理和规划</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max_reasoning_attempts</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 限制推理尝试次数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max_iter</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 允许更多迭代以进行复杂规划</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    verbose</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_aDle" id="多模态智能体">多模态智能体<a href="#多模态智能体" class="hash-link" aria-label="Direct link to 多模态智能体" title="Direct link to 多模态智能体" translate="no">​</a></h4>
<div class="language-python codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-python codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token plain">multimodal_agent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Agent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;视觉内容分析师&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    goal</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;分析和处理文本及视觉内容&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    backstory</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;专注于结合文本和图像理解的多模态分析&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    multimodal</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 启用多模态能力</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    verbose</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_aDle" id="参数详解">参数详解<a href="#参数详解" class="hash-link" aria-label="Direct link to 参数详解" title="Direct link to 参数详解" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_aDle" id="关键参数">关键参数<a href="#关键参数" class="hash-link" aria-label="Direct link to 关键参数" title="Direct link to 关键参数" translate="no">​</a></h4>
<ul>
<li class=""><code>role</code>（角色）, <code>goal</code>（目标）, 和 <code>backstory</code>（背景故事）是必需的，它们塑造了智能体的行为。</li>
<li class=""><code>llm</code> 决定所使用的语言模型（默认：OpenAI 的 GPT-4）。</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_aDle" id="记忆与上下文">记忆与上下文<a href="#记忆与上下文" class="hash-link" aria-label="Direct link to 记忆与上下文" title="Direct link to 记忆与上下文" translate="no">​</a></h4>
<ul>
<li class=""><code>memory</code>: 启用以保持对话历史。</li>
<li class=""><code>respect_context_window</code>: 防止 token 限制问题。</li>
<li class=""><code>knowledge_sources</code>: 添加领域特定的知识库。</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_aDle" id="执行控制">执行控制<a href="#执行控制" class="hash-link" aria-label="Direct link to 执行控制" title="Direct link to 执行控制" translate="no">​</a></h4>
<ul>
<li class=""><code>max_iter</code>: 给出最佳答案前的最大尝试次数。</li>
<li class=""><code>max_execution_time</code>: 超时时间（秒）。</li>
<li class=""><code>max_rpm</code>: API 调用的速率限制。</li>
<li class=""><code>max_retry_limit</code>: 错误重试次数。</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_aDle" id="代码执行">代码执行<a href="#代码执行" class="hash-link" aria-label="Direct link to 代码执行" title="Direct link to 代码执行" translate="no">​</a></h4>
<ul>
<li class=""><code>allow_code_execution</code>: 必须为 True 才能运行代码。</li>
<li class=""><code>code_execution_mode</code>:<!-- -->
<ul>
<li class=""><code>&quot;safe&quot;</code>: 使用 Docker（生产环境推荐）。</li>
<li class=""><code>&quot;unsafe&quot;</code>: 直接执行（仅在受信任的环境中使用）。</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>注意</strong>
这将运行默认的 Docker 镜像。如果您想配置 Docker 镜像，请查看工具部分的 Code Interpreter Tool（代码解释器工具）。
将代码解释器工具作为工具参数添加到智能体中。</p>
</blockquote>
<h4 class="anchor anchorTargetStickyNavbar_aDle" id="高级功能">高级功能<a href="#高级功能" class="hash-link" aria-label="Direct link to 高级功能" title="Direct link to 高级功能" translate="no">​</a></h4>
<ul>
<li class=""><code>multimodal</code>: 启用处理文本和视觉内容的多模态能力。</li>
<li class=""><code>reasoning</code>: 启用智能体在执行任务前进行反思和制定计划。</li>
<li class=""><code>inject_date</code>: 自动将当前日期注入任务描述中。</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_aDle" id="模板">模板<a href="#模板" class="hash-link" aria-label="Direct link to 模板" title="Direct link to 模板" translate="no">​</a></h4>
<ul>
<li class=""><code>system_template</code>: 定义智能体的核心行为。</li>
<li class=""><code>prompt_template</code>: 定制输入格式。</li>
<li class=""><code>response_template</code>: 格式化智能体响应。</li>
</ul>
<blockquote>
<p><strong>注意</strong>
当使用自定义模板时，请确保同时定义 <code>system_template</code> 和 <code>prompt_template</code>。<code>response_template</code> 是可选的，但建议使用以保持输出格式一致。</p>
</blockquote>
<blockquote>
<p><strong>注意</strong>
当使用自定义模板时，您可以在模板中使用 <code>{role}</code>, <code>{goal}</code>, 和 <code>{backstory}</code> 等变量。这些将在执行期间自动填充。</p>
</blockquote>
<h2 class="anchor anchorTargetStickyNavbar_aDle" id="智能体工具">智能体工具<a href="#智能体工具" class="hash-link" aria-label="Direct link to 智能体工具" title="Direct link to 智能体工具" translate="no">​</a></h2>
<p>智能体可以配备各种工具以增强其能力。CrewAI 支持来自以下来源的工具：</p>
<ul>
<li class=""><a href="https://github.com/joaomdmoura/crewai-tools" target="_blank" rel="noopener noreferrer" class="">CrewAI Toolkit</a></li>
<li class=""><a href="https://python.langchain.com/docs/integrations/tools" target="_blank" rel="noopener noreferrer" class="">LangChain Tools</a></li>
</ul>
<p>以下是如何向智能体添加工具：</p>
<div class="language-python codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-python codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> crewai </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Agent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> crewai_tools </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> SerperDevTool</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> WikipediaTools</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 创建工具</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">search_tool </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> SerperDevTool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wiki_tool </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> WikipediaTools</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 添加工具到智能体</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">researcher </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Agent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;AI 技术研究员&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    goal</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;研究最新的 AI 发展&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tools</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">search_tool</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> wiki_tool</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    verbose</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_aDle" id="智能体记忆与上下文">智能体记忆与上下文<a href="#智能体记忆与上下文" class="hash-link" aria-label="Direct link to 智能体记忆与上下文" title="Direct link to 智能体记忆与上下文" translate="no">​</a></h2>
<p>智能体可以保持交互的记忆，并使用先前任务的上下文。这对于需要在多个任务之间保留信息的复杂工作流特别有用。</p>
<div class="language-python codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-python codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> crewai </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Agent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">analyst </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Agent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;数据分析师&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    goal</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;分析并记住复杂的数据模式&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    memory</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 启用记忆</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    verbose</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<blockquote>
<p><strong>注意</strong>
当启用 <code>memory</code> 时，智能体将在多个交互中保持上下文，提高其处理复杂、多步骤任务的能力。</p>
</blockquote>
<h2 class="anchor anchorTargetStickyNavbar_aDle" id="上下文窗口管理-context-window-management">上下文窗口管理 (Context Window Management)<a href="#上下文窗口管理-context-window-management" class="hash-link" aria-label="Direct link to 上下文窗口管理 (Context Window Management)" title="Direct link to 上下文窗口管理 (Context Window Management)" translate="no">​</a></h2>
<p>CrewAI 包含复杂的自动上下文窗口管理，以处理对话超出语言模型 Token 限制的情况。这个强大的功能由 <code>respect_context_window</code> 参数控制。</p>
<h3 class="anchor anchorTargetStickyNavbar_aDle" id="上下文窗口管理如何工作">上下文窗口管理如何工作<a href="#上下文窗口管理如何工作" class="hash-link" aria-label="Direct link to 上下文窗口管理如何工作" title="Direct link to 上下文窗口管理如何工作" translate="no">​</a></h3>
<p>当智能体的对话历史对于 LLM 的上下文窗口来说过大时，CrewAI 会自动检测这种情况，并可以：</p>
<ol>
<li class=""><strong>自动摘要内容</strong>（当 <code>respect_context_window=True</code>）</li>
<li class=""><strong>报错停止执行</strong>（当 <code>respect_context_window=False</code>）</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_aDle" id="自动上下文处理-respect_context_windowtrue">自动上下文处理 (<code>respect_context_window=True</code>)<a href="#自动上下文处理-respect_context_windowtrue" class="hash-link" aria-label="Direct link to 自动上下文处理-respect_context_windowtrue" title="Direct link to 自动上下文处理-respect_context_windowtrue" translate="no">​</a></h3>
<p>这是大多数用例的<strong>默认推荐设置</strong>。启用时，CrewAI 将：</p>
<div class="language-python codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-python codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 具有自动上下文管理的智能体（默认）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">smart_agent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Agent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;研究分析师&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    goal</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;分析大型文档和数据集&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    backstory</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;处理大量信息的专家&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    respect_context_window</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 🔑 默认: 自动处理上下文限制</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    verbose</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><strong>当超出上下文限制时会发生什么：</strong></p>
<ul>
<li class="">⚠️ <strong>警告消息</strong>: <code>&quot;Context length exceeded. Summarizing content to fit the model context window.&quot;</code> （超出上下文长度。正在摘要内容以适应模型上下文窗口。）</li>
<li class="">🔄 <strong>自动摘要</strong>: CrewAI 智能地摘要对话历史。</li>
<li class="">✅ <strong>继续执行</strong>: 任务执行使用摘要后的上下文无缝继续。</li>
<li class="">📝 <strong>保留信息</strong>: 保留关键信息的同时减少 Token 数量。</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_aDle" id="严格的上下文限制-respect_context_windowfalse">严格的上下文限制 (<code>respect_context_window=False</code>)<a href="#严格的上下文限制-respect_context_windowfalse" class="hash-link" aria-label="Direct link to 严格的上下文限制-respect_context_windowfalse" title="Direct link to 严格的上下文限制-respect_context_windowfalse" translate="no">​</a></h3>
<p>当您需要精确控制，宁愿停止执行也不愿丢失任何信息时：</p>
<div class="language-python codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-python codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 具有严格上下文限制的智能体</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">strict_agent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Agent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;法律文档审查员&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    goal</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;提供精确的法律分析，无信息丢失&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    backstory</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;需要完整上下文以进行准确分析的法律专家&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    respect_context_window</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ❌ 遇到上下文限制时停止执行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    verbose</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><strong>当超出上下文限制时会发生什么：</strong></p>
<ul>
<li class="">❌ <strong>错误消息</strong>: <code>&quot;Context length exceeded. Consider using smaller text or RAG tools from crewai_tools.&quot;</code> （超出上下文长度。考虑使用更小的文本或 crewai_tools 中的 RAG 工具。）</li>
<li class="">🛑 <strong>执行停止</strong>: 任务执行立即停止。</li>
<li class="">🔧 <strong>需要人工干预</strong>: 您需要修改您的方法。</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_aDle" id="选择正确的设置">选择正确的设置<a href="#选择正确的设置" class="hash-link" aria-label="Direct link to 选择正确的设置" title="Direct link to 选择正确的设置" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_aDle" id="在以下情况下使用-respect_context_windowtrue默认">在以下情况下使用 <code>respect_context_window=True</code>（默认）：<a href="#在以下情况下使用-respect_context_windowtrue默认" class="hash-link" aria-label="Direct link to 在以下情况下使用-respect_context_windowtrue默认" title="Direct link to 在以下情况下使用-respect_context_windowtrue默认" translate="no">​</a></h4>
<ul>
<li class=""><strong>处理可能超出上下文限制的大型文档</strong></li>
<li class=""><strong>长期运行的对话</strong>，其中一定程度的摘要是可以接受的</li>
<li class=""><strong>研究任务</strong>，其中一般上下文比确切细节更重要</li>
<li class=""><strong>原型设计和开发</strong>，您希望执行过程稳健</li>
</ul>
<div class="language-python codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-python codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 非常适合文档处理</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">document_processor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Agent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;文档分析师&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    goal</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;从大型研究论文中提取见解&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    backstory</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;分析大量文档的专家&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    respect_context_window</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 优雅地处理大型文档</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max_iter</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 分配更多迭代以进行复杂分析</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    verbose</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_aDle" id="在以下情况下使用-respect_context_windowfalse">在以下情况下使用 <code>respect_context_window=False</code>：<a href="#在以下情况下使用-respect_context_windowfalse" class="hash-link" aria-label="Direct link to 在以下情况下使用-respect_context_windowfalse" title="Direct link to 在以下情况下使用-respect_context_windowfalse" translate="no">​</a></h4>
<ul>
<li class=""><strong>精度至关重要</strong>，信息丢失不可接受</li>
<li class=""><strong>法律或医疗任务</strong>，需要完整的上下文</li>
<li class=""><strong>代码审查</strong>，遗漏细节可能会引入 Bug</li>
<li class=""><strong>财务分析</strong>，准确性至关重要</li>
</ul>
<div class="language-python codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-python codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 非常适合精度任务</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">precision_agent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Agent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;代码安全审计员&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    goal</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;识别代码中的安全漏洞&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    backstory</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;需要完整代码上下文的安全专家&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    respect_context_window</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 宁愿失败也不愿分析不完整</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max_retry_limit</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 在上下文问题上快速失败</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    verbose</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_aDle" id="处理大数据的替代方法">处理大数据的替代方法<a href="#处理大数据的替代方法" class="hash-link" aria-label="Direct link to 处理大数据的替代方法" title="Direct link to 处理大数据的替代方法" translate="no">​</a></h3>
<p>当处理非常大的数据集时，请考虑以下策略：</p>
<h4 class="anchor anchorTargetStickyNavbar_aDle" id="1-使用-rag-工具">1. 使用 RAG 工具<a href="#1-使用-rag-工具" class="hash-link" aria-label="Direct link to 1. 使用 RAG 工具" title="Direct link to 1. 使用 RAG 工具" translate="no">​</a></h4>
<div class="language-python codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-python codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> crewai_tools </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> RagTool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 创建用于大型文档处理的 RAG 工具</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rag_tool </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> RagTool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rag_agent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Agent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;研究助理&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    goal</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;高效查询大型知识库&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    backstory</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;使用 RAG 工具进行信息检索的专家&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tools</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">rag_tool</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 使用 RAG 而不是大上下文窗口</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    respect_context_window</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    verbose</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_aDle" id="2-使用知识源">2. 使用知识源<a href="#2-使用知识源" class="hash-link" aria-label="Direct link to 2. 使用知识源" title="Direct link to 2. 使用知识源" translate="no">​</a></h4>
<div class="language-python codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-python codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 使用知识源而不是大型提示词</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">knowledge_agent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Agent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;知识专家&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    goal</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;使用精选知识回答问题&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    backstory</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;利用结构化知识源的专家&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    knowledge_sources</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">your_knowledge_sources</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 预处理的知识</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    respect_context_window</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    verbose</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_aDle" id="上下文窗口最佳实践">上下文窗口最佳实践<a href="#上下文窗口最佳实践" class="hash-link" aria-label="Direct link to 上下文窗口最佳实践" title="Direct link to 上下文窗口最佳实践" translate="no">​</a></h3>
<ol>
<li class=""><strong>监控上下文使用情况</strong>: 启用 <code>verbose=True</code> 以查看上下文管理的实际运作。</li>
<li class=""><strong>以效率为设计目标</strong>: 结构化任务以尽量减少上下文积累。</li>
<li class=""><strong>使用合适的模型</strong>: 选择具有适合您任务的上下文窗口的 LLM。</li>
<li class=""><strong>测试两种设置</strong>: 尝试 <code>True</code> 和 <code>False</code>，看哪种更适合您的用例。</li>
<li class=""><strong>结合 RAG 使用</strong>: 对于非常大的数据集，使用 RAG 工具，而不是仅依赖上下文窗口。</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_aDle" id="常见上下文问题排查">常见上下文问题排查<a href="#常见上下文问题排查" class="hash-link" aria-label="Direct link to 常见上下文问题排查" title="Direct link to 常见上下文问题排查" translate="no">​</a></h3>
<p><strong>如果您收到上下文限制错误：</strong></p>
<div class="language-python codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-python codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 快速修复: 启用自动处理</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">agent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">respect_context_window </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 更好的解决方案: 对大数据使用 RAG 工具</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> crewai_tools </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> RagTool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">agent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tools </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">RagTool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 替代方案: 将任务分解为更小的部分</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 或者使用知识源代替大型提示词</span><br></span></code></pre></div></div>
<p><strong>如果自动摘要丢失了重要信息：</strong></p>
<div class="language-python codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-python codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 禁用自动摘要并改用 RAG</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">agent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Agent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;详细分析师&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    goal</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;保持完整的信息准确性&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    backstory</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;需完整上下文的专家&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    respect_context_window</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 不摘要</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tools</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">RagTool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 对大数据使用 RAG</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    verbose</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<blockquote>
<p><strong>注意</strong>
上下文窗口管理功能在后台自动工作。您无需调用任何特殊函数——只需将 <code>respect_context_window</code> 设置为您偏好的行为，CrewAI 就会处理剩下的事情！</p>
</blockquote>
<h2 class="anchor anchorTargetStickyNavbar_aDle" id="使用-kickoff-直接交互">使用 <code>kickoff()</code> 直接交互<a href="#使用-kickoff-直接交互" class="hash-link" aria-label="Direct link to 使用-kickoff-直接交互" title="Direct link to 使用-kickoff-直接交互" translate="no">​</a></h2>
<p>使用 <code>kickoff()</code> 方法，可以直接使用智能体，而无需通过 Task 或 Crew 工作流。这为您不需要完整的 Crew 编排能力时提供了一种更简单的与智能体交互的方式。</p>
<h3 class="anchor anchorTargetStickyNavbar_aDle" id="kickoff-如何工作"><code>kickoff()</code> 如何工作<a href="#kickoff-如何工作" class="hash-link" aria-label="Direct link to kickoff-如何工作" title="Direct link to kickoff-如何工作" translate="no">​</a></h3>
<p><code>kickoff()</code> 方法允许您直接向智能体发送消息并获得响应，类似于您与 LLM 交互的方式，但具有所有智能体的能力（工具、推理等）。</p>
<div class="language-python codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-python codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> crewai </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Agent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> crewai_tools </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> SerperDevTool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 创建一个智能体</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">researcher </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Agent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;AI 技术研究员&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    goal</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;研究最新的 AI 发展&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tools</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">SerperDevTool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    verbose</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 使用 kickoff() 直接与智能体交互</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> researcher</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kickoff</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;语言模型的最新进展是什么？&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 访问原始响应</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">raw</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_aDle" id="参数和返回值">参数和返回值<a href="#参数和返回值" class="hash-link" aria-label="Direct link to 参数和返回值" title="Direct link to 参数和返回值" translate="no">​</a></h3>
<table><thead><tr><th style="text-align:left">参数</th><th style="text-align:left">类型</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left"><code>messages</code></td><td style="text-align:left"><code>Union[str, List[Dict[str, str]]]</code></td><td style="text-align:left">字符串查询或包含角色/内容的消息字典列表</td></tr><tr><td style="text-align:left"><code>response_format</code></td><td style="text-align:left"><code>Optional[Type[Any]]</code></td><td style="text-align:left">可选的 Pydantic 模型，用于结构化输出</td></tr></tbody></table>
<p>该方法返回一个 <code>LiteAgentOutput</code> 对象，包含以下属性：</p>
<ul>
<li class=""><code>raw</code>: 包含原始输出文本的字符串</li>
<li class=""><code>pydantic</code>: 解析后的 Pydantic 模型（如果提供了 <code>response_format</code>）</li>
<li class=""><code>agent_role</code>: 产生输出的智能体角色</li>
<li class=""><code>usage_metrics</code>: 执行的 Token 使用指标</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_aDle" id="结构化输出">结构化输出<a href="#结构化输出" class="hash-link" aria-label="Direct link to 结构化输出" title="Direct link to 结构化输出" translate="no">​</a></h3>
<p>通过提供 Pydantic 模型作为 <code>response_format</code>，您可以获得结构化输出：</p>
<div class="language-python codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-python codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> pydantic </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> BaseModel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> typing </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> List</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ResearchFindings</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">BaseModel</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main_points</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> List</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    key_technologies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> List</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    future_predictions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 获取结构化输出</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> researcher</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kickoff</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;总结 2025 年 AI 的最新发展&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    response_format</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ResearchFindings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 访问结构化数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pydantic</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">main_points</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pydantic</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">future_predictions</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_aDle" id="多条消息">多条消息<a href="#多条消息" class="hash-link" aria-label="Direct link to 多条消息" title="Direct link to 多条消息" translate="no">​</a></h3>
<p>您也可以提供对话历史作为消息字典列表：</p>
<div class="language-python codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-python codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token plain">messages </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;role&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;user&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;content&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;我需要关于大型语言模型的信息&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;role&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;assistant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;content&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;我很乐意为您提供帮助！具体的您想了解什么？&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;role&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;user&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;content&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2025 年的最新进展是什么？&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> researcher</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kickoff</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">messages</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_aDle" id="异步支持">异步支持<a href="#异步支持" class="hash-link" aria-label="Direct link to 异步支持" title="Direct link to 异步支持" translate="no">​</a></h3>
<p>通过 <code>kickoff_async()</code> 提供异步版本，参数相同：</p>
<div class="language-python codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-python codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> asyncio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> researcher</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kickoff_async</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;AI 的最新进展是什么？&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">raw</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">asyncio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<blockquote>
<p><strong>注意</strong>
<code>kickoff()</code> 方法内部使用了 <code>LiteAgent</code>，它提供了更简单的执行流程，同时保留了智能体的所有配置（角色、目标、背景故事、工具等）。</p>
</blockquote>
<h2 class="anchor anchorTargetStickyNavbar_aDle" id="重要注意事项和最佳实践">重要注意事项和最佳实践<a href="#重要注意事项和最佳实践" class="hash-link" aria-label="Direct link to 重要注意事项和最佳实践" title="Direct link to 重要注意事项和最佳实践" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_aDle" id="安全性和代码执行">安全性和代码执行<a href="#安全性和代码执行" class="hash-link" aria-label="Direct link to 安全性和代码执行" title="Direct link to 安全性和代码执行" translate="no">​</a></h3>
<ul>
<li class="">当使用 <code>allow_code_execution</code> 时，请对用户输入保持谨慎并始终进行验证。</li>
<li class="">在生产环境中使用 <code>code_execution_mode: &quot;safe&quot;</code> (Docker)。</li>
<li class="">考虑设置适当的 <code>max_execution_time</code> 限制以防止无限循环。</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_aDle" id="性能优化">性能优化<a href="#性能优化" class="hash-link" aria-label="Direct link to 性能优化" title="Direct link to 性能优化" translate="no">​</a></h3>
<ul>
<li class="">使用 <code>respect_context_window: true</code> 以防止 Token 限制问题。</li>
<li class="">设置适当的 <code>max_rpm</code> 以避免速率限制。</li>
<li class="">启用 <code>cache: true</code> 以提高重复任务的性能。</li>
<li class="">根据任务复杂性调整 <code>max_iter</code> 和 <code>max_retry_limit</code>。</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_aDle" id="记忆和上下文管理">记忆和上下文管理<a href="#记忆和上下文管理" class="hash-link" aria-label="Direct link to 记忆和上下文管理" title="Direct link to 记忆和上下文管理" translate="no">​</a></h3>
<ul>
<li class="">利用 <code>knowledge_sources</code> 获取领域特定信息。</li>
<li class="">使用自定义嵌入模型时配置 <code>embedder</code>。</li>
<li class="">使用自定义模板（<code>system_template</code>, <code>prompt_template</code>, <code>response_template</code>）对智能体行为进行细粒度控制。</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_aDle" id="高级功能-1">高级功能<a href="#高级功能-1" class="hash-link" aria-label="Direct link to 高级功能" title="Direct link to 高级功能" translate="no">​</a></h3>
<ul>
<li class="">对需要执行复杂任务前进行规划和反思的智能体启用 <code>reasoning: true</code>。</li>
<li class="">设置适当的 <code>max_reasoning_attempts</code> 以控制规划迭代（None 表示无限制）。</li>
<li class="">使用 <code>inject_date: true</code> 为智能体提供当前日期感知，用于时效性任务。</li>
<li class="">使用标准 Python datetime 格式代码自定义 <code>date_format</code>。</li>
<li class="">对需要处理文本和视觉内容的智能体启用 <code>multimodal: true</code>。</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_aDle" id="智能体协作">智能体协作<a href="#智能体协作" class="hash-link" aria-label="Direct link to 智能体协作" title="Direct link to 智能体协作" translate="no">​</a></h3>
<ul>
<li class="">当智能体需要协同工作时，启用 <code>allow_delegation: true</code>。</li>
<li class="">使用 <code>step_callback</code> 监控并记录智能体交互。</li>
<li class="">考虑针对不同目的使用不同的 LLM：<!-- -->
<ul>
<li class="">主 <code>llm</code> 用于复杂推理。</li>
<li class=""><code>function_calling_llm</code> 用于高效的工具使用。</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_aDle" id="日期感知和推理">日期感知和推理<a href="#日期感知和推理" class="hash-link" aria-label="Direct link to 日期感知和推理" title="Direct link to 日期感知和推理" translate="no">​</a></h3>
<ul>
<li class="">使用 <code>inject_date: true</code> 为智能体提供当前日期感知，用于时效性任务。</li>
<li class="">使用标准 Python datetime 格式代码自定义 <code>date_format</code>。</li>
<li class="">有效的格式代码包括：%Y（年）、%m（月）、%d（日）、%B（全月名）等。</li>
<li class="">无效的日期格式将被记录为警告，并且不会修改任务描述。</li>
<li class="">为受益于前期规划和反思的复杂任务启用 <code>reasoning: true</code>。</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_aDle" id="模型兼容性">模型兼容性<a href="#模型兼容性" class="hash-link" aria-label="Direct link to 模型兼容性" title="Direct link to 模型兼容性" translate="no">​</a></h3>
<ul>
<li class="">对于不支持系统消息的旧模型，设置 <code>use_system_prompt: false</code>。</li>
<li class="">确保您选择的 <code>llm</code> 支持您需要的功能（如函数调用）。</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_aDle" id="常见问题排查">常见问题排查<a href="#常见问题排查" class="hash-link" aria-label="Direct link to 常见问题排查" title="Direct link to 常见问题排查" translate="no">​</a></h2>
<ol>
<li class="">
<p><strong>速率限制</strong>: 如果您触及 API 速率限制：</p>
<ul>
<li class="">实施适当的 <code>max_rpm</code>。</li>
<li class="">对重复操作使用缓存。</li>
<li class="">考虑批量请求。</li>
</ul>
</li>
<li class="">
<p><strong>上下文窗口错误</strong>: 如果您超出上下文限制：</p>
<ul>
<li class="">启用 <code>respect_context_window</code>。</li>
<li class="">使用更高效的提示词。</li>
<li class="">定期清除智能体记忆。</li>
</ul>
</li>
<li class="">
<p><strong>代码执行问题</strong>: 如果代码执行失败：</p>
<ul>
<li class="">验证是否安装了 Docker（针对安全模式）。</li>
<li class="">检查执行权限。</li>
<li class="">审查代码沙箱设置。</li>
</ul>
</li>
<li class="">
<p><strong>记忆问题</strong>: 如果智能体响应看起来不一致：</p>
<ul>
<li class="">检查知识源配置。</li>
<li class="">审查对话历史管理。</li>
</ul>
</li>
</ol>
<p>请记住，根据具体用例配置智能体时效果最佳。花时间了解您的需求并相应地调整这些参数。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_iDCr"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/AI/CrewAI/智能体.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_c0mv" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mxtt"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/notes3/docs/AI/CrewAI/推理"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">推理</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/notes3/docs/AI/CrewAI/知识库"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">知识库</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_r83r thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#智能体概览" class="table-of-contents__link toc-highlight">智能体概览</a></li><li><a href="#智能体属性-agent-attributes" class="table-of-contents__link toc-highlight">智能体属性 (Agent Attributes)</a></li><li><a href="#创建智能体" class="table-of-contents__link toc-highlight">创建智能体</a><ul><li><a href="#yaml-配置推荐" class="table-of-contents__link toc-highlight">YAML 配置（推荐）</a></li><li><a href="#直接代码定义" class="table-of-contents__link toc-highlight">直接代码定义</a></li><li><a href="#参数详解" class="table-of-contents__link toc-highlight">参数详解</a></li></ul></li><li><a href="#智能体工具" class="table-of-contents__link toc-highlight">智能体工具</a></li><li><a href="#智能体记忆与上下文" class="table-of-contents__link toc-highlight">智能体记忆与上下文</a></li><li><a href="#上下文窗口管理-context-window-management" class="table-of-contents__link toc-highlight">上下文窗口管理 (Context Window Management)</a><ul><li><a href="#上下文窗口管理如何工作" class="table-of-contents__link toc-highlight">上下文窗口管理如何工作</a></li><li><a href="#自动上下文处理-respect_context_windowtrue" class="table-of-contents__link toc-highlight">自动上下文处理 (<code>respect_context_window=True</code>)</a></li><li><a href="#严格的上下文限制-respect_context_windowfalse" class="table-of-contents__link toc-highlight">严格的上下文限制 (<code>respect_context_window=False</code>)</a></li><li><a href="#选择正确的设置" class="table-of-contents__link toc-highlight">选择正确的设置</a></li><li><a href="#处理大数据的替代方法" class="table-of-contents__link toc-highlight">处理大数据的替代方法</a></li><li><a href="#上下文窗口最佳实践" class="table-of-contents__link toc-highlight">上下文窗口最佳实践</a></li><li><a href="#常见上下文问题排查" class="table-of-contents__link toc-highlight">常见上下文问题排查</a></li></ul></li><li><a href="#使用-kickoff-直接交互" class="table-of-contents__link toc-highlight">使用 <code>kickoff()</code> 直接交互</a><ul><li><a href="#kickoff-如何工作" class="table-of-contents__link toc-highlight"><code>kickoff()</code> 如何工作</a></li><li><a href="#参数和返回值" class="table-of-contents__link toc-highlight">参数和返回值</a></li><li><a href="#结构化输出" class="table-of-contents__link toc-highlight">结构化输出</a></li><li><a href="#多条消息" class="table-of-contents__link toc-highlight">多条消息</a></li><li><a href="#异步支持" class="table-of-contents__link toc-highlight">异步支持</a></li></ul></li><li><a href="#重要注意事项和最佳实践" class="table-of-contents__link toc-highlight">重要注意事项和最佳实践</a><ul><li><a href="#安全性和代码执行" class="table-of-contents__link toc-highlight">安全性和代码执行</a></li><li><a href="#性能优化" class="table-of-contents__link toc-highlight">性能优化</a></li><li><a href="#记忆和上下文管理" class="table-of-contents__link toc-highlight">记忆和上下文管理</a></li><li><a href="#高级功能-1" class="table-of-contents__link toc-highlight">高级功能</a></li><li><a href="#智能体协作" class="table-of-contents__link toc-highlight">智能体协作</a></li><li><a href="#日期感知和推理" class="table-of-contents__link toc-highlight">日期感知和推理</a></li><li><a href="#模型兼容性" class="table-of-contents__link toc-highlight">模型兼容性</a></li></ul></li><li><a href="#常见问题排查" class="table-of-contents__link toc-highlight">常见问题排查</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_rhIP"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_rhIP"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_rhIP"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/notes3/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_rhIP"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>