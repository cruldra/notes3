# æµ‹è¯•æˆæœ¬ä¸å¼€å‘æ•ˆç‡çš„å¹³è¡¡

## é—®é¢˜çš„æ ¸å¿ƒ

**"å¦‚æœæ¯å®ç°ä¸€ä¸ªé€»è¾‘éƒ½éœ€è¦ä¸€å¤§å †æµ‹è¯•ä»£ç ï¼Œä¼šå¯¼è‡´ç¼–å†™æµ‹è¯•çš„æ—¶é—´æ¯”åŠŸèƒ½å¼€å‘æ›´å¤šï¼Œè¿™ä¸ªåˆç†å—ï¼Ÿ"**

è¿™æ˜¯ä¸€ä¸ªéå¸¸ç°å®çš„é—®é¢˜ï¼ç­”æ¡ˆæ˜¯ï¼š**ä¸åˆç†ï¼Œä¹Ÿä¸æ˜¯å¤§å‚çš„å®é™…åšæ³•ã€‚**

## å¤§å‚çš„æµ‹è¯•ç°å®

### ğŸ¢ å®é™…çš„æ—¶é—´åˆ†é…

æ ¹æ®Googleã€Metaã€é˜¿é‡Œç­‰å¤§å‚çš„å®è·µï¼š

```
åŠŸèƒ½å¼€å‘æ—¶é—´åˆ†é…ï¼š
â”œâ”€â”€ éœ€æ±‚åˆ†æ & è®¾è®¡: 20%
â”œâ”€â”€ æ ¸å¿ƒåŠŸèƒ½å¼€å‘: 50-60%
â”œâ”€â”€ æµ‹è¯•ç¼–å†™: 20-30%
â””â”€â”€ è°ƒè¯• & ä¼˜åŒ–: 10%
```

**æµ‹è¯•æ—¶é—´ç»ä¸åº”è¯¥è¶…è¿‡å¼€å‘æ—¶é—´ï¼**

### ğŸ“Š 70-20-10 æµ‹è¯•é‡‘å­—å¡”

å¤§å‚éµå¾ªçš„æµ‹è¯•ç­–ç•¥ï¼š

```
        /\     E2E (10%)
       /  \    â° æ—¶é—´å°‘ï¼Œä»·å€¼é«˜
      /____\   - å…³é”®ä¸šåŠ¡æµç¨‹
     /      \  - å†’çƒŸæµ‹è¯•
    /________\ 
   /          \ Integration (20%)
  /____________\â° é€‚ä¸­æ—¶é—´ï¼ŒAPIæµ‹è¯•
 /              \
/________________\ Unit Tests (70%)
                   â° å¿«é€Ÿç¼–å†™ï¼Œé«˜è¦†ç›–
```

## ä»€ä¹ˆå€¼å¾—æµ‹è¯• vs ä»€ä¹ˆä¸å€¼å¾—

### âœ… é«˜ä»·å€¼ï¼Œå¿…é¡»æµ‹è¯•

```typescript
// 1. æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
export function calculateCoursePrice(
  basePrice: number, 
  discount: number, 
  userLevel: 'basic' | 'premium' | 'vip'
): number {
  let finalPrice = basePrice * (1 - discount)
  
  // å¤æ‚çš„å®šä»·é€»è¾‘
  switch (userLevel) {
    case 'premium':
      finalPrice *= 0.9 // 9æŠ˜
      break
    case 'vip':
      finalPrice *= 0.8 // 8æŠ˜
      break
  }
  
  return Math.max(finalPrice, 0.01) // æœ€ä½ä»·æ ¼
}

// æµ‹è¯•è¿™ä¸ªå‡½æ•°éå¸¸å€¼å¾—ï¼Œå› ä¸ºï¼š
// 1. æ¶‰åŠé‡‘é’±è®¡ç®—
// 2. æœ‰å¤æ‚é€»è¾‘
// 3. æœ‰è¾¹ç•Œæƒ…å†µ
// 4. å‡ºé”™å½±å“å¤§
```

```typescript
// 2. æ•°æ®éªŒè¯é€»è¾‘
export function validateCourseData(course: CourseInput): ValidationResult {
  const errors: string[] = []
  
  if (!course.title || course.title.length < 2) {
    errors.push('è¯¾ç¨‹æ ‡é¢˜è‡³å°‘2ä¸ªå­—ç¬¦')
  }
  
  if (course.price < 0) {
    errors.push('ä»·æ ¼ä¸èƒ½ä¸ºè´Ÿæ•°')
  }
  
  // ... æ›´å¤šéªŒè¯
  
  return {
    isValid: errors.length === 0,
    errors
  }
}

// éªŒè¯é€»è¾‘å¿…é¡»æµ‹è¯•ï¼Œå› ä¸ºï¼š
// 1. é˜²æ­¢è„æ•°æ®å…¥åº“
// 2. ä¿è¯ç”¨æˆ·ä½“éªŒ
// 3. é€»è¾‘ç›¸å¯¹å¤æ‚
```

### âŒ ä½ä»·å€¼ï¼Œå¯ä»¥è·³è¿‡

```typescript
// 1. ç®€å•çš„å±•ç¤ºç»„ä»¶
export function CourseCard({ title, price, image }: CourseCardProps) {
  return (
    <div className="course-card">
      <img src={image} alt={title} />
      <h3>{title}</h3>
      <span>Â¥{price}</span>
    </div>
  )
}

// è¿™ç§ç»„ä»¶é€šå¸¸ä¸æµ‹è¯•ï¼Œå› ä¸ºï¼š
// 1. æ²¡æœ‰å¤æ‚é€»è¾‘
// 2. ä¸»è¦æ˜¯UIå±•ç¤º
// 3. æµ‹è¯•æˆæœ¬ > æ”¶ç›Š
```

```typescript
// 2. ç®€å•çš„å·¥å…·å‡½æ•°
export function formatPrice(price: number): string {
  return `Â¥${price.toFixed(2)}`
}

// å¤ªç®€å•äº†ï¼Œæµ‹è¯•æ„ä¹‰ä¸å¤§
```

```typescript
// 3. ç¬¬ä¸‰æ–¹åº“çš„ç®€å•å°è£…
export function showToast(message: string) {
  toast.success(message)
}

// åªæ˜¯è°ƒç”¨ç¬¬ä¸‰æ–¹APIï¼Œä¸éœ€è¦æµ‹è¯•
```

## å¤§å‚çš„å®ç”¨æµ‹è¯•ç­–ç•¥

### ğŸ¯ ç­–ç•¥1ï¼šæŒ‰é£é™©çº§åˆ«åˆ†ç±»

```typescript
// é«˜é£é™©ï¼šé‡‘é’±ã€æ•°æ®ã€å®‰å…¨ç›¸å…³
export class PaymentService {
  async processPayment(order: Order): Promise<PaymentResult> {
    // è¿™ä¸ªå¿…é¡»æœ‰å®Œæ•´æµ‹è¯•
    // åŒ…æ‹¬å„ç§å¼‚å¸¸æƒ…å†µ
  }
}

// ä¸­é£é™©ï¼šç”¨æˆ·ä½“éªŒç›¸å…³
export function SearchCourses(query: string): Course[] {
  // éœ€è¦åŸºæœ¬æµ‹è¯•
  // æµ‹è¯•ä¸»è¦åœºæ™¯å³å¯
}

// ä½é£é™©ï¼šå±•ç¤ºã€æ ¼å¼åŒ–
export function formatDate(date: Date): string {
  // å¯ä»¥è·³è¿‡æˆ–ç®€å•æµ‹è¯•
}
```

### ğŸ”§ ç­–ç•¥2ï¼šæµ‹è¯•å·¥å…·å’Œæ¨¡æ¿åŒ–

å¤§å‚éƒ½æœ‰å†…éƒ¨å·¥å…·æ¥å‡å°‘æµ‹è¯•ç¼–å†™æ—¶é—´ï¼š

```typescript
// test-utils.ts - æµ‹è¯•å·¥å…·åº“
export function createMockCourse(overrides: Partial<Course> = {}): Course {
  return {
    id: faker.datatype.uuid(),
    title: faker.lorem.words(3),
    price: faker.datatype.number({ min: 10, max: 1000 }),
    createdAt: new Date(),
    ...overrides
  }
}

export function renderWithProviders(ui: React.ReactElement) {
  return render(
    <QueryClient>
      <AuthProvider>
        <Router>
          {ui}
        </Router>
      </AuthProvider>
    </QueryClient>
  )
}

// æµ‹è¯•æ¨¡æ¿ç”Ÿæˆå™¨
export function createApiTest(endpoint: string, method: 'GET' | 'POST') {
  return {
    [`${method} ${endpoint} should return success`]: async () => {
      const response = await request[method.toLowerCase()](endpoint)
      expect(response.status).toBe(200)
    },
    
    [`${method} ${endpoint} should handle errors`]: async () => {
      // æ¨¡æ‹Ÿé”™è¯¯åœºæ™¯
    }
  }
}
```

### ğŸ¤– ç­–ç•¥3ï¼šAI è¾…åŠ©æµ‹è¯•ç”Ÿæˆ

ç°åœ¨å¤§å‚æ™®éä½¿ç”¨ AI å·¥å…·ï¼š

```typescript
// åŸå‡½æ•°
export function validateEmail(email: string): boolean {
  const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/
  return regex.test(email)
}

// GitHub Copilot ç”Ÿæˆçš„æµ‹è¯•ï¼ˆå‡ ç§’é’Ÿå®Œæˆï¼‰
describe('validateEmail', () => {
  const validEmails = [
    'test@example.com',
    'user.name@domain.co.uk',
    'user+tag@example.org'
  ]
  
  const invalidEmails = [
    'invalid-email',
    '@example.com',
    'test@',
    'test..test@example.com'
  ]
  
  test.each(validEmails)('should return true for valid email: %s', (email) => {
    expect(validateEmail(email)).toBe(true)
  })
  
  test.each(invalidEmails)('should return false for invalid email: %s', (email) => {
    expect(validateEmail(email)).toBe(false)
  })
})
```

### ğŸ“¸ ç­–ç•¥4ï¼šå¿«ç…§æµ‹è¯•å‡å°‘å·¥ä½œé‡

```typescript
// å¤æ‚ç»„ä»¶ç”¨å¿«ç…§æµ‹è¯•
describe('CourseList Component', () => {
  it('renders course list correctly', () => {
    const courses = [
      createMockCourse({ title: 'ReactåŸºç¡€' }),
      createMockCourse({ title: 'Vueè¿›é˜¶' })
    ]
    
    const { container } = renderWithProviders(
      <CourseList courses={courses} />
    )
    
    // ä¸€è¡Œä»£ç æå®šå¤æ‚UIæµ‹è¯•
    expect(container.firstChild).toMatchSnapshot()
  })
  
  // åªæµ‹è¯•æ ¸å¿ƒäº¤äº’
  it('handles course selection', async () => {
    const onSelect = vi.fn()
    renderWithProviders(<CourseList courses={[]} onSelect={onSelect} />)
    
    await userEvent.click(screen.getByText('é€‰æ‹©'))
    expect(onSelect).toHaveBeenCalled()
  })
})
```

## å¤§å‚çš„å›¢é˜Ÿåˆ†å·¥

### ğŸ‘¨â€ğŸ’» å¼€å‘å·¥ç¨‹å¸ˆ (70%å¼€å‘ï¼Œ30%æµ‹è¯•)
```typescript
// è´Ÿè´£å•å…ƒæµ‹è¯•
describe('Course Business Logic', () => {
  // æµ‹è¯•æ ¸å¿ƒé€»è¾‘ï¼Œä¸æµ‹è¯•UIç»†èŠ‚
})
```

### ğŸ§ª QAå·¥ç¨‹å¸ˆ (ä¸“èŒæµ‹è¯•)
```typescript
// è´Ÿè´£é›†æˆæµ‹è¯•å’ŒE2Eæµ‹è¯•
describe('Course Purchase Flow', () => {
  // ç«¯åˆ°ç«¯æµ‹è¯•ç”¨æˆ·å®Œæ•´æµç¨‹
})
```

### ğŸ”§ å¹³å°å·¥ç¨‹å¸ˆ (æä¾›æµ‹è¯•åŸºç¡€è®¾æ–½)
```javascript
// æä¾›æµ‹è¯•å·¥å…·å’Œæ¨¡æ¿
// ç»´æŠ¤CI/CDæµæ°´çº¿
// è‡ªåŠ¨åŒ–æµ‹è¯•æŠ¥å‘Š
```

## å®é™…é¡¹ç›®ä¸­çš„æ—¶é—´åˆ†é…

### é’ˆå¯¹æ‚¨çš„æ™ºè¿œé¡¹ç›®ï¼š

```typescript
// æ—¶é—´åˆ†é…ç¤ºä¾‹
export class CourseService {
  // 1å°æ—¶å¼€å‘
  async createCourse(courseData: CreateCourseRequest): Promise<Course> {
    // æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
    const validated = await this.validateCourseData(courseData)
    const course = await this.repository.save(validated)
    await this.notifyService.sendCreationNotice(course)
    return course
  }
}

// 20åˆ†é’Ÿæµ‹è¯•ï¼ˆä½¿ç”¨å·¥å…·å’Œæ¨¡æ¿ï¼‰
describe('CourseService.createCourse', () => {
  it('creates course successfully', async () => {
    // ä½¿ç”¨é¢„è®¾çš„mockå’Œå·¥å…·
    const mockData = createMockCourseData()
    const result = await service.createCourse(mockData)
    expect(result).toMatchObject(expectedCourse)
  })
  
  it('handles validation errors', async () => {
    const invalidData = createMockCourseData({ title: '' })
    await expect(service.createCourse(invalidData)).rejects.toThrow()
  })
})
```

## ä»€ä¹ˆæ—¶å€™å¯ä»¥å°‘å†™æˆ–ä¸å†™æµ‹è¯•

### ğŸš€ å¿«é€ŸåŸå‹é˜¶æ®µ
```typescript
// éªŒè¯æƒ³æ³•çš„ä»£ç ï¼Œå¯ä»¥å…ˆä¸å†™æµ‹è¯•
function experimentalFeature() {
  // å¿«é€ŸéªŒè¯å¯è¡Œæ€§
  // ç¡®å®šæ–¹å‘åå†è¡¥æµ‹è¯•
}
```

### ğŸ”§ ä¸€æ¬¡æ€§å·¥å…·
```typescript
// æ•°æ®è¿ç§»è„šæœ¬ã€ä¸´æ—¶å·¥å…·ç­‰
function migrateOldData() {
  // ç”¨å®Œå°±åˆ çš„ä»£ç 
}
```

### ğŸ¨ çº¯å±•ç¤ºç»„ä»¶
```typescript
// æ²¡æœ‰é€»è¾‘çš„UIç»„ä»¶
function Logo({ size }: { size: number }) {
  return <img src="/logo.svg" width={size} height={size} />
}
```

## æé«˜æµ‹è¯•æ•ˆç‡çš„å·¥å…·

### 1. è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•
```bash
# ä½¿ç”¨å·¥å…·è‡ªåŠ¨ç”ŸæˆåŸºç¡€æµ‹è¯•
npx @storybook/test-runner generate src/components/Button.tsx
```

### 2. æµ‹è¯•æ•°æ®å·¥å‚
```typescript
// å‡å°‘é‡å¤çš„æµ‹è¯•æ•°æ®åˆ›å»º
export const CourseFactory = {
  build: (overrides = {}) => ({
    id: faker.datatype.uuid(),
    title: faker.lorem.words(3),
    ...overrides
  }),
  
  buildList: (count: number) => 
    Array.from({ length: count }, () => CourseFactory.build())
}
```

### 3. æ‰¹é‡æµ‹è¯•
```typescript
// ä¸€æ¬¡æµ‹è¯•å¤šç§æƒ…å†µ
const testCases = [
  { input: 'valid@email.com', expected: true },
  { input: 'invalid-email', expected: false },
  { input: '', expected: false }
]

test.each(testCases)('validateEmail(%s) should return %s', 
  ({ input, expected }) => {
    expect(validateEmail(input)).toBe(expected)
  }
)
```

## æ€»ç»“

### ğŸ¯ æ ¸å¿ƒåŸåˆ™
1. **æµ‹è¯•æ—¶é—´ä¸åº”è¶…è¿‡å¼€å‘æ—¶é—´**
2. **æŒ‰ä»·å€¼å’Œé£é™©åˆ†é…æµ‹è¯•èµ„æº**
3. **ä½¿ç”¨å·¥å…·å’Œæ¨¡æ¿å‡å°‘é‡å¤å·¥ä½œ**
4. **å›¢é˜Ÿåˆ†å·¥ï¼Œä¸æ˜¯æ‰€æœ‰æµ‹è¯•éƒ½æ˜¯å¼€å‘å†™**

### ğŸ“‹ å®ç”¨å»ºè®®
- âœ… **æ ¸å¿ƒä¸šåŠ¡é€»è¾‘** - å¿…é¡»æµ‹è¯•ï¼Œå ç”¨30%æ—¶é—´
- âš ï¸ **å¤æ‚UIäº¤äº’** - é€‰æ‹©æ€§æµ‹è¯•ï¼Œå¿«ç…§+å…³é”®äº¤äº’
- âŒ **ç®€å•å±•ç¤ºç»„ä»¶** - å¯ä»¥è·³è¿‡
- ğŸ¤– **ä½¿ç”¨AIå·¥å…·** - è‡ªåŠ¨ç”ŸæˆåŸºç¡€æµ‹è¯•
- ğŸ­ **å»ºç«‹æµ‹è¯•å·¥å‚** - å‡å°‘é‡å¤å·¥ä½œ

### ğŸ’¡ è®°ä½
**æµ‹è¯•æ˜¯ä¸ºäº†æé«˜å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ï¼Œè€Œä¸æ˜¯ä¸ºäº†æµ‹è¯•è€Œæµ‹è¯•ã€‚**

å¦‚æœæµ‹è¯•è®©ä½ çš„å¼€å‘å˜æ…¢äº†ï¼Œé‚£è¯´æ˜æµ‹è¯•ç­–ç•¥éœ€è¦è°ƒæ•´ï¼Œè€Œä¸æ˜¯æ”¾å¼ƒæµ‹è¯•ã€‚

åˆç†çš„æµ‹è¯•åº”è¯¥æ˜¯ï¼š
- **å¿«é€Ÿç¼–å†™** - æœ‰å·¥å…·æ”¯æŒ
- **å¿«é€Ÿè¿è¡Œ** - å•å…ƒæµ‹è¯•ç§’çº§å®Œæˆ  
- **é«˜ä»·å€¼** - èƒ½æŠ“ä½çœŸæ­£çš„bug
- **ä½ç»´æŠ¤** - ä¸ç»å¸¸å› ä¸ºé‡æ„è€Œä¿®æ”¹
