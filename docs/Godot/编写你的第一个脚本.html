<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Godot/编写你的第一个脚本" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">编写你的第一个脚本 | Cruldra</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/notes3/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/notes3/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/notes3/docs/Godot/编写你的第一个脚本"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="编写你的第一个脚本 | Cruldra"><meta data-rh="true" name="description" content="在本节课中，你将编写你的第一个脚本，让 Godot 图标转圈。正如我们在 简介 中提到的，我们假设你已经具备编程基础。"><meta data-rh="true" property="og:description" content="在本节课中，你将编写你的第一个脚本，让 Godot 图标转圈。正如我们在 简介 中提到的，我们假设你已经具备编程基础。"><link data-rh="true" rel="icon" href="/notes3/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/notes3/docs/Godot/编写你的第一个脚本"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/notes3/docs/Godot/编写你的第一个脚本" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/notes3/docs/Godot/编写你的第一个脚本" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"编写你的第一个脚本","item":"https://your-docusaurus-site.example.com/notes3/docs/Godot/编写你的第一个脚本"}]}</script><link rel="alternate" type="application/rss+xml" href="/notes3/blog/rss.xml" title="Cruldra RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/notes3/blog/atom.xml" title="Cruldra Atom Feed"><link rel="stylesheet" href="/notes3/assets/css/styles.48a6e6d2.css">
<script src="/notes3/assets/js/runtime~main.04368516.js" defer="defer"></script>
<script src="/notes3/assets/js/main.dcb0ce96.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme",window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.documentElement.setAttribute("data-theme-choice","system"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/notes3/img/logo.svg"><style data-mantine-styles="classes">@media (max-width: 35.99375em) {.mantine-visible-from-xs {display: none !important;}}@media (min-width: 36em) {.mantine-hidden-from-xs {display: none !important;}}@media (max-width: 47.99375em) {.mantine-visible-from-sm {display: none !important;}}@media (min-width: 48em) {.mantine-hidden-from-sm {display: none !important;}}@media (max-width: 61.99375em) {.mantine-visible-from-md {display: none !important;}}@media (min-width: 62em) {.mantine-hidden-from-md {display: none !important;}}@media (max-width: 74.99375em) {.mantine-visible-from-lg {display: none !important;}}@media (min-width: 75em) {.mantine-hidden-from-lg {display: none !important;}}@media (max-width: 87.99375em) {.mantine-visible-from-xl {display: none !important;}}@media (min-width: 88em) {.mantine-hidden-from-xl {display: none !important;}}</style><div role="region" aria-label="Skip to main content"><a class="skipToContent_aA1M" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/notes3/"><div class="navbar__logo"><img src="/notes3/img/logo.svg" alt="My Site Logo" class="themedComponent_E3Xm themedComponent--light_DVqC"><img src="/notes3/img/logo.svg" alt="My Site Logo" class="themedComponent_E3Xm themedComponent--dark_B_L3"></div><b class="navbar__title text--truncate">Cruldra</b></a><a class="navbar__item navbar__link" href="/notes3/docs/category/设计模式">JVM</a><a class="navbar__item navbar__link" href="/notes3/docs/category/css">前端</a><a class="navbar__item navbar__link" href="/notes3/docs/category/astrbot">工具</a><a class="navbar__item navbar__link" href="/notes3/docs/category/ai电竞酒店">个人</a><a class="navbar__item navbar__link" href="/notes3/docs/AI/ACP/架构">AI</a><a class="navbar__item navbar__link" href="/notes3/docs/category/内置模块">Python</a><a class="navbar__item navbar__link" href="/notes3/docs/category/actix-web">Rust</a><a class="navbar__item navbar__link" href="/notes3/docs/category/数据库系统">软件工程</a><a class="navbar__item navbar__link" href="/notes3/docs/category/上古卷轴5">游戏</a><a class="navbar__item navbar__link" href="/notes3/docs/Go/Go-Python-Java三语言全方位对比">Go</a><a class="navbar__item navbar__link" href="/notes3/docs/Hardware/GPU工作原理">硬件</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/notes3/docs/Godot/功能列表">Godot</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbarSearchContainer_PufJ"><div class="navbar__search searchBarContainer_r6C1" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_G4_y" value=""><div class="loadingRing__Zfe searchBarLoadingRing_f0pn"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_ctfR"><div class="docsWrapper_ByIB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_KwvU" type="button"></button><div class="docRoot_hD6z"><aside class="theme-doc-sidebar-container docSidebarContainer_KuHC"><div class="sidebarViewport_LCjr"><div class="sidebar_L77d"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_VYAF"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/Godot/功能列表"><span title="功能列表" class="linkLabel__RqX">功能列表</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/Godot/核心概念概览"><span title="核心概念概览" class="linkLabel__RqX">核心概念概览</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/Godot/初识编辑器界面"><span title="初识编辑器界面" class="linkLabel__RqX">初识编辑器界面</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/Godot/学习新特性"><span title="学习新特性" class="linkLabel__RqX">学习新特性</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/Godot/设计理念"><span title="设计理念" class="linkLabel__RqX">设计理念</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/Godot/节点与场景"><span title="节点与场景" class="linkLabel__RqX">节点与场景</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/Godot/创建场景实例"><span title="创建场景实例" class="linkLabel__RqX">创建场景实例</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/Godot/脚本语言"><span title="脚本语言" class="linkLabel__RqX">脚本语言</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/notes3/docs/Godot/编写你的第一个脚本"><span title="编写你的第一个脚本" class="linkLabel__RqX">编写你的第一个脚本</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/Godot/监听玩家输入"><span title="监听玩家输入" class="linkLabel__RqX">监听玩家输入</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/Godot/使用信号"><span title="使用信号" class="linkLabel__RqX">使用信号</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_NhDl menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/notes3/docs/Godot/GodotScript/Lesson_1_What_Code_Is_Like"><span title="GodotScript" class="categoryLinkLabel_FHN4">GodotScript</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/Godot/Godot简介"><span title="Godot简介" class="linkLabel__RqX">Godot简介</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/Godot/Node、Sprint、Area这三个2d类的区别"><span title="Node、Sprint、Area这三个2d类的区别" class="linkLabel__RqX">Node、Sprint、Area这三个2d类的区别</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/Godot/介绍"><span title="介绍" class="linkLabel__RqX">介绍</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/Godot/使用GDScript学习编程"><span title="使用GDScript学习编程" class="linkLabel__RqX">使用GDScript学习编程</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/Godot/发布策略"><span title="发布策略" class="linkLabel__RqX">发布策略</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/Godot/常见问题"><span title="常见问题" class="linkLabel__RqX">常见问题</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_NhDl menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/notes3/docs/Godot/第一个2D游戏/简介"><span title="第一个2D游戏" class="categoryLinkLabel_FHN4">第一个2D游戏</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes3/docs/Godot/简介"><span title="简介" class="linkLabel__RqX">简介</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_NhDl menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/notes3/docs/Godot/遇到的问题/保存场景时遇到性能警告"><span title="遇到的问题" class="categoryLinkLabel_FHN4">遇到的问题</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_WxcZ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_Zd2x"><div class="docItemContainer_EEW4"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_xL_w" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/notes3/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_zA1U"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">编写你的第一个脚本</span></li></ul></nav><div class="tocCollapsible_aZGz theme-doc-toc-mobile tocMobile_ShCt"><button type="button" class="clean-btn tocCollapsibleButton_fxzH">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>编写你的第一个脚本</h1></header><p>在本节课中，你将编写你的第一个脚本，让 Godot 图标转圈。正如我们在 <a class="" href="/notes3/docs/Godot/Godot简介">简介</a> 中提到的，我们假设你已经具备编程基础。</p>
<p>本教程使用 GDScript 编写，为了方便起见，每个代码块的另一个选项卡中都包含等效的 C# 代码。</p>
<p><img decoding="async" loading="lazy" src="https://docs.godotengine.org/en/stable/_images/scripting_first_script_rotating_godot.gif" alt="Rotating Godot" class="img_kBI4"></p>
<blockquote>
<p><strong>另见</strong></p>
<p>要了解有关 GDScript 及其关键字、语法的更多信息，请前往 <a href="https://docs.godotengine.org/en/stable/tutorials/scripting/gdscript/index.html" target="_blank" rel="noopener noreferrer" class="">GDScript</a> 部分。要了解有关 C# 的更多信息，请前往 <a href="https://docs.godotengine.org/en/stable/tutorials/scripting/c_sharp/index.html" target="_blank" rel="noopener noreferrer" class="">C#/.NET</a> 部分。</p>
</blockquote>
<h2 class="anchor anchorTargetStickyNavbar_aDle" id="项目设置-project-setup">项目设置 (Project setup)<a href="#项目设置-project-setup" class="hash-link" aria-label="Direct link to 项目设置 (Project setup)" title="Direct link to 项目设置 (Project setup)" translate="no">​</a></h2>
<p>请 <a href="https://docs.godotengine.org/en/stable/tutorials/editor/project_manager.html" target="_blank" rel="noopener noreferrer" class="">创建一个新项目</a> 以从头开始。你的项目应该包含一张图片：Godot 图标，我们经常在社区中用它来制作原型。</p>
<p><img decoding="async" loading="lazy" src="https://docs.godotengine.org/en/stable/_images/scripting_first_script_icon.svg" alt="Godot Icon" class="img_kBI4"></p>
<p>我们需要创建一个 <code>Sprite2D</code> 节点来在游戏中显示它。在 “场景” 面板中，点击 <strong>其它节点 (Other Node)</strong> 按钮。</p>
<p><img decoding="async" loading="lazy" src="https://docs.godotengine.org/en/stable/_images/scripting_first_script_click_other_node.webp" alt="Click Other Node" class="img_kBI4"></p>
<p>在搜索栏中输入 “Sprite2D” 以过滤节点，然后双击 <code>Sprite2D</code> 以创建该节点。</p>
<p><img decoding="async" loading="lazy" src="https://docs.godotengine.org/en/stable/_images/scripting_first_script_add_sprite_node.webp" alt="Add Sprite Node" class="img_kBI4"></p>
<p>现在你的场景选项卡中应该只有一个 <code>Sprite2D</code> 节点。</p>
<p><img decoding="async" loading="lazy" src="https://docs.godotengine.org/en/stable/_images/scripting_first_script_scene_tree.webp" alt="Scene Tree" class="img_kBI4"></p>
<p><code>Sprite2D</code> 节点需要一个纹理 (texture) 才能显示。在右侧的检查器中，你可以看到 <code>Texture</code> 属性显示为 <code>&lt;空&gt;</code>。要显示 Godot 图标，请点击并从 “文件系统 (FileSystem)” 面板中将 <code>icon.svg</code> 文件拖动到 <code>Texture</code> 插槽上。</p>
<p><img decoding="async" loading="lazy" src="https://docs.godotengine.org/en/stable/_images/scripting_first_script_setting_texture.webp" alt="Setting Texture" class="img_kBI4"></p>
<blockquote>
<p><strong>注意</strong></p>
<p>你可以通过将图像拖放到视口中来自动创建 <code>Sprite2D</code> 节点。</p>
</blockquote>
<p>然后，在视口中点击并拖动图标，将其放在游戏视图的中心。</p>
<p><img decoding="async" loading="lazy" src="https://docs.godotengine.org/en/stable/_images/scripting_first_script_centering_sprite.webp" alt="Centering Sprite" class="img_kBI4"></p>
<h2 class="anchor anchorTargetStickyNavbar_aDle" id="创建新脚本-creating-a-new-script">创建新脚本 (Creating a new script)<a href="#创建新脚本-creating-a-new-script" class="hash-link" aria-label="Direct link to 创建新脚本 (Creating a new script)" title="Direct link to 创建新脚本 (Creating a new script)" translate="no">​</a></h2>
<p>要创建新脚本并将其附加到我们的节点，请在场景面板中右键点击 <code>Sprite2D</code> 并选择 <strong>附加脚本 (Attach Script)</strong>。</p>
<p><img decoding="async" loading="lazy" src="https://docs.godotengine.org/en/stable/_images/scripting_first_script_attach_script.webp" alt="Attach Script" class="img_kBI4"></p>
<p>出现 “附加节点脚本” 窗口。它允许你选择脚本语言和文件路径，以及其他选项。</p>
<p>将 <strong>模板 (Template)</strong> 字段从 <code>Node: Default</code> 更改为 <code>Object: Empty</code>，以便从空文件开始。保持其他选项为默认值，然后点击 <strong>创建 (Create)</strong> 按钮来创建脚本。</p>
<p><img decoding="async" loading="lazy" src="https://docs.godotengine.org/en/stable/_images/scripting_first_script_attach_node_script.webp" alt="Attach Node Script" class="img_kBI4"></p>
<blockquote>
<p><strong>注意</strong></p>
<p>C# 脚本名称需要与其类名匹配。在这种情况下，你应该将文件命名为 <code>MySprite2D.cs</code>。</p>
</blockquote>
<p>脚本工作区应该会出现，并打开了新的 <code>sprite_2d.gd</code> 文件，其中包含以下代码行：</p>
<div class="language-gdscript codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-gdscript codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token plain">extends Sprite2D</span><br></span></code></pre></div></div>
<div class="language-csharp codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-csharp codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token plain">using Godot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public partial class MySprite2D : Sprite2D</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>每个 GDScript 文件隐式地都是一个类。<code>extends</code> 关键字定义了此脚本继承或扩展的类。在这种情况下，它是 <code>Sprite2D</code>，这意味着我们的脚本将能够访问 <code>Sprite2D</code> 节点的所有属性和函数，包括它所扩展的类，如 <code>Node2D</code>、<code>CanvasItem</code> 和 <code>Node</code>。</p>
<blockquote>
<p><strong>注意</strong></p>
<p>在 GDScript 中，如果你省略带有 <code>extends</code> 关键字的行，你的类将隐式扩展 <a href="https://docs.godotengine.org/en/stable/classes/class_refcounted.html" target="_blank" rel="noopener noreferrer" class="">RefCounted</a>，Godot 使用它来管理应用程序的内存。</p>
</blockquote>
<p>继承的属性包括你在检查器面板中看到的那些，比如我们节点的 <code>texture</code>。</p>
<blockquote>
<p><strong>注意</strong></p>
<p>默认情况下，检查器以 “首字母大写 (Title Case)” 形式显示节点的属性，单词首字母大写并用空格分隔。在 GDScript 代码中，这些属性采用 “蛇形命名法 (snake_case)”，即小写单词用下划线分隔。</p>
</blockquote>
<p>你可以将鼠标悬停在检查器中的任何属性名称上，以查看说明及其在代码中的标识符。</p>
<h2 class="anchor anchorTargetStickyNavbar_aDle" id="你好世界-hello-world">你好，世界！ (Hello, world!)<a href="#你好世界-hello-world" class="hash-link" aria-label="Direct link to 你好，世界！ (Hello, world!)" title="Direct link to 你好，世界！ (Hello, world!)" translate="no">​</a></h2>
<p>我们的脚本目前什么都不做。让我们先让它在底部的 “输出 (Output)” 面板中打印文本 “Hello, world!”。</p>
<p>将以下代码添加到你的脚本中：</p>
<div class="language-gdscript codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-gdscript codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token plain">func _init():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	print(&quot;Hello, world!&quot;)</span><br></span></code></pre></div></div>
<div class="language-csharp codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-csharp codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token plain">public MySprite2D()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GD.Print(&quot;Hello, world!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>让我们分解一下。<code>func</code> 关键字定义了一个名为 <code>_init</code> 的新函数。这是我们类的构造函数的特殊名称。如果你定义了这个函数，引擎在内存中创建每个对象或节点时都会调用 <code>_init()</code>。</p>
<blockquote>
<p><strong>注意</strong></p>
<p>GDScript 是一种基于缩进的语言。显示 <code>print()</code> 的行首的制表符 (tab) 是代码运行所必需的。如果你省略它或没有正确缩进行，编辑器会将其高亮显示为红色并显示以下错误信息：“需要缩进块 (Indented block expected)”。</p>
</blockquote>
<p>如果尚未保存，请将场景保存为 <code>sprite_2d.tscn</code>，然后按 <strong>F6</strong> (macOS 为 <strong>Cmd + R</strong>) 运行它。查看展开的底部 “输出” 面板。它应该显示 “Hello, world!”。</p>
<p><img decoding="async" loading="lazy" src="https://docs.godotengine.org/en/stable/_images/scripting_first_script_print_hello_world.webp" alt="Print Hello World" class="img_kBI4"></p>
<p>删除 <code>_init()</code> 函数，只保留 <code>extends Sprite2D</code> 行。</p>
<h2 class="anchor anchorTargetStickyNavbar_aDle" id="转圈圈-turning-around">转圈圈 (Turning around)<a href="#转圈圈-turning-around" class="hash-link" aria-label="Direct link to 转圈圈 (Turning around)" title="Direct link to 转圈圈 (Turning around)" translate="no">​</a></h2>
<p>是时候让我们的节点移动和旋转了。为此，我们要在脚本中添加两个成员变量：移动速度（以像素/秒为单位）和角速度（以弧度/秒为单位）。在 <code>extends Sprite2D</code> 行之后添加以下内容。</p>
<div class="language-gdscript codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-gdscript codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token plain">var speed = 400</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var angular_speed = PI</span><br></span></code></pre></div></div>
<div class="language-csharp codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-csharp codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token plain">private int _speed = 400;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private float _angularSpeed = Mathf.Pi;</span><br></span></code></pre></div></div>
<p>成员变量位于脚本顶部，在任何 “extends” 行之后，但在函数之前。每个附加了此脚本的节点实例都将拥有自己的 <code>speed</code> 和 <code>angular_speed</code> 属性副本。</p>
<blockquote>
<p><strong>注意</strong></p>
<p>Godot 中的角度默认使用弧度，但如果你更喜欢用角度计算，也有内置的函数和属性可用。</p>
</blockquote>
<p>为了移动我们的图标，我们需要在游戏循环中每帧更新其位置和旋转。我们可以使用 <code>Node</code> 类的 <code>_process()</code> 虚函数。如果你在任何扩展了 <code>Node</code> 类的类（如 <code>Sprite2D</code>）中定义了它，Godot 都会在每帧调用该函数，并传递一个名为 <code>delta</code> 的参数，即自上一帧以来经过的时间。</p>
<blockquote>
<p><strong>注意</strong></p>
<p>游戏通过每秒渲染许多图像（每个称为一帧）并在循环中执行来工作。我们以每秒帧数 (FPS) 来衡量游戏生成图像的速率。大多数游戏的目标是 60 FPS，尽管你可能会在较慢的移动设备上看到 30 FPS，或者在虚拟现实游戏中看到 90 到 240 FPS。</p>
<p>引擎和游戏开发者尽力以恒定的时间间隔更新游戏世界并渲染图像，但帧渲染时间总是存在微小波动。这就是为什么引擎为我们提供了这个 <code>delta</code> 时间值，使得我们的运动与帧率无关。</p>
</blockquote>
<p>在脚本底部定义该函数：</p>
<div class="language-gdscript codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-gdscript codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token plain">func _process(delta):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	rotation += angular_speed * delta</span><br></span></code></pre></div></div>
<div class="language-csharp codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-csharp codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token plain">public override void _Process(double delta)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Rotation += _angularSpeed * (float)delta;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><code>func</code> 关键字定义了一个新函数。在它之后，我们必须写出函数的名称以及它在括号中接受的参数。冒号结束定义，随后的缩进块是函数的内容或指令。</p>
<blockquote>
<p><strong>注意</strong></p>
<p>注意 <code>_process()</code> 和 <code>_init()</code> 一样，都是以下划线开头的。按照惯例，Godot 的虚函数（即你可以重写以与引擎通信的内置函数）都以下划线开头。</p>
</blockquote>
<p>函数内部的行 <code>rotation += angular_speed * delta</code> 每帧都会增加我们精灵的旋转。这里，<code>rotation</code> 是继承自 <code>Node2D</code> 类（<code>Sprite2D</code> 扩展自该类）的一个属性。它控制我们节点的旋转并使用弧度。</p>
<blockquote>
<p><strong>提示</strong></p>
<p>在代码编辑器中，你可以按住 <strong>Ctrl</strong> 点击（macOS 为 <strong>Cmd + 点击</strong>）任何内置属性或函数（如 <code>position</code>、<code>rotation</code> 或 <code>_process</code>），即可在新的选项卡中打开相应的文档。</p>
</blockquote>
<p>运行场景，看看 Godot 图标是如何原地旋转的。</p>
<p><img decoding="async" loading="lazy" src="https://docs.godotengine.org/en/stable/_images/scripting_first_script_godot_turning_in_place.gif" alt="Godot Turning In Place" class="img_kBI4"></p>
<blockquote>
<p><strong>注意</strong></p>
<p>在 C# 中，注意 <code>_Process()</code> 接受的 <code>delta</code> 参数是 <code>double</code> 类型。因此，当我们将它应用于旋转时，需要将其转换为 <code>float</code>。</p>
</blockquote>
<h3 class="anchor anchorTargetStickyNavbar_aDle" id="向前移动">向前移动<a href="#向前移动" class="hash-link" aria-label="Direct link to 向前移动" title="Direct link to 向前移动" translate="no">​</a></h3>
<p>现在让节点移动。在 <code>_process()</code> 函数内部添加以下两行，确保新行的缩进方式与之前的 <code>rotation += angular_speed * delta</code> 行相同。</p>
<div class="language-gdscript codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-gdscript codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token plain">var velocity = Vector2.UP.rotated(rotation) * speed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">position += velocity * delta</span><br></span></code></pre></div></div>
<div class="language-csharp codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-csharp codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token plain">var velocity = Vector2.Up.Rotated(Rotation) * _speed;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Position += velocity * (float)delta;</span><br></span></code></pre></div></div>
<p>正如我们已经看到的，<code>var</code> 关键字定义了一个新变量。如果你把它放在脚本顶部，它定义的是类的一个属性。在函数内部，它定义的是局部变量：它仅在函数作用域内存在。</p>
<p>我们定义了一个名为 <code>velocity</code> 的局部变量，它是一个代表方向和速度的 2D 向量。为了让节点向前移动，我们从 <code>Vector2</code> 类的常量 <code>Vector2.UP</code>（一个指向上的向量）开始，通过调用 <code>Vector2</code> 的 <code>rotated()</code> 方法来旋转它。这个表达式 <code>Vector2.UP.rotated(rotation)</code> 是一个相对于我们图标指向前方的向量。乘以我们的 <code>speed</code> 属性，它就给了我们一个可以用来向前移动节点的物理速度。</p>
<p>我们将 <code>velocity * delta</code> 加到节点的 <code>position</code> 上来移动它。位置本身是 <a href="https://docs.godotengine.org/en/stable/classes/class_vector2.html" target="_blank" rel="noopener noreferrer" class="">Vector2</a> 类型，这是 Godot 中表示 2D 向量的内置类型。</p>
<p>运行场景，看看 Godot 头像如何转圈跑。</p>
<p><img decoding="async" loading="lazy" src="https://docs.godotengine.org/en/stable/_images/scripting_first_script_rotating_godot.gif" alt="Rotating Godot" class="img_kBI4"></p>
<blockquote>
<p><strong>注意</strong></p>
<p>这样移动节点不会考虑与墙壁或地板的碰撞。在 <a href="https://docs.godotengine.org/en/stable/getting_started/first_2d_game/index.html" target="_blank" rel="noopener noreferrer" class="">你的第一个 2D 游戏</a> 中，你将学习另一种在检测碰撞的同时移动物体的方法。</p>
</blockquote>
<p>我们的节点目前是自动移动的。在下一部分 <a class="" href="/notes3/docs/Godot/监听玩家输入">监听玩家输入</a> 中，我们将使用玩家输入来控制它。</p>
<h2 class="anchor anchorTargetStickyNavbar_aDle" id="完整脚本">完整脚本<a href="#完整脚本" class="hash-link" aria-label="Direct link to 完整脚本" title="Direct link to 完整脚本" translate="no">​</a></h2>
<p>这里提供完整的 <code>sprite_2d.gd</code> 文件供参考。</p>
<div class="language-gdscript codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-gdscript codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token plain">extends Sprite2D</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var speed = 400</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var angular_speed = PI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func _process(delta):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	rotation += angular_speed * delta</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	var velocity = Vector2.UP.rotated(rotation) * speed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	position += velocity * delta</span><br></span></code></pre></div></div>
<div class="language-csharp codeBlockContainer_FVab theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_oMSL"><pre tabindex="0" class="prism-code language-csharp codeBlock_MTmK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_KEkQ"><span class="token-line" style="color:#393A34"><span class="token plain">using Godot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public partial class MySprite2D : Sprite2D</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int _speed = 400;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private float _angularSpeed = Mathf.Pi;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public override void _Process(double delta)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Rotation += _angularSpeed * (float)delta;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var velocity = Vector2.Up.Rotated(Rotation) * _speed;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Position += velocity * (float)delta;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_iDCr"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Godot/编写你的第一个脚本.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_c0mv" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mxtt"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/notes3/docs/Godot/脚本语言"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">脚本语言</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/notes3/docs/Godot/监听玩家输入"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">监听玩家输入</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_r83r thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#项目设置-project-setup" class="table-of-contents__link toc-highlight">项目设置 (Project setup)</a></li><li><a href="#创建新脚本-creating-a-new-script" class="table-of-contents__link toc-highlight">创建新脚本 (Creating a new script)</a></li><li><a href="#你好世界-hello-world" class="table-of-contents__link toc-highlight">你好，世界！ (Hello, world!)</a></li><li><a href="#转圈圈-turning-around" class="table-of-contents__link toc-highlight">转圈圈 (Turning around)</a><ul><li><a href="#向前移动" class="table-of-contents__link toc-highlight">向前移动</a></li></ul></li><li><a href="#完整脚本" class="table-of-contents__link toc-highlight">完整脚本</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>