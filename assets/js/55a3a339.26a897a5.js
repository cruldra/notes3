"use strict";(self.webpackChunknotes_3=self.webpackChunknotes_3||[]).push([[37773],{52472:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>d,frontMatter:()=>l,metadata:()=>s,toc:()=>p});const s=JSON.parse('{"id":"AI/\u63d0\u793a\u8bcd\u5de5\u7a0b/DSPy/\u793a\u4f8b/llms_txt_generation","title":"\u4f7f\u7528 DSPy \u751f\u6210\u7528\u4e8e\u4ee3\u7801\u6587\u6863\u7684 llms.txt","description":"\u672c\u6559\u7a0b\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528 DSPy \u81ea\u52a8\u4e3a DSPy \u4ed3\u5e93\u672c\u8eab\u751f\u6210\u4e00\u4e2a llms.txt \u6587\u4ef6\u3002llms.txt \u6807\u51c6\u63d0\u4f9b\u4e86\u5bf9 LLM \u53cb\u597d\u7684\u6587\u6863\uff0c\u5e2e\u52a9 AI \u7cfb\u7edf\u66f4\u597d\u5730\u7406\u89e3\u4ee3\u7801\u5e93\u3002","source":"@site/docs/AI/\u63d0\u793a\u8bcd\u5de5\u7a0b/DSPy/\u793a\u4f8b/llms_txt_generation.md","sourceDirName":"AI/\u63d0\u793a\u8bcd\u5de5\u7a0b/DSPy/\u793a\u4f8b","slug":"/AI/\u63d0\u793a\u8bcd\u5de5\u7a0b/DSPy/\u793a\u4f8b/llms_txt_generation","permalink":"/notes3/docs/AI/\u63d0\u793a\u8bcd\u5de5\u7a0b/DSPy/\u793a\u4f8b/llms_txt_generation","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/AI/\u63d0\u793a\u8bcd\u5de5\u7a0b/DSPy/\u793a\u4f8b/llms_txt_generation.md","tags":[],"version":"current","frontMatter":{},"sidebar":"ai","previous":{"title":"\u4f7f\u7528 DSPy \u6784\u5efa\u521b\u610f\u6587\u672c AI \u6e38\u620f","permalink":"/notes3/docs/AI/\u63d0\u793a\u8bcd\u5de5\u7a0b/DSPy/\u793a\u4f8b/ai_text_game"},"next":{"title":"DSPy \u8bad\u7ec3\u6d41\u7a0b\u8be6\u89e3 (scripts\\\\train_litreview_dspy.py)","permalink":"/notes3/docs/AI/\u63d0\u793a\u8bcd\u5de5\u7a0b/DSPy/\u793a\u4f8b/train_litreview_dspy\u8bad\u7ec3\u8fc7\u7a0b\u8be6\u89e3"}}');var r=t(23420),i=t(54213);const l={},o="\u4f7f\u7528 DSPy \u751f\u6210\u7528\u4e8e\u4ee3\u7801\u6587\u6863\u7684 llms.txt",a={},p=[{value:"\u4ec0\u4e48\u662f llms.txt\uff1f",id:"\u4ec0\u4e48\u662f-llmstxt",level:2},{value:"\u6784\u5efa\u4e00\u4e2a\u7528\u4e8e\u751f\u6210 llms.txt \u7684 DSPy \u7a0b\u5e8f",id:"\u6784\u5efa\u4e00\u4e2a\u7528\u4e8e\u751f\u6210-llmstxt-\u7684-dspy-\u7a0b\u5e8f",level:2},{value:"\u7b2c 1 \u6b65\uff1a\u5b9a\u4e49\u6211\u4eec\u7684\u7b7e\u540d (Signatures)",id:"\u7b2c-1-\u6b65\u5b9a\u4e49\u6211\u4eec\u7684\u7b7e\u540d-signatures",level:3},{value:"\u7b2c 2 \u6b65\uff1a\u521b\u5efa\u4ed3\u5e93\u5206\u6790\u5668\u6a21\u5757",id:"\u7b2c-2-\u6b65\u521b\u5efa\u4ed3\u5e93\u5206\u6790\u5668\u6a21\u5757",level:3},{value:"\u7b2c 3 \u6b65\uff1a\u6536\u96c6\u4ed3\u5e93\u4fe1\u606f",id:"\u7b2c-3-\u6b65\u6536\u96c6\u4ed3\u5e93\u4fe1\u606f",level:3},{value:"\u7b2c 4 \u6b65\uff1a\u914d\u7f6e DSPy \u5e76\u751f\u6210 llms.txt",id:"\u7b2c-4-\u6b65\u914d\u7f6e-dspy-\u5e76\u751f\u6210-llmstxt",level:3},{value:"\u9884\u671f\u8f93\u51fa\u7ed3\u6784",id:"\u9884\u671f\u8f93\u51fa\u7ed3\u6784",level:2},{value:"\u4e0b\u4e00\u6b65",id:"\u4e0b\u4e00\u6b65",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"\u4f7f\u7528-dspy-\u751f\u6210\u7528\u4e8e\u4ee3\u7801\u6587\u6863\u7684-llmstxt",children:"\u4f7f\u7528 DSPy \u751f\u6210\u7528\u4e8e\u4ee3\u7801\u6587\u6863\u7684 llms.txt"})}),"\n",(0,r.jsxs)(n.p,{children:["\u672c\u6559\u7a0b\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528 DSPy \u81ea\u52a8\u4e3a DSPy \u4ed3\u5e93\u672c\u8eab\u751f\u6210\u4e00\u4e2a ",(0,r.jsx)(n.code,{children:"llms.txt"})," \u6587\u4ef6\u3002",(0,r.jsx)(n.code,{children:"llms.txt"})," \u6807\u51c6\u63d0\u4f9b\u4e86\u5bf9 LLM \u53cb\u597d\u7684\u6587\u6863\uff0c\u5e2e\u52a9 AI \u7cfb\u7edf\u66f4\u597d\u5730\u7406\u89e3\u4ee3\u7801\u5e93\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u4ec0\u4e48\u662f-llmstxt",children:"\u4ec0\u4e48\u662f llms.txt\uff1f"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"llms.txt"})," \u662f\u4e00\u4e2a\u63d0\u8bae\u7684\u6807\u51c6\uff0c\u7528\u4e8e\u63d0\u4f9b\u5173\u4e8e\u9879\u76ee\u7684\u7ed3\u6784\u5316\u3001LLM \u53cb\u597d\u7684\u6587\u6863\u3002\u5b83\u901a\u5e38\u5305\u62ec\uff1a"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u9879\u76ee\u6982\u8ff0\u548c\u76ee\u7684"}),"\n",(0,r.jsx)(n.li,{children:"\u5173\u952e\u6982\u5ff5\u548c\u672f\u8bed"}),"\n",(0,r.jsx)(n.li,{children:"\u67b6\u6784\u548c\u7ed3\u6784"}),"\n",(0,r.jsx)(n.li,{children:"\u4f7f\u7528\u793a\u4f8b"}),"\n",(0,r.jsx)(n.li,{children:"\u91cd\u8981\u6587\u4ef6\u548c\u76ee\u5f55"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u6784\u5efa\u4e00\u4e2a\u7528\u4e8e\u751f\u6210-llmstxt-\u7684-dspy-\u7a0b\u5e8f",children:"\u6784\u5efa\u4e00\u4e2a\u7528\u4e8e\u751f\u6210 llms.txt \u7684 DSPy \u7a0b\u5e8f"}),"\n",(0,r.jsxs)(n.p,{children:["\u8ba9\u6211\u4eec\u521b\u5efa\u4e00\u4e2a DSPy \u7a0b\u5e8f\u6765\u5206\u6790\u4ed3\u5e93\u5e76\u751f\u6210\u5168\u9762\u7684 ",(0,r.jsx)(n.code,{children:"llms.txt"})," \u6587\u6863\u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"\u7b2c-1-\u6b65\u5b9a\u4e49\u6211\u4eec\u7684\u7b7e\u540d-signatures",children:"\u7b2c 1 \u6b65\uff1a\u5b9a\u4e49\u6211\u4eec\u7684\u7b7e\u540d (Signatures)"}),"\n",(0,r.jsx)(n.p,{children:"\u9996\u5148\uff0c\u6211\u4eec\u5c06\u5b9a\u4e49\u7528\u4e8e\u6587\u6863\u751f\u6210\u4e0d\u540c\u65b9\u9762\u7684\u7b7e\u540d\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import dspy\nfrom typing import List\n\nclass AnalyzeRepository(dspy.Signature):\n    """\u5206\u6790\u4ed3\u5e93\u7ed3\u6784\u5e76\u8bc6\u522b\u5173\u952e\u7ec4\u4ef6\u3002"""\n    repo_url: str = dspy.InputField(desc="GitHub \u4ed3\u5e93 URL")\n    file_tree: str = dspy.InputField(desc="\u4ed3\u5e93\u6587\u4ef6\u7ed3\u6784")\n    readme_content: str = dspy.InputField(desc="README.md \u5185\u5bb9")\n    \n    project_purpose: str = dspy.OutputField(desc="\u9879\u76ee\u7684\u4e3b\u8981\u76ee\u7684\u548c\u76ee\u6807")\n    key_concepts: list[str] = dspy.OutputField(desc="\u91cd\u8981\u6982\u5ff5\u548c\u672f\u8bed\u5217\u8868")\n    architecture_overview: str = dspy.OutputField(desc="\u9ad8\u5c42\u67b6\u6784\u63cf\u8ff0")\n\nclass AnalyzeCodeStructure(dspy.Signature):\n    """\u5206\u6790\u4ee3\u7801\u7ed3\u6784\u4ee5\u8bc6\u522b\u91cd\u8981\u76ee\u5f55\u548c\u6587\u4ef6\u3002"""\n    file_tree: str = dspy.InputField(desc="\u4ed3\u5e93\u6587\u4ef6\u7ed3\u6784")\n    package_files: str = dspy.InputField(desc="\u5173\u952e\u5305\u548c\u914d\u7f6e\u6587\u4ef6")\n    \n    important_directories: list[str] = dspy.OutputField(desc="\u5173\u952e\u76ee\u5f55\u53ca\u5176\u7528\u9014")\n    entry_points: list[str] = dspy.OutputField(desc="\u4e3b\u8981\u5165\u53e3\u70b9\u548c\u91cd\u8981\u6587\u4ef6")\n    development_info: str = dspy.OutputField(desc="\u5f00\u53d1\u8bbe\u7f6e\u548c\u5de5\u4f5c\u6d41\u4fe1\u606f")\n\nclass GenerateLLMsTxt(dspy.Signature):\n    """\u6839\u636e\u5206\u6790\u7684\u4ed3\u5e93\u4fe1\u606f\u751f\u6210\u5168\u9762\u7684 llms.txt \u6587\u4ef6\u3002"""\n    project_purpose: str = dspy.InputField()\n    key_concepts: list[str] = dspy.InputField()\n    architecture_overview: str = dspy.InputField()\n    important_directories: list[str] = dspy.InputField()\n    entry_points: list[str] = dspy.InputField()\n    development_info: str = dspy.InputField()\n    usage_examples: str = dspy.InputField(desc="\u5e38\u89c1\u4f7f\u7528\u6a21\u5f0f\u548c\u793a\u4f8b")\n    \n    llms_txt_content: str = dspy.OutputField(desc="\u9075\u5faa\u6807\u51c6\u683c\u5f0f\u7684\u5b8c\u6574 llms.txt \u6587\u4ef6\u5185\u5bb9")\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u7b2c-2-\u6b65\u521b\u5efa\u4ed3\u5e93\u5206\u6790\u5668\u6a21\u5757",children:"\u7b2c 2 \u6b65\uff1a\u521b\u5efa\u4ed3\u5e93\u5206\u6790\u5668\u6a21\u5757"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'class RepositoryAnalyzer(dspy.Module):\n    def __init__(self):\n        super().__init__()\n        self.analyze_repo = dspy.ChainOfThought(AnalyzeRepository)\n        self.analyze_structure = dspy.ChainOfThought(AnalyzeCodeStructure)\n        self.generate_examples = dspy.ChainOfThought("repo_info -> usage_examples")\n        self.generate_llms_txt = dspy.ChainOfThought(GenerateLLMsTxt)\n    \n    def forward(self, repo_url, file_tree, readme_content, package_files):\n        # \u5206\u6790\u4ed3\u5e93\u76ee\u7684\u548c\u6982\u5ff5\n        repo_analysis = self.analyze_repo(\n            repo_url=repo_url,\n            file_tree=file_tree,\n            readme_content=readme_content\n        )\n        \n        # \u5206\u6790\u4ee3\u7801\u7ed3\u6784\n        structure_analysis = self.analyze_structure(\n            file_tree=file_tree,\n            package_files=package_files\n        )\n        \n        # \u751f\u6210\u4f7f\u7528\u793a\u4f8b\n        usage_examples = self.generate_examples(\n            repo_info=f"Purpose: {repo_analysis.project_purpose}\\nConcepts: {repo_analysis.key_concepts}"\n        )\n        \n        # \u751f\u6210\u6700\u7ec8\u7684 llms.txt\n        llms_txt = self.generate_llms_txt(\n            project_purpose=repo_analysis.project_purpose,\n            key_concepts=repo_analysis.key_concepts,\n            architecture_overview=repo_analysis.architecture_overview,\n            important_directories=structure_analysis.important_directories,\n            entry_points=structure_analysis.entry_points,\n            development_info=structure_analysis.development_info,\n            usage_examples=usage_examples.usage_examples\n        )\n        \n        return dspy.Prediction(\n            llms_txt_content=llms_txt.llms_txt_content,\n            analysis=repo_analysis,\n            structure=structure_analysis\n        )\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u7b2c-3-\u6b65\u6536\u96c6\u4ed3\u5e93\u4fe1\u606f",children:"\u7b2c 3 \u6b65\uff1a\u6536\u96c6\u4ed3\u5e93\u4fe1\u606f"}),"\n",(0,r.jsx)(n.p,{children:"\u8ba9\u6211\u4eec\u521b\u5efa\u8f85\u52a9\u51fd\u6570\u6765\u63d0\u53d6\u4ed3\u5e93\u4fe1\u606f\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import requests\nimport os\nfrom pathlib import Path\n\nos.environ["GITHUB_ACCESS_TOKEN"] = "<your_access_token>"\n\ndef get_github_file_tree(repo_url):\n    """\u4ece GitHub API \u83b7\u53d6\u4ed3\u5e93\u6587\u4ef6\u7ed3\u6784\u3002"""\n    # \u4ece URL \u63d0\u53d6 owner/repo\n    parts = repo_url.rstrip(\'/\').split(\'/\')\n    owner, repo = parts[-2], parts[-1]\n    \n    api_url = f"https://api.github.com/repos/{owner}/{repo}/git/trees/main?recursive=1"\n    response = requests.get(api_url, headers={\n        "Authorization": f"Bearer {os.environ.get(\'GITHUB_ACCESS_TOKEN\')}"\n    })\n    \n    if response.status_code == 200:\n        tree_data = response.json()\n        file_paths = [item[\'path\'] for item in tree_data[\'tree\'] if item[\'type\'] == \'blob\']\n        return \'\\n\'.join(sorted(file_paths))\n    else:\n        raise Exception(f"Failed to fetch repository tree: {response.status_code}")\n\ndef get_github_file_content(repo_url, file_path):\n    """\u4ece GitHub \u83b7\u53d6\u7279\u5b9a\u6587\u4ef6\u5185\u5bb9\u3002"""\n    parts = repo_url.rstrip(\'/\').split(\'/\')\n    owner, repo = parts[-2], parts[-1]\n    \n    api_url = f"https://api.github.com/repos/{owner}/{repo}/contents/{file_path}"\n    response = requests.get(api_url, headers={\n        "Authorization": f"Bearer {os.environ.get(\'GITHUB_ACCESS_TOKEN\')}"\n    })\n    \n    if response.status_code == 200:\n        import base64\n        content = base64.b64decode(response.json()[\'content\']).decode(\'utf-8\')\n        return content\n    else:\n        return f"Could not fetch {file_path}"\n\ndef gather_repository_info(repo_url):\n    """\u6536\u96c6\u6240\u6709\u5fc5\u8981\u7684\u4ed3\u5e93\u4fe1\u606f\u3002"""\n    file_tree = get_github_file_tree(repo_url)\n    readme_content = get_github_file_content(repo_url, "README.md")\n    \n    # \u83b7\u53d6\u5173\u952e\u5305\u6587\u4ef6\n    package_files = []\n    for file_path in ["pyproject.toml", "setup.py", "requirements.txt", "package.json"]:\n        try:\n            content = get_github_file_content(repo_url, file_path)\n            if "Could not fetch" not in content:\n                package_files.append(f"=== {file_path} ===\\n{content}")\n        except:\n            continue\n    \n    package_files_content = "\\n\\n".join(package_files)\n    \n    return file_tree, readme_content, package_files_content\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u7b2c-4-\u6b65\u914d\u7f6e-dspy-\u5e76\u751f\u6210-llmstxt",children:"\u7b2c 4 \u6b65\uff1a\u914d\u7f6e DSPy \u5e76\u751f\u6210 llms.txt"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'def generate_llms_txt_for_dspy():\n    # \u914d\u7f6e DSPy (\u4f7f\u7528\u4f60\u9996\u9009\u7684 LM)\n    lm = dspy.LM(model="gpt-4o-mini")\n    dspy.configure(lm=lm)\n    os.environ["OPENAI_API_KEY"] = "<YOUR OPENAI KEY>"\n    \n    # \u521d\u59cb\u5316\u6211\u4eec\u7684\u5206\u6790\u5668\n    analyzer = RepositoryAnalyzer()\n    \n    # \u6536\u96c6 DSPy \u4ed3\u5e93\u4fe1\u606f\n    repo_url = "https://github.com/stanfordnlp/dspy"\n    file_tree, readme_content, package_files = gather_repository_info(repo_url)\n    \n    # \u751f\u6210 llms.txt\n    result = analyzer(\n        repo_url=repo_url,\n        file_tree=file_tree,\n        readme_content=readme_content,\n        package_files=package_files\n    )\n    \n    return result\n\n# \u8fd0\u884c\u751f\u6210\nif __name__ == "__main__":\n    result = generate_llms_txt_for_dspy()\n    \n    # \u4fdd\u5b58\u751f\u6210\u7684 llms.txt\n    with open("llms.txt", "w") as f:\n        f.write(result.llms_txt_content)\n    \n    print("Generated llms.txt file!")\n    print("\\nPreview:")\n    print(result.llms_txt_content[:500] + "...")\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u9884\u671f\u8f93\u51fa\u7ed3\u6784",children:"\u9884\u671f\u8f93\u51fa\u7ed3\u6784"}),"\n",(0,r.jsxs)(n.p,{children:["\u4e3a DSPy \u751f\u6210\u7684 ",(0,r.jsx)(n.code,{children:"llms.txt"})," \u5c06\u9075\u5faa\u6b64\u7ed3\u6784\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# DSPy: Programming Language Models\n\n## Project Overview\nDSPy is a framework for programming\u2014rather than prompting\u2014language models...\n\n## Key Concepts\n- **Modules**: Building blocks for LM programs\n- **Signatures**: Input/output specifications  \n- **Teleprompters**: Optimization algorithms\n- **Predictors**: Core reasoning components\n\n## Architecture\n- `/dspy/`: Main package directory\n  - `/adapters/`: Input/output format handlers\n  - `/clients/`: LM client interfaces\n  - `/predict/`: Core prediction modules\n  - `/teleprompt/`: Optimization algorithms\n\n## Usage Examples\n1. **Building a Classifier**: Using DSPy, a user can define a modular classifier that takes in text data and categorizes it into predefined classes. The user can specify the classification logic declaratively, allowing for easy adjustments and optimizations.\n2. **Creating a RAG Pipeline**: A developer can implement a retrieval-augmented generation pipeline that first retrieves relevant documents based on a query and then generates a coherent response using those documents. DSPy facilitates the integration of retrieval and generation components seamlessly.\n3. **Optimizing Prompts**: Users can leverage DSPy to create a system that automatically optimizes prompts for language models based on performance metrics, improving the quality of responses over time without manual intervention.\n4. **Implementing Agent Loops**: A user can design an agent loop that continuously interacts with users, learns from feedback, and refines its responses, showcasing the self-improving capabilities of the DSPy framework.\n5. **Compositional Code**: Developers can write compositional code that allows different modules of the AI system to interact with each other, enabling complex workflows that can be easily modified and extended.\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u751f\u6210\u7684 ",(0,r.jsx)(n.code,{children:"llms.txt"})," \u6587\u4ef6\u63d0\u4f9b\u4e86 DSPy \u4ed3\u5e93\u7684\u5168\u9762\u3001LLM \u53cb\u597d\u7684\u6982\u8ff0\uff0c\u53ef\u4ee5\u5e2e\u52a9\u5176\u4ed6 AI \u7cfb\u7edf\u66f4\u597d\u5730\u7406\u89e3\u548c\u4f7f\u7528\u8be5\u4ee3\u7801\u5e93\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u4e0b\u4e00\u6b65",children:"\u4e0b\u4e00\u6b65"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u6269\u5c55\u7a0b\u5e8f\u4ee5\u5206\u6790\u591a\u4e2a\u4ed3\u5e93"}),"\n",(0,r.jsx)(n.li,{children:"\u6dfb\u52a0\u5bf9\u4e0d\u540c\u6587\u6863\u683c\u5f0f\u7684\u652f\u6301"}),"\n",(0,r.jsx)(n.li,{children:"\u521b\u5efa\u6587\u6863\u8d28\u91cf\u8bc4\u4f30\u6307\u6807"}),"\n",(0,r.jsx)(n.li,{children:"\u6784\u5efa\u7528\u4e8e\u4ea4\u4e92\u5f0f\u4ed3\u5e93\u5206\u6790\u7684 Web \u754c\u9762"}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},54213:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>o});var s=t(36672);const r={},i=s.createContext(r);function l(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);