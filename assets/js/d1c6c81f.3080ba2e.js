"use strict";(self.webpackChunknotes_3=self.webpackChunknotes_3||[]).push([[3213],{54056:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>h,default:()=>t,frontMatter:()=>d,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"Tools/\u64cd\u4f5c\u7cfb\u7edf/Ubuntu/SSH\u514d\u5bc6\u767b\u5f55","title":"SSH\u514d\u5bc6\u767b\u5f55","description":"SSH\u514d\u5bc6\u767b\u5f55(SSH Passwordless Login)\u662f\u4e00\u79cd\u57fa\u4e8e\u516c\u94a5\u5bc6\u7801\u5b66\u7684\u8ba4\u8bc1\u65b9\u5f0f\uff0c\u5b83\u4f7f\u7528\u975e\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\u8ba9\u7528\u6237\u65e0\u9700\u8f93\u5165\u5bc6\u7801\u5373\u53ef\u5b89\u5168\u767b\u5f55\u8fdc\u7a0b\u670d\u52a1\u5668\u3002\u8fd9\u79cd\u65b9\u5f0f\u4e0d\u4ec5\u63d0\u9ad8\u4e86\u64cd\u4f5c\u6548\u7387\uff0c\u8fd8\u589e\u5f3a\u4e86\u5b89\u5168\u6027\u3002","source":"@site/docs/Tools/\u64cd\u4f5c\u7cfb\u7edf/Ubuntu/SSH\u514d\u5bc6\u767b\u5f55.mdx","sourceDirName":"Tools/\u64cd\u4f5c\u7cfb\u7edf/Ubuntu","slug":"/Tools/\u64cd\u4f5c\u7cfb\u7edf/Ubuntu/SSH\u514d\u5bc6\u767b\u5f55","permalink":"/notes3/docs/Tools/\u64cd\u4f5c\u7cfb\u7edf/Ubuntu/SSH\u514d\u5bc6\u767b\u5f55","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Tools/\u64cd\u4f5c\u7cfb\u7edf/Ubuntu/SSH\u514d\u5bc6\u767b\u5f55.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"tools","previous":{"title":"Fishshell","permalink":"/notes3/docs/Tools/\u64cd\u4f5c\u7cfb\u7edf/Ubuntu/Fishshell"},"next":{"title":"apt","permalink":"/notes3/docs/Tools/\u64cd\u4f5c\u7cfb\u7edf/Ubuntu/apt"}}');var l=n(23420),i=n(54213);const d={},h=void 0,c={},a=[{value:"\u5de5\u4f5c\u539f\u7406",id:"\u5de5\u4f5c\u539f\u7406",level:2},{value:"\u8ba4\u8bc1\u6d41\u7a0b",id:"\u8ba4\u8bc1\u6d41\u7a0b",level:3},{value:"\u5177\u4f53\u5b9e\u73b0\u6b65\u9aa4",id:"\u5177\u4f53\u5b9e\u73b0\u6b65\u9aa4",level:2},{value:"\u6b65\u9aa41: \u751f\u6210SSH\u5bc6\u94a5\u5bf9",id:"\u6b65\u9aa41-\u751f\u6210ssh\u5bc6\u94a5\u5bf9",level:3},{value:"\u6b65\u9aa42: \u590d\u5236\u516c\u94a5\u5230\u76ee\u6807\u670d\u52a1\u5668",id:"\u6b65\u9aa42-\u590d\u5236\u516c\u94a5\u5230\u76ee\u6807\u670d\u52a1\u5668",level:3},{value:"\u65b9\u5f0f1: \u4f7f\u7528ssh-copy-id\u547d\u4ee4\uff08\u63a8\u8350\uff09",id:"\u65b9\u5f0f1-\u4f7f\u7528ssh-copy-id\u547d\u4ee4\u63a8\u8350",level:4},{value:"\u65b9\u5f0f2: \u624b\u52a8\u590d\u5236",id:"\u65b9\u5f0f2-\u624b\u52a8\u590d\u5236",level:4},{value:"\u65b9\u5f0f3: \u4f7f\u7528scp\u547d\u4ee4",id:"\u65b9\u5f0f3-\u4f7f\u7528scp\u547d\u4ee4",level:4},{value:"\u6b65\u9aa43: \u914d\u7f6eSSH\u670d\u52a1\u7aef\uff08\u53ef\u9009\uff09",id:"\u6b65\u9aa43-\u914d\u7f6essh\u670d\u52a1\u7aef\u53ef\u9009",level:3},{value:"\u6b65\u9aa44: \u6d4b\u8bd5\u514d\u5bc6\u767b\u5f55",id:"\u6b65\u9aa44-\u6d4b\u8bd5\u514d\u5bc6\u767b\u5f55",level:3},{value:"\u6743\u9650\u914d\u7f6e\u8981\u6c42",id:"\u6743\u9650\u914d\u7f6e\u8981\u6c42",level:2},{value:"\u5ba2\u6237\u7aef\u6743\u9650\u8bbe\u7f6e",id:"\u5ba2\u6237\u7aef\u6743\u9650\u8bbe\u7f6e",level:3},{value:"\u670d\u52a1\u7aef\u6743\u9650\u8bbe\u7f6e",id:"\u670d\u52a1\u7aef\u6743\u9650\u8bbe\u7f6e",level:3},{value:"\u9002\u7528\u573a\u666f",id:"\u9002\u7528\u573a\u666f",level:2},{value:"1. \u81ea\u52a8\u5316\u811a\u672c\u548cCI/CD",id:"1-\u81ea\u52a8\u5316\u811a\u672c\u548ccicd",level:3},{value:"2. \u6279\u91cf\u670d\u52a1\u5668\u7ba1\u7406",id:"2-\u6279\u91cf\u670d\u52a1\u5668\u7ba1\u7406",level:3},{value:"3. \u5b89\u5168\u7684\u6587\u4ef6\u4f20\u8f93",id:"3-\u5b89\u5168\u7684\u6587\u4ef6\u4f20\u8f93",level:3},{value:"4. \u8df3\u677f\u673a\u8bbf\u95ee",id:"4-\u8df3\u677f\u673a\u8bbf\u95ee",level:3},{value:"5. Git\u4ed3\u5e93\u8bbf\u95ee",id:"5-git\u4ed3\u5e93\u8bbf\u95ee",level:3},{value:"\u5b89\u5168\u6700\u4f73\u5b9e\u8df5",id:"\u5b89\u5168\u6700\u4f73\u5b9e\u8df5",level:2},{value:"1. \u79c1\u94a5\u4fdd\u62a4",id:"1-\u79c1\u94a5\u4fdd\u62a4",level:3},{value:"2. \u670d\u52a1\u7aef\u914d\u7f6e",id:"2-\u670d\u52a1\u7aef\u914d\u7f6e",level:3},{value:"3. \u7f51\u7edc\u5b89\u5168",id:"3-\u7f51\u7edc\u5b89\u5168",level:3},{value:"4. \u76d1\u63a7\u548c\u5ba1\u8ba1",id:"4-\u76d1\u63a7\u548c\u5ba1\u8ba1",level:3},{value:"\u6545\u969c\u6392\u9664",id:"\u6545\u969c\u6392\u9664",level:2},{value:"\u5e38\u89c1\u95ee\u9898\u53ca\u89e3\u51b3\u65b9\u6848",id:"\u5e38\u89c1\u95ee\u9898\u53ca\u89e3\u51b3\u65b9\u6848",level:3},{value:"1. \u6743\u9650\u95ee\u9898",id:"1-\u6743\u9650\u95ee\u9898",level:4},{value:"2. SELinux\u95ee\u9898\uff08CentOS/RHEL\uff09",id:"2-selinux\u95ee\u9898centosrhel",level:4},{value:"3. \u8c03\u8bd5\u8fde\u63a5\u95ee\u9898",id:"3-\u8c03\u8bd5\u8fde\u63a5\u95ee\u9898",level:4},{value:"4. \u670d\u52a1\u7aef\u65e5\u5fd7\u68c0\u67e5",id:"4-\u670d\u52a1\u7aef\u65e5\u5fd7\u68c0\u67e5",level:4},{value:"\u9ad8\u7ea7\u914d\u7f6e",id:"\u9ad8\u7ea7\u914d\u7f6e",level:2},{value:"SSH\u914d\u7f6e\u6587\u4ef6",id:"ssh\u914d\u7f6e\u6587\u4ef6",level:3},{value:"\u591a\u5bc6\u94a5\u7ba1\u7406",id:"\u591a\u5bc6\u94a5\u7ba1\u7406",level:3}];function o(e){const s={code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.p,{children:"SSH\u514d\u5bc6\u767b\u5f55(SSH Passwordless Login)\u662f\u4e00\u79cd\u57fa\u4e8e\u516c\u94a5\u5bc6\u7801\u5b66\u7684\u8ba4\u8bc1\u65b9\u5f0f\uff0c\u5b83\u4f7f\u7528\u975e\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\u8ba9\u7528\u6237\u65e0\u9700\u8f93\u5165\u5bc6\u7801\u5373\u53ef\u5b89\u5168\u767b\u5f55\u8fdc\u7a0b\u670d\u52a1\u5668\u3002\u8fd9\u79cd\u65b9\u5f0f\u4e0d\u4ec5\u63d0\u9ad8\u4e86\u64cd\u4f5c\u6548\u7387\uff0c\u8fd8\u589e\u5f3a\u4e86\u5b89\u5168\u6027\u3002"}),"\n",(0,l.jsx)(s.h2,{id:"\u5de5\u4f5c\u539f\u7406",children:"\u5de5\u4f5c\u539f\u7406"}),"\n",(0,l.jsxs)(s.p,{children:["SSH\u514d\u5bc6\u767b\u5f55\u57fa\u4e8e",(0,l.jsx)(s.strong,{children:"\u516c\u94a5-\u79c1\u94a5\u5bf9"}),"\u7684\u975e\u5bf9\u79f0\u52a0\u5bc6\u539f\u7406\uff1a"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"\u79c1\u94a5"})," - \u4fdd\u5b58\u5728\u5ba2\u6237\u7aef\uff0c\u7528\u4e8e\u8eab\u4efd\u8ba4\u8bc1\uff0c\u9700\u8981\u4e25\u683c\u4fdd\u5bc6"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"\u516c\u94a5"})," - \u53ef\u4ee5\u516c\u5f00\uff0c\u4fdd\u5b58\u5728\u670d\u52a1\u7aef\u7684\u6388\u6743\u5bc6\u94a5\u6587\u4ef6\u4e2d"]}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"\u8ba4\u8bc1\u6d41\u7a0b",children:"\u8ba4\u8bc1\u6d41\u7a0b"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{src:"https://github.com/cruldra/picx-images-hosting/raw/master/image.1e8ua9fsfi.webp",alt:"image"})}),"\n",(0,l.jsx)(s.h2,{id:"\u5177\u4f53\u5b9e\u73b0\u6b65\u9aa4",children:"\u5177\u4f53\u5b9e\u73b0\u6b65\u9aa4"}),"\n",(0,l.jsx)(s.h3,{id:"\u6b65\u9aa41-\u751f\u6210ssh\u5bc6\u94a5\u5bf9",children:"\u6b65\u9aa41: \u751f\u6210SSH\u5bc6\u94a5\u5bf9"}),"\n",(0,l.jsx)(s.p,{children:"\u5728\u5ba2\u6237\u7aef\u673a\u5668\u4e0a\u751f\u6210\u516c\u94a5-\u79c1\u94a5\u5bf9\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:'# \u751f\u6210RSA\u5bc6\u94a5\u5bf9\uff08\u63a8\u83504096\u4f4d\uff09\r\nssh-keygen -t rsa -b 4096 -C "your_email@example.com"\r\n\r\n# \u6216\u8005\u751f\u6210Ed25519\u5bc6\u94a5\u5bf9\uff08\u66f4\u73b0\u4ee3\uff0c\u66f4\u5b89\u5168\uff09\r\nssh-keygen -t ed25519 -C "your_email@example.com"\n'})}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"\u53c2\u6570\u8bf4\u660e\uff1a"})}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"-t rsa"}),": \u6307\u5b9a\u5bc6\u94a5\u7c7b\u578b\u4e3aRSA"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"-b 4096"}),": \u8bbe\u7f6e\u5bc6\u94a5\u957f\u5ea6\u4e3a4096\u4f4d\uff08\u66f4\u5b89\u5168\uff09"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"-t ed25519"}),": \u4f7f\u7528Ed25519\u7b97\u6cd5\uff08\u6027\u80fd\u66f4\u597d\uff0c\u5b89\u5168\u6027\u66f4\u9ad8\uff09"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"-C"}),": \u6dfb\u52a0\u6ce8\u91ca\uff0c\u901a\u5e38\u4f7f\u7528\u90ae\u7bb1\u5730\u5740"]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u6267\u884c\u540e\u4f1a\u63d0\u793a\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-text",children:"Generating public/private rsa key pair.\r\nEnter file in which to save the key (/home/user/.ssh/id_rsa): [\u6309\u56de\u8f66\u4f7f\u7528\u9ed8\u8ba4\u8def\u5f84]\r\nEnter passphrase (empty for no passphrase): [\u53ef\u9009\uff1a\u8bbe\u7f6e\u79c1\u94a5\u5bc6\u7801\u77ed\u8bed]\r\nEnter same passphrase again: [\u786e\u8ba4\u5bc6\u7801\u77ed\u8bed]\n"})}),"\n",(0,l.jsx)(s.p,{children:"\u751f\u6210\u7684\u6587\u4ef6\uff1a"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"~/.ssh/id_rsa"})," - \u79c1\u94a5\u6587\u4ef6\uff08\u9700\u8981\u4e25\u683c\u4fdd\u5bc6\uff09"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"~/.ssh/id_rsa.pub"})," - \u516c\u94a5\u6587\u4ef6\uff08\u53ef\u4ee5\u516c\u5f00\uff09"]}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"\u6b65\u9aa42-\u590d\u5236\u516c\u94a5\u5230\u76ee\u6807\u670d\u52a1\u5668",children:"\u6b65\u9aa42: \u590d\u5236\u516c\u94a5\u5230\u76ee\u6807\u670d\u52a1\u5668"}),"\n",(0,l.jsx)(s.p,{children:"\u6709\u591a\u79cd\u65b9\u5f0f\u5c06\u516c\u94a5\u590d\u5236\u5230\u670d\u52a1\u7aef\uff1a"}),"\n",(0,l.jsx)(s.h4,{id:"\u65b9\u5f0f1-\u4f7f\u7528ssh-copy-id\u547d\u4ee4\u63a8\u8350",children:"\u65b9\u5f0f1: \u4f7f\u7528ssh-copy-id\u547d\u4ee4\uff08\u63a8\u8350\uff09"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"ssh-copy-id -i ~/.ssh/id_rsa.pub username@remote_host\n"})}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-powershell",children:'cat ~/.ssh/id_rsa.pub | ssh root@45.249.244.101 "mkdir -p ~/.ssh && touch ~/.ssh/authorized_keys && chmod 700 ~/.ssh && chmod 600 ~/.ssh/authorized_keys && cat >> ~/.ssh/authorized_keys"\n'})}),"\n",(0,l.jsx)(s.p,{children:"\u8fd9\u4e2a\u547d\u4ee4\u4f1a\uff1a"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["\u81ea\u52a8\u5c06\u516c\u94a5\u5185\u5bb9\u8ffd\u52a0\u5230\u8fdc\u7a0b\u4e3b\u673a\u7684",(0,l.jsx)(s.code,{children:"~/.ssh/authorized_keys"}),"\u6587\u4ef6"]}),"\n",(0,l.jsx)(s.li,{children:"\u8bbe\u7f6e\u9002\u5f53\u7684\u6587\u4ef6\u6743\u9650"}),"\n",(0,l.jsx)(s.li,{children:"\u521b\u5efa\u5fc5\u8981\u7684\u76ee\u5f55\u7ed3\u6784"}),"\n"]}),"\n",(0,l.jsx)(s.h4,{id:"\u65b9\u5f0f2-\u624b\u52a8\u590d\u5236",children:"\u65b9\u5f0f2: \u624b\u52a8\u590d\u5236"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:'# \u67e5\u770b\u516c\u94a5\u5185\u5bb9\r\ncat ~/.ssh/id_rsa.pub\r\n\r\n# \u767b\u5f55\u5230\u8fdc\u7a0b\u670d\u52a1\u5668\r\nssh username@remote_host\r\n\r\n# \u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u521b\u5efa.ssh\u76ee\u5f55\uff08\u5982\u679c\u4e0d\u5b58\u5728\uff09\r\nmkdir -p ~/.ssh\r\n\r\n# \u5c06\u516c\u94a5\u5185\u5bb9\u8ffd\u52a0\u5230authorized_keys\u6587\u4ef6\r\necho "\u516c\u94a5\u5185\u5bb9" >> ~/.ssh/authorized_keys\r\n\r\n# \u8bbe\u7f6e\u6b63\u786e\u7684\u6743\u9650\r\nchmod 700 ~/.ssh\r\nchmod 600 ~/.ssh/authorized_keys\n'})}),"\n",(0,l.jsx)(s.h4,{id:"\u65b9\u5f0f3-\u4f7f\u7528scp\u547d\u4ee4",children:"\u65b9\u5f0f3: \u4f7f\u7528scp\u547d\u4ee4"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"# \u590d\u5236\u516c\u94a5\u5230\u8fdc\u7a0b\u4e3b\u673a\r\nscp ~/.ssh/id_rsa.pub username@remote_host:~/\r\n\r\n# \u767b\u5f55\u5230\u8fdc\u7a0b\u4e3b\u673a\r\nssh username@remote_host\r\n\r\n# \u8ffd\u52a0\u516c\u94a5\u5230authorized_keys\r\ncat ~/id_rsa.pub >> ~/.ssh/authorized_keys\r\nrm ~/id_rsa.pub\r\n\r\n# \u8bbe\u7f6e\u6743\u9650\r\nchmod 700 ~/.ssh\r\nchmod 600 ~/.ssh/authorized_keys\n"})}),"\n",(0,l.jsx)(s.h3,{id:"\u6b65\u9aa43-\u914d\u7f6essh\u670d\u52a1\u7aef\u53ef\u9009",children:"\u6b65\u9aa43: \u914d\u7f6eSSH\u670d\u52a1\u7aef\uff08\u53ef\u9009\uff09"}),"\n",(0,l.jsxs)(s.p,{children:["\u7f16\u8f91SSH\u670d\u52a1\u7aef\u914d\u7f6e\u6587\u4ef6",(0,l.jsx)(s.code,{children:"/etc/ssh/sshd_config"}),"\uff1a"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"sudo vim /etc/ssh/sshd_config\n"})}),"\n",(0,l.jsx)(s.p,{children:"\u786e\u4fdd\u4ee5\u4e0b\u914d\u7f6e\u9879\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ini",children:"# \u542f\u7528\u516c\u94a5\u8ba4\u8bc1\r\nPubkeyAuthentication yes\r\n\r\n# \u6307\u5b9a\u6388\u6743\u5bc6\u94a5\u6587\u4ef6\u4f4d\u7f6e\r\nAuthorizedKeysFile .ssh/authorized_keys\r\n\r\n# \u53ef\u9009\uff1a\u7981\u7528\u5bc6\u7801\u8ba4\u8bc1\uff08\u63d0\u9ad8\u5b89\u5168\u6027\uff09\r\nPasswordAuthentication no\r\n\r\n# \u53ef\u9009\uff1a\u7981\u7528root\u5bc6\u7801\u767b\u5f55\r\nPermitRootLogin prohibit-password\n"})}),"\n",(0,l.jsx)(s.p,{children:"\u91cd\u542fSSH\u670d\u52a1\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"sudo systemctl restart sshd\r\n# \u6216\u8005\r\nsudo service ssh restart\n"})}),"\n",(0,l.jsx)(s.h3,{id:"\u6b65\u9aa44-\u6d4b\u8bd5\u514d\u5bc6\u767b\u5f55",children:"\u6b65\u9aa44: \u6d4b\u8bd5\u514d\u5bc6\u767b\u5f55"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"ssh username@remote_host\n"})}),"\n",(0,l.jsx)(s.p,{children:"\u5982\u679c\u914d\u7f6e\u6210\u529f\uff0c\u5e94\u8be5\u80fd\u591f\u65e0\u9700\u8f93\u5165\u5bc6\u7801\u76f4\u63a5\u767b\u5f55\u3002"}),"\n",(0,l.jsx)(s.h2,{id:"\u6743\u9650\u914d\u7f6e\u8981\u6c42",children:"\u6743\u9650\u914d\u7f6e\u8981\u6c42"}),"\n",(0,l.jsx)(s.p,{children:"SSH\u5bf9\u6587\u4ef6\u6743\u9650\u8981\u6c42\u4e25\u683c\uff0c\u6743\u9650\u4e0d\u5f53\u4f1a\u5bfc\u81f4\u514d\u5bc6\u767b\u5f55\u5931\u8d25\uff1a"}),"\n",(0,l.jsx)(s.h3,{id:"\u5ba2\u6237\u7aef\u6743\u9650\u8bbe\u7f6e",children:"\u5ba2\u6237\u7aef\u6743\u9650\u8bbe\u7f6e"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"chmod 700 ~/.ssh                    # SSH\u76ee\u5f55\r\nchmod 600 ~/.ssh/id_rsa             # \u79c1\u94a5\u6587\u4ef6\r\nchmod 644 ~/.ssh/id_rsa.pub         # \u516c\u94a5\u6587\u4ef6\r\nchmod 600 ~/.ssh/config             # SSH\u914d\u7f6e\u6587\u4ef6\uff08\u5982\u679c\u6709\uff09\r\nchmod 644 ~/.ssh/known_hosts        # \u5df2\u77e5\u4e3b\u673a\u6587\u4ef6\uff08\u5982\u679c\u6709\uff09\n"})}),"\n",(0,l.jsx)(s.h3,{id:"\u670d\u52a1\u7aef\u6743\u9650\u8bbe\u7f6e",children:"\u670d\u52a1\u7aef\u6743\u9650\u8bbe\u7f6e"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"chmod 700 ~/.ssh                    # SSH\u76ee\u5f55\r\nchmod 600 ~/.ssh/authorized_keys    # \u6388\u6743\u5bc6\u94a5\u6587\u4ef6\r\nchown $USER:$USER ~/.ssh/authorized_keys  # \u786e\u4fdd\u6587\u4ef6\u6240\u6709\u8005\u6b63\u786e\n"})}),"\n",(0,l.jsx)(s.h2,{id:"\u9002\u7528\u573a\u666f",children:"\u9002\u7528\u573a\u666f"}),"\n",(0,l.jsx)(s.h3,{id:"1-\u81ea\u52a8\u5316\u811a\u672c\u548ccicd",children:"1. \u81ea\u52a8\u5316\u811a\u672c\u548cCI/CD"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:'# \u81ea\u52a8\u5316\u90e8\u7f72\u811a\u672c\r\n#!/bin/bash\r\nssh deploy@production-server "cd /app && git pull && docker-compose restart"\n'})}),"\n",(0,l.jsx)(s.h3,{id:"2-\u6279\u91cf\u670d\u52a1\u5668\u7ba1\u7406",children:"2. \u6279\u91cf\u670d\u52a1\u5668\u7ba1\u7406"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:'# \u6279\u91cf\u6267\u884c\u547d\u4ee4\r\nfor server in server1 server2 server3; do\r\n    ssh admin@$server "uptime"\r\ndone\n'})}),"\n",(0,l.jsx)(s.h3,{id:"3-\u5b89\u5168\u7684\u6587\u4ef6\u4f20\u8f93",children:"3. \u5b89\u5168\u7684\u6587\u4ef6\u4f20\u8f93"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"# \u4f7f\u7528scp\u8fdb\u884c\u6587\u4ef6\u4f20\u8f93\r\nscp file.txt user@remote:/path/to/destination/\r\n\r\n# \u4f7f\u7528rsync\u8fdb\u884c\u540c\u6b65\r\nrsync -avz --progress local_dir/ user@remote:/remote_dir/\n"})}),"\n",(0,l.jsx)(s.h3,{id:"4-\u8df3\u677f\u673a\u8bbf\u95ee",children:"4. \u8df3\u677f\u673a\u8bbf\u95ee"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"# SSH\u914d\u7f6e\u6587\u4ef6 ~/.ssh/config\r\nHost production\r\n    HostName production-server.com\r\n    User deploy\r\n    ProxyJump bastion-host\r\n    IdentityFile ~/.ssh/id_rsa\n"})}),"\n",(0,l.jsx)(s.h3,{id:"5-git\u4ed3\u5e93\u8bbf\u95ee",children:"5. Git\u4ed3\u5e93\u8bbf\u95ee"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"# \u514b\u9686\u79c1\u6709\u4ed3\u5e93\r\ngit clone git@github.com:username/private-repo.git\n"})}),"\n",(0,l.jsx)(s.h2,{id:"\u5b89\u5168\u6700\u4f73\u5b9e\u8df5",children:"\u5b89\u5168\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,l.jsx)(s.h3,{id:"1-\u79c1\u94a5\u4fdd\u62a4",children:"1. \u79c1\u94a5\u4fdd\u62a4"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"\u8bbe\u7f6e\u5bc6\u7801\u77ed\u8bed"}),": \u4e3a\u79c1\u94a5\u8bbe\u7f6e\u5f3a\u5bc6\u7801\u77ed\u8bed"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"\u9650\u5236\u8bbf\u95ee"}),": \u786e\u4fdd\u79c1\u94a5\u6587\u4ef6\u6743\u9650\u4e3a600"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"\u5907\u4efd"}),": \u5b89\u5168\u5907\u4efd\u79c1\u94a5\u6587\u4ef6"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"\u5b9a\u671f\u8f6e\u6362"}),": \u5b9a\u671f\u66f4\u6362\u5bc6\u94a5\u5bf9"]}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"2-\u670d\u52a1\u7aef\u914d\u7f6e",children:"2. \u670d\u52a1\u7aef\u914d\u7f6e"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ini",children:"# /etc/ssh/sshd_config \u5b89\u5168\u914d\u7f6e\r\nProtocol 2\r\nPermitRootLogin no\r\nPasswordAuthentication no\r\nPermitEmptyPasswords no\r\nMaxAuthTries 3\r\nClientAliveInterval 300\r\nClientAliveCountMax 2\n"})}),"\n",(0,l.jsx)(s.h3,{id:"3-\u7f51\u7edc\u5b89\u5168",children:"3. \u7f51\u7edc\u5b89\u5168"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"\u9632\u706b\u5899"}),": \u9650\u5236SSH\u7aef\u53e3\u8bbf\u95ee"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"\u7aef\u53e3\u4fee\u6539"}),": \u4fee\u6539\u9ed8\u8ba4SSH\u7aef\u53e3\uff0822\uff09"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"fail2ban"}),": \u4f7f\u7528fail2ban\u9632\u6b62\u66b4\u529b\u7834\u89e3"]}),"\n"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"# \u4fee\u6539SSH\u7aef\u53e3\r\nPort 2222\r\n\r\n# \u9650\u5236\u8bbf\u95eeIP\r\nAllowUsers user@192.168.1.0/24\n"})}),"\n",(0,l.jsx)(s.h3,{id:"4-\u76d1\u63a7\u548c\u5ba1\u8ba1",children:"4. \u76d1\u63a7\u548c\u5ba1\u8ba1"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"# \u67e5\u770bSSH\u767b\u5f55\u65e5\u5fd7\r\nsudo tail -f /var/log/auth.log\r\n\r\n# \u67e5\u770b\u5f53\u524dSSH\u8fde\u63a5\r\nwho\r\nw\n"})}),"\n",(0,l.jsx)(s.h2,{id:"\u6545\u969c\u6392\u9664",children:"\u6545\u969c\u6392\u9664"}),"\n",(0,l.jsx)(s.h3,{id:"\u5e38\u89c1\u95ee\u9898\u53ca\u89e3\u51b3\u65b9\u6848",children:"\u5e38\u89c1\u95ee\u9898\u53ca\u89e3\u51b3\u65b9\u6848"}),"\n",(0,l.jsx)(s.h4,{id:"1-\u6743\u9650\u95ee\u9898",children:"1. \u6743\u9650\u95ee\u9898"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"# \u68c0\u67e5\u6587\u4ef6\u6743\u9650\r\nls -la ~/.ssh/\r\n\r\n# \u4fee\u590d\u6743\u9650\r\nchmod 700 ~/.ssh\r\nchmod 600 ~/.ssh/authorized_keys\n"})}),"\n",(0,l.jsx)(s.h4,{id:"2-selinux\u95ee\u9898centosrhel",children:"2. SELinux\u95ee\u9898\uff08CentOS/RHEL\uff09"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"# \u6062\u590dSELinux\u4e0a\u4e0b\u6587\r\nrestorecon -Rv ~/.ssh/\n"})}),"\n",(0,l.jsx)(s.h4,{id:"3-\u8c03\u8bd5\u8fde\u63a5\u95ee\u9898",children:"3. \u8c03\u8bd5\u8fde\u63a5\u95ee\u9898"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"# \u8be6\u7ec6\u8f93\u51fa\u8fde\u63a5\u8fc7\u7a0b\r\nssh -v username@remote_host\r\n\r\n# \u66f4\u8be6\u7ec6\u7684\u8c03\u8bd5\u4fe1\u606f\r\nssh -vvv username@remote_host\n"})}),"\n",(0,l.jsx)(s.h4,{id:"4-\u670d\u52a1\u7aef\u65e5\u5fd7\u68c0\u67e5",children:"4. \u670d\u52a1\u7aef\u65e5\u5fd7\u68c0\u67e5"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"# Ubuntu/Debian\r\nsudo tail -f /var/log/auth.log\r\n\r\n# CentOS/RHEL\r\nsudo tail -f /var/log/secure\n"})}),"\n",(0,l.jsx)(s.h2,{id:"\u9ad8\u7ea7\u914d\u7f6e",children:"\u9ad8\u7ea7\u914d\u7f6e"}),"\n",(0,l.jsx)(s.h3,{id:"ssh\u914d\u7f6e\u6587\u4ef6",children:"SSH\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,l.jsxs)(s.p,{children:["\u521b\u5efa",(0,l.jsx)(s.code,{children:"~/.ssh/config"}),"\u6587\u4ef6\u7b80\u5316\u8fde\u63a5\uff1a"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ini",children:"# \u9ed8\u8ba4\u914d\u7f6e\r\nHost *\r\n    ServerAliveInterval 60\r\n    ServerAliveCountMax 3\r\n    \r\n# \u7279\u5b9a\u4e3b\u673a\u914d\u7f6e\r\nHost myserver\r\n    HostName 192.168.1.100\r\n    User deploy\r\n    Port 2222\r\n    IdentityFile ~/.ssh/id_rsa_myserver\r\n    \r\n# \u8df3\u677f\u673a\u914d\u7f6e\r\nHost production\r\n    HostName prod.example.com\r\n    User app\r\n    ProxyJump bastion.example.com\n"})}),"\n",(0,l.jsx)(s.p,{children:"\u4f7f\u7528\u7b80\u5316\u547d\u4ee4\u8fde\u63a5\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"ssh myserver  # \u7b49\u540c\u4e8e ssh -p 2222 deploy@192.168.1.100\n"})}),"\n",(0,l.jsx)(s.h3,{id:"\u591a\u5bc6\u94a5\u7ba1\u7406",children:"\u591a\u5bc6\u94a5\u7ba1\u7406"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:'# \u4e3a\u4e0d\u540c\u7528\u9014\u751f\u6210\u4e0d\u540c\u5bc6\u94a5\r\nssh-keygen -t ed25519 -f ~/.ssh/id_ed25519_github -C "github"\r\nssh-keygen -t ed25519 -f ~/.ssh/id_ed25519_work -C "work"\r\n\r\n# \u5728config\u4e2d\u6307\u5b9a\u4f7f\u7528\u54ea\u4e2a\u5bc6\u94a5\r\nHost github.com\r\n    IdentityFile ~/.ssh/id_ed25519_github\r\n    \r\nHost work-server\r\n    IdentityFile ~/.ssh/id_ed25519_work\n'})}),"\n",(0,l.jsx)(s.p,{children:"SSH\u514d\u5bc6\u767b\u5f55\u662f\u73b0\u4ee3\u8fd0\u7ef4\u548c\u5f00\u53d1\u5de5\u4f5c\u4e2d\u7684\u57fa\u7840\u6280\u80fd\uff0c\u6b63\u786e\u914d\u7f6e\u548c\u4f7f\u7528\u80fd\u591f\u663e\u8457\u63d0\u9ad8\u5de5\u4f5c\u6548\u7387\u548c\u7cfb\u7edf\u5b89\u5168\u6027\u3002"})]})}function t(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},54213:(e,s,n)=>{n.d(s,{R:()=>d,x:()=>h});var r=n(36672);const l={},i=r.createContext(l);function d(e){const s=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function h(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),r.createElement(i.Provider,{value:s},e.children)}}}]);