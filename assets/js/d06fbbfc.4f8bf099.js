"use strict";(self.webpackChunknotes_3=self.webpackChunknotes_3||[]).push([[57030],{54213:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>i});var l=s(36672);const o={},t=l.createContext(o);function d(e){const n=l.useContext(t);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:d(e.components),l.createElement(t.Provider,{value:n},e.children)}},94540:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>i,default:()=>p,frontMatter:()=>d,metadata:()=>l,toc:()=>r});const l=JSON.parse('{"id":"Tools/Comfyui/ComfyUI\u6a21\u578b\u8def\u5f84\u914d\u7f6e\u6307\u5357","title":"ComfyUI \u6a21\u578b\u8def\u5f84\u914d\u7f6e\u6307\u5357","description":"\u6982\u8ff0","source":"@site/docs/Tools/Comfyui/ComfyUI\u6a21\u578b\u8def\u5f84\u914d\u7f6e\u6307\u5357.md","sourceDirName":"Tools/Comfyui","slug":"/Tools/Comfyui/ComfyUI\u6a21\u578b\u8def\u5f84\u914d\u7f6e\u6307\u5357","permalink":"/notes3/docs/Tools/Comfyui/ComfyUI\u6a21\u578b\u8def\u5f84\u914d\u7f6e\u6307\u5357","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Tools/Comfyui/ComfyUI\u6a21\u578b\u8def\u5f84\u914d\u7f6e\u6307\u5357.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tools","previous":{"title":"ComfyUI \u67b6\u6784\u8be6\u89e3","permalink":"/notes3/docs/Tools/Comfyui/ComfyUI\u67b6\u6784\u8be6\u89e3"},"next":{"title":"ComfyUI \u9879\u76ee\u76ee\u5f55\u7ed3\u6784","permalink":"/notes3/docs/Tools/Comfyui/ComfyUI\u9879\u76ee\u76ee\u5f55\u7ed3\u6784"}}');var o=s(23420),t=s(54213);const d={},i="ComfyUI \u6a21\u578b\u8def\u5f84\u914d\u7f6e\u6307\u5357",a={},r=[{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:2},{value:"\u9ed8\u8ba4\u8def\u5f84\u7ed3\u6784",id:"\u9ed8\u8ba4\u8def\u5f84\u7ed3\u6784",level:2},{value:"\u57fa\u7840\u76ee\u5f55\u914d\u7f6e",id:"\u57fa\u7840\u76ee\u5f55\u914d\u7f6e",level:3},{value:"\u652f\u6301\u7684\u6587\u4ef6\u683c\u5f0f",id:"\u652f\u6301\u7684\u6587\u4ef6\u683c\u5f0f",level:3},{value:"\u8def\u5f84\u6620\u5c04\u8be6\u89e3",id:"\u8def\u5f84\u6620\u5c04\u8be6\u89e3",level:2},{value:"\u6838\u5fc3\u8def\u5f84\u6620\u5c04",id:"\u6838\u5fc3\u8def\u5f84\u6620\u5c04",level:3},{value:"\u8def\u5f84\u522b\u540d\u7cfb\u7edf",id:"\u8def\u5f84\u522b\u540d\u7cfb\u7edf",level:3},{value:"\u81ea\u5b9a\u4e49\u8def\u5f84\u914d\u7f6e",id:"\u81ea\u5b9a\u4e49\u8def\u5f84\u914d\u7f6e",level:2},{value:"1. \u4f7f\u7528extra_model_paths.yaml",id:"1-\u4f7f\u7528extra_model_pathsyaml",level:3},{value:"2. \u591a\u8def\u5f84\u914d\u7f6e",id:"2-\u591a\u8def\u5f84\u914d\u7f6e",level:3},{value:"3. \u547d\u4ee4\u884c\u53c2\u6570\u914d\u7f6e",id:"3-\u547d\u4ee4\u884c\u53c2\u6570\u914d\u7f6e",level:3},{value:"\u9ad8\u7ea7\u8def\u5f84\u7ba1\u7406",id:"\u9ad8\u7ea7\u8def\u5f84\u7ba1\u7406",level:2},{value:"1. \u52a8\u6001\u8def\u5f84\u6dfb\u52a0",id:"1-\u52a8\u6001\u8def\u5f84\u6dfb\u52a0",level:3},{value:"2. \u8def\u5f84\u67e5\u8be2\u548c\u9a8c\u8bc1",id:"2-\u8def\u5f84\u67e5\u8be2\u548c\u9a8c\u8bc1",level:3},{value:"3. \u7f13\u5b58\u7ba1\u7406",id:"3-\u7f13\u5b58\u7ba1\u7406",level:3},{value:"\u7279\u6b8a\u8def\u5f84\u529f\u80fd",id:"\u7279\u6b8a\u8def\u5f84\u529f\u80fd",level:2},{value:"1. \u6ce8\u89e3\u8def\u5f84\u7cfb\u7edf",id:"1-\u6ce8\u89e3\u8def\u5f84\u7cfb\u7edf",level:3},{value:"2. \u8f93\u5165\u8f93\u51fa\u76ee\u5f55\u7ba1\u7406",id:"2-\u8f93\u5165\u8f93\u51fa\u76ee\u5f55\u7ba1\u7406",level:3},{value:"3. \u6587\u4ef6\u8fc7\u6ee4\u548c\u641c\u7d22",id:"3-\u6587\u4ef6\u8fc7\u6ee4\u548c\u641c\u7d22",level:3},{value:"\u5b9e\u9645\u5e94\u7528\u573a\u666f",id:"\u5b9e\u9645\u5e94\u7528\u573a\u666f",level:2},{value:"1. \u591a\u7528\u6237\u73af\u5883\u914d\u7f6e",id:"1-\u591a\u7528\u6237\u73af\u5883\u914d\u7f6e",level:3},{value:"2. \u7f51\u7edc\u5b58\u50a8\u914d\u7f6e",id:"2-\u7f51\u7edc\u5b58\u50a8\u914d\u7f6e",level:3},{value:"3. \u5f00\u53d1\u73af\u5883\u914d\u7f6e",id:"3-\u5f00\u53d1\u73af\u5883\u914d\u7f6e",level:3},{value:"\u6027\u80fd\u4f18\u5316\u5efa\u8bae",id:"\u6027\u80fd\u4f18\u5316\u5efa\u8bae",level:2},{value:"1. \u5b58\u50a8\u4f18\u5316",id:"1-\u5b58\u50a8\u4f18\u5316",level:3},{value:"2. \u7f13\u5b58\u7b56\u7565",id:"2-\u7f13\u5b58\u7b56\u7565",level:3},{value:"3. \u8def\u5f84\u4f18\u5148\u7ea7\u7ba1\u7406",id:"3-\u8def\u5f84\u4f18\u5148\u7ea7\u7ba1\u7406",level:3},{value:"\u6545\u969c\u6392\u9664",id:"\u6545\u969c\u6392\u9664",level:2},{value:"1. \u5e38\u89c1\u95ee\u9898",id:"1-\u5e38\u89c1\u95ee\u9898",level:3},{value:"\u6a21\u578b\u627e\u4e0d\u5230",id:"\u6a21\u578b\u627e\u4e0d\u5230",level:4},{value:"\u6743\u9650\u95ee\u9898",id:"\u6743\u9650\u95ee\u9898",level:4},{value:"\u8def\u5f84\u914d\u7f6e\u9519\u8bef",id:"\u8def\u5f84\u914d\u7f6e\u9519\u8bef",level:4},{value:"2. \u8c03\u8bd5\u5de5\u5177",id:"2-\u8c03\u8bd5\u5de5\u5177",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"comfyui-\u6a21\u578b\u8def\u5f84\u914d\u7f6e\u6307\u5357",children:"ComfyUI \u6a21\u578b\u8def\u5f84\u914d\u7f6e\u6307\u5357"})}),"\n",(0,o.jsx)(n.h2,{id:"\u6982\u8ff0",children:"\u6982\u8ff0"}),"\n",(0,o.jsx)(n.p,{children:"ComfyUI\u4f7f\u7528\u7075\u6d3b\u7684\u8def\u5f84\u7ba1\u7406\u7cfb\u7edf\u6765\u7ec4\u7ec7\u548c\u8bbf\u95ee\u5404\u79cdAI\u6a21\u578b\u6587\u4ef6\u3002\u672c\u6307\u5357\u8be6\u7ec6\u4ecb\u7ecd\u4e86\u5982\u4f55\u914d\u7f6e\u6a21\u578b\u8def\u5f84\uff0c\u5305\u62ec\u9ed8\u8ba4\u8def\u5f84\u7ed3\u6784\u3001\u81ea\u5b9a\u4e49\u8def\u5f84\u914d\u7f6e\u3001\u591a\u8def\u5f84\u7ba1\u7406\u7b49\u9ad8\u7ea7\u529f\u80fd\u3002"}),"\n",(0,o.jsx)(n.h2,{id:"\u9ed8\u8ba4\u8def\u5f84\u7ed3\u6784",children:"\u9ed8\u8ba4\u8def\u5f84\u7ed3\u6784"}),"\n",(0,o.jsx)(n.h3,{id:"\u57fa\u7840\u76ee\u5f55\u914d\u7f6e",children:"\u57fa\u7840\u76ee\u5f55\u914d\u7f6e"}),"\n",(0,o.jsxs)(n.p,{children:["ComfyUI\u7684\u6240\u6709\u8def\u5f84\u90fd\u57fa\u4e8e",(0,o.jsx)(n.code,{children:"base_path"}),"\uff0c\u9ed8\u8ba4\u4e3aComfyUI\u5b89\u88c5\u76ee\u5f55\uff1a"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"ComfyUI/\n\u251c\u2500\u2500 models/                    # \u6a21\u578b\u6839\u76ee\u5f55\n\u2502   \u251c\u2500\u2500 checkpoints/          # \u5b8c\u6574\u6a21\u578b\u68c0\u67e5\u70b9\n\u2502   \u251c\u2500\u2500 diffusion_models/     # \u6269\u6563\u6a21\u578b\uff08UNET\uff09\n\u2502   \u251c\u2500\u2500 unet/                 # UNET\u6a21\u578b\uff08\u522b\u540d\uff09\n\u2502   \u251c\u2500\u2500 clip/                 # CLIP\u6587\u672c\u7f16\u7801\u5668\n\u2502   \u251c\u2500\u2500 text_encoders/        # \u6587\u672c\u7f16\u7801\u5668\uff08\u5305\u542bclip\uff09\n\u2502   \u251c\u2500\u2500 clip_vision/          # CLIP\u89c6\u89c9\u7f16\u7801\u5668\n\u2502   \u251c\u2500\u2500 vae/                  # VAE\u7f16\u7801\u5668/\u89e3\u7801\u5668\n\u2502   \u251c\u2500\u2500 loras/                # LoRA\u6743\u91cd\u6587\u4ef6\n\u2502   \u251c\u2500\u2500 controlnet/           # ControlNet\u6a21\u578b\n\u2502   \u251c\u2500\u2500 t2i_adapter/          # Text-to-Image\u9002\u914d\u5668\n\u2502   \u251c\u2500\u2500 upscale_models/       # \u56fe\u50cf\u653e\u5927\u6a21\u578b\n\u2502   \u251c\u2500\u2500 embeddings/           # \u6587\u672c\u5d4c\u5165\n\u2502   \u251c\u2500\u2500 hypernetworks/        # Hypernetwork\n\u2502   \u251c\u2500\u2500 style_models/         # \u98ce\u683c\u6a21\u578b\n\u2502   \u251c\u2500\u2500 gligen/               # GLIGEN\u6a21\u578b\n\u2502   \u251c\u2500\u2500 photomaker/           # PhotoMaker\u6a21\u578b\n\u2502   \u251c\u2500\u2500 diffusers/            # Diffusers\u683c\u5f0f\u6a21\u578b\n\u2502   \u251c\u2500\u2500 vae_approx/           # VAE\u8fd1\u4f3c\u6a21\u578b\n\u2502   \u251c\u2500\u2500 audio_encoders/       # \u97f3\u9891\u7f16\u7801\u5668\n\u2502   \u251c\u2500\u2500 model_patches/        # \u6a21\u578b\u8865\u4e01\n\u2502   \u251c\u2500\u2500 classifiers/          # \u5206\u7c7b\u5668\u6a21\u578b\n\u2502   \u2514\u2500\u2500 configs/              # \u6a21\u578b\u914d\u7f6e\u6587\u4ef6\n\u251c\u2500\u2500 input/                    # \u8f93\u5165\u6587\u4ef6\u76ee\u5f55\n\u251c\u2500\u2500 output/                   # \u8f93\u51fa\u6587\u4ef6\u76ee\u5f55\n\u251c\u2500\u2500 temp/                     # \u4e34\u65f6\u6587\u4ef6\u76ee\u5f55\n\u251c\u2500\u2500 user/                     # \u7528\u6237\u6570\u636e\u76ee\u5f55\n\u2514\u2500\u2500 custom_nodes/             # \u81ea\u5b9a\u4e49\u8282\u70b9\u76ee\u5f55\n"})}),"\n",(0,o.jsx)(n.h3,{id:"\u652f\u6301\u7684\u6587\u4ef6\u683c\u5f0f",children:"\u652f\u6301\u7684\u6587\u4ef6\u683c\u5f0f"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"# \u6a21\u578b\u6587\u4ef6\u652f\u6301\u7684\u6269\u5c55\u540d\nsupported_pt_extensions = {\n    '.ckpt',        # Checkpoint\u683c\u5f0f\n    '.pt',          # PyTorch\u683c\u5f0f\n    '.pt2',         # PyTorch 2.0\u683c\u5f0f\n    '.bin',         # \u4e8c\u8fdb\u5236\u683c\u5f0f\n    '.pth',         # PyTorch Hub\u683c\u5f0f\n    '.safetensors', # SafeTensors\u683c\u5f0f\uff08\u63a8\u8350\uff09\n    '.pkl',         # Pickle\u683c\u5f0f\n    '.sft'          # SafeTensors\u7b80\u5199\n}\n\n# \u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\nconfig_extensions = {'.yaml'}\n\n# \u7279\u6b8a\u683c\u5f0f\ndiffusers_format = {'folder'}  # Diffusers\u4f7f\u7528\u6587\u4ef6\u5939\u683c\u5f0f\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u8def\u5f84\u6620\u5c04\u8be6\u89e3",children:"\u8def\u5f84\u6620\u5c04\u8be6\u89e3"}),"\n",(0,o.jsx)(n.h3,{id:"\u6838\u5fc3\u8def\u5f84\u6620\u5c04",children:"\u6838\u5fc3\u8def\u5f84\u6620\u5c04"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'# \u9ed8\u8ba4\u8def\u5f84\u6620\u5c04\u914d\u7f6e\nfolder_names_and_paths = {\n    # \u5b8c\u6574\u6a21\u578b\n    "checkpoints": (["models/checkpoints"], supported_pt_extensions),\n    \n    # \u5206\u79bb\u7ec4\u4ef6\n    "diffusion_models": (["models/unet", "models/diffusion_models"], supported_pt_extensions),\n    "text_encoders": (["models/text_encoders", "models/clip"], supported_pt_extensions),\n    "clip_vision": (["models/clip_vision"], supported_pt_extensions),\n    "vae": (["models/vae"], supported_pt_extensions),\n    \n    # \u589e\u5f3a\u7ec4\u4ef6\n    "loras": (["models/loras"], supported_pt_extensions),\n    "controlnet": (["models/controlnet", "models/t2i_adapter"], supported_pt_extensions),\n    "embeddings": (["models/embeddings"], supported_pt_extensions),\n    "hypernetworks": (["models/hypernetworks"], supported_pt_extensions),\n    \n    # \u7279\u6b8a\u6a21\u578b\n    "upscale_models": (["models/upscale_models"], supported_pt_extensions),\n    "style_models": (["models/style_models"], supported_pt_extensions),\n    "gligen": (["models/gligen"], supported_pt_extensions),\n    "photomaker": (["models/photomaker"], supported_pt_extensions),\n    "audio_encoders": (["models/audio_encoders"], supported_pt_extensions),\n    \n    # \u5176\u4ed6\n    "diffusers": (["models/diffusers"], ["folder"]),\n    "vae_approx": (["models/vae_approx"], supported_pt_extensions),\n    "model_patches": (["models/model_patches"], supported_pt_extensions),\n    "classifiers": (["models/classifiers"], [""]),\n    "configs": (["models/configs"], [".yaml"]),\n    "custom_nodes": (["custom_nodes"], set())\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"\u8def\u5f84\u522b\u540d\u7cfb\u7edf",children:"\u8def\u5f84\u522b\u540d\u7cfb\u7edf"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'# \u517c\u5bb9\u6027\u522b\u540d\u6620\u5c04\nlegacy_mapping = {\n    "unet": "diffusion_models",    # unet\u76ee\u5f55\u6620\u5c04\u5230diffusion_models\n    "clip": "text_encoders"        # clip\u76ee\u5f55\u6620\u5c04\u5230text_encoders\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"\u81ea\u5b9a\u4e49\u8def\u5f84\u914d\u7f6e",children:"\u81ea\u5b9a\u4e49\u8def\u5f84\u914d\u7f6e"}),"\n",(0,o.jsx)(n.h3,{id:"1-\u4f7f\u7528extra_model_pathsyaml",children:"1. \u4f7f\u7528extra_model_paths.yaml"}),"\n",(0,o.jsxs)(n.p,{children:["\u521b\u5efa",(0,o.jsx)(n.code,{children:"extra_model_paths.yaml"}),"\u6587\u4ef6\u6765\u914d\u7f6e\u989d\u5916\u7684\u6a21\u578b\u8def\u5f84\uff1a"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"# \u91cd\u547d\u540d extra_model_paths.yaml.example \u4e3a extra_model_paths.yaml\n\n# Automatic1111 WebUI\u517c\u5bb9\u914d\u7f6e\na111:\n    base_path: /path/to/stable-diffusion-webui/\n    checkpoints: models/Stable-diffusion\n    configs: models/Stable-diffusion\n    vae: models/VAE\n    loras: |\n         models/Lora\n         models/LyCORIS\n    upscale_models: |\n                  models/ESRGAN\n                  models/RealESRGAN\n                  models/SwinIR\n    embeddings: embeddings\n    hypernetworks: models/hypernetworks\n    controlnet: models/ControlNet\n\n# ComfyUI\u6807\u51c6\u914d\u7f6e\ncomfyui:\n    base_path: /path/to/comfyui/\n    is_default: true  # \u6807\u8bb0\u4e3a\u9ed8\u8ba4\u8def\u5f84\n    checkpoints: models/checkpoints/\n    clip: models/clip/\n    clip_vision: models/clip_vision/\n    configs: models/configs/\n    controlnet: models/controlnet/\n    diffusion_models: |\n                 models/diffusion_models\n                 models/unet\n    embeddings: models/embeddings/\n    loras: models/loras/\n    upscale_models: models/upscale_models/\n    vae: models/vae/\n\n# \u81ea\u5b9a\u4e49\u914d\u7f6e\ncustom_setup:\n    base_path: /shared/ai_models/\n    checkpoints: sd_models/checkpoints\n    loras: sd_models/loras\n    vae: sd_models/vae\n    controlnet: controlnet_models\n"})}),"\n",(0,o.jsx)(n.h3,{id:"2-\u591a\u8def\u5f84\u914d\u7f6e",children:"2. \u591a\u8def\u5f84\u914d\u7f6e"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"# \u652f\u6301\u591a\u4e2a\u8def\u5f84\u7684\u914d\u7f6e\nmulti_path_config:\n    base_path: /main/models/\n    loras: |\n         loras/character\n         loras/style\n         loras/concept\n    checkpoints: |\n               checkpoints/sd15\n               checkpoints/sdxl\n               checkpoints/sd3\n    controlnet: |\n              controlnet/sd15\n              controlnet/sdxl\n"})}),"\n",(0,o.jsx)(n.h3,{id:"3-\u547d\u4ee4\u884c\u53c2\u6570\u914d\u7f6e",children:"3. \u547d\u4ee4\u884c\u53c2\u6570\u914d\u7f6e"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# \u4f7f\u7528--base-directory\u53c2\u6570\u91cd\u7f6e\u6240\u6709\u9ed8\u8ba4\u8def\u5f84\npython main.py --base-directory /custom/path/\n\n# \u4f7f\u7528--extra-model-paths-config\u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\npython main.py --extra-model-paths-config /path/to/config.yaml\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u9ad8\u7ea7\u8def\u5f84\u7ba1\u7406",children:"\u9ad8\u7ea7\u8def\u5f84\u7ba1\u7406"}),"\n",(0,o.jsx)(n.h3,{id:"1-\u52a8\u6001\u8def\u5f84\u6dfb\u52a0",children:"1. \u52a8\u6001\u8def\u5f84\u6dfb\u52a0"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'import folder_paths\n\n# \u6dfb\u52a0\u65b0\u7684\u6a21\u578b\u6587\u4ef6\u5939\u8def\u5f84\nfolder_paths.add_model_folder_path(\n    folder_name="loras",\n    full_folder_path="/additional/lora/path",\n    is_default=False  # \u662f\u5426\u8bbe\u4e3a\u9ed8\u8ba4\u8def\u5f84\n)\n\n# \u6dfb\u52a0\u4e3a\u9ed8\u8ba4\u8def\u5f84\uff08\u4f18\u5148\u7ea7\u6700\u9ad8\uff09\nfolder_paths.add_model_folder_path(\n    folder_name="checkpoints", \n    full_folder_path="/priority/checkpoint/path",\n    is_default=True\n)\n'})}),"\n",(0,o.jsx)(n.h3,{id:"2-\u8def\u5f84\u67e5\u8be2\u548c\u9a8c\u8bc1",children:"2. \u8def\u5f84\u67e5\u8be2\u548c\u9a8c\u8bc1"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'# \u83b7\u53d6\u6307\u5b9a\u7c7b\u578b\u7684\u6240\u6709\u8def\u5f84\ncheckpoint_paths = folder_paths.get_folder_paths("checkpoints")\nprint(f"Checkpoint paths: {checkpoint_paths}")\n\n# \u83b7\u53d6\u6587\u4ef6\u5217\u8868\nlora_files = folder_paths.get_filename_list("loras")\nprint(f"Available LoRAs: {lora_files}")\n\n# \u83b7\u53d6\u6587\u4ef6\u5b8c\u6574\u8def\u5f84\nfull_path = folder_paths.get_full_path("checkpoints", "model.safetensors")\nif full_path:\n    print(f"Model found at: {full_path}")\nelse:\n    print("Model not found")\n\n# \u83b7\u53d6\u6587\u4ef6\u5b8c\u6574\u8def\u5f84\uff08\u627e\u4e0d\u5230\u65f6\u629b\u51fa\u5f02\u5e38\uff09\ntry:\n    full_path = folder_paths.get_full_path_or_raise("loras", "style.safetensors")\n    print(f"LoRA found at: {full_path}")\nexcept FileNotFoundError as e:\n    print(f"Error: {e}")\n'})}),"\n",(0,o.jsx)(n.h3,{id:"3-\u7f13\u5b58\u7ba1\u7406",children:"3. \u7f13\u5b58\u7ba1\u7406"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'# \u4f7f\u7528\u7f13\u5b58\u52a9\u624b\u63d0\u9ad8\u6027\u80fd\nwith folder_paths.cache_helper:\n    # \u5728\u6b64\u4e0a\u4e0b\u6587\u4e2d\u7684\u6587\u4ef6\u5217\u8868\u67e5\u8be2\u4f1a\u88ab\u7f13\u5b58\n    files1 = folder_paths.get_filename_list("checkpoints")\n    files2 = folder_paths.get_filename_list("loras")\n    # \u91cd\u590d\u67e5\u8be2\u4f1a\u4f7f\u7528\u7f13\u5b58\uff0c\u63d0\u9ad8\u6027\u80fd\n\n# \u624b\u52a8\u6e05\u9664\u7f13\u5b58\nfolder_paths.filename_list_cache.clear()\n'})}),"\n",(0,o.jsx)(n.h2,{id:"\u7279\u6b8a\u8def\u5f84\u529f\u80fd",children:"\u7279\u6b8a\u8def\u5f84\u529f\u80fd"}),"\n",(0,o.jsx)(n.h3,{id:"1-\u6ce8\u89e3\u8def\u5f84\u7cfb\u7edf",children:"1. \u6ce8\u89e3\u8def\u5f84\u7cfb\u7edf"}),"\n",(0,o.jsx)(n.p,{children:"ComfyUI\u652f\u6301\u5728\u6587\u4ef6\u540d\u4e2d\u4f7f\u7528\u6ce8\u89e3\u6765\u6307\u5b9a\u7279\u5b9a\u76ee\u5f55\uff1a"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'# \u6587\u4ef6\u540d\u6ce8\u89e3\u683c\u5f0f\nannotated_files = {\n    "image.png[output]": "\u4fdd\u5b58\u5230output\u76ee\u5f55",\n    "input.jpg[input]": "\u4eceinput\u76ee\u5f55\u8bfb\u53d6", \n    "temp.txt[temp]": "\u4f7f\u7528temp\u76ee\u5f55"\n}\n\n# \u83b7\u53d6\u6ce8\u89e3\u8def\u5f84\ndef get_annotated_path(filename):\n    return folder_paths.get_annotated_filepath(filename)\n\n# \u793a\u4f8b\noutput_path = get_annotated_path("result.png[output]")\n# \u8fd4\u56de: /path/to/comfyui/output/result.png\n'})}),"\n",(0,o.jsx)(n.h3,{id:"2-\u8f93\u5165\u8f93\u51fa\u76ee\u5f55\u7ba1\u7406",children:"2. \u8f93\u5165\u8f93\u51fa\u76ee\u5f55\u7ba1\u7406"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'# \u83b7\u53d6\u6807\u51c6\u76ee\u5f55\ninput_dir = folder_paths.get_input_directory()\noutput_dir = folder_paths.get_output_directory()\ntemp_dir = folder_paths.get_temp_directory()\nuser_dir = folder_paths.get_user_directory()\n\n# \u8bbe\u7f6e\u81ea\u5b9a\u4e49\u76ee\u5f55\nfolder_paths.set_input_directory("/custom/input")\nfolder_paths.set_output_directory("/custom/output")\nfolder_paths.set_temp_directory("/custom/temp")\nfolder_paths.set_user_directory("/custom/user")\n\n# \u83b7\u53d6\u8f93\u5165\u5b50\u6587\u4ef6\u5939\u5217\u8868\nsubfolders = folder_paths.get_input_subfolders()\nprint(f"Input subfolders: {subfolders}")\n'})}),"\n",(0,o.jsx)(n.h3,{id:"3-\u6587\u4ef6\u8fc7\u6ee4\u548c\u641c\u7d22",children:"3. \u6587\u4ef6\u8fc7\u6ee4\u548c\u641c\u7d22"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'# \u6309\u5185\u5bb9\u7c7b\u578b\u8fc7\u6ee4\u6587\u4ef6\nimport os\nfiles = os.listdir(folder_paths.get_input_directory())\n\n# \u8fc7\u6ee4\u56fe\u7247\u6587\u4ef6\nimages = folder_paths.filter_files_content_types(files, ["image"])\n\n# \u8fc7\u6ee4\u89c6\u9891\u6587\u4ef6\nvideos = folder_paths.filter_files_content_types(files, ["video"])\n\n# \u8fc7\u6ee4\u97f3\u9891\u6587\u4ef6\naudios = folder_paths.filter_files_content_types(files, ["audio"])\n\n# \u8fc7\u6ee43D\u6a21\u578b\u6587\u4ef6\nmodels = folder_paths.filter_files_content_types(files, ["model"])\n\n# \u6309\u6269\u5c55\u540d\u8fc7\u6ee4\nsafetensors_files = folder_paths.filter_files_extensions(\n    files, \n    [\'.safetensors\']\n)\n'})}),"\n",(0,o.jsx)(n.h2,{id:"\u5b9e\u9645\u5e94\u7528\u573a\u666f",children:"\u5b9e\u9645\u5e94\u7528\u573a\u666f"}),"\n",(0,o.jsx)(n.h3,{id:"1-\u591a\u7528\u6237\u73af\u5883\u914d\u7f6e",children:"1. \u591a\u7528\u6237\u73af\u5883\u914d\u7f6e"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"# \u4e3a\u4e0d\u540c\u7528\u6237\u914d\u7f6e\u72ec\u7acb\u7684\u6a21\u578b\u8def\u5f84\nuser_alice:\n    base_path: /users/alice/ai_models/\n    checkpoints: personal_models/checkpoints\n    loras: personal_models/loras\n    \nuser_bob:\n    base_path: /users/bob/ai_models/\n    checkpoints: work_models/checkpoints\n    loras: work_models/loras\n\n# \u5171\u4eab\u6a21\u578b\u5e93\nshared_models:\n    base_path: /shared/ai_models/\n    is_default: true\n    checkpoints: public_checkpoints\n    loras: public_loras\n"})}),"\n",(0,o.jsx)(n.h3,{id:"2-\u7f51\u7edc\u5b58\u50a8\u914d\u7f6e",children:"2. \u7f51\u7edc\u5b58\u50a8\u914d\u7f6e"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"# \u7f51\u7edc\u9644\u52a0\u5b58\u50a8(NAS)\u914d\u7f6e\nnas_storage:\n    base_path: /mnt/nas/ai_models/\n    checkpoints: |\n               stable_diffusion/checkpoints\n               flux/checkpoints\n               sd3/checkpoints\n    loras: |\n         character_loras\n         style_loras\n         concept_loras\n    vae: vae_models\n    controlnet: controlnet_models\n\n# \u672c\u5730\u7f13\u5b58\u914d\u7f6e\nlocal_cache:\n    base_path: /local/cache/\n    is_default: true  # \u4f18\u5148\u4f7f\u7528\u672c\u5730\u7f13\u5b58\n    checkpoints: cached_checkpoints\n    loras: cached_loras\n"})}),"\n",(0,o.jsx)(n.h3,{id:"3-\u5f00\u53d1\u73af\u5883\u914d\u7f6e",children:"3. \u5f00\u53d1\u73af\u5883\u914d\u7f6e"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"# \u5f00\u53d1\u73af\u5883\ndevelopment:\n    base_path: /dev/ai_models/\n    checkpoints: test_models/checkpoints\n    loras: test_models/loras\n    \n# \u751f\u4ea7\u73af\u5883\nproduction:\n    base_path: /prod/ai_models/\n    is_default: true\n    checkpoints: |\n               production_models/sd15\n               production_models/sdxl\n               production_models/sd3\n    loras: production_loras\n    \n# \u5b9e\u9a8c\u73af\u5883\nexperimental:\n    base_path: /exp/ai_models/\n    checkpoints: experimental_models\n    loras: experimental_loras\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u6027\u80fd\u4f18\u5316\u5efa\u8bae",children:"\u6027\u80fd\u4f18\u5316\u5efa\u8bae"}),"\n",(0,o.jsx)(n.h3,{id:"1-\u5b58\u50a8\u4f18\u5316",children:"1. \u5b58\u50a8\u4f18\u5316"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'# \u4f7f\u7528SSD\u5b58\u50a8\u5e38\u7528\u6a21\u578b\nssd_config = {\n    "base_path": "/ssd/ai_models/",\n    "checkpoints": "frequently_used",\n    "loras": "popular_loras"\n}\n\n# \u4f7f\u7528HDD\u5b58\u50a8\u5f52\u6863\u6a21\u578b\nhdd_config = {\n    "base_path": "/hdd/ai_models/",\n    "checkpoints": "archived_models",\n    "loras": "old_loras"\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"2-\u7f13\u5b58\u7b56\u7565",children:"2. \u7f13\u5b58\u7b56\u7565"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'# \u542f\u7528\u6587\u4ef6\u5217\u8868\u7f13\u5b58\ndef optimized_file_access():\n    with folder_paths.cache_helper:\n        # \u6279\u91cf\u67e5\u8be2\u6587\u4ef6\u5217\u8868\n        checkpoints = folder_paths.get_filename_list("checkpoints")\n        loras = folder_paths.get_filename_list("loras")\n        vaes = folder_paths.get_filename_list("vae")\n        \n        return {\n            "checkpoints": checkpoints,\n            "loras": loras, \n            "vaes": vaes\n        }\n'})}),"\n",(0,o.jsx)(n.h3,{id:"3-\u8def\u5f84\u4f18\u5148\u7ea7\u7ba1\u7406",children:"3. \u8def\u5f84\u4f18\u5148\u7ea7\u7ba1\u7406"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'# \u8bbe\u7f6e\u8def\u5f84\u4f18\u5148\u7ea7\ndef setup_path_priority():\n    # \u9ad8\u4f18\u5148\u7ea7\uff1a\u672c\u5730SSD\n    folder_paths.add_model_folder_path(\n        "checkpoints", "/ssd/models/checkpoints", is_default=True\n    )\n    \n    # \u4e2d\u4f18\u5148\u7ea7\uff1a\u672c\u5730HDD\n    folder_paths.add_model_folder_path(\n        "checkpoints", "/hdd/models/checkpoints", is_default=False\n    )\n    \n    # \u4f4e\u4f18\u5148\u7ea7\uff1a\u7f51\u7edc\u5b58\u50a8\n    folder_paths.add_model_folder_path(\n        "checkpoints", "/nas/models/checkpoints", is_default=False\n    )\n'})}),"\n",(0,o.jsx)(n.h2,{id:"\u6545\u969c\u6392\u9664",children:"\u6545\u969c\u6392\u9664"}),"\n",(0,o.jsx)(n.h3,{id:"1-\u5e38\u89c1\u95ee\u9898",children:"1. \u5e38\u89c1\u95ee\u9898"}),"\n",(0,o.jsx)(n.h4,{id:"\u6a21\u578b\u627e\u4e0d\u5230",children:"\u6a21\u578b\u627e\u4e0d\u5230"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'# \u68c0\u67e5\u8def\u5f84\u914d\u7f6e\ndef debug_model_paths():\n    folder_name = "checkpoints"\n    paths = folder_paths.get_folder_paths(folder_name)\n    print(f"Configured paths for {folder_name}: {paths}")\n    \n    for path in paths:\n        if os.path.exists(path):\n            files = os.listdir(path)\n            print(f"Files in {path}: {files[:5]}...")  # \u663e\u793a\u524d5\u4e2a\u6587\u4ef6\n        else:\n            print(f"Path does not exist: {path}")\n'})}),"\n",(0,o.jsx)(n.h4,{id:"\u6743\u9650\u95ee\u9898",children:"\u6743\u9650\u95ee\u9898"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# \u68c0\u67e5\u76ee\u5f55\u6743\u9650\nls -la /path/to/models/\n\n# \u4fee\u590d\u6743\u9650\nchmod -R 755 /path/to/models/\nchown -R user:group /path/to/models/\n"})}),"\n",(0,o.jsx)(n.h4,{id:"\u8def\u5f84\u914d\u7f6e\u9519\u8bef",children:"\u8def\u5f84\u914d\u7f6e\u9519\u8bef"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"# \u9519\u8bef\u914d\u7f6e\u793a\u4f8b\nwrong_config:\n    base_path: /nonexistent/path/  # \u8def\u5f84\u4e0d\u5b58\u5728\n    checkpoints: models\\checkpoints  # Windows\u8def\u5f84\u5206\u9694\u7b26\u9519\u8bef\n\n# \u6b63\u786e\u914d\u7f6e\ncorrect_config:\n    base_path: /existing/path/\n    checkpoints: models/checkpoints  # \u4f7f\u7528\u6b63\u659c\u6760\n"})}),"\n",(0,o.jsx)(n.h3,{id:"2-\u8c03\u8bd5\u5de5\u5177",children:"2. \u8c03\u8bd5\u5de5\u5177"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'def diagnose_path_issues():\n    """\u8bca\u65ad\u8def\u5f84\u914d\u7f6e\u95ee\u9898"""\n    \n    # \u68c0\u67e5\u57fa\u7840\u8def\u5f84\n    base_path = folder_paths.base_path\n    print(f"Base path: {base_path}")\n    print(f"Base path exists: {os.path.exists(base_path)}")\n    \n    # \u68c0\u67e5\u6240\u6709\u914d\u7f6e\u7684\u8def\u5f84\n    for folder_name, (paths, extensions) in folder_paths.folder_names_and_paths.items():\n        print(f"\\n{folder_name}:")\n        print(f"  Extensions: {extensions}")\n        \n        for i, path in enumerate(paths):\n            exists = os.path.exists(path)\n            print(f"  Path {i}: {path} (exists: {exists})")\n            \n            if exists:\n                try:\n                    files = folder_paths.get_filename_list(folder_name)\n                    print(f"    Files found: {len(files)}")\n                except Exception as e:\n                    print(f"    Error reading files: {e}")\n\n# \u8fd0\u884c\u8bca\u65ad\ndiagnose_path_issues()\n'})}),"\n",(0,o.jsx)(n.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,o.jsx)(n.p,{children:"ComfyUI\u7684\u6a21\u578b\u8def\u5f84\u7cfb\u7edf\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u7075\u6d3b\u6027\uff1a"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"\u9ed8\u8ba4\u7ed3\u6784\u6e05\u6670"}),"\uff1a\u6807\u51c6\u7684models\u76ee\u5f55\u7ec4\u7ec7"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"\u914d\u7f6e\u7075\u6d3b"}),"\uff1a\u652f\u6301YAML\u914d\u7f6e\u6587\u4ef6\u548c\u547d\u4ee4\u884c\u53c2\u6570"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"\u591a\u8def\u5f84\u652f\u6301"}),"\uff1a\u53ef\u4ee5\u914d\u7f6e\u591a\u4e2a\u641c\u7d22\u8def\u5f84"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"\u517c\u5bb9\u6027\u597d"}),"\uff1a\u652f\u6301A1111\u7b49\u5176\u4ed6\u5de5\u5177\u7684\u8def\u5f84\u7ed3\u6784"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"\u6027\u80fd\u4f18\u5316"}),"\uff1a\u5185\u7f6e\u7f13\u5b58\u548c\u4f18\u5316\u673a\u5236"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"\u6269\u5c55\u6027\u5f3a"}),"\uff1a\u652f\u6301\u52a8\u6001\u6dfb\u52a0\u8def\u5f84\u548c\u81ea\u5b9a\u4e49\u914d\u7f6e"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"\u6b63\u786e\u914d\u7f6e\u6a21\u578b\u8def\u5f84\u4e0d\u4ec5\u80fd\u63d0\u9ad8ComfyUI\u7684\u4f7f\u7528\u6548\u7387\uff0c\u8fd8\u80fd\u66f4\u597d\u5730\u7ec4\u7ec7\u548c\u7ba1\u7406\u5927\u91cf\u7684AI\u6a21\u578b\u6587\u4ef6\u3002\u5efa\u8bae\u6839\u636e\u5b9e\u9645\u9700\u6c42\u9009\u62e9\u5408\u9002\u7684\u914d\u7f6e\u65b9\u6848\uff0c\u5e76\u5b9a\u671f\u68c0\u67e5\u548c\u4f18\u5316\u8def\u5f84\u8bbe\u7f6e\u3002"})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}}}]);