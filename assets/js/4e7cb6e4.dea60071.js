"use strict";(self.webpackChunknotes_3=self.webpackChunknotes_3||[]).push([[9319],{54213:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>i});var t=r(36672);const s={},c=t.createContext(s);function o(e){const n=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(c.Provider,{value:n},e.children)}},86186:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"SoftwareEngineering/\u8f6f\u4ef6\u6d4b\u8bd5/Mock\u6d4b\u8bd5\u7684\u610f\u4e49\u4e0e\u5b9e\u8df5","title":"Mock\u6d4b\u8bd5\u7684\u610f\u4e49\u4e0e\u5b9e\u8df5","description":"Mock\uff08\u6a21\u62df\uff09\u662f\u8f6f\u4ef6\u6d4b\u8bd5\u4e2d\u7684\u4e00\u79cd\u6280\u672f\uff0c\u5b83\u521b\u5efa\u4e00\u4e2a\u865a\u5047\u4f46\u53ef\u63a7\u7684\u66ff\u4ee3\u54c1\u6765\u4ee3\u66ff\u771f\u5b9e\u7684\u4f9d\u8d56\u9879\u3002\u7b80\u5355\u6765\u8bf4\uff0c\u5c31\u662f\u7528\u5047\u7684\u4e1c\u897f\u66ff\u6362\u771f\u7684\u4e1c\u897f\uff0c\u8ba9\u6d4b\u8bd5\u66f4\u52a0\u53ef\u63a7\u548c\u53ef\u9760\u3002","source":"@site/docs/SoftwareEngineering/\u8f6f\u4ef6\u6d4b\u8bd5/Mock\u6d4b\u8bd5\u7684\u610f\u4e49\u4e0e\u5b9e\u8df5.mdx","sourceDirName":"SoftwareEngineering/\u8f6f\u4ef6\u6d4b\u8bd5","slug":"/SoftwareEngineering/\u8f6f\u4ef6\u6d4b\u8bd5/Mock\u6d4b\u8bd5\u7684\u610f\u4e49\u4e0e\u5b9e\u8df5","permalink":"/notes3/docs/SoftwareEngineering/\u8f6f\u4ef6\u6d4b\u8bd5/Mock\u6d4b\u8bd5\u7684\u610f\u4e49\u4e0e\u5b9e\u8df5","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/SoftwareEngineering/\u8f6f\u4ef6\u6d4b\u8bd5/Mock\u6d4b\u8bd5\u7684\u610f\u4e49\u4e0e\u5b9e\u8df5.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"softwareEngineering","previous":{"title":"\u8f6f\u4ef6\u6d4b\u8bd5","permalink":"/notes3/docs/category/\u8f6f\u4ef6\u6d4b\u8bd5"},"next":{"title":"Testing Library","permalink":"/notes3/docs/SoftwareEngineering/\u8f6f\u4ef6\u6d4b\u8bd5/Testing Library"}}');var s=r(23420),c=r(54213);const o={},i=void 0,a={},l=[{value:"\u4e3a\u4ec0\u4e48\u9700\u8981 Mock\uff1f",id:"\u4e3a\u4ec0\u4e48\u9700\u8981-mock",level:2},{value:"\ud83d\udeab \u4e0d\u7528 Mock \u7684\u75db\u70b9",id:"-\u4e0d\u7528-mock-\u7684\u75db\u70b9",level:3},{value:"\u2705 \u4f7f\u7528 Mock \u7684\u4f18\u52bf",id:"-\u4f7f\u7528-mock-\u7684\u4f18\u52bf",level:3},{value:"Mock \u7684\u6838\u5fc3\u4ef7\u503c",id:"mock-\u7684\u6838\u5fc3\u4ef7\u503c",level:2},{value:"1. \ud83c\udfaf \u6d4b\u8bd5\u9694\u79bb - \u4e13\u6ce8\u88ab\u6d4b\u5bf9\u8c61",id:"1--\u6d4b\u8bd5\u9694\u79bb---\u4e13\u6ce8\u88ab\u6d4b\u5bf9\u8c61",level:3},{value:"2. \ud83d\ude80 \u6d4b\u8bd5\u901f\u5ea6 - \u5feb\u5982\u95ea\u7535",id:"2--\u6d4b\u8bd5\u901f\u5ea6---\u5feb\u5982\u95ea\u7535",level:3},{value:"3. \ud83e\uddea \u8fb9\u754c\u6d4b\u8bd5 - \u8986\u76d6\u6240\u6709\u60c5\u51b5",id:"3--\u8fb9\u754c\u6d4b\u8bd5---\u8986\u76d6\u6240\u6709\u60c5\u51b5",level:3},{value:"Mock \u7684\u6b63\u786e\u7406\u89e3",id:"mock-\u7684\u6b63\u786e\u7406\u89e3",level:2},{value:"\u274c \u5e38\u89c1\u8bef\u533a",id:"-\u5e38\u89c1\u8bef\u533a",level:3},{value:"\u2705 \u6b63\u786e\u7528\u6cd5",id:"-\u6b63\u786e\u7528\u6cd5",level:3},{value:"\u5b9e\u9645\u9879\u76ee\u4e2d\u7684 Mock \u7b56\u7565",id:"\u5b9e\u9645\u9879\u76ee\u4e2d\u7684-mock-\u7b56\u7565",level:2},{value:"\u9488\u5bf9\u4e0d\u540c\u7c7b\u578b\u7684\u4f9d\u8d56",id:"\u9488\u5bf9\u4e0d\u540c\u7c7b\u578b\u7684\u4f9d\u8d56",level:3},{value:"\u667a\u80fd Mock \u7b56\u7565",id:"\u667a\u80fd-mock-\u7b56\u7565",level:3},{value:"\u4ec0\u4e48\u65f6\u5019\u4e0d\u7528 Mock\uff1f",id:"\u4ec0\u4e48\u65f6\u5019\u4e0d\u7528-mock",level:2},{value:"\u96c6\u6210\u6d4b\u8bd5",id:"\u96c6\u6210\u6d4b\u8bd5",level:3},{value:"\u7b97\u6cd5\u548c\u5de5\u5177\u51fd\u6570\u6d4b\u8bd5",id:"\u7b97\u6cd5\u548c\u5de5\u5177\u51fd\u6570\u6d4b\u8bd5",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2},{value:"\ud83c\udfaf \u4e09\u4e2a\u5173\u952e\u539f\u5219",id:"-\u4e09\u4e2a\u5173\u952e\u539f\u5219",level:3},{value:"\ud83d\udccb \u4f7f\u7528\u6307\u5357",id:"-\u4f7f\u7528\u6307\u5357",level:3},{value:"\ud83d\udca1 \u8bb0\u4f4f\u8fd9\u4e2a\u6bd4\u55bb",id:"-\u8bb0\u4f4f\u8fd9\u4e2a\u6bd4\u55bb",level:3}];function d(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Mock\uff08\u6a21\u62df\uff09\u662f\u8f6f\u4ef6\u6d4b\u8bd5\u4e2d\u7684\u4e00\u79cd\u6280\u672f\uff0c\u5b83\u521b\u5efa\u4e00\u4e2a",(0,s.jsx)(n.strong,{children:"\u865a\u5047\u4f46\u53ef\u63a7\u7684\u66ff\u4ee3\u54c1"}),"\u6765\u4ee3\u66ff\u771f\u5b9e\u7684\u4f9d\u8d56\u9879\u3002\u7b80\u5355\u6765\u8bf4\uff0c\u5c31\u662f\u7528\u5047\u7684\u4e1c\u897f\u66ff\u6362\u771f\u7684\u4e1c\u897f\uff0c\u8ba9\u6d4b\u8bd5\u66f4\u52a0\u53ef\u63a7\u548c\u53ef\u9760\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u771f\u5b9e\u7684 API \u8c03\u7528\r\nconst users = await fetch('/api/users').then(res => res.json())\r\n\r\n// Mock \u7684 API \u8c03\u7528\r\nconst mockFetch = vi.fn().mockResolvedValue({\r\n  json: () => Promise.resolve([{ id: 1, name: 'Alice' }])\r\n})\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u4e3a\u4ec0\u4e48\u9700\u8981-mock",children:"\u4e3a\u4ec0\u4e48\u9700\u8981 Mock\uff1f"}),"\n",(0,s.jsx)(n.h3,{id:"-\u4e0d\u7528-mock-\u7684\u75db\u70b9",children:"\ud83d\udeab \u4e0d\u7528 Mock \u7684\u75db\u70b9"}),"\n",(0,s.jsx)(n.p,{children:"\u8ba9\u6211\u4eec\u770b\u4e00\u4e2a\u5b9e\u9645\u573a\u666f\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// UserProfile.tsx - \u6ca1\u6709 Mock \u7684\u5669\u68a6\r\nfunction UserProfile({ userId }: { userId: string }) {\r\n  const [user, setUser] = useState(null)\r\n  const [posts, setPosts] = useState([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState(null)\r\n  \r\n  useEffect(() => {\r\n    Promise.all([\r\n      fetch(`/api/users/${userId}`),\r\n      fetch(`/api/users/${userId}/posts`),\r\n      fetch(`/api/users/${userId}/followers`)\r\n    ])\r\n    .then(responses => Promise.all(responses.map(r => r.json())))\r\n    .then(([userData, postsData, followersData]) => {\r\n      setUser(userData)\r\n      setPosts(postsData)\r\n      setFollowers(followersData)\r\n      setLoading(false)\r\n    })\r\n    .catch(err => {\r\n      setError(err.message)\r\n      setLoading(false)\r\n    })\r\n  }, [userId])\r\n  \r\n  return (\r\n    <div>\r\n      {loading && <div>\u52a0\u8f7d\u4e2d...</div>}\r\n      {error && <div>\u9519\u8bef: {error}</div>}\r\n      {user && <div>{user.name}</div>}\r\n    </div>\r\n  )\r\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u6d4b\u8bd5\u8fd9\u4e2a\u7ec4\u4ef6\u65f6\u9047\u5230\u7684\u95ee\u9898\uff1a"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4f9d\u8d56\u5916\u90e8\u670d\u52a1"})," \ud83c\udf10"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u6d4b\u8bd5\u5931\u8d25\u7684\u539f\u56e0\r\n\u274c API \u670d\u52a1\u5668\u6302\u4e86\r\n\u274c \u7f51\u7edc\u8fde\u63a5\u4e0d\u7a33\u5b9a  \r\n\u274c \u6570\u636e\u5e93\u6ca1\u6709\u6d4b\u8bd5\u6570\u636e\r\n\u274c \u7b2c\u4e09\u65b9\u670d\u52a1\u9650\u6d41\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u6d4b\u8bd5\u73af\u5883\u4e0d\u7a33\u5b9a"})," \ud83d\udcc8"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u4eca\u5929\u6d4b\u8bd5\u901a\u8fc7\uff0c\u660e\u5929\u53ef\u80fd\u5931\u8d25\r\n\u2705 \u5468\u4e00\uff1aAPI \u6b63\u5e38\uff0c\u6d4b\u8bd5\u901a\u8fc7\r\n\u274c \u5468\u4e8c\uff1aAPI \u7ef4\u62a4\uff0c\u6d4b\u8bd5\u5931\u8d25\r\n\u274c \u5468\u4e09\uff1a\u6570\u636e\u53d8\u4e86\uff0c\u65ad\u8a00\u5931\u8d25\r\n\u2705 \u5468\u56db\uff1a\u6062\u590d\u6b63\u5e38\uff0c\u6d4b\u8bd5\u901a\u8fc7\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u65e0\u6cd5\u6d4b\u8bd5\u8fb9\u754c\u60c5\u51b5"})," \ud83d\udea8"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u8fd9\u4e9b\u60c5\u51b5\u5728\u771f\u5b9e\u73af\u5883\u4e2d\u5f88\u96be\u590d\u73b0\r\n- \u7f51\u7edc\u8d85\u65f6\u600e\u4e48\u529e\uff1f\r\n- \u670d\u52a1\u5668\u8fd4\u56de 500 \u9519\u8bef\u600e\u4e48\u529e\uff1f\r\n- \u6570\u636e\u683c\u5f0f\u4e0d\u6b63\u786e\u600e\u4e48\u529e\uff1f\r\n- \u7528\u6237\u6ca1\u6709\u6743\u9650\u600e\u4e48\u529e\uff1f\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"-\u4f7f\u7528-mock-\u7684\u4f18\u52bf",children:"\u2705 \u4f7f\u7528 Mock \u7684\u4f18\u52bf"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// UserProfile.test.tsx - Mock \u7248\u672c\r\nimport { vi } from 'vitest'\r\nimport { render, screen, waitFor } from '@testing-library/react'\r\n\r\n// Mock \u6240\u6709\u7684 API \u8c03\u7528\r\nglobal.fetch = vi.fn()\r\n\r\ndescribe('UserProfile', () => {\r\n  beforeEach(() => {\r\n    vi.clearAllMocks()\r\n  })\r\n  \r\n  it('\u663e\u793a\u7528\u6237\u4fe1\u606f', async () => {\r\n    // \ud83c\udfaf \u5b8c\u5168\u63a7\u5236\u8fd4\u56de\u7684\u6570\u636e\r\n    vi.mocked(fetch)\r\n      .mockResolvedValueOnce({\r\n        json: () => Promise.resolve({ id: 1, name: 'Alice' })\r\n      })\r\n      .mockResolvedValueOnce({\r\n        json: () => Promise.resolve([{ id: 1, title: 'Post 1' }])\r\n      })\r\n      .mockResolvedValueOnce({\r\n        json: () => Promise.resolve([{ id: 2, name: 'Bob' }])\r\n      })\r\n    \r\n    render(<UserProfile userId=\"1\" />)\r\n    \r\n    // \u2705 \u6d4b\u8bd5\u7a33\u5b9a\uff0c\u4e0d\u4f9d\u8d56\u5916\u90e8\u670d\u52a1\r\n    await waitFor(() => {\r\n      expect(screen.getByText('Alice')).toBeInTheDocument()\r\n    })\r\n  })\r\n  \r\n  it('\u5904\u7406\u52a0\u8f7d\u72b6\u6001', async () => {\r\n    // \ud83c\udfaf \u6a21\u62df\u6162\u901f\u7f51\u7edc\r\n    vi.mocked(fetch).mockImplementation(\r\n      () => new Promise(resolve => setTimeout(resolve, 100))\r\n    )\r\n    \r\n    render(<UserProfile userId=\"1\" />)\r\n    \r\n    // \u2705 \u786e\u4fdd\u52a0\u8f7d\u72b6\u6001\u6b63\u786e\u663e\u793a\r\n    expect(screen.getByText('\u52a0\u8f7d\u4e2d...')).toBeInTheDocument()\r\n  })\r\n  \r\n  it('\u5904\u7406\u9519\u8bef\u60c5\u51b5', async () => {\r\n    // \ud83c\udfaf \u8f7b\u677e\u6a21\u62df\u9519\u8bef\u573a\u666f\r\n    vi.mocked(fetch).mockRejectedValue(new Error('Network Error'))\r\n    \r\n    render(<UserProfile userId=\"1\" />)\r\n    \r\n    // \u2705 \u9a8c\u8bc1\u9519\u8bef\u5904\u7406\u903b\u8f91\r\n    await waitFor(() => {\r\n      expect(screen.getByText('\u9519\u8bef: Network Error')).toBeInTheDocument()\r\n    })\r\n  })\r\n})\n"})}),"\n",(0,s.jsx)(n.h2,{id:"mock-\u7684\u6838\u5fc3\u4ef7\u503c",children:"Mock \u7684\u6838\u5fc3\u4ef7\u503c"}),"\n",(0,s.jsx)(n.h3,{id:"1--\u6d4b\u8bd5\u9694\u79bb---\u4e13\u6ce8\u88ab\u6d4b\u5bf9\u8c61",children:"1. \ud83c\udfaf \u6d4b\u8bd5\u9694\u79bb - \u4e13\u6ce8\u88ab\u6d4b\u5bf9\u8c61"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u5047\u8bbe\u4f60\u5728\u6d4b\u8bd5\u8d2d\u7269\u8f66\u903b\u8f91\r\nclass ShoppingCart {\r\n  constructor(\r\n    private paymentService: PaymentService,\r\n    private inventoryService: InventoryService,\r\n    private emailService: EmailService\r\n  ) {}\r\n  \r\n  async checkout(items: CartItem[]) {\r\n    // \u68c0\u67e5\u5e93\u5b58\r\n    const available = await this.inventoryService.checkStock(items)\r\n    if (!available) throw new Error('\u5e93\u5b58\u4e0d\u8db3')\r\n    \r\n    // \u5904\u7406\u652f\u4ed8\r\n    const payment = await this.paymentService.charge(this.getTotal(items))\r\n    if (!payment.success) throw new Error('\u652f\u4ed8\u5931\u8d25')\r\n    \r\n    // \u53d1\u9001\u786e\u8ba4\u90ae\u4ef6\r\n    await this.emailService.sendConfirmation(payment.id)\r\n    \r\n    return { orderId: payment.id, success: true }\r\n  }\r\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u4e0d\u7528 Mock \u7684\u95ee\u9898\uff1a"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u274c \u8fd9\u6837\u6d4b\u8bd5\u4f1a\u53d1\u751f\u4ec0\u4e48\uff1f\r\nit('checkout process', async () => {\r\n  const cart = new ShoppingCart(\r\n    new RealPaymentService(),    // \ud83d\udcb3 \u771f\u7684\u4f1a\u6263\u94b1\uff01\r\n    new RealInventoryService(),  // \ud83d\udce6 \u771f\u7684\u4f1a\u51cf\u5e93\u5b58\uff01\r\n    new RealEmailService()       // \ud83d\udce7 \u771f\u7684\u4f1a\u53d1\u90ae\u4ef6\uff01\r\n  )\r\n  \r\n  // \u8fd9\u4e2a\u6d4b\u8bd5\u4f1a\uff1a\r\n  // 1. \u771f\u7684\u4ece\u4fe1\u7528\u5361\u6263\u94b1\r\n  // 2. \u771f\u7684\u51cf\u5c11\u5546\u54c1\u5e93\u5b58\r\n  // 3. \u771f\u7684\u53d1\u9001\u90ae\u4ef6\u7ed9\u5ba2\u6237\r\n  // 4. \u4f9d\u8d56\u7f51\u7edc\u548c\u5916\u90e8\u670d\u52a1\r\n})\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u4f7f\u7528 Mock \u7684\u89e3\u51b3\u65b9\u6848\uff1a"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u2705 \u4f7f\u7528 Mock\uff0c\u4e13\u6ce8\u6d4b\u8bd5\u8d2d\u7269\u8f66\u903b\u8f91\r\nit('successful checkout process', async () => {\r\n  // Mock \u6240\u6709\u4f9d\u8d56\r\n  const mockPayment = vi.fn().mockResolvedValue({ success: true, id: 'order123' })\r\n  const mockInventory = vi.fn().mockResolvedValue(true)\r\n  const mockEmail = vi.fn().mockResolvedValue(true)\r\n  \r\n  const cart = new ShoppingCart(\r\n    { charge: mockPayment },\r\n    { checkStock: mockInventory },\r\n    { sendConfirmation: mockEmail }\r\n  )\r\n  \r\n  const result = await cart.checkout([{ id: 1, quantity: 2 }])\r\n  \r\n  // \u9a8c\u8bc1\u8d2d\u7269\u8f66\u7684\u4e1a\u52a1\u903b\u8f91\r\n  expect(mockInventory).toHaveBeenCalledWith([{ id: 1, quantity: 2 }])\r\n  expect(mockPayment).toHaveBeenCalled()\r\n  expect(mockEmail).toHaveBeenCalledWith('order123')\r\n  expect(result.success).toBe(true)\r\n})\r\n\r\nit('handles payment failure', async () => {\r\n  // \ud83c\udfaf \u8f7b\u677e\u6d4b\u8bd5\u652f\u4ed8\u5931\u8d25\u573a\u666f\r\n  const mockPayment = vi.fn().mockResolvedValue({ success: false })\r\n  const mockInventory = vi.fn().mockResolvedValue(true)\r\n  const mockEmail = vi.fn()\r\n  \r\n  const cart = new ShoppingCart(\r\n    { charge: mockPayment },\r\n    { checkStock: mockInventory },\r\n    { sendConfirmation: mockEmail }\r\n  )\r\n  \r\n  await expect(cart.checkout([{ id: 1, quantity: 2 }])).rejects.toThrow('\u652f\u4ed8\u5931\u8d25')\r\n  \r\n  // \u9a8c\u8bc1\u652f\u4ed8\u5931\u8d25\u65f6\u4e0d\u53d1\u9001\u90ae\u4ef6\r\n  expect(mockEmail).not.toHaveBeenCalled()\r\n})\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2--\u6d4b\u8bd5\u901f\u5ea6---\u5feb\u5982\u95ea\u7535",children:"2. \ud83d\ude80 \u6d4b\u8bd5\u901f\u5ea6 - \u5feb\u5982\u95ea\u7535"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u771f\u5b9e\u7684\u6587\u4ef6\u4e0a\u4f20\u6d4b\u8bd5\r\ndescribe('FileUploader - Real', () => {\r\n  it('uploads large file', async () => {\r\n    // \u274c \u8fd9\u4e2a\u6d4b\u8bd5\u9700\u8981\uff1a\r\n    // - \u521b\u5efa\u771f\u5b9e\u7684\u5927\u6587\u4ef6 (100MB)\r\n    // - \u4e0a\u4f20\u5230\u771f\u5b9e\u7684\u670d\u52a1\u5668\r\n    // - \u7b49\u5f85\u7f51\u7edc\u4f20\u8f93\r\n    // - \u9a8c\u8bc1\u670d\u52a1\u5668\u5b58\u50a8\r\n    // \u603b\u65f6\u95f4\uff1a30-60 \u79d2\r\n  })\r\n})\r\n\r\n// Mock \u7248\u672c\u7684\u6587\u4ef6\u4e0a\u4f20\u6d4b\u8bd5\r\ndescribe('FileUploader - Mock', () => {\r\n  it('uploads large file', async () => {\r\n    // \u2705 Mock \u7248\u672c\uff1a\r\n    const mockUpload = vi.fn().mockResolvedValue({ \r\n      success: true, \r\n      url: 'https://cdn.example.com/file123.jpg' \r\n    })\r\n    \r\n    const uploader = new FileUploader({ uploadService: { upload: mockUpload } })\r\n    const result = await uploader.upload('large-file.jpg')\r\n    \r\n    expect(result.success).toBe(true)\r\n    expect(mockUpload).toHaveBeenCalledWith('large-file.jpg')\r\n    // \u603b\u65f6\u95f4\uff1a< 1 \u79d2\r\n  })\r\n})\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3--\u8fb9\u754c\u6d4b\u8bd5---\u8986\u76d6\u6240\u6709\u60c5\u51b5",children:"3. \ud83e\uddea \u8fb9\u754c\u6d4b\u8bd5 - \u8986\u76d6\u6240\u6709\u60c5\u51b5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"describe('WeatherWidget', () => {\r\n  // \u2705 \u5404\u79cd\u5929\u6c14\u60c5\u51b5\r\n  it.each([\r\n    ['sunny', '\u2600\ufe0f'],\r\n    ['rainy', '\ud83c\udf27\ufe0f'],\r\n    ['snowy', '\u2744\ufe0f'],\r\n    ['stormy', '\u26c8\ufe0f'],\r\n    ['unknown', '\u2753']\r\n  ])('displays correct icon for %s weather', async (weather, expectedIcon) => {\r\n    vi.mocked(getWeather).mockResolvedValue({ condition: weather })\r\n    \r\n    render(<WeatherWidget city=\"Beijing\" />)\r\n    \r\n    await waitFor(() => {\r\n      expect(screen.getByText(expectedIcon)).toBeInTheDocument()\r\n    })\r\n  })\r\n  \r\n  // \u2705 \u7f51\u7edc\u95ee\u9898\r\n  it('handles network timeout', async () => {\r\n    vi.mocked(getWeather).mockImplementation(\r\n      () => new Promise((_, reject) => \r\n        setTimeout(() => reject(new Error('timeout')), 5000)\r\n      )\r\n    )\r\n    \r\n    render(<WeatherWidget city=\"Beijing\" />)\r\n    \r\n    await waitFor(() => {\r\n      expect(screen.getByText('\u7f51\u7edc\u8d85\u65f6')).toBeInTheDocument()\r\n    })\r\n  })\r\n  \r\n  // \u2705 API \u9650\u6d41\r\n  it('handles rate limit error', async () => {\r\n    vi.mocked(getWeather).mockRejectedValue({ \r\n      status: 429, \r\n      message: 'Too Many Requests' \r\n    })\r\n    \r\n    render(<WeatherWidget city=\"Beijing\" />)\r\n    \r\n    await waitFor(() => {\r\n      expect(screen.getByText('\u8bf7\u6c42\u8fc7\u4e8e\u9891\u7e41\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5')).toBeInTheDocument()\r\n    })\r\n  })\r\n})\n"})}),"\n",(0,s.jsx)(n.h2,{id:"mock-\u7684\u6b63\u786e\u7406\u89e3",children:"Mock \u7684\u6b63\u786e\u7406\u89e3"}),"\n",(0,s.jsx)(n.h3,{id:"-\u5e38\u89c1\u8bef\u533a",children:"\u274c \u5e38\u89c1\u8bef\u533a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u8bef\u533a1\uff1a\u6d4b\u8bd5 Mock \u672c\u8eab\r\nit('API returns user data', () => {\r\n  const mockUser = { id: 1, name: 'Alice' }\r\n  vi.mocked(getUser).mockResolvedValue(mockUser)\r\n  \r\n  // \u274c \u8fd9\u6ca1\u6709\u610f\u4e49\uff0c\u5f53\u7136\u4f1a\u8fd4\u56de\u6211\u4eec\u8bbe\u7f6e\u7684\u503c\r\n  expect(getUser()).resolves.toEqual(mockUser)\r\n})\r\n\r\n// \u8bef\u533a2\uff1aMock \u5f97\u592a\u7ec6\u81f4\r\nit('button changes color', () => {\r\n  const mockSetState = vi.fn()\r\n  vi.mock('react', () => ({\r\n    useState: () => ['blue', mockSetState]\r\n  }))\r\n  \r\n  // \u274c \u8fd9\u7834\u574f\u4e86\u7ec4\u4ef6\u7684\u5185\u90e8\u5b9e\u73b0\r\n  render(<ColorButton />)\r\n})\n"})}),"\n",(0,s.jsx)(n.h3,{id:"-\u6b63\u786e\u7528\u6cd5",children:"\u2705 \u6b63\u786e\u7528\u6cd5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u2705 \u6d4b\u8bd5\u7ec4\u4ef6\u5bf9 Mock \u6570\u636e\u7684\u5904\u7406\r\nit('displays user profile correctly', async () => {\r\n  const mockUser = { \r\n    id: 1, \r\n    name: 'Alice', \r\n    avatar: 'https://example.com/avatar.jpg',\r\n    bio: 'Frontend Developer'\r\n  }\r\n  vi.mocked(getUser).mockResolvedValue(mockUser)\r\n  \r\n  render(<UserProfile userId=\"1\" />)\r\n  \r\n  // \u6d4b\u8bd5\u7ec4\u4ef6\u662f\u5426\u6b63\u786e\u6e32\u67d3\u6570\u636e\r\n  await waitFor(() => {\r\n    expect(screen.getByText('Alice')).toBeInTheDocument()\r\n    expect(screen.getByText('Frontend Developer')).toBeInTheDocument()\r\n    expect(screen.getByRole('img')).toHaveAttribute('src', mockUser.avatar)\r\n  })\r\n})\r\n\r\n// \u2705 \u6d4b\u8bd5\u4ea4\u4e92\u903b\u8f91\r\nit('handles user click events', async () => {\r\n  const mockOnFollow = vi.fn()\r\n  \r\n  render(<UserCard user={mockUser} onFollow={mockOnFollow} />)\r\n  \r\n  await userEvent.click(screen.getByText('\u5173\u6ce8'))\r\n  \r\n  // \u6d4b\u8bd5\u4e8b\u4ef6\u662f\u5426\u6b63\u786e\u89e6\u53d1\r\n  expect(mockOnFollow).toHaveBeenCalledWith(mockUser.id)\r\n})\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u5b9e\u9645\u9879\u76ee\u4e2d\u7684-mock-\u7b56\u7565",children:"\u5b9e\u9645\u9879\u76ee\u4e2d\u7684 Mock \u7b56\u7565"}),"\n",(0,s.jsx)(n.h3,{id:"\u9488\u5bf9\u4e0d\u540c\u7c7b\u578b\u7684\u4f9d\u8d56",children:"\u9488\u5bf9\u4e0d\u540c\u7c7b\u578b\u7684\u4f9d\u8d56"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// 1. HTTP \u8bf7\u6c42\r\nvi.mock('axios', () => ({\r\n  default: {\r\n    get: vi.fn(),\r\n    post: vi.fn(),\r\n    put: vi.fn(),\r\n    delete: vi.fn()\r\n  }\r\n}))\r\n\r\n// 2. \u672c\u5730\u5b58\u50a8\r\nvi.mock('@/utils/storage', () => ({\r\n  getItem: vi.fn(),\r\n  setItem: vi.fn(),\r\n  removeItem: vi.fn()\r\n}))\r\n\r\n// 3. \u8def\u7531\u5bfc\u822a\r\nvi.mock('react-router-dom', () => ({\r\n  useNavigate: () => vi.fn(),\r\n  useLocation: () => ({ pathname: '/test' })\r\n}))\r\n\r\n// 4. \u65f6\u95f4\u76f8\u5173\r\nvi.mock('@/utils/date', () => ({\r\n  getCurrentTime: vi.fn(() => '2024-01-01 12:00:00'),\r\n  formatDate: vi.fn((date) => '2024\u5e741\u67081\u65e5')\r\n}))\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u667a\u80fd-mock-\u7b56\u7565",children:"\u667a\u80fd Mock \u7b56\u7565"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// utils/test-helpers.ts\r\nexport function createMockUser(overrides = {}) {\r\n  return {\r\n    id: Math.random().toString(),\r\n    name: 'Test User',\r\n    email: 'test@example.com',\r\n    avatar: 'https://example.com/avatar.jpg',\r\n    createdAt: new Date().toISOString(),\r\n    ...overrides\r\n  }\r\n}\r\n\r\nexport function createMockApiResponse<T>(data: T, success = true) {\r\n  return {\r\n    success,\r\n    data: success ? data : null,\r\n    error: success ? null : 'Mock error',\r\n    message: success ? 'Success' : 'Something went wrong'\r\n  }\r\n}\r\n\r\n// \u4f7f\u7528\r\nit('renders user list', async () => {\r\n  const mockUsers = [\r\n    createMockUser({ name: 'Alice' }),\r\n    createMockUser({ name: 'Bob' }),\r\n    createMockUser({ name: 'Charlie' })\r\n  ]\r\n  \r\n  vi.mocked(getUsers).mockResolvedValue(\r\n    createMockApiResponse(mockUsers)\r\n  )\r\n  \r\n  render(<UserList />)\r\n  \r\n  await waitFor(() => {\r\n    expect(screen.getByText('Alice')).toBeInTheDocument()\r\n    expect(screen.getByText('Bob')).toBeInTheDocument()\r\n    expect(screen.getByText('Charlie')).toBeInTheDocument()\r\n  })\r\n})\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u4ec0\u4e48\u65f6\u5019\u4e0d\u7528-mock",children:"\u4ec0\u4e48\u65f6\u5019\u4e0d\u7528 Mock\uff1f"}),"\n",(0,s.jsx)(n.h3,{id:"\u96c6\u6210\u6d4b\u8bd5",children:"\u96c6\u6210\u6d4b\u8bd5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// e2e/user-flow.spec.ts\r\ntest('\u7528\u6237\u5b8c\u6574\u6d41\u7a0b', async ({ page }) => {\r\n  // \u4f7f\u7528\u771f\u5b9e\u7684\u540e\u7aef API\r\n  await page.goto('/login')\r\n  await page.fill('[name=\"email\"]', 'test@example.com')\r\n  await page.fill('[name=\"password\"]', 'password123')\r\n  await page.click('button[type=\"submit\"]')\r\n  \r\n  // \u9a8c\u8bc1\u771f\u5b9e\u7684\u7528\u6237\u6d41\u7a0b\r\n  await expect(page).toHaveURL('/dashboard')\r\n  await expect(page.locator('text=\u6b22\u8fce\u56de\u6765')).toBeVisible()\r\n})\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u7b97\u6cd5\u548c\u5de5\u5177\u51fd\u6570\u6d4b\u8bd5",children:"\u7b97\u6cd5\u548c\u5de5\u5177\u51fd\u6570\u6d4b\u8bd5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u7eaf\u51fd\u6570\u4e0d\u9700\u8981 Mock\r\ndescribe('calculateDiscount', () => {\r\n  it('calculates 10% discount correctly', () => {\r\n    expect(calculateDiscount(100, 0.1)).toBe(90)\r\n    expect(calculateDiscount(50, 0.2)).toBe(40)\r\n  })\r\n})\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,s.jsxs)(n.p,{children:["Mock \u7684\u6838\u5fc3\u4ef7\u503c\u662f",(0,s.jsx)(n.strong,{children:"\u8ba9\u6d4b\u8bd5\u53d8\u5f97\u53ef\u63a7\u3001\u5feb\u901f\u3001\u5168\u9762"}),"\uff1a"]}),"\n",(0,s.jsx)(n.h3,{id:"-\u4e09\u4e2a\u5173\u952e\u539f\u5219",children:"\ud83c\udfaf \u4e09\u4e2a\u5173\u952e\u539f\u5219"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u9694\u79bb\u6027"})," - \u53ea\u6d4b\u8bd5\u5f53\u524d\u5355\u5143\uff0c\u4e0d\u6d4b\u8bd5\u4f9d\u8d56"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u53ef\u63a7\u6027"})," - \u7cbe\u786e\u63a7\u5236\u4f9d\u8d56\u7684\u884c\u4e3a\u548c\u8fd4\u56de\u503c"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5168\u9762\u6027"})," - \u8f7b\u677e\u6d4b\u8bd5\u5404\u79cd\u8fb9\u754c\u548c\u5f02\u5e38\u60c5\u51b5"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"-\u4f7f\u7528\u6307\u5357",children:"\ud83d\udccb \u4f7f\u7528\u6307\u5357"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"\u5355\u5143\u6d4b\u8bd5"})," - \u5927\u91cf\u4f7f\u7528 Mock"]}),"\n",(0,s.jsxs)(n.li,{children:["\u26a0\ufe0f ",(0,s.jsx)(n.strong,{children:"\u96c6\u6210\u6d4b\u8bd5"})," - \u9002\u5ea6\u4f7f\u7528 Mock"]}),"\n",(0,s.jsxs)(n.li,{children:["\u274c ",(0,s.jsx)(n.strong,{children:"E2E \u6d4b\u8bd5"})," - \u4e0d\u4f7f\u7528 Mock"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"-\u8bb0\u4f4f\u8fd9\u4e2a\u6bd4\u55bb",children:"\ud83d\udca1 \u8bb0\u4f4f\u8fd9\u4e2a\u6bd4\u55bb"}),"\n",(0,s.jsxs)(n.p,{children:["Mock \u5c31\u50cf\u662f",(0,s.jsx)(n.strong,{children:"\u7535\u5f71\u62cd\u6444\u4e2d\u7684\u9053\u5177"}),"\uff1a"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\ud83c\udfac \u6f14\u5458\uff08\u7ec4\u4ef6\uff09\u4e13\u6ce8\u4e8e\u8868\u6f14\uff08\u4e1a\u52a1\u903b\u8f91\uff09"}),"\n",(0,s.jsx)(n.li,{children:"\ud83c\udfe0 \u9053\u5177\uff08Mock\uff09\u63d0\u4f9b\u5fc5\u8981\u7684\u73af\u5883"}),"\n",(0,s.jsx)(n.li,{children:"\ud83c\udfaf \u5bfc\u6f14\uff08\u6d4b\u8bd5\uff09\u63a7\u5236\u6574\u4e2a\u573a\u666f"}),"\n",(0,s.jsx)(n.li,{children:"\u26a1 \u4e0d\u7528\u7b49\u771f\u5b9e\u7684\u623f\u5b50\u5efa\u597d\u624d\u80fd\u62cd\u620f"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Mock \u4e0d\u662f\u4e3a\u4e86\u6b3a\u9a97\uff0c\u800c\u662f\u4e3a\u4e86\u4e13\u6ce8\u3002"})," \u5b83\u8ba9\u6211\u4eec\u80fd\u591f\u5728\u53ef\u63a7\u7684\u73af\u5883\u4e2d\uff0c\u4e13\u6ce8\u6d4b\u8bd5\u7ec4\u4ef6\u7684\u6838\u5fc3\u903b\u8f91\uff0c\u786e\u4fdd\u4ee3\u7801\u7684\u8d28\u91cf\u548c\u53ef\u9760\u6027\u3002"]})]})}function u(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);