"use strict";(self.webpackChunknotes_3=self.webpackChunknotes_3||[]).push([[26681],{54213:(e,n,t)=>{t.d(n,{R:()=>d,x:()=>c});var s=t(36672);const l={},i=s.createContext(l);function d(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),s.createElement(i.Provider,{value:n},e.children)}},78250:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>c,default:()=>o,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"Tools/\u64cd\u4f5c\u7cfb\u7edf/Ubuntu/timedatectl\u65f6\u533a\u7ba1\u7406","title":"timedatectl \u65f6\u533a\u7ba1\u7406","description":"\u7b80\u4ecb","source":"@site/docs/Tools/\u64cd\u4f5c\u7cfb\u7edf/Ubuntu/timedatectl\u65f6\u533a\u7ba1\u7406.mdx","sourceDirName":"Tools/\u64cd\u4f5c\u7cfb\u7edf/Ubuntu","slug":"/Tools/\u64cd\u4f5c\u7cfb\u7edf/Ubuntu/timedatectl\u65f6\u533a\u7ba1\u7406","permalink":"/notes3/docs/Tools/\u64cd\u4f5c\u7cfb\u7edf/Ubuntu/timedatectl\u65f6\u533a\u7ba1\u7406","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Tools/\u64cd\u4f5c\u7cfb\u7edf/Ubuntu/timedatectl\u65f6\u533a\u7ba1\u7406.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"tools","previous":{"title":"apt","permalink":"/notes3/docs/Tools/\u64cd\u4f5c\u7cfb\u7edf/Ubuntu/apt"},"next":{"title":"\u4f7f\u7528\u516c\u94a5\u767b\u5f55","permalink":"/notes3/docs/Tools/\u64cd\u4f5c\u7cfb\u7edf/Ubuntu/\u4f7f\u7528\u516c\u94a5\u767b\u5f55"}}');var l=t(23420),i=t(54213);const d={},c="timedatectl \u65f6\u533a\u7ba1\u7406",r={},a=[{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",level:2},{value:"\u4e3b\u8981\u529f\u80fd",id:"\u4e3b\u8981\u529f\u80fd",level:3},{value:"\u4f18\u52bf",id:"\u4f18\u52bf",level:3},{value:"\u57fa\u672c\u7528\u6cd5",id:"\u57fa\u672c\u7528\u6cd5",level:2},{value:"\u67e5\u770b\u5f53\u524d\u65f6\u95f4\u548c\u65e5\u671f",id:"\u67e5\u770b\u5f53\u524d\u65f6\u95f4\u548c\u65e5\u671f",level:3},{value:"\u65f6\u533a\u7ba1\u7406",id:"\u65f6\u533a\u7ba1\u7406",level:2},{value:"\u67e5\u770b\u5f53\u524d\u65f6\u533a",id:"\u67e5\u770b\u5f53\u524d\u65f6\u533a",level:3},{value:"\u5217\u51fa\u6240\u6709\u53ef\u7528\u65f6\u533a",id:"\u5217\u51fa\u6240\u6709\u53ef\u7528\u65f6\u533a",level:3},{value:"\u6309\u5730\u7406\u4f4d\u7f6e\u7b5b\u9009\u65f6\u533a",id:"\u6309\u5730\u7406\u4f4d\u7f6e\u7b5b\u9009\u65f6\u533a",level:3},{value:"\u8bbe\u7f6e\u65f6\u533a",id:"\u8bbe\u7f6e\u65f6\u533a",level:3},{value:"\u65f6\u95f4\u548c\u65e5\u671f\u8bbe\u7f6e",id:"\u65f6\u95f4\u548c\u65e5\u671f\u8bbe\u7f6e",level:2},{value:"\u8bbe\u7f6e\u65f6\u95f4",id:"\u8bbe\u7f6e\u65f6\u95f4",level:3},{value:"\u8bbe\u7f6e\u65e5\u671f",id:"\u8bbe\u7f6e\u65e5\u671f",level:3},{value:"\u540c\u65f6\u8bbe\u7f6e\u65e5\u671f\u548c\u65f6\u95f4",id:"\u540c\u65f6\u8bbe\u7f6e\u65e5\u671f\u548c\u65f6\u95f4",level:3},{value:"\u786c\u4ef6\u65f6\u949f\u7ba1\u7406",id:"\u786c\u4ef6\u65f6\u949f\u7ba1\u7406",level:2},{value:"\u67e5\u770b\u786c\u4ef6\u65f6\u949f\u8bbe\u7f6e",id:"\u67e5\u770b\u786c\u4ef6\u65f6\u949f\u8bbe\u7f6e",level:3},{value:"\u8bbe\u7f6e\u786c\u4ef6\u65f6\u949f",id:"\u8bbe\u7f6e\u786c\u4ef6\u65f6\u949f",level:3},{value:"NTP \u65f6\u95f4\u540c\u6b65",id:"ntp-\u65f6\u95f4\u540c\u6b65",level:2},{value:"NTP \u7b80\u4ecb",id:"ntp-\u7b80\u4ecb",level:3},{value:"\u542f\u7528 NTP \u540c\u6b65",id:"\u542f\u7528-ntp-\u540c\u6b65",level:3},{value:"\u7981\u7528 NTP \u540c\u6b65",id:"\u7981\u7528-ntp-\u540c\u6b65",level:3},{value:"\u68c0\u67e5 NTP \u540c\u6b65\u72b6\u6001",id:"\u68c0\u67e5-ntp-\u540c\u6b65\u72b6\u6001",level:3},{value:"\u5e38\u7528\u547d\u4ee4\u901f\u67e5",id:"\u5e38\u7528\u547d\u4ee4\u901f\u67e5",level:2},{value:"\u5b9e\u7528\u793a\u4f8b",id:"\u5b9e\u7528\u793a\u4f8b",level:2},{value:"\u793a\u4f8b 1: \u914d\u7f6e\u4e2d\u56fd\u670d\u52a1\u5668\u65f6\u533a",id:"\u793a\u4f8b-1-\u914d\u7f6e\u4e2d\u56fd\u670d\u52a1\u5668\u65f6\u533a",level:3},{value:"\u793a\u4f8b 2: \u624b\u52a8\u8bbe\u7f6e\u65f6\u95f4(\u65e0\u7f51\u7edc\u73af\u5883)",id:"\u793a\u4f8b-2-\u624b\u52a8\u8bbe\u7f6e\u65f6\u95f4\u65e0\u7f51\u7edc\u73af\u5883",level:3},{value:"\u793a\u4f8b 3: \u914d\u7f6e UTC \u65f6\u533a(\u670d\u52a1\u5668\u63a8\u8350)",id:"\u793a\u4f8b-3-\u914d\u7f6e-utc-\u65f6\u533a\u670d\u52a1\u5668\u63a8\u8350",level:3},{value:"\u6545\u969c\u6392\u67e5",id:"\u6545\u969c\u6392\u67e5",level:2},{value:"\u95ee\u9898 1: \u65e0\u6cd5\u8bbe\u7f6e\u65f6\u95f4",id:"\u95ee\u9898-1-\u65e0\u6cd5\u8bbe\u7f6e\u65f6\u95f4",level:3},{value:"\u95ee\u9898 2: \u65f6\u533a\u8bbe\u7f6e\u5931\u8d25",id:"\u95ee\u9898-2-\u65f6\u533a\u8bbe\u7f6e\u5931\u8d25",level:3},{value:"\u95ee\u9898 3: NTP \u4e0d\u652f\u6301",id:"\u95ee\u9898-3-ntp-\u4e0d\u652f\u6301",level:3},{value:"\u53c2\u8003\u8d44\u6599",id:"\u53c2\u8003\u8d44\u6599",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"timedatectl-\u65f6\u533a\u7ba1\u7406",children:"timedatectl \u65f6\u533a\u7ba1\u7406"})}),"\n",(0,l.jsx)(n.h2,{id:"\u7b80\u4ecb",children:"\u7b80\u4ecb"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"timedatectl"})," \u662f systemd \u7cfb\u7edf\u548c\u670d\u52a1\u7ba1\u7406\u5668\u7684\u4e00\u90e8\u5206,\u7528\u4e8e\u67e5\u8be2\u548c\u66f4\u6539\u7cfb\u7edf\u65f6\u949f\u53ca\u5176\u8bbe\u7f6e\u3002\u5b83\u662f\u73b0\u4ee3 Linux \u53d1\u884c\u7248(\u5982 RHEL/CentOS 7+\u3001Fedora 21+\u3001Ubuntu 16.04+)\u4e2d\u66ff\u4ee3\u4f20\u7edf ",(0,l.jsx)(n.code,{children:"date"})," \u547d\u4ee4\u7684\u65b0\u5de5\u5177\u3002"]}),"\n",(0,l.jsx)(n.h3,{id:"\u4e3b\u8981\u529f\u80fd",children:"\u4e3b\u8981\u529f\u80fd"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u67e5\u8be2\u548c\u8bbe\u7f6e\u7cfb\u7edf\u65e5\u671f\u548c\u65f6\u95f4"}),"\n",(0,l.jsx)(n.li,{children:"\u7ba1\u7406\u7cfb\u7edf\u65f6\u533a"}),"\n",(0,l.jsx)(n.li,{children:"\u542f\u7528/\u7981\u7528 NTP \u65f6\u95f4\u540c\u6b65"}),"\n",(0,l.jsx)(n.li,{children:"\u7ba1\u7406\u786c\u4ef6\u65f6\u949f(RTC)"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u4f18\u52bf",children:"\u4f18\u52bf"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u7ef4\u62a4\u7cfb\u7edf\u4efb\u52a1\u7684\u53ca\u65f6\u8fd0\u884c(Linux \u4e2d\u5927\u591a\u6570\u4efb\u52a1\u7531\u65f6\u95f4\u63a7\u5236)"}),"\n",(0,l.jsx)(n.li,{children:"\u51c6\u786e\u8bb0\u5f55\u4e8b\u4ef6\u548c\u7cfb\u7edf\u4fe1\u606f\u7684\u65f6\u95f4\u6233"}),"\n",(0,l.jsx)(n.li,{children:"\u7edf\u4e00\u7684\u65f6\u95f4\u7ba1\u7406\u63a5\u53e3"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u57fa\u672c\u7528\u6cd5",children:"\u57fa\u672c\u7528\u6cd5"}),"\n",(0,l.jsx)(n.h3,{id:"\u67e5\u770b\u5f53\u524d\u65f6\u95f4\u548c\u65e5\u671f",children:"\u67e5\u770b\u5f53\u524d\u65f6\u95f4\u548c\u65e5\u671f"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u663e\u793a\u7cfb\u7edf\u5f53\u524d\u65f6\u95f4\u3001\u65e5\u671f\u548c\u65f6\u533a\u4fe1\u606f\ntimedatectl\n# \u6216\ntimedatectl status\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u8f93\u51fa\u793a\u4f8b:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"               Local time: Mon 2024-01-15 10:30:45 CST\n           Universal time: Mon 2024-01-15 02:30:45 UTC\n                 RTC time: Mon 2024-01-15 02:30:45\n                Time zone: Asia/Shanghai (CST, +0800)\nSystem clock synchronized: yes\n              NTP service: active\n          RTC in local TZ: no\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u8f93\u51fa\u5b57\u6bb5\u8bf4\u660e:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Local time"}),": \u672c\u5730\u65f6\u95f4"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Universal time"}),": UTC \u65f6\u95f4(\u4e16\u754c\u6807\u51c6\u65f6\u95f4)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"RTC time"}),": \u786c\u4ef6\u65f6\u949f\u65f6\u95f4(Real-Time Clock)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Time zone"}),": \u5f53\u524d\u65f6\u533a"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"System clock synchronized"}),": \u7cfb\u7edf\u65f6\u949f\u662f\u5426\u5df2\u540c\u6b65"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"NTP service"}),": NTP \u670d\u52a1\u72b6\u6001"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"RTC in local TZ"}),": \u786c\u4ef6\u65f6\u949f\u662f\u5426\u4f7f\u7528\u672c\u5730\u65f6\u533a"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u65f6\u533a\u7ba1\u7406",children:"\u65f6\u533a\u7ba1\u7406"}),"\n",(0,l.jsx)(n.h3,{id:"\u67e5\u770b\u5f53\u524d\u65f6\u533a",children:"\u67e5\u770b\u5f53\u524d\u65f6\u533a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# \u67e5\u770b\u5b8c\u6574\u4fe1\u606f\ntimedatectl\n\n# \u4ec5\u67e5\u770b\u65f6\u533a\u4fe1\u606f\ntimedatectl | grep "Time zone"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u5217\u51fa\u6240\u6709\u53ef\u7528\u65f6\u533a",children:"\u5217\u51fa\u6240\u6709\u53ef\u7528\u65f6\u533a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u5217\u51fa\u6240\u6709\u65f6\u533a\ntimedatectl list-timezones\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u6309\u5730\u7406\u4f4d\u7f6e\u7b5b\u9009\u65f6\u533a",children:"\u6309\u5730\u7406\u4f4d\u7f6e\u7b5b\u9009\u65f6\u533a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# \u67e5\u770b\u4e9a\u6d32\u65f6\u533a\ntimedatectl list-timezones | grep -i "Asia"\n\n# \u67e5\u770b\u6b27\u6d32\u65f6\u533a\ntimedatectl list-timezones | grep -i "Europe"\n\n# \u67e5\u770b\u7f8e\u6d32\u65f6\u533a\ntimedatectl list-timezones | grep -i "America"\n\n# \u7cbe\u786e\u7b5b\u9009(\u5982\u4e9a\u6d32\u4ee5B\u5f00\u5934\u7684\u57ce\u5e02)\ntimedatectl list-timezones | egrep -o "Asia/B.*"\ntimedatectl list-timezones | egrep -o "Europe/L.*"\ntimedatectl list-timezones | egrep -o "America/N.*"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u8bbe\u7f6e\u65f6\u533a",children:"\u8bbe\u7f6e\u65f6\u533a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u8bbe\u7f6e\u4e3a\u4e2d\u56fd\u4e0a\u6d77\u65f6\u533a\nsudo timedatectl set-timezone Asia/Shanghai\n\n# \u8bbe\u7f6e\u4e3a\u5317\u4eac\u65f6\u533a(\u540c\u4e0a\u6d77)\nsudo timedatectl set-timezone Asia/Shanghai\n\n# \u8bbe\u7f6e\u4e3a UTC \u65f6\u533a(\u63a8\u8350\u670d\u52a1\u5668\u4f7f\u7528)\nsudo timedatectl set-timezone UTC\n"})}),"\n",(0,l.jsx)(n.admonition,{title:"\u6ce8\u610f\u4e8b\u9879",type:"warning",children:(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u65f6\u533a\u540d\u79f0\u5fc5\u987b\u51c6\u786e,\u5426\u5219\u4f1a\u62a5\u9519"}),"\n",(0,l.jsxs)(n.li,{children:["\u65f6\u533a\u683c\u5f0f\u4e3a ",(0,l.jsx)(n.code,{children:"\u533a\u57df/\u57ce\u5e02"}),",\u5982 ",(0,l.jsx)(n.code,{children:"Asia/Shanghai"})]}),"\n",(0,l.jsx)(n.li,{children:"\u670d\u52a1\u5668\u5efa\u8bae\u4f7f\u7528 UTC \u65f6\u533a,\u907f\u514d\u8de8\u65f6\u533a\u6df7\u4e71"}),"\n"]})}),"\n",(0,l.jsx)(n.h2,{id:"\u65f6\u95f4\u548c\u65e5\u671f\u8bbe\u7f6e",children:"\u65f6\u95f4\u548c\u65e5\u671f\u8bbe\u7f6e"}),"\n",(0,l.jsx)(n.h3,{id:"\u8bbe\u7f6e\u65f6\u95f4",children:"\u8bbe\u7f6e\u65f6\u95f4"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u4ec5\u8bbe\u7f6e\u65f6\u95f4(\u683c\u5f0f: HH:MM:SS)\nsudo timedatectl set-time 15:58:30\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u8bbe\u7f6e\u65e5\u671f",children:"\u8bbe\u7f6e\u65e5\u671f"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u4ec5\u8bbe\u7f6e\u65e5\u671f(\u683c\u5f0f: YYYY-MM-DD)\nsudo timedatectl set-time 2024-01-15\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u540c\u65f6\u8bbe\u7f6e\u65e5\u671f\u548c\u65f6\u95f4",children:"\u540c\u65f6\u8bbe\u7f6e\u65e5\u671f\u548c\u65f6\u95f4"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u683c\u5f0f: YYYY-MM-DD HH:MM:SS\nsudo timedatectl set-time '2024-01-15 16:10:40'\n"})}),"\n",(0,l.jsxs)(n.admonition,{title:"\u5e38\u89c1\u9519\u8bef",type:"caution",children:[(0,l.jsxs)(n.p,{children:["\u5982\u679c\u51fa\u73b0 ",(0,l.jsx)(n.code,{children:"Failed to set time: NTP unit is active"})," \u9519\u8bef,\u9700\u8981\u5148\u7981\u7528 NTP \u540c\u6b65:"]}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u7981\u7528 NTP \u540c\u6b65\nsudo timedatectl set-ntp false\n\n# \u6216\u8005\u505c\u6b62 chronyd \u670d\u52a1\nsudo systemctl disable --now chronyd\n"})})]}),"\n",(0,l.jsx)(n.h2,{id:"\u786c\u4ef6\u65f6\u949f\u7ba1\u7406",children:"\u786c\u4ef6\u65f6\u949f\u7ba1\u7406"}),"\n",(0,l.jsx)(n.h3,{id:"\u67e5\u770b\u786c\u4ef6\u65f6\u949f\u8bbe\u7f6e",children:"\u67e5\u770b\u786c\u4ef6\u65f6\u949f\u8bbe\u7f6e"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u68c0\u67e5\u786c\u4ef6\u65f6\u949f\u662f\u5426\u8bbe\u7f6e\u4e3a\u672c\u5730\u65f6\u533a\ntimedatectl | grep local\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u8bbe\u7f6e\u786c\u4ef6\u65f6\u949f",children:"\u8bbe\u7f6e\u786c\u4ef6\u65f6\u949f"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u5c06\u786c\u4ef6\u65f6\u949f\u8bbe\u7f6e\u4e3a\u672c\u5730\u65f6\u533a\nsudo timedatectl set-local-rtc 1\n\n# \u5c06\u786c\u4ef6\u65f6\u949f\u8bbe\u7f6e\u4e3a UTC(\u63a8\u8350)\nsudo timedatectl set-local-rtc 0\n"})}),"\n",(0,l.jsx)(n.admonition,{title:"\u6700\u4f73\u5b9e\u8df5",type:"tip",children:(0,l.jsxs)(n.p,{children:["\u63a8\u8350\u5c06\u786c\u4ef6\u65f6\u949f\u8bbe\u7f6e\u4e3a UTC(",(0,l.jsx)(n.code,{children:"set-local-rtc 0"}),"),\u8fd9\u6837\u53ef\u4ee5\u907f\u514d\u590f\u4ee4\u65f6\u5207\u6362\u548c\u65f6\u533a\u53d8\u66f4\u5e26\u6765\u7684\u95ee\u9898\u3002"]})}),"\n",(0,l.jsx)(n.h2,{id:"ntp-\u65f6\u95f4\u540c\u6b65",children:"NTP \u65f6\u95f4\u540c\u6b65"}),"\n",(0,l.jsx)(n.h3,{id:"ntp-\u7b80\u4ecb",children:"NTP \u7b80\u4ecb"}),"\n",(0,l.jsx)(n.p,{children:"NTP(Network Time Protocol,\u7f51\u7edc\u65f6\u95f4\u534f\u8bae)\u662f\u4e00\u4e2a\u4e92\u8054\u7f51\u534f\u8bae,\u7528\u4e8e\u540c\u6b65\u8ba1\u7b97\u673a\u4e4b\u95f4\u7684\u7cfb\u7edf\u65f6\u949f\u3002"}),"\n",(0,l.jsx)(n.h3,{id:"\u542f\u7528-ntp-\u540c\u6b65",children:"\u542f\u7528 NTP \u540c\u6b65"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u542f\u7528\u81ea\u52a8\u65f6\u95f4\u540c\u6b65\nsudo timedatectl set-ntp true\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u7981\u7528-ntp-\u540c\u6b65",children:"\u7981\u7528 NTP \u540c\u6b65"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u7981\u7528\u81ea\u52a8\u65f6\u95f4\u540c\u6b65\nsudo timedatectl set-ntp false\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u68c0\u67e5-ntp-\u540c\u6b65\u72b6\u6001",children:"\u68c0\u67e5 NTP \u540c\u6b65\u72b6\u6001"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# \u67e5\u770b NTP \u670d\u52a1\u72b6\u6001\ntimedatectl | grep "NTP"\n\n# \u67e5\u770b systemd-timesyncd \u72b6\u6001\ntimedatectl timesync-status\n\n# \u67e5\u770b\u8be6\u7ec6\u5c5e\u6027\ntimedatectl show-timesync\n'})}),"\n",(0,l.jsxs)(n.admonition,{title:"\u524d\u7f6e\u6761\u4ef6",type:"info",children:[(0,l.jsx)(n.p,{children:"\u7cfb\u7edf\u5fc5\u987b\u5b89\u88c5 NTP \u5ba2\u6237\u7aef\u670d\u52a1\u624d\u80fd\u5b9e\u73b0\u81ea\u52a8\u65f6\u95f4\u540c\u6b65\u3002\u5e38\u89c1\u7684 NTP \u670d\u52a1\u6709:"}),(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"systemd-timesyncd"}),"(systemd \u81ea\u5e26,\u8f7b\u91cf\u7ea7)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"chronyd"}),"(CentOS/RHEL \u63a8\u8350)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ntpd"}),"(\u4f20\u7edf NTP \u670d\u52a1)"]}),"\n"]})]}),"\n",(0,l.jsx)(n.h2,{id:"\u5e38\u7528\u547d\u4ee4\u901f\u67e5",children:"\u5e38\u7528\u547d\u4ee4\u901f\u67e5"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u547d\u4ee4"}),(0,l.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"timedatectl"})}),(0,l.jsx)(n.td,{children:"\u663e\u793a\u5f53\u524d\u65f6\u95f4\u548c\u65e5\u671f\u8bbe\u7f6e"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"timedatectl status"})}),(0,l.jsx)(n.td,{children:"\u540c\u4e0a"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"timedatectl list-timezones"})}),(0,l.jsx)(n.td,{children:"\u5217\u51fa\u6240\u6709\u53ef\u7528\u65f6\u533a"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"timedatectl set-timezone <\u65f6\u533a>"})}),(0,l.jsx)(n.td,{children:"\u8bbe\u7f6e\u65f6\u533a"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"timedatectl set-time <\u65f6\u95f4>"})}),(0,l.jsx)(n.td,{children:"\u8bbe\u7f6e\u65f6\u95f4\u6216\u65e5\u671f"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"timedatectl set-ntp <true|false>"})}),(0,l.jsx)(n.td,{children:"\u542f\u7528/\u7981\u7528 NTP \u540c\u6b65"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"timedatectl set-local-rtc <1|0>"})}),(0,l.jsx)(n.td,{children:"\u8bbe\u7f6e\u786c\u4ef6\u65f6\u949f\u4e3a\u672c\u5730\u65f6\u533a/UTC"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"timedatectl timesync-status"})}),(0,l.jsx)(n.td,{children:"\u663e\u793a NTP \u540c\u6b65\u72b6\u6001"})]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"\u5b9e\u7528\u793a\u4f8b",children:"\u5b9e\u7528\u793a\u4f8b"}),"\n",(0,l.jsx)(n.h3,{id:"\u793a\u4f8b-1-\u914d\u7f6e\u4e2d\u56fd\u670d\u52a1\u5668\u65f6\u533a",children:"\u793a\u4f8b 1: \u914d\u7f6e\u4e2d\u56fd\u670d\u52a1\u5668\u65f6\u533a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# 1. \u67e5\u770b\u5f53\u524d\u65f6\u533a\ntimedatectl\n\n# 2. \u8bbe\u7f6e\u4e3a\u4e0a\u6d77\u65f6\u533a\nsudo timedatectl set-timezone Asia/Shanghai\n\n# 3. \u542f\u7528 NTP \u540c\u6b65\nsudo timedatectl set-ntp true\n\n# 4. \u9a8c\u8bc1\u8bbe\u7f6e\ntimedatectl\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u793a\u4f8b-2-\u624b\u52a8\u8bbe\u7f6e\u65f6\u95f4\u65e0\u7f51\u7edc\u73af\u5883",children:"\u793a\u4f8b 2: \u624b\u52a8\u8bbe\u7f6e\u65f6\u95f4(\u65e0\u7f51\u7edc\u73af\u5883)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# 1. \u7981\u7528 NTP \u540c\u6b65\nsudo timedatectl set-ntp false\n\n# 2. \u8bbe\u7f6e\u65e5\u671f\u548c\u65f6\u95f4\nsudo timedatectl set-time '2024-01-15 10:30:00'\n\n# 3. \u9a8c\u8bc1\ntimedatectl\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u793a\u4f8b-3-\u914d\u7f6e-utc-\u65f6\u533a\u670d\u52a1\u5668\u63a8\u8350",children:"\u793a\u4f8b 3: \u914d\u7f6e UTC \u65f6\u533a(\u670d\u52a1\u5668\u63a8\u8350)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# 1. \u8bbe\u7f6e UTC \u65f6\u533a\nsudo timedatectl set-timezone UTC\n\n# 2. \u786c\u4ef6\u65f6\u949f\u4e5f\u4f7f\u7528 UTC\nsudo timedatectl set-local-rtc 0\n\n# 3. \u542f\u7528 NTP \u540c\u6b65\nsudo timedatectl set-ntp true\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u6545\u969c\u6392\u67e5",children:"\u6545\u969c\u6392\u67e5"}),"\n",(0,l.jsx)(n.h3,{id:"\u95ee\u9898-1-\u65e0\u6cd5\u8bbe\u7f6e\u65f6\u95f4",children:"\u95ee\u9898 1: \u65e0\u6cd5\u8bbe\u7f6e\u65f6\u95f4"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u9519\u8bef\u4fe1\u606f:"})," ",(0,l.jsx)(n.code,{children:"Failed to set time: NTP unit is active"})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6848:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u4e34\u65f6\u7981\u7528 NTP\nsudo timedatectl set-ntp false\n\n# \u8bbe\u7f6e\u65f6\u95f4\nsudo timedatectl set-time '2024-01-15 10:30:00'\n\n# \u91cd\u65b0\u542f\u7528 NTP(\u53ef\u9009)\nsudo timedatectl set-ntp true\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u95ee\u9898-2-\u65f6\u533a\u8bbe\u7f6e\u5931\u8d25",children:"\u95ee\u9898 2: \u65f6\u533a\u8bbe\u7f6e\u5931\u8d25"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u9519\u8bef\u4fe1\u606f:"})," ",(0,l.jsx)(n.code,{children:"Failed to set time zone: Invalid time zone 'xxx'"})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6848:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# 1. \u786e\u8ba4\u65f6\u533a\u540d\u79f0\u662f\u5426\u6b63\u786e\ntimedatectl list-timezones | grep -i shanghai\n\n# 2. \u4f7f\u7528\u6b63\u786e\u7684\u65f6\u533a\u540d\u79f0\nsudo timedatectl set-timezone Asia/Shanghai\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u95ee\u9898-3-ntp-\u4e0d\u652f\u6301",children:"\u95ee\u9898 3: NTP \u4e0d\u652f\u6301"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u9519\u8bef\u4fe1\u606f:"})," ",(0,l.jsx)(n.code,{children:"Failed to set ntp: NTP not supported"})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6848:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u5b89\u88c5 chrony(CentOS/RHEL)\nsudo yum install chrony\n\n# \u6216\u5b89\u88c5 systemd-timesyncd(Ubuntu/Debian)\nsudo apt install systemd-timesyncd\n\n# \u542f\u52a8\u670d\u52a1\nsudo systemctl enable --now chronyd\n# \u6216\nsudo systemctl enable --now systemd-timesyncd\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u53c2\u8003\u8d44\u6599",children:"\u53c2\u8003\u8d44\u6599"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://www.man7.org/linux/man-pages/man1/timedatectl.1.html",children:"timedatectl \u5b98\u65b9\u6587\u6863"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://www.freedesktop.org/software/systemd/man/systemd-timesyncd.service.html",children:"systemd-timesyncd \u6587\u6863"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://www.iana.org/time-zones",children:"\u65f6\u533a\u6570\u636e\u5e93"})}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}}}]);