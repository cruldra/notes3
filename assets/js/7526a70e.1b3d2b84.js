"use strict";(self.webpackChunknotes_3=self.webpackChunknotes_3||[]).push([[2278],{54213:(n,e,r)=>{r.d(e,{R:()=>a,x:()=>s});var i=r(36672);const t={},l=i.createContext(t);function a(n){const e=i.useContext(l);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:a(n.components),i.createElement(l.Provider,{value:e},n.children)}},74703:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>o,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"Go/Go\u8bed\u8a00\u5e38\u7528\u8bed\u6cd5","title":"Go \u8bed\u8a00\u5e38\u7528\u8bed\u6cd5\u6307\u5357","description":"\u57fa\u4e8e KrillinAI \u9879\u76ee\u5b9e\u6218\u603b\u7ed3","source":"@site/docs/Go/Go\u8bed\u8a00\u5e38\u7528\u8bed\u6cd5.md","sourceDirName":"Go","slug":"/Go/Go\u8bed\u8a00\u5e38\u7528\u8bed\u6cd5","permalink":"/notes3/docs/Go/Go\u8bed\u8a00\u5e38\u7528\u8bed\u6cd5","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Go/Go\u8bed\u8a00\u5e38\u7528\u8bed\u6cd5.md","tags":[],"version":"current","frontMatter":{},"sidebar":"Go"}');var t=r(23420),l=r(54213);const a={},s="Go \u8bed\u8a00\u5e38\u7528\u8bed\u6cd5\u6307\u5357",o={},c=[{value:"\u76ee\u5f55",id:"\u76ee\u5f55",level:2},{value:"\u57fa\u7840\u8bed\u6cd5",id:"\u57fa\u7840\u8bed\u6cd5",level:2},{value:"1. \u5305\u58f0\u660e\u548c\u5bfc\u5165",id:"1-\u5305\u58f0\u660e\u548c\u5bfc\u5165",level:3},{value:"2. \u53d8\u91cf\u58f0\u660e",id:"2-\u53d8\u91cf\u58f0\u660e",level:3},{value:"3. \u5e38\u91cf",id:"3-\u5e38\u91cf",level:3},{value:"4. \u51fd\u6570",id:"4-\u51fd\u6570",level:3},{value:"\u6570\u636e\u7c7b\u578b",id:"\u6570\u636e\u7c7b\u578b",level:2},{value:"1. \u57fa\u672c\u7c7b\u578b",id:"1-\u57fa\u672c\u7c7b\u578b",level:3},{value:"2. \u590d\u5408\u7c7b\u578b",id:"2-\u590d\u5408\u7c7b\u578b",level:3},{value:"\u6570\u7ec4",id:"\u6570\u7ec4",level:4},{value:"\u5207\u7247\uff08Slice\uff09",id:"\u5207\u7247slice",level:4},{value:"\u6620\u5c04\uff08Map\uff09",id:"\u6620\u5c04map",level:4},{value:"3. \u6307\u9488",id:"3-\u6307\u9488",level:3},{value:"\u7ed3\u6784\u4f53\u4e0e\u65b9\u6cd5",id:"\u7ed3\u6784\u4f53\u4e0e\u65b9\u6cd5",level:2},{value:"1. \u7ed3\u6784\u4f53\u5b9a\u4e49",id:"1-\u7ed3\u6784\u4f53\u5b9a\u4e49",level:3},{value:"2. \u65b9\u6cd5",id:"2-\u65b9\u6cd5",level:3},{value:"3. \u6784\u9020\u51fd\u6570\u6a21\u5f0f",id:"3-\u6784\u9020\u51fd\u6570\u6a21\u5f0f",level:3},{value:"\u63a5\u53e3",id:"\u63a5\u53e3",level:2},{value:"1. \u63a5\u53e3\u5b9a\u4e49",id:"1-\u63a5\u53e3\u5b9a\u4e49",level:3},{value:"2. \u63a5\u53e3\u7ec4\u5408",id:"2-\u63a5\u53e3\u7ec4\u5408",level:3},{value:"3. \u7c7b\u578b\u65ad\u8a00",id:"3-\u7c7b\u578b\u65ad\u8a00",level:3},{value:"\u5e76\u53d1\u7f16\u7a0b",id:"\u5e76\u53d1\u7f16\u7a0b",level:2},{value:"1. Goroutine",id:"1-goroutine",level:3},{value:"2. Channel",id:"2-channel",level:3},{value:"3. Select",id:"3-select",level:3},{value:"4. WaitGroup",id:"4-waitgroup",level:3},{value:"5. Mutex\uff08\u4e92\u65a5\u9501\uff09",id:"5-mutex\u4e92\u65a5\u9501",level:3},{value:"6. sync.Map\uff08\u5e76\u53d1\u5b89\u5168\u7684 Map\uff09",id:"6-syncmap\u5e76\u53d1\u5b89\u5168\u7684-map",level:3},{value:"7. errgroup\uff08\u9519\u8bef\u7ec4\uff09",id:"7-errgroup\u9519\u8bef\u7ec4",level:3},{value:"\u9519\u8bef\u5904\u7406",id:"\u9519\u8bef\u5904\u7406",level:2},{value:"1. \u57fa\u672c\u9519\u8bef\u5904\u7406",id:"1-\u57fa\u672c\u9519\u8bef\u5904\u7406",level:3},{value:"2. \u9519\u8bef\u5305\u88c5",id:"2-\u9519\u8bef\u5305\u88c5",level:3},{value:"3. \u81ea\u5b9a\u4e49\u9519\u8bef",id:"3-\u81ea\u5b9a\u4e49\u9519\u8bef",level:3},{value:"\u5305\u7ba1\u7406",id:"\u5305\u7ba1\u7406",level:2},{value:"1. \u6a21\u5757\u521d\u59cb\u5316",id:"1-\u6a21\u5757\u521d\u59cb\u5316",level:3},{value:"2. \u5bfc\u5165\u8def\u5f84",id:"2-\u5bfc\u5165\u8def\u5f84",level:3},{value:"\u5e38\u7528\u6807\u51c6\u5e93",id:"\u5e38\u7528\u6807\u51c6\u5e93",level:2},{value:"1. fmt - \u683c\u5f0f\u5316\u8f93\u5165\u8f93\u51fa",id:"1-fmt---\u683c\u5f0f\u5316\u8f93\u5165\u8f93\u51fa",level:3},{value:"2. strings - \u5b57\u7b26\u4e32\u64cd\u4f5c",id:"2-strings---\u5b57\u7b26\u4e32\u64cd\u4f5c",level:3},{value:"3. os - \u64cd\u4f5c\u7cfb\u7edf\u529f\u80fd",id:"3-os---\u64cd\u4f5c\u7cfb\u7edf\u529f\u80fd",level:3},{value:"4. filepath - \u8def\u5f84\u64cd\u4f5c",id:"4-filepath---\u8def\u5f84\u64cd\u4f5c",level:3},{value:"5. time - \u65f6\u95f4\u64cd\u4f5c",id:"5-time---\u65f6\u95f4\u64cd\u4f5c",level:3},{value:"6. encoding/json - JSON \u5904\u7406",id:"6-encodingjson---json-\u5904\u7406",level:3},{value:"7. net/http - HTTP \u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668",id:"7-nethttp---http-\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668",level:3},{value:"\u5b9e\u6218\u6280\u5de7",id:"\u5b9e\u6218\u6280\u5de7",level:2},{value:"1. \u6cdb\u578b\uff08Go 1.18+\uff09",id:"1-\u6cdb\u578bgo-118",level:3},{value:"2. \u7ed3\u6784\u4f53\u6807\u7b7e",id:"2-\u7ed3\u6784\u4f53\u6807\u7b7e",level:3},{value:"3. defer \u5ef6\u8fdf\u6267\u884c",id:"3-defer-\u5ef6\u8fdf\u6267\u884c",level:3},{value:"4. panic \u548c recover",id:"4-panic-\u548c-recover",level:3},{value:"5. \u4e0a\u4e0b\u6587\uff08Context\uff09",id:"5-\u4e0a\u4e0b\u6587context",level:3},{value:"6. \u5d4c\u5165\u9759\u6001\u8d44\u6e90\uff08embed\uff09",id:"6-\u5d4c\u5165\u9759\u6001\u8d44\u6e90embed",level:3},{value:"7. \u6b63\u5219\u8868\u8fbe\u5f0f",id:"7-\u6b63\u5219\u8868\u8fbe\u5f0f",level:3},{value:"8. \u547d\u4ee4\u884c\u53c2\u6570",id:"8-\u547d\u4ee4\u884c\u53c2\u6570",level:3},{value:"9. \u6587\u4ef6\u8bfb\u5199",id:"9-\u6587\u4ef6\u8bfb\u5199",level:3},{value:"10. \u7c7b\u578b\u8f6c\u6362",id:"10-\u7c7b\u578b\u8f6c\u6362",level:3},{value:"\u9879\u76ee\u5b9e\u6218\u6848\u4f8b",id:"\u9879\u76ee\u5b9e\u6218\u6848\u4f8b",level:2},{value:"\u6848\u4f8b 1\uff1aHTTP \u8def\u7531\u8bbe\u7f6e",id:"\u6848\u4f8b-1http-\u8def\u7531\u8bbe\u7f6e",level:3},{value:"\u6848\u4f8b 2\uff1a\u914d\u7f6e\u52a0\u8f7d",id:"\u6848\u4f8b-2\u914d\u7f6e\u52a0\u8f7d",level:3},{value:"\u6848\u4f8b 3\uff1a\u4f9d\u8d56\u6ce8\u5165",id:"\u6848\u4f8b-3\u4f9d\u8d56\u6ce8\u5165",level:3},{value:"\u6848\u4f8b 4\uff1a\u5e76\u53d1\u4efb\u52a1\u5904\u7406",id:"\u6848\u4f8b-4\u5e76\u53d1\u4efb\u52a1\u5904\u7406",level:3},{value:"\u6848\u4f8b 5\uff1a\u9650\u6d41\u5668\uff08\u4fe1\u53f7\u91cf\uff09",id:"\u6848\u4f8b-5\u9650\u6d41\u5668\u4fe1\u53f7\u91cf",level:3},{value:"\u6848\u4f8b 6\uff1a\u65e5\u5fd7\u8bb0\u5f55",id:"\u6848\u4f8b-6\u65e5\u5fd7\u8bb0\u5f55",level:3},{value:"\u6848\u4f8b 7\uff1a\u5de5\u5177\u51fd\u6570",id:"\u6848\u4f8b-7\u5de5\u5177\u51fd\u6570",level:3},{value:"\u5e38\u89c1\u9677\u9631\u548c\u6700\u4f73\u5b9e\u8df5",id:"\u5e38\u89c1\u9677\u9631\u548c\u6700\u4f73\u5b9e\u8df5",level:2},{value:"1. \u5207\u7247\u9677\u9631",id:"1-\u5207\u7247\u9677\u9631",level:3},{value:"2. \u5faa\u73af\u53d8\u91cf\u9677\u9631",id:"2-\u5faa\u73af\u53d8\u91cf\u9677\u9631",level:3},{value:"3. Map \u5e76\u53d1\u9677\u9631",id:"3-map-\u5e76\u53d1\u9677\u9631",level:3},{value:"4. defer \u9677\u9631",id:"4-defer-\u9677\u9631",level:3},{value:"5. \u9519\u8bef\u5904\u7406\u6700\u4f73\u5b9e\u8df5",id:"5-\u9519\u8bef\u5904\u7406\u6700\u4f73\u5b9e\u8df5",level:3},{value:"6. \u6027\u80fd\u4f18\u5316\u6280\u5de7",id:"6-\u6027\u80fd\u4f18\u5316\u6280\u5de7",level:3},{value:"\u6d4b\u8bd5",id:"\u6d4b\u8bd5",level:2},{value:"1. \u5355\u5143\u6d4b\u8bd5",id:"1-\u5355\u5143\u6d4b\u8bd5",level:3},{value:"2. \u57fa\u51c6\u6d4b\u8bd5",id:"2-\u57fa\u51c6\u6d4b\u8bd5",level:3},{value:"\u76f8\u5173\u8d44\u6e90",id:"\u76f8\u5173\u8d44\u6e90",level:2}];function d(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"go-\u8bed\u8a00\u5e38\u7528\u8bed\u6cd5\u6307\u5357",children:"Go \u8bed\u8a00\u5e38\u7528\u8bed\u6cd5\u6307\u5357"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\u57fa\u4e8e KrillinAI \u9879\u76ee\u5b9e\u6218\u603b\u7ed3"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"\u76ee\u5f55",children:"\u76ee\u5f55"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95",children:"\u57fa\u7840\u8bed\u6cd5"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B",children:"\u6570\u636e\u7c7b\u578b"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#%E7%BB%93%E6%9E%84%E4%BD%93%E4%B8%8E%E6%96%B9%E6%B3%95",children:"\u7ed3\u6784\u4f53\u4e0e\u65b9\u6cd5"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#%E6%8E%A5%E5%8F%A3",children:"\u63a5\u53e3"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B",children:"\u5e76\u53d1\u7f16\u7a0b"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86",children:"\u9519\u8bef\u5904\u7406"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#%E5%8C%85%E7%AE%A1%E7%90%86",children:"\u5305\u7ba1\u7406"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#%E5%B8%B8%E7%94%A8%E6%A0%87%E5%87%86%E5%BA%93",children:"\u5e38\u7528\u6807\u51c6\u5e93"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#%E5%AE%9E%E6%88%98%E6%8A%80%E5%B7%A7",children:"\u5b9e\u6218\u6280\u5de7"})}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"\u57fa\u7840\u8bed\u6cd5",children:"\u57fa\u7840\u8bed\u6cd5"}),"\n",(0,t.jsx)(e.h3,{id:"1-\u5305\u58f0\u660e\u548c\u5bfc\u5165",children:"1. \u5305\u58f0\u660e\u548c\u5bfc\u5165"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'// \u5305\u58f0\u660e\uff08\u6bcf\u4e2a Go \u6587\u4ef6\u5fc5\u987b\u4ee5 package \u5f00\u5934\uff09\npackage main\n\n// \u5bfc\u5165\u5355\u4e2a\u5305\nimport "fmt"\n\n// \u5bfc\u5165\u591a\u4e2a\u5305\uff08\u63a8\u8350\uff09\nimport (\n    "fmt"\n    "os"\n    "path/filepath"\n    \n    // \u7b2c\u4e09\u65b9\u5305\n    "github.com/gin-gonic/gin"\n    "go.uber.org/zap"\n    \n    // \u9879\u76ee\u5185\u90e8\u5305\n    "krillin-ai/config"\n    "krillin-ai/log"\n)\n\n// \u5305\u522b\u540d\nimport (\n    openai "github.com/sashabaranov/go-openai"\n)\n'})}),"\n",(0,t.jsx)(e.h3,{id:"2-\u53d8\u91cf\u58f0\u660e",children:"2. \u53d8\u91cf\u58f0\u660e"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'// \u65b9\u5f0f1\uff1avar \u58f0\u660e\uff08\u53ef\u6307\u5b9a\u7c7b\u578b\uff09\nvar name string = "KrillinAI"\nvar age int = 1\n\n// \u65b9\u5f0f2\uff1avar \u58f0\u660e\uff08\u7c7b\u578b\u63a8\u65ad\uff09\nvar name = "KrillinAI"\nvar age = 1\n\n// \u65b9\u5f0f3\uff1a\u77ed\u53d8\u91cf\u58f0\u660e\uff08\u53ea\u80fd\u5728\u51fd\u6570\u5185\u4f7f\u7528\uff09\nname := "KrillinAI"\nage := 1\n\n// \u65b9\u5f0f4\uff1a\u6279\u91cf\u58f0\u660e\nvar (\n    host string = "127.0.0.1"\n    port int    = 8888\n)\n\n// \u96f6\u503c\uff08\u672a\u521d\u59cb\u5316\u7684\u53d8\u91cf\u4f1a\u6709\u9ed8\u8ba4\u503c\uff09\nvar s string    // ""\nvar i int       // 0\nvar b bool      // false\nvar p *int      // nil\n'})}),"\n",(0,t.jsx)(e.h3,{id:"3-\u5e38\u91cf",children:"3. \u5e38\u91cf"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'// \u5355\u4e2a\u5e38\u91cf\nconst MaxSize = 100\n\n// \u6279\u91cf\u5e38\u91cf\nconst (\n    StatusPending   = "pending"\n    StatusProcessing = "processing"\n    StatusCompleted = "completed"\n)\n\n// iota \u679a\u4e3e\u5668\uff08\u81ea\u52a8\u9012\u589e\uff09\nconst (\n    Sunday = iota    // 0\n    Monday           // 1\n    Tuesday          // 2\n    Wednesday        // 3\n)\n'})}),"\n",(0,t.jsx)(e.h3,{id:"4-\u51fd\u6570",children:"4. \u51fd\u6570"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'// \u57fa\u672c\u51fd\u6570\nfunc add(a int, b int) int {\n    return a + b\n}\n\n// \u53c2\u6570\u7c7b\u578b\u76f8\u540c\u53ef\u7b80\u5199\nfunc add(a, b int) int {\n    return a + b\n}\n\n// \u591a\u8fd4\u56de\u503c\nfunc divide(a, b float64) (float64, error) {\n    if b == 0 {\n        return 0, fmt.Errorf("\u9664\u6570\u4e0d\u80fd\u4e3a\u96f6")\n    }\n    return a / b, nil\n}\n\n// \u547d\u540d\u8fd4\u56de\u503c\nfunc getConfig() (host string, port int) {\n    host = "127.0.0.1"\n    port = 8888\n    return // \u81ea\u52a8\u8fd4\u56de host \u548c port\n}\n\n// \u53ef\u53d8\u53c2\u6570\nfunc sum(numbers ...int) int {\n    total := 0\n    for _, num := range numbers {\n        total += num\n    }\n    return total\n}\n\n// \u4f7f\u7528\uff1asum(1, 2, 3, 4, 5)\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u6570\u636e\u7c7b\u578b",children:"\u6570\u636e\u7c7b\u578b"}),"\n",(0,t.jsx)(e.h3,{id:"1-\u57fa\u672c\u7c7b\u578b",children:"1. \u57fa\u672c\u7c7b\u578b"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:"// \u6574\u6570\u7c7b\u578b\nvar i8 int8      // -128 \u5230 127\nvar i16 int16    // -32768 \u5230 32767\nvar i32 int32    // -2147483648 \u5230 2147483647\nvar i64 int64    // -9223372036854775808 \u5230 9223372036854775807\nvar ui uint      // \u65e0\u7b26\u53f7\u6574\u6570\n\n// \u6d6e\u70b9\u6570\nvar f32 float32  // \u5355\u7cbe\u5ea6\nvar f64 float64  // \u53cc\u7cbe\u5ea6\n\n// \u5b57\u7b26\u4e32\nvar s string = \"Hello, \u4e16\u754c\"\n\n// \u5e03\u5c14\u503c\nvar b bool = true\n\n// \u5b57\u8282\u548c\u5b57\u7b26\nvar bt byte = 'A'    // byte \u662f uint8 \u7684\u522b\u540d\nvar r rune = '\u4e2d'     // rune \u662f int32 \u7684\u522b\u540d\uff0c\u8868\u793a Unicode \u7801\u70b9\n"})}),"\n",(0,t.jsx)(e.h3,{id:"2-\u590d\u5408\u7c7b\u578b",children:"2. \u590d\u5408\u7c7b\u578b"}),"\n",(0,t.jsx)(e.h4,{id:"\u6570\u7ec4",children:"\u6570\u7ec4"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:"// \u56fa\u5b9a\u957f\u5ea6\u6570\u7ec4\nvar arr [5]int = [5]int{1, 2, 3, 4, 5}\n\n// \u81ea\u52a8\u63a8\u65ad\u957f\u5ea6\narr := [...]int{1, 2, 3, 4, 5}\n\n// \u8bbf\u95ee\u5143\u7d20\nfmt.Println(arr[0])  // 1\n"})}),"\n",(0,t.jsx)(e.h4,{id:"\u5207\u7247slice",children:"\u5207\u7247\uff08Slice\uff09"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'// \u521b\u5efa\u5207\u7247\nslice := []int{1, 2, 3, 4, 5}\n\n// \u4f7f\u7528 make \u521b\u5efa\nslice := make([]int, 5)      // \u957f\u5ea6\u4e3a 5\nslice := make([]int, 5, 10)  // \u957f\u5ea6\u4e3a 5\uff0c\u5bb9\u91cf\u4e3a 10\n\n// \u5207\u7247\u64cd\u4f5c\nslice = append(slice, 6)     // \u8ffd\u52a0\u5143\u7d20\nslice = slice[1:3]           // \u5207\u7247 [2, 3]\nlen(slice)                   // \u957f\u5ea6\ncap(slice)                   // \u5bb9\u91cf\n\n// \u9879\u76ee\u793a\u4f8b\uff1a\u5b58\u50a8\u5b57\u5e55\u5206\u6bb5\nsegments := make([]types.Segment, 0)\nsegments = append(segments, types.Segment{\n    Text:  "Hello",\n    Start: 0.0,\n    End:   1.5,\n})\n'})}),"\n",(0,t.jsx)(e.h4,{id:"\u6620\u5c04map",children:"\u6620\u5c04\uff08Map\uff09"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'// \u521b\u5efa map\nm := make(map[string]int)\nm["age"] = 25\n\n// \u5b57\u9762\u91cf\u521b\u5efa\nm := map[string]int{\n    "age":  25,\n    "year": 2024,\n}\n\n// \u68c0\u67e5\u952e\u662f\u5426\u5b58\u5728\nvalue, exists := m["age"]\nif exists {\n    fmt.Println(value)\n}\n\n// \u5220\u9664\u952e\ndelete(m, "age")\n\n// \u904d\u5386\nfor key, value := range m {\n    fmt.Println(key, value)\n}\n\n// \u9879\u76ee\u793a\u4f8b\uff1a\u6587\u5b57\u66ff\u6362\u6620\u5c04\nreplaceWordsMap := make(map[string]string)\nreplaceWordsMap["AI"] = "\u4eba\u5de5\u667a\u80fd"\nreplaceWordsMap["ML"] = "\u673a\u5668\u5b66\u4e60"\n'})}),"\n",(0,t.jsx)(e.h3,{id:"3-\u6307\u9488",children:"3. \u6307\u9488"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'// \u58f0\u660e\u6307\u9488\nvar p *int\n\n// \u53d6\u5730\u5740\nx := 10\np = &x\n\n// \u89e3\u5f15\u7528\nfmt.Println(*p)  // 10\n\n// \u4fee\u6539\u6307\u9488\u6307\u5411\u7684\u503c\n*p = 20\nfmt.Println(x)   // 20\n\n// \u9879\u76ee\u793a\u4f8b\uff1a\u4efb\u52a1\u6307\u9488\ntaskPtr := &types.SubtitleTask{\n    TaskId: "task123",\n    Status: types.SubtitleTaskStatusProcessing,\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u7ed3\u6784\u4f53\u4e0e\u65b9\u6cd5",children:"\u7ed3\u6784\u4f53\u4e0e\u65b9\u6cd5"}),"\n",(0,t.jsx)(e.h3,{id:"1-\u7ed3\u6784\u4f53\u5b9a\u4e49",children:"1. \u7ed3\u6784\u4f53\u5b9a\u4e49"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'// \u57fa\u672c\u7ed3\u6784\u4f53\ntype Person struct {\n    Name string\n    Age  int\n}\n\n// \u521b\u5efa\u5b9e\u4f8b\np1 := Person{Name: "Alice", Age: 25}\np2 := Person{"Bob", 30}  // \u6309\u987a\u5e8f\u8d4b\u503c\n\n// \u533f\u540d\u5b57\u6bb5\ntype Student struct {\n    Person  // \u5d4c\u5165 Person\n    Grade int\n}\n\n// \u9879\u76ee\u793a\u4f8b\uff1a\u914d\u7f6e\u7ed3\u6784\u4f53\ntype Config struct {\n    App        App                    `toml:"app"`\n    Server     Server                 `toml:"server"`\n    Llm        OpenaiCompatibleConfig `toml:"llm"`\n    Transcribe Transcribe             `toml:"transcribe"`\n    Tts        Tts                    `toml:"tts"`\n}\n\ntype Server struct {\n    Host string `toml:"host"`\n    Port int    `toml:"port"`\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"2-\u65b9\u6cd5",children:"2. \u65b9\u6cd5"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'// \u503c\u63a5\u6536\u8005\u65b9\u6cd5\nfunc (p Person) SayHello() {\n    fmt.Printf("Hello, I\'m %s\\n", p.Name)\n}\n\n// \u6307\u9488\u63a5\u6536\u8005\u65b9\u6cd5\uff08\u53ef\u4ee5\u4fee\u6539\u7ed3\u6784\u4f53\uff09\nfunc (p *Person) SetAge(age int) {\n    p.Age = age\n}\n\n// \u4f7f\u7528\np := Person{Name: "Alice", Age: 25}\np.SayHello()\np.SetAge(26)\n\n// \u9879\u76ee\u793a\u4f8b\uff1aClient \u65b9\u6cd5\ntype Client struct {\n    apiKey string\n}\n\nfunc (c *Client) ChatCompletion(query string) (string, error) {\n    // \u5b9e\u73b0\u804a\u5929\u8865\u5168\u903b\u8f91\n    return "response", nil\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"3-\u6784\u9020\u51fd\u6570\u6a21\u5f0f",children:"3. \u6784\u9020\u51fd\u6570\u6a21\u5f0f"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:"// New \u51fd\u6570\uff08Go \u7684\u6784\u9020\u51fd\u6570\u60ef\u4f8b\uff09\nfunc NewPerson(name string, age int) *Person {\n    return &Person{\n        Name: name,\n        Age:  age,\n    }\n}\n\n// \u9879\u76ee\u793a\u4f8b\nfunc NewService() *Service {\n    return &Service{\n        Transcriber:   whisper.NewClient(),\n        ChatCompleter: openai.NewClient(),\n        TtsClient:     aliyun.NewTtsClient(),\n    }\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\u63a5\u53e3",children:"\u63a5\u53e3"}),"\n",(0,t.jsx)(e.h3,{id:"1-\u63a5\u53e3\u5b9a\u4e49",children:"1. \u63a5\u53e3\u5b9a\u4e49"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:"// \u63a5\u53e3\u58f0\u660e\ntype Writer interface {\n    Write([]byte) (int, error)\n}\n\n// \u63a5\u53e3\u5b9e\u73b0\uff08\u9690\u5f0f\u5b9e\u73b0\uff0c\u65e0\u9700\u58f0\u660e\uff09\ntype FileWriter struct {\n    filename string\n}\n\nfunc (f *FileWriter) Write(data []byte) (int, error) {\n    // \u5b9e\u73b0\u5199\u5165\u903b\u8f91\n    return len(data), nil\n}\n\n// \u9879\u76ee\u793a\u4f8b\uff1a\u6838\u5fc3\u63a5\u53e3\ntype ChatCompleter interface {\n    ChatCompletion(query string) (string, error)\n}\n\ntype Transcriber interface {\n    Transcription(audioFile, language, wordDir string) (*TranscriptionData, error)\n}\n\ntype Ttser interface {\n    Text2Speech(text string, voice string, outputFile string) error\n}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"2-\u63a5\u53e3\u7ec4\u5408",children:"2. \u63a5\u53e3\u7ec4\u5408"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'// \u7ec4\u5408\u591a\u4e2a\u63a5\u53e3\ntype ReadWriter interface {\n    Reader\n    Writer\n}\n\n// \u7a7a\u63a5\u53e3\uff08\u53ef\u4ee5\u63a5\u53d7\u4efb\u4f55\u7c7b\u578b\uff09\nvar any interface{}\nany = 42\nany = "hello"\nany = []int{1, 2, 3}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"3-\u7c7b\u578b\u65ad\u8a00",children:"3. \u7c7b\u578b\u65ad\u8a00"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'// \u7c7b\u578b\u65ad\u8a00\nvar i interface{} = "hello"\n\n// \u5b89\u5168\u65ad\u8a00\ns, ok := i.(string)\nif ok {\n    fmt.Println(s)\n}\n\n// \u7c7b\u578b\u5224\u65ad\nswitch v := i.(type) {\ncase string:\n    fmt.Println("\u5b57\u7b26\u4e32:", v)\ncase int:\n    fmt.Println("\u6574\u6570:", v)\ndefault:\n    fmt.Println("\u672a\u77e5\u7c7b\u578b")\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u5e76\u53d1\u7f16\u7a0b",children:"\u5e76\u53d1\u7f16\u7a0b"}),"\n",(0,t.jsx)(e.h3,{id:"1-goroutine",children:"1. Goroutine"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'// \u542f\u52a8 goroutine\ngo func() {\n    fmt.Println("\u5728 goroutine \u4e2d\u6267\u884c")\n}()\n\n// \u5e26\u53c2\u6570\u7684 goroutine\ngo func(msg string) {\n    fmt.Println(msg)\n}("Hello from goroutine")\n\n// \u9879\u76ee\u793a\u4f8b\uff1a\u5e76\u53d1\u5904\u7406\u5b57\u5e55\nfor i, sub := range subtitles {\n    go func(index int, subtitle types.SrtSentence) {\n        // \u5904\u7406\u5b57\u5e55\n        outputFile := fmt.Sprintf("subtitle_%d.wav", index+1)\n        err := s.TtsClient.Text2Speech(subtitle.Text, voiceCode, outputFile)\n        if err != nil {\n            log.GetLogger().Error("TTS error", zap.Error(err))\n        }\n    }(i, sub)\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"2-channel",children:"2. Channel"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'// \u521b\u5efa channel\nch := make(chan int)\nch := make(chan int, 10)  // \u5e26\u7f13\u51b2\u7684 channel\n\n// \u53d1\u9001\u6570\u636e\nch <- 42\n\n// \u63a5\u6536\u6570\u636e\nvalue := <-ch\n\n// \u5173\u95ed channel\nclose(ch)\n\n// \u904d\u5386 channel\nfor value := range ch {\n    fmt.Println(value)\n}\n\n// \u9879\u76ee\u793a\u4f8b\uff1a\u4efb\u52a1\u961f\u5217\npendingQueue := make(chan DataWithId[string], segmentNum)\nresultQueue := make(chan DataWithId[string], segmentNum)\n\n// \u53d1\u9001\u4efb\u52a1\npendingQueue <- DataWithId[string]{\n    Id:   1,\n    Data: "audio_file.wav",\n}\n\n// \u63a5\u6536\u7ed3\u679c\nresult := <-resultQueue\n'})}),"\n",(0,t.jsx)(e.h3,{id:"3-select",children:"3. Select"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'// select \u591a\u8def\u590d\u7528\nselect {\ncase msg1 := <-ch1:\n    fmt.Println("\u6536\u5230 ch1:", msg1)\ncase msg2 := <-ch2:\n    fmt.Println("\u6536\u5230 ch2:", msg2)\ncase <-time.After(time.Second):\n    fmt.Println("\u8d85\u65f6")\ndefault:\n    fmt.Println("\u6ca1\u6709\u6570\u636e")\n}\n\n// \u9879\u76ee\u793a\u4f8b\uff1a\u5904\u7406\u591a\u4e2a\u961f\u5217\nselect {\ncase <-ctx.Done():\n    return nil\ncase splitItem, ok := <-pendingSplitQueue:\n    if !ok {\n        return nil\n    }\n    // \u5904\u7406\u5206\u5272\u4efb\u52a1\ncase audioItem, ok := <-pendingTranscriptionQueue:\n    if !ok {\n        return nil\n    }\n    // \u5904\u7406\u8f6c\u5f55\u4efb\u52a1\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"4-waitgroup",children:"4. WaitGroup"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'import "sync"\n\nvar wg sync.WaitGroup\n\n// \u6dfb\u52a0\u8ba1\u6570\nwg.Add(3)\n\n// \u542f\u52a8 goroutine\ngo func() {\n    defer wg.Done()  // \u5b8c\u6210\u65f6\u51cf\u5c11\u8ba1\u6570\n    // \u6267\u884c\u4efb\u52a1\n}()\n\n// \u7b49\u5f85\u6240\u6709 goroutine \u5b8c\u6210\nwg.Wait()\n\n// \u9879\u76ee\u793a\u4f8b\nvar wg sync.WaitGroup\nfor i, sub := range subtitles {\n    wg.Add(1)\n    go func(index int, subtitle types.SrtSentence) {\n        defer wg.Done()\n        // \u5904\u7406\u5b57\u5e55\n    }(i, sub)\n}\nwg.Wait()\n'})}),"\n",(0,t.jsx)(e.h3,{id:"5-mutex\u4e92\u65a5\u9501",children:"5. Mutex\uff08\u4e92\u65a5\u9501\uff09"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'import "sync"\n\nvar (\n    counter int\n    mu      sync.Mutex\n)\n\n// \u52a0\u9501\nmu.Lock()\ncounter++\nmu.Unlock()\n\n// \u8bfb\u5199\u9501\nvar rwMu sync.RWMutex\n\n// \u8bfb\u9501\uff08\u591a\u4e2a goroutine \u53ef\u4ee5\u540c\u65f6\u8bfb\uff09\nrwMu.RLock()\nvalue := counter\nrwMu.RUnlock()\n\n// \u5199\u9501\uff08\u72ec\u5360\uff09\nrwMu.Lock()\ncounter++\nrwMu.Unlock()\n'})}),"\n",(0,t.jsx)(e.h3,{id:"6-syncmap\u5e76\u53d1\u5b89\u5168\u7684-map",children:"6. sync.Map\uff08\u5e76\u53d1\u5b89\u5168\u7684 Map\uff09"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'import "sync"\n\nvar m sync.Map\n\n// \u5b58\u50a8\nm.Store("key", "value")\n\n// \u8bfb\u53d6\nvalue, ok := m.Load("key")\n\n// \u5220\u9664\nm.Delete("key")\n\n// \u904d\u5386\nm.Range(func(key, value interface{}) bool {\n    fmt.Println(key, value)\n    return true  // \u8fd4\u56de false \u505c\u6b62\u904d\u5386\n})\n\n// \u9879\u76ee\u793a\u4f8b\uff1a\u5b58\u50a8\u4efb\u52a1\nvar SubtitleTasks = sync.Map{}\nSubtitleTasks.Store(taskId, taskPtr)\n'})}),"\n",(0,t.jsx)(e.h3,{id:"7-errgroup\u9519\u8bef\u7ec4",children:"7. errgroup\uff08\u9519\u8bef\u7ec4\uff09"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'import (\n    "context"\n    "golang.org/x/sync/errgroup"\n)\n\neg, ctx := errgroup.WithContext(context.Background())\n\n// \u542f\u52a8\u591a\u4e2a\u4efb\u52a1\neg.Go(func() error {\n    // \u4efb\u52a11\n    return nil\n})\n\neg.Go(func() error {\n    // \u4efb\u52a12\n    return nil\n})\n\n// \u7b49\u5f85\u6240\u6709\u4efb\u52a1\u5b8c\u6210\uff0c\u4efb\u4f55\u4e00\u4e2a\u8fd4\u56de\u9519\u8bef\u90fd\u4f1a\u53d6\u6d88\u5176\u4ed6\u4efb\u52a1\nif err := eg.Wait(); err != nil {\n    log.Fatal(err)\n}\n\n// \u9879\u76ee\u793a\u4f8b\uff1a\u5e76\u53d1\u5904\u7406\u97f3\u9891\u5206\u6bb5\neg, ctx := errgroup.WithContext(context.Background())\n\nfor range runtime.NumCPU() {\n    eg.Go(func() error {\n        for {\n            select {\n            case <-ctx.Done():\n                return nil\n            case item, ok := <-queue:\n                if !ok {\n                    return nil\n                }\n                // \u5904\u7406\u4efb\u52a1\n            }\n        }\n    })\n}\n\nif err := eg.Wait(); err != nil {\n    return err\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u9519\u8bef\u5904\u7406",children:"\u9519\u8bef\u5904\u7406"}),"\n",(0,t.jsx)(e.h3,{id:"1-\u57fa\u672c\u9519\u8bef\u5904\u7406",children:"1. \u57fa\u672c\u9519\u8bef\u5904\u7406"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'import "errors"\n\n// \u521b\u5efa\u9519\u8bef\nerr := errors.New("\u53d1\u751f\u9519\u8bef")\n\n// \u683c\u5f0f\u5316\u9519\u8bef\nerr := fmt.Errorf("\u6587\u4ef6 %s \u4e0d\u5b58\u5728", filename)\n\n// \u68c0\u67e5\u9519\u8bef\nif err != nil {\n    log.Fatal(err)\n}\n\n// \u8fd4\u56de\u9519\u8bef\nfunc readFile(filename string) ([]byte, error) {\n    data, err := os.ReadFile(filename)\n    if err != nil {\n        return nil, fmt.Errorf("\u8bfb\u53d6\u6587\u4ef6\u5931\u8d25: %w", err)\n    }\n    return data, nil\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"2-\u9519\u8bef\u5305\u88c5",children:"2. \u9519\u8bef\u5305\u88c5"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'// \u5305\u88c5\u9519\u8bef\uff08Go 1.13+\uff09\nerr := fmt.Errorf("\u64cd\u4f5c\u5931\u8d25: %w", originalErr)\n\n// \u89e3\u5305\u9519\u8bef\nerrors.Unwrap(err)\n\n// \u9519\u8bef\u5224\u65ad\nif errors.Is(err, os.ErrNotExist) {\n    fmt.Println("\u6587\u4ef6\u4e0d\u5b58\u5728")\n}\n\n// \u7c7b\u578b\u65ad\u8a00\nvar pathErr *os.PathError\nif errors.As(err, &pathErr) {\n    fmt.Println("\u8def\u5f84\u9519\u8bef:", pathErr.Path)\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"3-\u81ea\u5b9a\u4e49\u9519\u8bef",children:"3. \u81ea\u5b9a\u4e49\u9519\u8bef"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'// \u81ea\u5b9a\u4e49\u9519\u8bef\u7c7b\u578b\ntype ValidationError struct {\n    Field string\n    Msg   string\n}\n\nfunc (e *ValidationError) Error() string {\n    return fmt.Sprintf("\u5b57\u6bb5 %s \u9a8c\u8bc1\u5931\u8d25: %s", e.Field, e.Msg)\n}\n\n// \u4f7f\u7528\nfunc validate(age int) error {\n    if age < 0 {\n        return &ValidationError{\n            Field: "age",\n            Msg:   "\u5e74\u9f84\u4e0d\u80fd\u4e3a\u8d1f\u6570",\n        }\n    }\n    return nil\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u5305\u7ba1\u7406",children:"\u5305\u7ba1\u7406"}),"\n",(0,t.jsx)(e.h3,{id:"1-\u6a21\u5757\u521d\u59cb\u5316",children:"1. \u6a21\u5757\u521d\u59cb\u5316"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-powershell",children:"# \u521d\u59cb\u5316\u6a21\u5757\ngo mod init krillin-ai\n\n# \u6dfb\u52a0\u4f9d\u8d56\ngo get github.com/gin-gonic/gin@v1.10.0\n\n# \u66f4\u65b0\u4f9d\u8d56\ngo get -u github.com/gin-gonic/gin\n\n# \u6574\u7406\u4f9d\u8d56\ngo mod tidy\n\n# \u4e0b\u8f7d\u4f9d\u8d56\ngo mod download\n"})}),"\n",(0,t.jsx)(e.h3,{id:"2-\u5bfc\u5165\u8def\u5f84",children:"2. \u5bfc\u5165\u8def\u5f84"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'// \u6807\u51c6\u5e93\nimport "fmt"\n\n// \u7b2c\u4e09\u65b9\u5e93\nimport "github.com/gin-gonic/gin"\n\n// \u9879\u76ee\u5185\u90e8\u5305\nimport "krillin-ai/config"\nimport "krillin-ai/internal/service"\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u5e38\u7528\u6807\u51c6\u5e93",children:"\u5e38\u7528\u6807\u51c6\u5e93"}),"\n",(0,t.jsx)(e.h3,{id:"1-fmt---\u683c\u5f0f\u5316\u8f93\u5165\u8f93\u51fa",children:"1. fmt - \u683c\u5f0f\u5316\u8f93\u5165\u8f93\u51fa"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'import "fmt"\n\n// \u6253\u5370\nfmt.Println("Hello")\nfmt.Printf("Name: %s, Age: %d\\n", name, age)\n\n// \u683c\u5f0f\u5316\u5b57\u7b26\u4e32\ns := fmt.Sprintf("Name: %s", name)\n\n// \u683c\u5f0f\u5316\u5360\u4f4d\u7b26\n%v    // \u9ed8\u8ba4\u683c\u5f0f\n%+v   // \u5305\u542b\u5b57\u6bb5\u540d\n%#v   // Go \u8bed\u6cd5\u8868\u793a\n%T    // \u7c7b\u578b\n%t    // \u5e03\u5c14\u503c\n%d    // \u5341\u8fdb\u5236\u6574\u6570\n%f    // \u6d6e\u70b9\u6570\n%s    // \u5b57\u7b26\u4e32\n%p    // \u6307\u9488\n'})}),"\n",(0,t.jsx)(e.h3,{id:"2-strings---\u5b57\u7b26\u4e32\u64cd\u4f5c",children:"2. strings - \u5b57\u7b26\u4e32\u64cd\u4f5c"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'import "strings"\n\n// \u5e38\u7528\u51fd\u6570\nstrings.Contains(s, substr)      // \u5305\u542b\nstrings.HasPrefix(s, prefix)     // \u524d\u7f00\nstrings.HasSuffix(s, suffix)     // \u540e\u7f00\nstrings.Split(s, sep)            // \u5206\u5272\nstrings.Join(slice, sep)         // \u8fde\u63a5\nstrings.Replace(s, old, new, n)  // \u66ff\u6362\nstrings.ToLower(s)               // \u8f6c\u5c0f\u5199\nstrings.ToUpper(s)               // \u8f6c\u5927\u5199\nstrings.TrimSpace(s)             // \u53bb\u9664\u9996\u5c3e\u7a7a\u683c\n'})}),"\n",(0,t.jsx)(e.h3,{id:"3-os---\u64cd\u4f5c\u7cfb\u7edf\u529f\u80fd",children:"3. os - \u64cd\u4f5c\u7cfb\u7edf\u529f\u80fd"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'import "os"\n\n// \u6587\u4ef6\u64cd\u4f5c\nos.ReadFile(filename)\nos.WriteFile(filename, data, 0644)\nos.Create(filename)\nos.Open(filename)\nos.Remove(filename)\n\n// \u76ee\u5f55\u64cd\u4f5c\nos.Mkdir(dirname, 0755)\nos.MkdirAll(dirname, 0755)\nos.RemoveAll(dirname)\n\n// \u73af\u5883\u53d8\u91cf\nos.Getenv("PATH")\nos.Setenv("KEY", "value")\n\n// \u8fdb\u7a0b\nos.Exit(1)\nos.Getwd()  // \u5f53\u524d\u76ee\u5f55\n'})}),"\n",(0,t.jsx)(e.h3,{id:"4-filepath---\u8def\u5f84\u64cd\u4f5c",children:"4. filepath - \u8def\u5f84\u64cd\u4f5c"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'import "path/filepath"\n\n// \u8def\u5f84\u64cd\u4f5c\nfilepath.Join("dir", "file.txt")     // \u62fc\u63a5\u8def\u5f84\nfilepath.Ext(filename)                // \u83b7\u53d6\u6269\u5c55\u540d\nfilepath.Base(path)                   // \u83b7\u53d6\u6587\u4ef6\u540d\nfilepath.Dir(path)                    // \u83b7\u53d6\u76ee\u5f55\nfilepath.Abs(path)                    // \u7edd\u5bf9\u8def\u5f84\n\n// \u9879\u76ee\u793a\u4f8b\ntaskBasePath := filepath.Join("./tasks", taskId)\noutputFile := filepath.Join(taskBasePath, "output", "video.mp4")\n'})}),"\n",(0,t.jsx)(e.h3,{id:"5-time---\u65f6\u95f4\u64cd\u4f5c",children:"5. time - \u65f6\u95f4\u64cd\u4f5c"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'import "time"\n\n// \u5f53\u524d\u65f6\u95f4\nnow := time.Now()\n\n// \u683c\u5f0f\u5316\u65f6\u95f4\uff08Go \u7684\u7279\u6b8a\u683c\u5f0f\uff1a2006-01-02 15:04:05\uff09\nnow.Format("2006-01-02 15:04:05")\n\n// \u89e3\u6790\u65f6\u95f4\nt, _ := time.Parse("2006-01-02", "2024-01-01")\n\n// \u65f6\u95f4\u8fd0\u7b97\nfuture := now.Add(24 * time.Hour)\nduration := future.Sub(now)\n\n// \u7761\u7720\ntime.Sleep(time.Second)\n\n// \u5b9a\u65f6\u5668\ntimer := time.NewTimer(time.Second)\n<-timer.C\n\n// \u5468\u671f\u6267\u884c\nticker := time.NewTicker(time.Second)\nfor range ticker.C {\n    // \u6bcf\u79d2\u6267\u884c\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"6-encodingjson---json-\u5904\u7406",children:"6. encoding/json - JSON \u5904\u7406"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'import "encoding/json"\n\n// \u7ed3\u6784\u4f53\u8f6c JSON\ntype Person struct {\n    Name string `json:"name"`\n    Age  int    `json:"age"`\n}\n\np := Person{Name: "Alice", Age: 25}\ndata, _ := json.Marshal(p)\nfmt.Println(string(data))  // {"name":"Alice","age":25}\n\n// JSON \u8f6c\u7ed3\u6784\u4f53\njsonStr := `{"name":"Bob","age":30}`\nvar p2 Person\njson.Unmarshal([]byte(jsonStr), &p2)\n\n// \u7f8e\u5316\u8f93\u51fa\ndata, _ := json.MarshalIndent(p, "", "  ")\n'})}),"\n",(0,t.jsx)(e.h3,{id:"7-nethttp---http-\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668",children:"7. net/http - HTTP \u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'import "net/http"\n\n// HTTP \u5ba2\u6237\u7aef\nresp, err := http.Get("https://api.example.com")\ndefer resp.Body.Close()\nbody, _ := io.ReadAll(resp.Body)\n\n// POST \u8bf7\u6c42\nresp, err := http.Post(url, "application/json", bytes.NewBuffer(data))\n\n// HTTP \u670d\u52a1\u5668\nhttp.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {\n    fmt.Fprintf(w, "Hello, World!")\n})\nhttp.ListenAndServe(":8080", nil)\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u5b9e\u6218\u6280\u5de7",children:"\u5b9e\u6218\u6280\u5de7"}),"\n",(0,t.jsx)(e.h3,{id:"1-\u6cdb\u578bgo-118",children:"1. \u6cdb\u578b\uff08Go 1.18+\uff09"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:"// \u6cdb\u578b\u51fd\u6570\nfunc Max[T int | float64](a, b T) T {\n    if a > b {\n        return a\n    }\n    return b\n}\n\n// \u6cdb\u578b\u7c7b\u578b\ntype Queue[T any] interface {\n    Enqueue(item T) bool\n    Dequeue() (T, bool)\n}\n\n// \u9879\u76ee\u793a\u4f8b\uff1a\u5faa\u73af\u961f\u5217\ntype CircularQueue[T any] struct {\n    data  []T\n    front int\n    rear  int\n    count int\n}\n\nfunc NewCircularQueue[T any](maxSize int) *CircularQueue[T] {\n    return &CircularQueue[T]{\n        data: make([]T, maxSize),\n    }\n}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"2-\u7ed3\u6784\u4f53\u6807\u7b7e",children:"2. \u7ed3\u6784\u4f53\u6807\u7b7e"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'// TOML \u6807\u7b7e\ntype Config struct {\n    Host string `toml:"host"`\n    Port int    `toml:"port"`\n}\n\n// JSON \u6807\u7b7e\ntype User struct {\n    Name  string `json:"name"`\n    Email string `json:"email,omitempty"`  // \u7a7a\u503c\u65f6\u7701\u7565\n    Age   int    `json:"-"`                // \u5ffd\u7565\u5b57\u6bb5\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"3-defer-\u5ef6\u8fdf\u6267\u884c",children:"3. defer \u5ef6\u8fdf\u6267\u884c"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'// \u5ef6\u8fdf\u6267\u884c\uff08\u540e\u8fdb\u5148\u51fa\uff09\nfunc readFile(filename string) error {\n    file, err := os.Open(filename)\n    if err != nil {\n        return err\n    }\n    defer file.Close()  // \u51fd\u6570\u8fd4\u56de\u524d\u6267\u884c\n    \n    // \u8bfb\u53d6\u6587\u4ef6\n    return nil\n}\n\n// \u591a\u4e2a defer\ndefer fmt.Println("1")\ndefer fmt.Println("2")\ndefer fmt.Println("3")\n// \u8f93\u51fa\uff1a3 2 1\n'})}),"\n",(0,t.jsx)(e.h3,{id:"4-panic-\u548c-recover",children:"4. panic \u548c recover"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'// panic \u89e6\u53d1\u6050\u614c\nfunc divide(a, b int) int {\n    if b == 0 {\n        panic("\u9664\u6570\u4e0d\u80fd\u4e3a\u96f6")\n    }\n    return a / b\n}\n\n// recover \u6062\u590d\u6050\u614c\nfunc safeCall() {\n    defer func() {\n        if r := recover(); r != nil {\n            fmt.Println("\u6062\u590d:", r)\n        }\n    }()\n    \n    divide(10, 0)  // \u4f1a\u89e6\u53d1 panic\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"5-\u4e0a\u4e0b\u6587context",children:"5. \u4e0a\u4e0b\u6587\uff08Context\uff09"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'import "context"\n\n// \u521b\u5efa\u4e0a\u4e0b\u6587\nctx := context.Background()\nctx, cancel := context.WithCancel(ctx)\nctx, cancel := context.WithTimeout(ctx, time.Second)\nctx, cancel := context.WithDeadline(ctx, time.Now().Add(time.Second))\n\n// \u4f7f\u7528\u4e0a\u4e0b\u6587\nselect {\ncase <-ctx.Done():\n    fmt.Println("\u4e0a\u4e0b\u6587\u5df2\u53d6\u6d88")\ncase result := <-ch:\n    fmt.Println("\u6536\u5230\u7ed3\u679c:", result)\n}\n\n// \u4f20\u9012\u503c\nctx = context.WithValue(ctx, "key", "value")\nvalue := ctx.Value("key")\n'})}),"\n",(0,t.jsx)(e.h3,{id:"6-\u5d4c\u5165\u9759\u6001\u8d44\u6e90embed",children:"6. \u5d4c\u5165\u9759\u6001\u8d44\u6e90\uff08embed\uff09"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'import "embed"\n\n// \u5d4c\u5165\u5355\u4e2a\u6587\u4ef6\n//go:embed version.txt\nvar version string\n\n// \u5d4c\u5165\u591a\u4e2a\u6587\u4ef6\n//go:embed static/*\nvar staticFiles embed.FS\n\n// \u9879\u76ee\u793a\u4f8b\n//go:embed static/index.html\nvar indexHTML []byte\n\n// \u4f7f\u7528\u5d4c\u5165\u7684\u6587\u4ef6\u7cfb\u7edf\nhttp.Handle("/static/", http.FileServer(http.FS(staticFiles)))\n'})}),"\n",(0,t.jsx)(e.h3,{id:"7-\u6b63\u5219\u8868\u8fbe\u5f0f",children:"7. \u6b63\u5219\u8868\u8fbe\u5f0f"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'import "regexp"\n\n// \u7f16\u8bd1\u6b63\u5219\u8868\u8fbe\u5f0f\nre := regexp.MustCompile(`\\d+`)\n\n// \u5339\u914d\nmatched := re.MatchString("abc123")  // true\n\n// \u67e5\u627e\nresult := re.FindString("abc123def456")  // "123"\nresults := re.FindAllString("abc123def456", -1)  // ["123", "456"]\n\n// \u66ff\u6362\nresult := re.ReplaceAllString("abc123", "XXX")  // "abcXXX"\n\n// \u9879\u76ee\u793a\u4f8b\uff1a\u63d0\u53d6\u89c6\u9891 ID\nre := regexp.MustCompile(`https://(?:www\\.)?bilibili\\.com/(?:video/|video/av\\d+/)(BV[a-zA-Z0-9]+)`)\nmatches := re.FindStringSubmatch(url)\nif len(matches) > 1 {\n    videoId := matches[1]\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"8-\u547d\u4ee4\u884c\u53c2\u6570",children:"8. \u547d\u4ee4\u884c\u53c2\u6570"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'import (\n    "flag"\n    "os"\n)\n\n// \u5b9a\u4e49\u547d\u4ee4\u884c\u53c2\u6570\nvar (\n    host = flag.String("host", "127.0.0.1", "\u670d\u52a1\u5668\u5730\u5740")\n    port = flag.Int("port", 8888, "\u670d\u52a1\u5668\u7aef\u53e3")\n    debug = flag.Bool("debug", false, "\u8c03\u8bd5\u6a21\u5f0f")\n)\n\nfunc main() {\n    // \u89e3\u6790\u53c2\u6570\n    flag.Parse()\n\n    fmt.Printf("Host: %s, Port: %d, Debug: %v\\n", *host, *port, *debug)\n\n    // \u83b7\u53d6\u975e\u6807\u5fd7\u53c2\u6570\n    args := flag.Args()\n}\n\n// \u4f7f\u7528\uff1ago run main.go -host=0.0.0.0 -port=9000 -debug\n'})}),"\n",(0,t.jsx)(e.h3,{id:"9-\u6587\u4ef6\u8bfb\u5199",children:"9. \u6587\u4ef6\u8bfb\u5199"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'import (\n    "bufio"\n    "io"\n    "os"\n)\n\n// \u8bfb\u53d6\u6574\u4e2a\u6587\u4ef6\ndata, err := os.ReadFile("file.txt")\n\n// \u5199\u5165\u6574\u4e2a\u6587\u4ef6\nerr := os.WriteFile("file.txt", []byte("content"), 0644)\n\n// \u9010\u884c\u8bfb\u53d6\nfile, _ := os.Open("file.txt")\ndefer file.Close()\n\nscanner := bufio.NewScanner(file)\nfor scanner.Scan() {\n    line := scanner.Text()\n    fmt.Println(line)\n}\n\n// \u9010\u884c\u5199\u5165\nfile, _ := os.Create("file.txt")\ndefer file.Close()\n\nwriter := bufio.NewWriter(file)\nwriter.WriteString("line 1\\n")\nwriter.WriteString("line 2\\n")\nwriter.Flush()\n\n// \u590d\u5236\u6587\u4ef6\nsrc, _ := os.Open("source.txt")\ndefer src.Close()\n\ndst, _ := os.Create("dest.txt")\ndefer dst.Close()\n\nio.Copy(dst, src)\n'})}),"\n",(0,t.jsx)(e.h3,{id:"10-\u7c7b\u578b\u8f6c\u6362",children:"10. \u7c7b\u578b\u8f6c\u6362"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'// \u57fa\u672c\u7c7b\u578b\u8f6c\u6362\nvar i int = 42\nvar f float64 = float64(i)\nvar u uint = uint(i)\n\n// \u5b57\u7b26\u4e32\u8f6c\u6570\u5b57\ni, err := strconv.Atoi("123")\nf, err := strconv.ParseFloat("3.14", 64)\nb, err := strconv.ParseBool("true")\n\n// \u6570\u5b57\u8f6c\u5b57\u7b26\u4e32\ns := strconv.Itoa(123)\ns := strconv.FormatFloat(3.14, \'f\', 2, 64)\ns := strconv.FormatBool(true)\n\n// \u5b57\u7b26\u4e32\u548c\u5b57\u8282\u5207\u7247\ns := "hello"\nb := []byte(s)\ns = string(b)\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u9879\u76ee\u5b9e\u6218\u6848\u4f8b",children:"\u9879\u76ee\u5b9e\u6218\u6848\u4f8b"}),"\n",(0,t.jsx)(e.h3,{id:"\u6848\u4f8b-1http-\u8def\u7531\u8bbe\u7f6e",children:"\u6848\u4f8b 1\uff1aHTTP \u8def\u7531\u8bbe\u7f6e"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'package router\n\nimport (\n    "krillin-ai/internal/handler"\n    "github.com/gin-gonic/gin"\n)\n\nfunc SetupRouter(r *gin.Engine) {\n    // \u521b\u5efa\u8def\u7531\u7ec4\n    api := r.Group("/api")\n\n    // \u521b\u5efa\u5904\u7406\u5668\n    hdl := handler.NewHandler()\n\n    // \u6ce8\u518c\u8def\u7531\n    {\n        api.POST("/capability/subtitleTask", hdl.StartSubtitleTask)\n        api.GET("/capability/subtitleTask", hdl.GetSubtitleTask)\n        api.POST("/file", hdl.UploadFile)\n        api.GET("/file/*filepath", hdl.DownloadFile)\n    }\n\n    // \u9759\u6001\u6587\u4ef6\u670d\u52a1\n    r.StaticFS("/static", http.FS(staticFiles))\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u6848\u4f8b-2\u914d\u7f6e\u52a0\u8f7d",children:"\u6848\u4f8b 2\uff1a\u914d\u7f6e\u52a0\u8f7d"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'package config\n\nimport (\n    "github.com/BurntSushi/toml"\n    "os"\n)\n\ntype Config struct {\n    App    App    `toml:"app"`\n    Server Server `toml:"server"`\n}\n\ntype App struct {\n    SegmentDuration int    `toml:"segment_duration"`\n    Proxy           string `toml:"proxy"`\n}\n\ntype Server struct {\n    Host string `toml:"host"`\n    Port int    `toml:"port"`\n}\n\nvar Conf = Config{\n    App: App{\n        SegmentDuration: 5,\n    },\n    Server: Server{\n        Host: "127.0.0.1",\n        Port: 8888,\n    },\n}\n\nfunc LoadConfig() error {\n    configPath := "./config/config.toml"\n    if _, err := os.Stat(configPath); os.IsNotExist(err) {\n        return err\n    }\n\n    _, err := toml.DecodeFile(configPath, &Conf)\n    return err\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u6848\u4f8b-3\u4f9d\u8d56\u6ce8\u5165",children:"\u6848\u4f8b 3\uff1a\u4f9d\u8d56\u6ce8\u5165"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'package service\n\nimport (\n    "krillin-ai/config"\n    "krillin-ai/internal/types"\n    "krillin-ai/pkg/openai"\n    "krillin-ai/pkg/whisper"\n)\n\ntype Service struct {\n    Transcriber   types.Transcriber\n    ChatCompleter types.ChatCompleter\n    TtsClient     types.Ttser\n}\n\nfunc NewService() *Service {\n    var transcriber types.Transcriber\n\n    // \u6839\u636e\u914d\u7f6e\u9009\u62e9\u5b9e\u73b0\n    switch config.Conf.Transcribe.Provider {\n    case "openai":\n        transcriber = whisper.NewClient(\n            config.Conf.Transcribe.Openai.BaseUrl,\n            config.Conf.Transcribe.Openai.ApiKey,\n            config.Conf.App.Proxy,\n        )\n    case "fasterwhisper":\n        transcriber = fasterwhisper.NewProcessor(\n            config.Conf.Transcribe.Fasterwhisper.Model,\n        )\n    }\n\n    return &Service{\n        Transcriber:   transcriber,\n        ChatCompleter: openai.NewClient(),\n        TtsClient:     openai.NewClient(),\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u6848\u4f8b-4\u5e76\u53d1\u4efb\u52a1\u5904\u7406",children:"\u6848\u4f8b 4\uff1a\u5e76\u53d1\u4efb\u52a1\u5904\u7406"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'package service\n\nimport (\n    "context"\n    "fmt"\n    "golang.org/x/sync/errgroup"\n    "runtime"\n    "sync"\n)\n\nfunc (s Service) ProcessConcurrently(items []Item) error {\n    // \u521b\u5efa\u9519\u8bef\u7ec4\n    eg, ctx := errgroup.WithContext(context.Background())\n\n    // \u521b\u5efa\u4efb\u52a1\u961f\u5217\n    pendingQueue := make(chan Item, len(items))\n    resultQueue := make(chan Result, len(items))\n\n    // \u53d1\u9001\u4efb\u52a1\u5230\u961f\u5217\n    for _, item := range items {\n        pendingQueue <- item\n    }\n    close(pendingQueue)\n\n    // \u542f\u52a8\u5de5\u4f5c\u534f\u7a0b\uff08\u6570\u91cf\u7b49\u4e8e CPU \u6838\u5fc3\u6570\uff09\n    for range runtime.NumCPU() {\n        eg.Go(func() error {\n            for {\n                select {\n                case <-ctx.Done():\n                    return nil\n                case item, ok := <-pendingQueue:\n                    if !ok {\n                        return nil\n                    }\n                    // \u5904\u7406\u4efb\u52a1\n                    result, err := s.processItem(item)\n                    if err != nil {\n                        return err\n                    }\n                    resultQueue <- result\n                }\n            }\n        })\n    }\n\n    // \u6536\u96c6\u7ed3\u679c\n    eg.Go(func() error {\n        results := make([]Result, 0, len(items))\n        for range items {\n            result := <-resultQueue\n            results = append(results, result)\n        }\n        close(resultQueue)\n        return nil\n    })\n\n    // \u7b49\u5f85\u6240\u6709\u4efb\u52a1\u5b8c\u6210\n    return eg.Wait()\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u6848\u4f8b-5\u9650\u6d41\u5668\u4fe1\u53f7\u91cf",children:"\u6848\u4f8b 5\uff1a\u9650\u6d41\u5668\uff08\u4fe1\u53f7\u91cf\uff09"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'package service\n\nimport (\n    "sync"\n)\n\nfunc (s Service) ProcessWithRateLimit(items []Item) error {\n    maxConcurrency := 3\n    semaphore := make(chan struct{}, maxConcurrency)\n    var wg sync.WaitGroup\n\n    for i, item := range items {\n        wg.Add(1)\n        go func(index int, it Item) {\n            defer wg.Done()\n\n            // \u83b7\u53d6\u4fe1\u53f7\u91cf\uff08\u9650\u5236\u5e76\u53d1\u6570\uff09\n            semaphore <- struct{}{}\n            defer func() { <-semaphore }()\n\n            // \u5904\u7406\u4efb\u52a1\n            s.processItem(it)\n        }(i, item)\n    }\n\n    wg.Wait()\n    return nil\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u6848\u4f8b-6\u65e5\u5fd7\u8bb0\u5f55",children:"\u6848\u4f8b 6\uff1a\u65e5\u5fd7\u8bb0\u5f55"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'package log\n\nimport (\n    "go.uber.org/zap"\n    "go.uber.org/zap/zapcore"\n)\n\nvar logger *zap.Logger\n\nfunc InitLogger() {\n    config := zap.NewProductionConfig()\n    config.EncoderConfig.TimeKey = "timestamp"\n    config.EncoderConfig.EncodeTime = zapcore.ISO8601TimeEncoder\n\n    logger, _ = config.Build()\n}\n\nfunc GetLogger() *zap.Logger {\n    return logger\n}\n\n// \u4f7f\u7528\u793a\u4f8b\nlog.GetLogger().Info("\u4efb\u52a1\u5f00\u59cb",\n    zap.String("taskId", taskId),\n    zap.Int("segmentNum", segmentNum),\n)\n\nlog.GetLogger().Error("\u4efb\u52a1\u5931\u8d25",\n    zap.String("taskId", taskId),\n    zap.Error(err),\n)\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u6848\u4f8b-7\u5de5\u5177\u51fd\u6570",children:"\u6848\u4f8b 7\uff1a\u5de5\u5177\u51fd\u6570"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'package util\n\nimport (\n    "math/rand"\n    "regexp"\n    "strings"\n)\n\n// \u751f\u6210\u968f\u673a\u5b57\u7b26\u4e32\nfunc GenerateRandString(n int) string {\n    chars := []rune("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789")\n    b := make([]rune, n)\n    for i := range b {\n        b[i] = chars[rand.Intn(len(chars))]\n    }\n    return string(b)\n}\n\n// \u6e05\u7406\u8def\u5f84\u540d\nfunc SanitizePathName(name string) string {\n    // \u66ff\u6362\u975e\u6cd5\u5b57\u7b26\n    illegalChars := regexp.MustCompile(`[<>:"/\\\\|?*\\[\\]\\x00-\\x1F]`)\n    sanitized := illegalChars.ReplaceAllString(name, "_")\n\n    // \u53bb\u9664\u9996\u5c3e\u7a7a\u683c\n    sanitized = strings.TrimSpace(sanitized)\n\n    // \u9632\u6b62\u7a7a\u5b57\u7b26\u4e32\n    if sanitized == "" {\n        sanitized = "unnamed"\n    }\n\n    return sanitized\n}\n\n// \u683c\u5f0f\u5316\u65f6\u95f4\nfunc FormatTime(seconds float32) string {\n    totalSeconds := int(seconds)\n    milliseconds := int((seconds - float32(totalSeconds)) * 1000)\n\n    hours := totalSeconds / 3600\n    minutes := (totalSeconds % 3600) / 60\n    secs := totalSeconds % 60\n\n    return fmt.Sprintf("%02d:%02d:%02d,%03d", hours, minutes, secs, milliseconds)\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u5e38\u89c1\u9677\u9631\u548c\u6700\u4f73\u5b9e\u8df5",children:"\u5e38\u89c1\u9677\u9631\u548c\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,t.jsx)(e.h3,{id:"1-\u5207\u7247\u9677\u9631",children:"1. \u5207\u7247\u9677\u9631"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:"// \u274c \u9519\u8bef\uff1a\u5207\u7247\u5171\u4eab\u5e95\u5c42\u6570\u7ec4\na := []int{1, 2, 3, 4, 5}\nb := a[1:3]  // [2, 3]\nb[0] = 999\nfmt.Println(a)  // [1, 999, 3, 4, 5] - a \u4e5f\u88ab\u4fee\u6539\u4e86\uff01\n\n// \u2705 \u6b63\u786e\uff1a\u590d\u5236\u5207\u7247\nb := make([]int, len(a[1:3]))\ncopy(b, a[1:3])\nb[0] = 999\nfmt.Println(a)  // [1, 2, 3, 4, 5] - a \u4e0d\u53d7\u5f71\u54cd\n"})}),"\n",(0,t.jsx)(e.h3,{id:"2-\u5faa\u73af\u53d8\u91cf\u9677\u9631",children:"2. \u5faa\u73af\u53d8\u91cf\u9677\u9631"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:"// \u274c \u9519\u8bef\uff1a\u6240\u6709 goroutine \u5171\u4eab\u540c\u4e00\u4e2a\u53d8\u91cf\nfor _, item := range items {\n    go func() {\n        process(item)  // \u6240\u6709 goroutine \u53ef\u80fd\u5904\u7406\u540c\u4e00\u4e2a item\n    }()\n}\n\n// \u2705 \u6b63\u786e\uff1a\u4f20\u9012\u53c2\u6570\nfor _, item := range items {\n    go func(it Item) {\n        process(it)\n    }(item)\n}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"3-map-\u5e76\u53d1\u9677\u9631",children:"3. Map \u5e76\u53d1\u9677\u9631"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'// \u274c \u9519\u8bef\uff1a\u666e\u901a map \u4e0d\u662f\u5e76\u53d1\u5b89\u5168\u7684\nm := make(map[string]int)\ngo func() { m["key"] = 1 }()\ngo func() { m["key"] = 2 }()  // \u53ef\u80fd\u5bfc\u81f4 panic\n\n// \u2705 \u6b63\u786e\uff1a\u4f7f\u7528 sync.Map\nvar m sync.Map\ngo func() { m.Store("key", 1) }()\ngo func() { m.Store("key", 2) }()\n'})}),"\n",(0,t.jsx)(e.h3,{id:"4-defer-\u9677\u9631",children:"4. defer \u9677\u9631"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:"// \u274c \u9519\u8bef\uff1adefer \u5728\u5faa\u73af\u4e2d\nfor _, file := range files {\n    f, _ := os.Open(file)\n    defer f.Close()  // \u6240\u6709\u6587\u4ef6\u5728\u51fd\u6570\u7ed3\u675f\u65f6\u624d\u5173\u95ed\n    // \u5904\u7406\u6587\u4ef6\n}\n\n// \u2705 \u6b63\u786e\uff1a\u4f7f\u7528\u533f\u540d\u51fd\u6570\nfor _, file := range files {\n    func() {\n        f, _ := os.Open(file)\n        defer f.Close()  // \u6bcf\u6b21\u5faa\u73af\u7ed3\u675f\u65f6\u5173\u95ed\n        // \u5904\u7406\u6587\u4ef6\n    }()\n}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"5-\u9519\u8bef\u5904\u7406\u6700\u4f73\u5b9e\u8df5",children:"5. \u9519\u8bef\u5904\u7406\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'// \u2705 \u63a8\u8350\uff1a\u660e\u786e\u7684\u9519\u8bef\u5904\u7406\nresult, err := someFunction()\nif err != nil {\n    log.GetLogger().Error("\u64cd\u4f5c\u5931\u8d25", zap.Error(err))\n    return fmt.Errorf("someFunction \u5931\u8d25: %w", err)\n}\n\n// \u274c \u4e0d\u63a8\u8350\uff1a\u5ffd\u7565\u9519\u8bef\nresult, _ := someFunction()\n\n// \u2705 \u63a8\u8350\uff1a\u65e9\u8fd4\u56de\nif err != nil {\n    return err\n}\n// \u7ee7\u7eed\u6b63\u5e38\u6d41\u7a0b\n\n// \u274c \u4e0d\u63a8\u8350\uff1a\u6df1\u5c42\u5d4c\u5957\nif err == nil {\n    if result != nil {\n        if result.Valid {\n            // \u6df1\u5c42\u5d4c\u5957\n        }\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"6-\u6027\u80fd\u4f18\u5316\u6280\u5de7",children:"6. \u6027\u80fd\u4f18\u5316\u6280\u5de7"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:"// \u9884\u5206\u914d\u5207\u7247\u5bb9\u91cf\nslice := make([]int, 0, expectedSize)\n\n// \u4f7f\u7528 strings.Builder \u62fc\u63a5\u5b57\u7b26\u4e32\nvar builder strings.Builder\nfor _, s := range strings {\n    builder.WriteString(s)\n}\nresult := builder.String()\n\n// \u4f7f\u7528 sync.Pool \u590d\u7528\u5bf9\u8c61\nvar bufferPool = sync.Pool{\n    New: func() interface{} {\n        return new(bytes.Buffer)\n    },\n}\n\nbuf := bufferPool.Get().(*bytes.Buffer)\ndefer bufferPool.Put(buf)\nbuf.Reset()\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\u6d4b\u8bd5",children:"\u6d4b\u8bd5"}),"\n",(0,t.jsx)(e.h3,{id:"1-\u5355\u5143\u6d4b\u8bd5",children:"1. \u5355\u5143\u6d4b\u8bd5"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'package util\n\nimport "testing"\n\nfunc TestAdd(t *testing.T) {\n    result := Add(2, 3)\n    expected := 5\n\n    if result != expected {\n        t.Errorf("Add(2, 3) = %d; \u671f\u671b %d", result, expected)\n    }\n}\n\n// \u8868\u683c\u9a71\u52a8\u6d4b\u8bd5\nfunc TestAddTable(t *testing.T) {\n    tests := []struct {\n        name     string\n        a, b     int\n        expected int\n    }{\n        {"\u6b63\u6570", 2, 3, 5},\n        {"\u8d1f\u6570", -2, -3, -5},\n        {"\u96f6", 0, 0, 0},\n    }\n\n    for _, tt := range tests {\n        t.Run(tt.name, func(t *testing.T) {\n            result := Add(tt.a, tt.b)\n            if result != tt.expected {\n                t.Errorf("Add(%d, %d) = %d; \u671f\u671b %d",\n                    tt.a, tt.b, result, tt.expected)\n            }\n        })\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"2-\u57fa\u51c6\u6d4b\u8bd5",children:"2. \u57fa\u51c6\u6d4b\u8bd5"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:"func BenchmarkAdd(b *testing.B) {\n    for i := 0; i < b.N; i++ {\n        Add(2, 3)\n    }\n}\n\n// \u8fd0\u884c\uff1ago test -bench=.\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\u76f8\u5173\u8d44\u6e90",children:"\u76f8\u5173\u8d44\u6e90"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://golang.org/doc/",children:"Go \u5b98\u65b9\u6587\u6863"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://gobyexample.com/",children:"Go by Example"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://golang.org/doc/effective_go",children:"Effective Go"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://pkg.go.dev/std",children:"Go \u6807\u51c6\u5e93"})}),"\n"]})]})}function u(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}}}]);