"use strict";(self.webpackChunknotes_3=self.webpackChunknotes_3||[]).push([[56111],{54213:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>c});var s=r(36672);const l={},d=s.createContext(l);function i(e){const n=s.useContext(d);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),s.createElement(d.Provider,{value:n},e.children)}},74262:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>x,frontMatter:()=>i,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"Rust/\u5b8f\u8be6\u89e3","title":"Rust \u5b8f\u8be6\u89e3","description":"\ud83d\udcda \u4ec0\u4e48\u662f\u5b8f\uff1f","source":"@site/docs/Rust/\u5b8f\u8be6\u89e3.md","sourceDirName":"Rust","slug":"/Rust/\u5b8f\u8be6\u89e3","permalink":"/notes3/docs/Rust/\u5b8f\u8be6\u89e3","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Rust/\u5b8f\u8be6\u89e3.md","tags":[],"version":"current","frontMatter":{},"sidebar":"rust","previous":{"title":"Rust \u5b66\u4e60\u8def\u7ebf","permalink":"/notes3/docs/Rust/\u5b66\u4e60\u8def\u7ebf"},"next":{"title":"Rig - Rust \u7684 AI Agent \u6846\u67b6\u5165\u95e8\u6307\u5357","permalink":"/notes3/docs/Rust/\u5e38\u7528\u5e93/Rig-Rust\u7684AI Agent\u6846\u67b6"}}');var l=r(23420),d=r(54213);const i={},c="Rust \u5b8f\u8be6\u89e3",t={},a=[{value:"\ud83d\udcda \u4ec0\u4e48\u662f\u5b8f\uff1f",id:"-\u4ec0\u4e48\u662f\u5b8f",level:2},{value:"\u5b8f vs \u51fd\u6570",id:"\u5b8f-vs-\u51fd\u6570",level:3},{value:"\u5b8f\u7684\u4f18\u52bf",id:"\u5b8f\u7684\u4f18\u52bf",level:3},{value:"\u5b8f\u7684\u52a3\u52bf",id:"\u5b8f\u7684\u52a3\u52bf",level:3},{value:"\ud83c\udfaf Rust \u5b8f\u7684\u5206\u7c7b",id:"-rust-\u5b8f\u7684\u5206\u7c7b",level:2},{value:"1\ufe0f\u20e3 \u58f0\u660e\u5b8f\uff08Declarative Macros\uff09",id:"1\ufe0f\u20e3-\u58f0\u660e\u5b8fdeclarative-macros",level:3},{value:"2\ufe0f\u20e3 \u8fc7\u7a0b\u5b8f\uff08Procedural Macros\uff09",id:"2\ufe0f\u20e3-\u8fc7\u7a0b\u5b8fprocedural-macros",level:3},{value:"\ud83d\udcdd \u58f0\u660e\u5b8f\uff08Declarative Macros\uff09",id:"-\u58f0\u660e\u5b8fdeclarative-macros",level:2},{value:"\u57fa\u672c\u8bed\u6cd5",id:"\u57fa\u672c\u8bed\u6cd5",level:3},{value:"\u793a\u4f8b 1\uff1a\u7b80\u5355\u7684\u6253\u5370\u5b8f",id:"\u793a\u4f8b-1\u7b80\u5355\u7684\u6253\u5370\u5b8f",level:3},{value:"\u793a\u4f8b 2\uff1a\u5e26\u53c2\u6570\u7684\u5b8f",id:"\u793a\u4f8b-2\u5e26\u53c2\u6570\u7684\u5b8f",level:3},{value:"\u793a\u4f8b 3\uff1a\u591a\u4e2a\u6a21\u5f0f",id:"\u793a\u4f8b-3\u591a\u4e2a\u6a21\u5f0f",level:3},{value:"\u793a\u4f8b 4\uff1a\u53ef\u53d8\u53c2\u6570\uff08\u91cd\u590d\u6a21\u5f0f\uff09",id:"\u793a\u4f8b-4\u53ef\u53d8\u53c2\u6570\u91cd\u590d\u6a21\u5f0f",level:3},{value:"\u6a21\u5f0f\u5339\u914d\u7c7b\u578b",id:"\u6a21\u5f0f\u5339\u914d\u7c7b\u578b",level:3},{value:"\u91cd\u590d\u6a21\u5f0f\u8bed\u6cd5",id:"\u91cd\u590d\u6a21\u5f0f\u8bed\u6cd5",level:3},{value:"\ud83d\udd27 \u8fc7\u7a0b\u5b8f\uff08Procedural Macros\uff09",id:"-\u8fc7\u7a0b\u5b8fprocedural-macros",level:2},{value:"1\ufe0f\u20e3 \u6d3e\u751f\u5b8f\uff08Derive Macros\uff09",id:"1\ufe0f\u20e3-\u6d3e\u751f\u5b8fderive-macros",level:3},{value:"\u793a\u4f8b\uff1a\u81ea\u5b9a\u4e49 Debug",id:"\u793a\u4f8b\u81ea\u5b9a\u4e49-debug",level:4},{value:"2\ufe0f\u20e3 \u5c5e\u6027\u5b8f\uff08Attribute Macros\uff09",id:"2\ufe0f\u20e3-\u5c5e\u6027\u5b8fattribute-macros",level:3},{value:"\u793a\u4f8b\uff1a\u8ba1\u65f6\u5668",id:"\u793a\u4f8b\u8ba1\u65f6\u5668",level:4},{value:"3\ufe0f\u20e3 \u51fd\u6570\u5f0f\u5b8f\uff08Function-like Macros\uff09",id:"3\ufe0f\u20e3-\u51fd\u6570\u5f0f\u5b8ffunction-like-macros",level:3},{value:"\u793a\u4f8b\uff1aSQL \u67e5\u8be2",id:"\u793a\u4f8bsql-\u67e5\u8be2",level:4},{value:"\ud83d\udca1 \u4f7f\u7528\u5b8f\u7684\u6700\u4f73\u65f6\u673a",id:"-\u4f7f\u7528\u5b8f\u7684\u6700\u4f73\u65f6\u673a",level:2},{value:"\u2705 \u5e94\u8be5\u4f7f\u7528\u5b8f\u7684\u573a\u666f",id:"-\u5e94\u8be5\u4f7f\u7528\u5b8f\u7684\u573a\u666f",level:3},{value:"1. \u51cf\u5c11\u91cd\u590d\u4ee3\u7801",id:"1-\u51cf\u5c11\u91cd\u590d\u4ee3\u7801",level:4},{value:"2. \u7f16\u8bd1\u65f6\u9a8c\u8bc1",id:"2-\u7f16\u8bd1\u65f6\u9a8c\u8bc1",level:4},{value:"3. \u521b\u5efa DSL",id:"3-\u521b\u5efa-dsl",level:4},{value:"4. \u81ea\u52a8\u5b9e\u73b0 trait",id:"4-\u81ea\u52a8\u5b9e\u73b0-trait",level:4},{value:"5. \u53ef\u53d8\u53c2\u6570",id:"5-\u53ef\u53d8\u53c2\u6570",level:4},{value:"\u274c \u4e0d\u5e94\u8be5\u4f7f\u7528\u5b8f\u7684\u573a\u666f",id:"-\u4e0d\u5e94\u8be5\u4f7f\u7528\u5b8f\u7684\u573a\u666f",level:3},{value:"1. \u7b80\u5355\u7684\u4ee3\u7801\u590d\u7528",id:"1-\u7b80\u5355\u7684\u4ee3\u7801\u590d\u7528",level:4},{value:"2. \u7c7b\u578b\u8f6c\u6362",id:"2-\u7c7b\u578b\u8f6c\u6362",level:4},{value:"3. \u7b80\u5355\u7684\u6761\u4ef6\u903b\u8f91",id:"3-\u7b80\u5355\u7684\u6761\u4ef6\u903b\u8f91",level:4},{value:"\ud83c\udfa8 \u5b9e\u6218\u793a\u4f8b",id:"-\u5b9e\u6218\u793a\u4f8b",level:2},{value:"\u793a\u4f8b 1\uff1aJSON \u6784\u5efa\u5668",id:"\u793a\u4f8b-1json-\u6784\u5efa\u5668",level:3},{value:"\u793a\u4f8b 2\uff1a\u5355\u5143\u6d4b\u8bd5\u8f85\u52a9",id:"\u793a\u4f8b-2\u5355\u5143\u6d4b\u8bd5\u8f85\u52a9",level:3},{value:"\u793a\u4f8b 3\uff1a\u9519\u8bef\u5904\u7406",id:"\u793a\u4f8b-3\u9519\u8bef\u5904\u7406",level:3},{value:"\ud83d\udcca \u5e38\u89c1\u5b8f\u793a\u4f8b",id:"-\u5e38\u89c1\u5b8f\u793a\u4f8b",level:2},{value:"\u6807\u51c6\u5e93\u5b8f",id:"\u6807\u51c6\u5e93\u5b8f",level:3},{value:"\u7b2c\u4e09\u65b9\u5e93\u5b8f",id:"\u7b2c\u4e09\u65b9\u5e93\u5b8f",level:3},{value:"\ud83d\udee0\ufe0f \u6700\u4f73\u5b9e\u8df5",id:"\ufe0f-\u6700\u4f73\u5b9e\u8df5",level:2},{value:"1. \u4fdd\u6301\u7b80\u5355",id:"1-\u4fdd\u6301\u7b80\u5355",level:3},{value:"2. \u63d0\u4f9b\u6e05\u6670\u7684\u6587\u6863",id:"2-\u63d0\u4f9b\u6e05\u6670\u7684\u6587\u6863",level:3},{value:"3. \u4f7f\u7528 <code>#[macro_export]</code>",id:"3-\u4f7f\u7528-macro_export",level:3},{value:"4. \u5904\u7406\u9519\u8bef",id:"4-\u5904\u7406\u9519\u8bef",level:3},{value:"5. \u6d4b\u8bd5\u5b8f",id:"5-\u6d4b\u8bd5\u5b8f",level:3},{value:"\ud83d\udc1b \u5e38\u89c1\u9677\u9631",id:"-\u5e38\u89c1\u9677\u9631",level:2},{value:"1. \u536b\u751f\u6027\u95ee\u9898",id:"1-\u536b\u751f\u6027\u95ee\u9898",level:3},{value:"2. \u91cd\u590d\u5c55\u5f00",id:"2-\u91cd\u590d\u5c55\u5f00",level:3},{value:"3. \u7c7b\u578b\u63a8\u65ad\u95ee\u9898",id:"3-\u7c7b\u578b\u63a8\u65ad\u95ee\u9898",level:3},{value:"\ud83d\udcda \u603b\u7ed3",id:"-\u603b\u7ed3",level:2},{value:"\u6838\u5fc3\u8981\u70b9",id:"\u6838\u5fc3\u8981\u70b9",level:3},{value:"\u9009\u62e9\u6307\u5357",id:"\u9009\u62e9\u6307\u5357",level:3},{value:"\u8bb0\u5fc6\u53e3\u8bc0",id:"\u8bb0\u5fc6\u53e3\u8bc0",level:3}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"rust-\u5b8f\u8be6\u89e3",children:"Rust \u5b8f\u8be6\u89e3"})}),"\n",(0,l.jsx)(n.h2,{id:"-\u4ec0\u4e48\u662f\u5b8f",children:"\ud83d\udcda \u4ec0\u4e48\u662f\u5b8f\uff1f"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u5b8f"}),"\uff08Macro\uff09\u662f Rust \u4e2d\u7684\u5143\u7f16\u7a0b\u5de5\u5177\uff0c\u5141\u8bb8\u4f60\u7f16\u5199\u80fd\u591f\u751f\u6210\u5176\u4ed6\u4ee3\u7801\u7684\u4ee3\u7801\u3002\u5b8f\u5728\u7f16\u8bd1\u65f6\u5c55\u5f00\uff0c\u751f\u6210\u7684\u4ee3\u7801\u4f1a\u88ab\u63d2\u5165\u5230\u6e90\u4ee3\u7801\u4e2d\u3002"]}),"\n",(0,l.jsx)(n.h3,{id:"\u5b8f-vs-\u51fd\u6570",children:"\u5b8f vs \u51fd\u6570"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u7279\u6027"}),(0,l.jsx)(n.th,{children:"\u51fd\u6570"}),(0,l.jsx)(n.th,{children:"\u5b8f"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"\u53c2\u6570\u6570\u91cf"})}),(0,l.jsx)(n.td,{children:"\u56fa\u5b9a"}),(0,l.jsx)(n.td,{children:"\u53ef\u53d8"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"\u53c2\u6570\u7c7b\u578b"})}),(0,l.jsx)(n.td,{children:"\u5fc5\u987b\u6307\u5b9a"}),(0,l.jsx)(n.td,{children:"\u53ef\u4ee5\u662f\u4efb\u610f\u7c7b\u578b"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"\u6267\u884c\u65f6\u673a"})}),(0,l.jsx)(n.td,{children:"\u8fd0\u884c\u65f6"}),(0,l.jsx)(n.td,{children:"\u7f16\u8bd1\u65f6"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"\u64cd\u4f5c\u5bf9\u8c61"})}),(0,l.jsx)(n.td,{children:"\u503c"}),(0,l.jsx)(n.td,{children:"\u4ee3\u7801\uff08AST\uff09"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"\u5b9a\u4e49\u4f4d\u7f6e"})}),(0,l.jsx)(n.td,{children:"\u4efb\u610f\u4f4d\u7f6e"}),(0,l.jsx)(n.td,{children:"\u5fc5\u987b\u5728\u4f7f\u7528\u524d\u5b9a\u4e49"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"\u8c03\u7528\u65b9\u5f0f"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"func()"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"macro!()"})})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"\u5b8f\u7684\u4f18\u52bf",children:"\u5b8f\u7684\u4f18\u52bf"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"\u51cf\u5c11\u91cd\u590d\u4ee3\u7801"})," - \u81ea\u52a8\u751f\u6210\u6a21\u677f\u4ee3\u7801"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"\u7f16\u8bd1\u65f6\u8ba1\u7b97"})," - \u5c06\u8ba1\u7b97\u79fb\u5230\u7f16\u8bd1\u671f\uff0c\u51cf\u5c11\u8fd0\u884c\u65f6\u5f00\u9500"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"\u521b\u5efa DSL"})," - \u5b9a\u4e49\u9886\u57df\u7279\u5b9a\u8bed\u8a00"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"\u53ef\u53d8\u53c2\u6570"})," - \u63a5\u53d7\u4efb\u610f\u6570\u91cf\u7684\u53c2\u6570"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"\u4ee3\u7801\u751f\u6210"})," - \u6839\u636e\u8f93\u5165\u81ea\u52a8\u751f\u6210\u4ee3\u7801"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u5b8f\u7684\u52a3\u52bf",children:"\u5b8f\u7684\u52a3\u52bf"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"\u590d\u6742\u6027\u9ad8"})," - \u96be\u4ee5\u7f16\u5199\u548c\u7406\u89e3"]}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"\u7f16\u8bd1\u65f6\u95f4\u957f"})," - \u589e\u52a0\u7f16\u8bd1\u65f6\u95f4"]}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"\u9519\u8bef\u4fe1\u606f\u96be\u61c2"})," - \u9519\u8bef\u63d0\u793a\u4e0d\u591f\u6e05\u6670"]}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"\u8c03\u8bd5\u56f0\u96be"})," - \u96be\u4ee5\u8c03\u8bd5\u5b8f\u5c55\u5f00\u540e\u7684\u4ee3\u7801"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-rust-\u5b8f\u7684\u5206\u7c7b",children:"\ud83c\udfaf Rust \u5b8f\u7684\u5206\u7c7b"}),"\n",(0,l.jsx)(n.p,{children:"Rust \u4e2d\u6709\u4e24\u5927\u7c7b\u5b8f\uff1a"}),"\n",(0,l.jsx)(n.h3,{id:"1\ufe0f\u20e3-\u58f0\u660e\u5b8fdeclarative-macros",children:"1\ufe0f\u20e3 \u58f0\u660e\u5b8f\uff08Declarative Macros\uff09"}),"\n",(0,l.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,l.jsx)(n.code,{children:"macro_rules!"})," \u5b9a\u4e49\uff0c\u901a\u8fc7\u6a21\u5f0f\u5339\u914d\u751f\u6210\u4ee3\u7801\u3002"]}),"\n",(0,l.jsx)(n.h3,{id:"2\ufe0f\u20e3-\u8fc7\u7a0b\u5b8fprocedural-macros",children:"2\ufe0f\u20e3 \u8fc7\u7a0b\u5b8f\uff08Procedural Macros\uff09"}),"\n",(0,l.jsx)(n.p,{children:"\u64cd\u4f5c AST\uff08\u62bd\u8c61\u8bed\u6cd5\u6811\uff09\uff0c\u66f4\u5f3a\u5927\u4f46\u66f4\u590d\u6742\u3002\u5206\u4e3a\u4e09\u79cd\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u6d3e\u751f\u5b8f"}),"\uff08Derive Macros\uff09"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u5c5e\u6027\u5b8f"}),"\uff08Attribute Macros\uff09"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u51fd\u6570\u5f0f\u5b8f"}),"\uff08Function-like Macros\uff09"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-\u58f0\u660e\u5b8fdeclarative-macros",children:"\ud83d\udcdd \u58f0\u660e\u5b8f\uff08Declarative Macros\uff09"}),"\n",(0,l.jsx)(n.h3,{id:"\u57fa\u672c\u8bed\u6cd5",children:"\u57fa\u672c\u8bed\u6cd5"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:"macro_rules! macro_name {\n    (pattern1) => {\n        // \u751f\u6210\u7684\u4ee3\u7801\n    };\n    (pattern2) => {\n        // \u751f\u6210\u7684\u4ee3\u7801\n    };\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u793a\u4f8b-1\u7b80\u5355\u7684\u6253\u5370\u5b8f",children:"\u793a\u4f8b 1\uff1a\u7b80\u5355\u7684\u6253\u5370\u5b8f"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:'macro_rules! say_hello {\n    () => {\n        println!("Hello, World!");\n    };\n}\n\nfn main() {\n    say_hello!(); // \u8f93\u51fa\uff1aHello, World!\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u793a\u4f8b-2\u5e26\u53c2\u6570\u7684\u5b8f",children:"\u793a\u4f8b 2\uff1a\u5e26\u53c2\u6570\u7684\u5b8f"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:'macro_rules! greet {\n    ($name:expr) => {\n        println!("Hello, {}!", $name);\n    };\n}\n\nfn main() {\n    greet!("Alice"); // \u8f93\u51fa\uff1aHello, Alice!\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u793a\u4f8b-3\u591a\u4e2a\u6a21\u5f0f",children:"\u793a\u4f8b 3\uff1a\u591a\u4e2a\u6a21\u5f0f"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:"macro_rules! calculate {\n    // \u52a0\u6cd5\n    ($a:expr + $b:expr) => {\n        $a + $b\n    };\n    // \u4e58\u6cd5\n    ($a:expr * $b:expr) => {\n        $a * $b\n    };\n}\n\nfn main() {\n    let sum = calculate!(5 + 3);      // 8\n    let product = calculate!(5 * 3);  // 15\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u793a\u4f8b-4\u53ef\u53d8\u53c2\u6570\u91cd\u590d\u6a21\u5f0f",children:"\u793a\u4f8b 4\uff1a\u53ef\u53d8\u53c2\u6570\uff08\u91cd\u590d\u6a21\u5f0f\uff09"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:'macro_rules! vec_of_strings {\n    ($($x:expr),*) => {\n        {\n            let mut temp_vec = Vec::new();\n            $(\n                temp_vec.push($x.to_string());\n            )*\n            temp_vec\n        }\n    };\n}\n\nfn main() {\n    let v = vec_of_strings!("hello", "world", "rust");\n    println!("{:?}", v); // ["hello", "world", "rust"]\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u6a21\u5f0f\u5339\u914d\u7c7b\u578b",children:"\u6a21\u5f0f\u5339\u914d\u7c7b\u578b"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,l.jsx)(n.th,{children:"\u8bf4\u660e"}),(0,l.jsx)(n.th,{children:"\u793a\u4f8b"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"expr"})}),(0,l.jsx)(n.td,{children:"\u8868\u8fbe\u5f0f"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"$x:expr"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"ident"})}),(0,l.jsx)(n.td,{children:"\u6807\u8bc6\u7b26"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"$name:ident"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"ty"})}),(0,l.jsx)(n.td,{children:"\u7c7b\u578b"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"$t:ty"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"pat"})}),(0,l.jsx)(n.td,{children:"\u6a21\u5f0f"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"$p:pat"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"stmt"})}),(0,l.jsx)(n.td,{children:"\u8bed\u53e5"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"$s:stmt"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"block"})}),(0,l.jsx)(n.td,{children:"\u4ee3\u7801\u5757"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"$b:block"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"item"})}),(0,l.jsx)(n.td,{children:"\u9879\uff08\u51fd\u6570\u3001\u7ed3\u6784\u4f53\u7b49\uff09"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"$i:item"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"tt"})}),(0,l.jsx)(n.td,{children:"Token \u6811"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"$t:tt"})})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"\u91cd\u590d\u6a21\u5f0f\u8bed\u6cd5",children:"\u91cd\u590d\u6a21\u5f0f\u8bed\u6cd5"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u8bed\u6cd5"}),(0,l.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"$(...)*"})}),(0,l.jsx)(n.td,{children:"\u96f6\u6b21\u6216\u591a\u6b21"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"$(...)+"})}),(0,l.jsx)(n.td,{children:"\u4e00\u6b21\u6216\u591a\u6b21"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"$(...)?"})}),(0,l.jsx)(n.td,{children:"\u96f6\u6b21\u6216\u4e00\u6b21"})]})]})]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-\u8fc7\u7a0b\u5b8fprocedural-macros",children:"\ud83d\udd27 \u8fc7\u7a0b\u5b8f\uff08Procedural Macros\uff09"}),"\n",(0,l.jsxs)(n.p,{children:["\u8fc7\u7a0b\u5b8f\u5fc5\u987b\u5b9a\u4e49\u5728\u5355\u72ec\u7684 crate \u4e2d\uff0c\u5e76\u5728 ",(0,l.jsx)(n.code,{children:"Cargo.toml"})," \u4e2d\u58f0\u660e\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'[lib]\nproc-macro = true\n\n[dependencies]\nsyn = "2.0"\nquote = "1.0"\nproc-macro2 = "1.0"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"1\ufe0f\u20e3-\u6d3e\u751f\u5b8fderive-macros",children:"1\ufe0f\u20e3 \u6d3e\u751f\u5b8f\uff08Derive Macros\uff09"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u7528\u9014"}),"\uff1a\u4e3a\u7c7b\u578b\u81ea\u52a8\u5b9e\u73b0 trait"]}),"\n",(0,l.jsx)(n.h4,{id:"\u793a\u4f8b\u81ea\u5b9a\u4e49-debug",children:"\u793a\u4f8b\uff1a\u81ea\u5b9a\u4e49 Debug"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:'// my_macro/src/lib.rs\nuse proc_macro::TokenStream;\nuse quote::quote;\nuse syn::{parse_macro_input, DeriveInput};\n\n#[proc_macro_derive(MyDebug)]\npub fn my_debug_derive(input: TokenStream) -> TokenStream {\n    let input = parse_macro_input!(input as DeriveInput);\n    let name = input.ident;\n\n    let expanded = quote! {\n        impl std::fmt::Debug for #name {\n            fn fmt(&self, f: &mut std::fmt::Formatter) -> std::fmt::Result {\n                write!(f, "MyDebug: {}", stringify!(#name))\n            }\n        }\n    };\n\n    TokenStream::from(expanded)\n}\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u4f7f\u7528"}),"\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:'#[derive(MyDebug)]\nstruct Person {\n    name: String,\n    age: u32,\n}\n\nfn main() {\n    let p = Person {\n        name: "Alice".to_string(),\n        age: 30,\n    };\n    println!("{:?}", p); // MyDebug: Person\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"2\ufe0f\u20e3-\u5c5e\u6027\u5b8fattribute-macros",children:"2\ufe0f\u20e3 \u5c5e\u6027\u5b8f\uff08Attribute Macros\uff09"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u7528\u9014"}),"\uff1a\u4e3a\u51fd\u6570\u3001\u7ed3\u6784\u4f53\u7b49\u6dfb\u52a0\u81ea\u5b9a\u4e49\u5c5e\u6027"]}),"\n",(0,l.jsx)(n.h4,{id:"\u793a\u4f8b\u8ba1\u65f6\u5668",children:"\u793a\u4f8b\uff1a\u8ba1\u65f6\u5668"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:'use proc_macro::TokenStream;\nuse quote::quote;\nuse syn::{parse_macro_input, ItemFn};\n\n#[proc_macro_attribute]\npub fn timing(_attr: TokenStream, item: TokenStream) -> TokenStream {\n    let input = parse_macro_input!(item as ItemFn);\n    let fn_name = &input.sig.ident;\n    let fn_block = &input.block;\n    let fn_sig = &input.sig;\n\n    let expanded = quote! {\n        #fn_sig {\n            let start = std::time::Instant::now();\n            let result = (|| #fn_block)();\n            let duration = start.elapsed();\n            println!("{} took {:?}", stringify!(#fn_name), duration);\n            result\n        }\n    };\n\n    TokenStream::from(expanded)\n}\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u4f7f\u7528"}),"\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:"#[timing]\nfn slow_function() {\n    std::thread::sleep(std::time::Duration::from_secs(1));\n}\n\nfn main() {\n    slow_function(); // slow_function took 1.00s\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"3\ufe0f\u20e3-\u51fd\u6570\u5f0f\u5b8ffunction-like-macros",children:"3\ufe0f\u20e3 \u51fd\u6570\u5f0f\u5b8f\uff08Function-like Macros\uff09"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u7528\u9014"}),"\uff1a\u7c7b\u4f3c\u51fd\u6570\u8c03\u7528\u7684\u5b8f"]}),"\n",(0,l.jsx)(n.h4,{id:"\u793a\u4f8bsql-\u67e5\u8be2",children:"\u793a\u4f8b\uff1aSQL \u67e5\u8be2"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:'use proc_macro::TokenStream;\n\n#[proc_macro]\npub fn sql(input: TokenStream) -> TokenStream {\n    let sql_query = input.to_string();\n    println!("SQL Query: {}", sql_query);\n    \n    // \u8fd9\u91cc\u53ef\u4ee5\u8fdb\u884c SQL \u9a8c\u8bc1\n    \n    format!("String::from({})", sql_query)\n        .parse()\n        .unwrap()\n}\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u4f7f\u7528"}),"\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:'fn main() {\n    let query = sql!("SELECT * FROM users WHERE id = 1");\n    println!("{}", query);\n}\n'})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-\u4f7f\u7528\u5b8f\u7684\u6700\u4f73\u65f6\u673a",children:"\ud83d\udca1 \u4f7f\u7528\u5b8f\u7684\u6700\u4f73\u65f6\u673a"}),"\n",(0,l.jsx)(n.h3,{id:"-\u5e94\u8be5\u4f7f\u7528\u5b8f\u7684\u573a\u666f",children:"\u2705 \u5e94\u8be5\u4f7f\u7528\u5b8f\u7684\u573a\u666f"}),"\n",(0,l.jsx)(n.h4,{id:"1-\u51cf\u5c11\u91cd\u590d\u4ee3\u7801",children:"1. \u51cf\u5c11\u91cd\u590d\u4ee3\u7801"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:"macro_rules! impl_add {\n    ($($t:ty),*) => {\n        $(\n            impl Add for $t {\n                type Output = $t;\n                fn add(self, other: $t) -> $t {\n                    self + other\n                }\n            }\n        )*\n    };\n}\n\nimpl_add!(i8, i16, i32, i64);\n"})}),"\n",(0,l.jsx)(n.h4,{id:"2-\u7f16\u8bd1\u65f6\u9a8c\u8bc1",children:"2. \u7f16\u8bd1\u65f6\u9a8c\u8bc1"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:'// \u5728\u7f16\u8bd1\u65f6\u9a8c\u8bc1 SQL \u67e5\u8be2\nlet users = sqlx::query!("SELECT * FROM users WHERE id = ?", user_id)\n    .fetch_all(&pool)\n    .await?;\n'})}),"\n",(0,l.jsx)(n.h4,{id:"3-\u521b\u5efa-dsl",children:"3. \u521b\u5efa DSL"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:'// Rocket \u6846\u67b6\u7684\u8def\u7531\u5b9a\u4e49\n#[get("/hello/<name>")]\nfn hello(name: &str) -> String {\n    format!("Hello, {}!", name)\n}\n'})}),"\n",(0,l.jsx)(n.h4,{id:"4-\u81ea\u52a8\u5b9e\u73b0-trait",children:"4. \u81ea\u52a8\u5b9e\u73b0 trait"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:"#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\nstruct User {\n    name: String,\n    age: u32,\n}\n"})}),"\n",(0,l.jsx)(n.h4,{id:"5-\u53ef\u53d8\u53c2\u6570",children:"5. \u53ef\u53d8\u53c2\u6570"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:'println!("Hello, {}! You are {} years old.", name, age);\nvec![1, 2, 3, 4, 5];\n'})}),"\n",(0,l.jsx)(n.h3,{id:"-\u4e0d\u5e94\u8be5\u4f7f\u7528\u5b8f\u7684\u573a\u666f",children:"\u274c \u4e0d\u5e94\u8be5\u4f7f\u7528\u5b8f\u7684\u573a\u666f"}),"\n",(0,l.jsx)(n.h4,{id:"1-\u7b80\u5355\u7684\u4ee3\u7801\u590d\u7528",children:"1. \u7b80\u5355\u7684\u4ee3\u7801\u590d\u7528"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:"// \u274c \u4e0d\u8981\u7528\u5b8f\nmacro_rules! add {\n    ($a:expr, $b:expr) => {\n        $a + $b\n    };\n}\n\n// \u2705 \u4f7f\u7528\u51fd\u6570\nfn add(a: i32, b: i32) -> i32 {\n    a + b\n}\n"})}),"\n",(0,l.jsx)(n.h4,{id:"2-\u7c7b\u578b\u8f6c\u6362",children:"2. \u7c7b\u578b\u8f6c\u6362"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:"// \u274c \u4e0d\u8981\u7528\u5b8f\nmacro_rules! to_string {\n    ($x:expr) => {\n        $x.to_string()\n    };\n}\n\n// \u2705 \u76f4\u63a5\u8c03\u7528\u65b9\u6cd5\nlet s = value.to_string();\n"})}),"\n",(0,l.jsx)(n.h4,{id:"3-\u7b80\u5355\u7684\u6761\u4ef6\u903b\u8f91",children:"3. \u7b80\u5355\u7684\u6761\u4ef6\u903b\u8f91"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:"// \u274c \u4e0d\u8981\u7528\u5b8f\nmacro_rules! max {\n    ($a:expr, $b:expr) => {\n        if $a > $b { $a } else { $b }\n    };\n}\n\n// \u2705 \u4f7f\u7528\u51fd\u6570\nfn max<T: Ord>(a: T, b: T) -> T {\n    if a > b { a } else { b }\n}\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-\u5b9e\u6218\u793a\u4f8b",children:"\ud83c\udfa8 \u5b9e\u6218\u793a\u4f8b"}),"\n",(0,l.jsx)(n.h3,{id:"\u793a\u4f8b-1json-\u6784\u5efa\u5668",children:"\u793a\u4f8b 1\uff1aJSON \u6784\u5efa\u5668"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:'macro_rules! json {\n    (null) => {\n        serde_json::Value::Null\n    };\n    ([$($elem:tt),*]) => {\n        serde_json::Value::Array(vec![$(json!($elem)),*])\n    };\n    ({$($key:tt : $value:tt),*}) => {\n        serde_json::Value::Object({\n            let mut map = serde_json::Map::new();\n            $(\n                map.insert($key.to_string(), json!($value));\n            )*\n            map\n        })\n    };\n    ($other:tt) => {\n        serde_json::to_value($other).unwrap()\n    };\n}\n\nfn main() {\n    let data = json!({\n        "name": "Alice",\n        "age": 30,\n        "hobbies": ["reading", "coding"]\n    });\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u793a\u4f8b-2\u5355\u5143\u6d4b\u8bd5\u8f85\u52a9",children:"\u793a\u4f8b 2\uff1a\u5355\u5143\u6d4b\u8bd5\u8f85\u52a9"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:"macro_rules! test_case {\n    ($name:ident: $input:expr => $expected:expr) => {\n        #[test]\n        fn $name() {\n            assert_eq!(my_function($input), $expected);\n        }\n    };\n}\n\ntest_case!(test_zero: 0 => 0);\ntest_case!(test_one: 1 => 1);\ntest_case!(test_two: 2 => 4);\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u793a\u4f8b-3\u9519\u8bef\u5904\u7406",children:"\u793a\u4f8b 3\uff1a\u9519\u8bef\u5904\u7406"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:"macro_rules! try_opt {\n    ($expr:expr) => {\n        match $expr {\n            Some(val) => val,\n            None => return None,\n        }\n    };\n}\n\nfn parse_number(s: &str) -> Option<i32> {\n    let trimmed = try_opt!(s.trim().parse().ok());\n    Some(trimmed * 2)\n}\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-\u5e38\u89c1\u5b8f\u793a\u4f8b",children:"\ud83d\udcca \u5e38\u89c1\u5b8f\u793a\u4f8b"}),"\n",(0,l.jsx)(n.h3,{id:"\u6807\u51c6\u5e93\u5b8f",children:"\u6807\u51c6\u5e93\u5b8f"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u5b8f"}),(0,l.jsx)(n.th,{children:"\u7528\u9014"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"println!"})}),(0,l.jsx)(n.td,{children:"\u683c\u5f0f\u5316\u8f93\u51fa"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"vec!"})}),(0,l.jsx)(n.td,{children:"\u521b\u5efa Vec"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"format!"})}),(0,l.jsx)(n.td,{children:"\u683c\u5f0f\u5316\u5b57\u7b26\u4e32"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"panic!"})}),(0,l.jsx)(n.td,{children:"\u89e6\u53d1 panic"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"assert!"})}),(0,l.jsx)(n.td,{children:"\u65ad\u8a00"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"dbg!"})}),(0,l.jsx)(n.td,{children:"\u8c03\u8bd5\u8f93\u51fa"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"todo!"})}),(0,l.jsx)(n.td,{children:"\u6807\u8bb0\u672a\u5b8c\u6210\u4ee3\u7801"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"unimplemented!"})}),(0,l.jsx)(n.td,{children:"\u6807\u8bb0\u672a\u5b9e\u73b0\u4ee3\u7801"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"\u7b2c\u4e09\u65b9\u5e93\u5b8f",children:"\u7b2c\u4e09\u65b9\u5e93\u5b8f"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u5e93"}),(0,l.jsx)(n.th,{children:"\u5b8f"}),(0,l.jsx)(n.th,{children:"\u7528\u9014"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Serde"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"#[derive(Serialize, Deserialize)]"})}),(0,l.jsx)(n.td,{children:"\u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Rocket"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:'#[get("/path")]'})}),(0,l.jsx)(n.td,{children:"\u8def\u7531\u5b9a\u4e49"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"SQLx"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"query!"})}),(0,l.jsx)(n.td,{children:"SQL \u67e5\u8be2"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Tokio"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"#[tokio::main]"})}),(0,l.jsx)(n.td,{children:"\u5f02\u6b65\u8fd0\u884c\u65f6"})]})]})]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"\ufe0f-\u6700\u4f73\u5b9e\u8df5",children:"\ud83d\udee0\ufe0f \u6700\u4f73\u5b9e\u8df5"}),"\n",(0,l.jsx)(n.h3,{id:"1-\u4fdd\u6301\u7b80\u5355",children:"1. \u4fdd\u6301\u7b80\u5355"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:'// \u2705 \u597d\uff1a\u7b80\u5355\u6e05\u6670\nmacro_rules! log_error {\n    ($msg:expr) => {\n        eprintln!("[ERROR] {}", $msg);\n    };\n}\n\n// \u274c \u5dee\uff1a\u8fc7\u4e8e\u590d\u6742\nmacro_rules! complex_macro {\n    // \u592a\u591a\u6a21\u5f0f\u5339\u914d...\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"2-\u63d0\u4f9b\u6e05\u6670\u7684\u6587\u6863",children:"2. \u63d0\u4f9b\u6e05\u6670\u7684\u6587\u6863"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:"/// \u521b\u5efa\u4e00\u4e2a\u5305\u542b\u6307\u5b9a\u5143\u7d20\u7684 Vec\n///\n/// # \u793a\u4f8b\n///\n/// ```\n/// let v = my_vec![1, 2, 3];\n/// assert_eq!(v, vec![1, 2, 3]);\n/// ```\nmacro_rules! my_vec {\n    ($($x:expr),*) => {\n        vec![$($x),*]\n    };\n}\n"})}),"\n",(0,l.jsxs)(n.h3,{id:"3-\u4f7f\u7528-macro_export",children:["3. \u4f7f\u7528 ",(0,l.jsx)(n.code,{children:"#[macro_export]"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:"#[macro_export]\nmacro_rules! my_macro {\n    () => {\n        // ...\n    };\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"4-\u5904\u7406\u9519\u8bef",children:"4. \u5904\u7406\u9519\u8bef"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:'macro_rules! safe_divide {\n    ($a:expr, $b:expr) => {\n        if $b == 0 {\n            compile_error!("Division by zero!");\n        } else {\n            $a / $b\n        }\n    };\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"5-\u6d4b\u8bd5\u5b8f",children:"5. \u6d4b\u8bd5\u5b8f"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:"#[cfg(test)]\nmod tests {\n    #[test]\n    fn test_my_macro() {\n        let result = my_macro!(1, 2, 3);\n        assert_eq!(result, vec![1, 2, 3]);\n    }\n}\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-\u5e38\u89c1\u9677\u9631",children:"\ud83d\udc1b \u5e38\u89c1\u9677\u9631"}),"\n",(0,l.jsx)(n.h3,{id:"1-\u536b\u751f\u6027\u95ee\u9898",children:"1. \u536b\u751f\u6027\u95ee\u9898"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:"// \u274c \u53ef\u80fd\u5bfc\u81f4\u547d\u540d\u51b2\u7a81\nmacro_rules! bad_macro {\n    () => {\n        let x = 42;\n    };\n}\n\n// \u2705 \u4f7f\u7528\u552f\u4e00\u540d\u79f0\nmacro_rules! good_macro {\n    () => {\n        let _macro_temp_x = 42;\n    };\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"2-\u91cd\u590d\u5c55\u5f00",children:"2. \u91cd\u590d\u5c55\u5f00"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:"// \u274c \u8868\u8fbe\u5f0f\u4f1a\u88ab\u8ba1\u7b97\u591a\u6b21\nmacro_rules! bad_max {\n    ($a:expr, $b:expr) => {\n        if $a > $b { $a } else { $b }\n    };\n}\n\n// \u5982\u679c\u8c03\u7528 bad_max!(expensive_call(), other_call())\n// expensive_call() \u53ef\u80fd\u88ab\u8c03\u7528\u4e24\u6b21\uff01\n\n// \u2705 \u4f7f\u7528\u4e34\u65f6\u53d8\u91cf\nmacro_rules! good_max {\n    ($a:expr, $b:expr) => {{\n        let a = $a;\n        let b = $b;\n        if a > b { a } else { b }\n    }};\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"3-\u7c7b\u578b\u63a8\u65ad\u95ee\u9898",children:"3. \u7c7b\u578b\u63a8\u65ad\u95ee\u9898"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",children:"// \u274c \u53ef\u80fd\u5bfc\u81f4\u7c7b\u578b\u63a8\u65ad\u5931\u8d25\nmacro_rules! create_vec {\n    () => {\n        Vec::new()\n    };\n}\n\n// \u2705 \u660e\u786e\u7c7b\u578b\nmacro_rules! create_vec {\n    ($t:ty) => {\n        Vec::<$t>::new()\n    };\n}\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-\u603b\u7ed3",children:"\ud83d\udcda \u603b\u7ed3"}),"\n",(0,l.jsx)(n.h3,{id:"\u6838\u5fc3\u8981\u70b9",children:"\u6838\u5fc3\u8981\u70b9"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u5b8f\u662f\u5143\u7f16\u7a0b\u5de5\u5177"})," - \u5728\u7f16\u8bd1\u65f6\u751f\u6210\u4ee3\u7801"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u4e24\u5927\u7c7b\u5b8f"})," - \u58f0\u660e\u5b8f\u548c\u8fc7\u7a0b\u5b8f"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u4f7f\u7528\u65f6\u673a"})," - \u51cf\u5c11\u91cd\u590d\u3001\u7f16\u8bd1\u65f6\u9a8c\u8bc1\u3001\u521b\u5efa DSL"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u4f18\u5148\u4f7f\u7528\u51fd\u6570"})," - \u9664\u975e\u5b8f\u6709\u660e\u663e\u4f18\u52bf"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u9009\u62e9\u6307\u5357",children:"\u9009\u62e9\u6307\u5357"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u9700\u6c42"}),(0,l.jsx)(n.th,{children:"\u63a8\u8350\u65b9\u5f0f"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u7b80\u5355\u4ee3\u7801\u590d\u7528"}),(0,l.jsx)(n.td,{children:"\u51fd\u6570"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u53ef\u53d8\u53c2\u6570"}),(0,l.jsx)(n.td,{children:"\u5b8f"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u7f16\u8bd1\u65f6\u8ba1\u7b97"}),(0,l.jsx)(n.td,{children:"\u5b8f"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u7c7b\u578b\u8f6c\u6362"}),(0,l.jsx)(n.td,{children:"\u51fd\u6570"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u81ea\u52a8\u5b9e\u73b0 trait"}),(0,l.jsx)(n.td,{children:"\u6d3e\u751f\u5b8f"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6dfb\u52a0\u5143\u6570\u636e"}),(0,l.jsx)(n.td,{children:"\u5c5e\u6027\u5b8f"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"DSL"}),(0,l.jsx)(n.td,{children:"\u5b8f"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"\u8bb0\u5fc6\u53e3\u8bc0",children:"\u8bb0\u5fc6\u53e3\u8bc0"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u5b8f"})," = ",(0,l.jsx)(n.strong,{children:"\u5143\u7f16\u7a0b"}),"\uff08\u751f\u6210\u4ee3\u7801\u7684\u4ee3\u7801\uff09"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u58f0\u660e\u5b8f"})," = ",(0,l.jsx)(n.strong,{children:"\u6a21\u5f0f\u5339\u914d"}),"\uff08macro_rules!\uff09"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u8fc7\u7a0b\u5b8f"})," = ",(0,l.jsx)(n.strong,{children:"\u64cd\u4f5c AST"}),"\uff08\u66f4\u5f3a\u5927\uff09"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u4f7f\u7528\u65f6\u673a"})," = ",(0,l.jsx)(n.strong,{children:"\u65e0\u6cd5\u7528\u51fd\u6570\u5b9e\u73b0\u65f6"})]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u638c\u63e1\u5b8f\u662f\u6210\u4e3a Rust \u9ad8\u624b\u7684\u5173\u952e\uff01\ud83e\udd80\u2728"})]})}function x(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}}}]);