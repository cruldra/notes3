"use strict";(self.webpackChunknotes_3=self.webpackChunknotes_3||[]).push([[24638],{54213:(e,n,r)=>{r.d(n,{R:()=>d,x:()=>l});var s=r(36672);const c={},i=s.createContext(c);function d(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:d(e.components),s.createElement(i.Provider,{value:n},e.children)}},98285:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"Tools/Unity/Api/SceneManager","title":"SceneManager","description":"UnityEngine.SceneManagement.SceneManager \u662f Unity \u4e2d\u7528\u4e8e\u8fd0\u884c\u65f6\u573a\u666f\u7ba1\u7406\u7684\u6838\u5fc3\u9759\u6001\u7c7b\u3002","source":"@site/docs/Tools/Unity/Api/SceneManager.mdx","sourceDirName":"Tools/Unity/Api","slug":"/Tools/Unity/Api/SceneManager","permalink":"/notes3/docs/Tools/Unity/Api/SceneManager","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Tools/Unity/Api/SceneManager.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"tools","previous":{"title":"PlayerPrefs","permalink":"/notes3/docs/Tools/Unity/Api/PlayerPrefs"},"next":{"title":"StreamingAssets\u76ee\u5f55","permalink":"/notes3/docs/Tools/Unity/StreamingAssets\u76ee\u5f55"}}');var c=r(23420),i=r(54213);const d={},l=void 0,o={},a=[{value:"1. \u52a0\u8f7d\u573a\u666f (Loading Scenes)",id:"1-\u52a0\u8f7d\u573a\u666f-loading-scenes",level:3},{value:"\u540c\u6b65\u52a0\u8f7d",id:"\u540c\u6b65\u52a0\u8f7d",level:4},{value:"\u52a0\u8f7d\u6a21\u5f0f (LoadSceneMode)",id:"\u52a0\u8f7d\u6a21\u5f0f-loadscenemode",level:4},{value:"2. \u5f02\u6b65\u52a0\u8f7d (Asynchronous Loading)",id:"2-\u5f02\u6b65\u52a0\u8f7d-asynchronous-loading",level:3},{value:"3. \u83b7\u53d6\u573a\u666f\u4fe1\u606f",id:"3-\u83b7\u53d6\u573a\u666f\u4fe1\u606f",level:3},{value:"4. \u573a\u666f\u4e8b\u4ef6 (Events)",id:"4-\u573a\u666f\u4e8b\u4ef6-events",level:3},{value:"5. \u5e38\u89c1\u9677\u9631\uff1aBuild Settings",id:"5-\u5e38\u89c1\u9677\u9631build-settings",level:3},{value:"\u7efc\u5408\u4ee3\u7801\u793a\u4f8b\uff1aLoadingManager",id:"\u7efc\u5408\u4ee3\u7801\u793a\u4f8bloadingmanager",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:3}];function t(e){const n={code:"code",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"UnityEngine.SceneManagement.SceneManager"})," \u662f Unity \u4e2d\u7528\u4e8e",(0,c.jsx)(n.strong,{children:"\u8fd0\u884c\u65f6\u573a\u666f\u7ba1\u7406"}),"\u7684\u6838\u5fc3\u9759\u6001\u7c7b\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["\u5728 Unity 5.3 \u4e4b\u524d\uff0c\u573a\u666f\u52a0\u8f7d\u4e3b\u8981\u4f9d\u8d56 ",(0,c.jsx)(n.code,{children:"Application.LoadLevel"}),"\uff0c\u4f46\u73b0\u5728\u8fd9\u4e9b\u65b9\u6cd5\u5df2\u88ab\u5e9f\u5f03\uff0c",(0,c.jsxs)(n.strong,{children:[(0,c.jsx)(n.code,{children:"SceneManager"})," \u662f\u76ee\u524d\u52a0\u8f7d\u3001\u5378\u8f7d\u548c\u7ba1\u7406\u573a\u666f\u7684\u6807\u51c6\u65b9\u5f0f"]}),"\u3002"]}),"\n",(0,c.jsx)(n.p,{children:"\u8981\u60f3\u4f7f\u7528\u5b83\uff0c\u4f60\u5fc5\u987b\u5728\u811a\u672c\u5934\u90e8\u5f15\u5165\u547d\u540d\u7a7a\u95f4\uff1a"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-csharp",children:"using UnityEngine.SceneManagement;\n"})}),"\n",(0,c.jsxs)(n.p,{children:["\u4ee5\u4e0b\u662f ",(0,c.jsx)(n.code,{children:"SceneManager"})," \u7684\u6838\u5fc3\u529f\u80fd\u8be6\u89e3\uff1a"]}),"\n",(0,c.jsx)(n.h3,{id:"1-\u52a0\u8f7d\u573a\u666f-loading-scenes",children:"1. \u52a0\u8f7d\u573a\u666f (Loading Scenes)"}),"\n",(0,c.jsxs)(n.p,{children:["\u8fd9\u662f\u6700\u5e38\u7528\u7684\u529f\u80fd\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u573a\u666f\u7684",(0,c.jsx)(n.strong,{children:"\u540d\u79f0 (String)"})," \u6216\u5728 Build Settings \u4e2d\u7684",(0,c.jsx)(n.strong,{children:"\u7d22\u5f15 (Int)"})," \u6765\u52a0\u8f7d\u3002"]}),"\n",(0,c.jsx)(n.h4,{id:"\u540c\u6b65\u52a0\u8f7d",children:"\u540c\u6b65\u52a0\u8f7d"}),"\n",(0,c.jsx)(n.p,{children:"\u6b64\u65f6\u6e38\u620f\u753b\u9762\u4f1a\u6682\u505c\uff0c\u76f4\u5230\u65b0\u573a\u666f\u52a0\u8f7d\u5b8c\u6210\uff08\u9002\u7528\u4e8e\u5c0f\u578b\u573a\u666f\uff09\u3002"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-csharp",children:'// \u901a\u8fc7\u540d\u79f0\u52a0\u8f7d\r\nSceneManager.LoadScene("GameLevel1");\r\n\r\n// \u901a\u8fc7\u7d22\u5f15\u52a0\u8f7d (\u9700\u5728 Build Settings \u4e2d\u67e5\u770b)\r\nSceneManager.LoadScene(1);\n'})}),"\n",(0,c.jsx)(n.h4,{id:"\u52a0\u8f7d\u6a21\u5f0f-loadscenemode",children:"\u52a0\u8f7d\u6a21\u5f0f (LoadSceneMode)"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"LoadScene"})," \u7684\u91cd\u8f7d\u7248\u672c\u5141\u8bb8\u4f60\u6307\u5b9a\u52a0\u8f7d\u6a21\u5f0f\uff1a"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:(0,c.jsx)(n.code,{children:"LoadSceneMode.Single"})})," (\u9ed8\u8ba4)\uff1a\u5173\u95ed\u5f53\u524d\u6240\u6709\u573a\u666f\uff0c\u52a0\u8f7d\u65b0\u573a\u666f\u3002\u7528\u4e8e\u5207\u6362\u5173\u5361\u3002"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:(0,c.jsx)(n.code,{children:"LoadSceneMode.Additive"})}),"\uff1a\u4fdd\u7559\u5f53\u524d\u573a\u666f\uff0c\u5c06\u65b0\u573a\u666f\u201c\u53e0\u52a0\u201d\u8fdb\u53bb\u3002\u5e38\u7528\u4e8e\u65e0\u7f1d\u5927\u5730\u56fe\u52a0\u8f7d\u6216\u52a0\u8f7d\u72ec\u7acb\u7684 UI \u573a\u666f\u3002"]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-csharp",children:'// \u53e0\u52a0\u52a0\u8f7d HUD \u573a\u666f\uff0c\u5f53\u524d\u6e38\u620f\u573a\u666f\u4e0d\u4f1a\u88ab\u9500\u6bc1\r\nSceneManager.LoadScene("HUD", LoadSceneMode.Additive);\n'})}),"\n",(0,c.jsx)(n.h3,{id:"2-\u5f02\u6b65\u52a0\u8f7d-asynchronous-loading",children:"2. \u5f02\u6b65\u52a0\u8f7d (Asynchronous Loading)"}),"\n",(0,c.jsxs)(n.p,{children:["\u5bf9\u4e8e\u5927\u578b\u6e38\u620f\uff0c\u540c\u6b65\u52a0\u8f7d\u4f1a\u5bfc\u81f4\u753b\u9762\u5361\u6b7b\u3002",(0,c.jsx)(n.code,{children:"SceneManager.LoadSceneAsync"})," \u5141\u8bb8\u5728\u540e\u53f0\u52a0\u8f7d\u573a\u666f\uff0c\u540c\u65f6\u6e38\u620f\u7ee7\u7eed\u8fd0\u884c\uff08\u5e38\u7528\u4e8e\u5236\u4f5c\u5e26\u6709\u8fdb\u5ea6\u6761\u7684 Loading \u754c\u9762\uff09\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["\u5b83\u8fd4\u56de\u4e00\u4e2a ",(0,c.jsx)(n.code,{children:"AsyncOperation"})," \u5bf9\u8c61\uff0c\u7528\u4e8e\u76d1\u63a7\u8fdb\u5ea6\u3002"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u5173\u952e\u5c5e\u6027\uff1a"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"AsyncOperation.progress"}),"\uff1a\u52a0\u8f7d\u8fdb\u5ea6\uff0c\u8303\u56f4\u662f $0.0 \\to 1.0$\u3002","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"\u6ce8\u610f"}),"\uff1a\u5f53 ",(0,c.jsx)(n.code,{children:"allowSceneActivation"})," \u4e3a ",(0,c.jsx)(n.code,{children:"true"})," \u65f6\uff0c\u8fdb\u5ea6\u8fbe\u5230 $0.9$ \u5c31\u4f1a\u81ea\u52a8\u5207\u6362\u573a\u666f\u3002"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"AsyncOperation.allowSceneActivation"}),"\uff1a\u8bbe\u4e3a ",(0,c.jsx)(n.code,{children:"false"})," \u53ef\u4ee5\u8ba9\u573a\u666f\u52a0\u8f7d\u5b8c\u540e\u4e0d\u7acb\u5373\u663e\u793a\uff0c\u7b49\u5f85\u73a9\u5bb6\u6309\u952e\u540e\u518d\u8fdb\u5165\u3002"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"3-\u83b7\u53d6\u573a\u666f\u4fe1\u606f",children:"3. \u83b7\u53d6\u573a\u666f\u4fe1\u606f"}),"\n",(0,c.jsxs)(n.p,{children:["\u4f60\u53ef\u4ee5\u83b7\u53d6\u5f53\u524d\u6d3b\u52a8\u7684\u573a\u666f\u6216\u901a\u8fc7\u540d\u79f0/\u7d22\u5f15\u83b7\u53d6\u7279\u5b9a\u573a\u666f\u7684 ",(0,c.jsx)(n.code,{children:"Scene"})," \u7ed3\u6784\u4f53\u3002"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:(0,c.jsx)(n.code,{children:"SceneManager.GetActiveScene()"})}),": \u83b7\u53d6\u5f53\u524d\u4e3b\u573a\u666f\u3002"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:(0,c.jsx)(n.code,{children:"SceneManager.sceneCount"})}),": \u83b7\u53d6\u5f53\u524d\u52a0\u8f7d\u4e86\u51e0\u4e2a\u573a\u666f\uff08Additive \u6a21\u5f0f\u4e0b\u53ef\u80fd\u5927\u4e8e 1\uff09\u3002"]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-csharp",children:'Scene currentScene = SceneManager.GetActiveScene();\r\nDebug.Log("Current Scene Name: " + currentScene.name);\r\nDebug.Log("Current Scene Index: " + currentScene.buildIndex);\n'})}),"\n",(0,c.jsx)(n.h3,{id:"4-\u573a\u666f\u4e8b\u4ef6-events",children:"4. \u573a\u666f\u4e8b\u4ef6 (Events)"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"SceneManager"})," \u63d0\u4f9b\u4e86\u59d4\u6258\uff08Delegate\uff09\u4e8b\u4ef6\uff0c\u5141\u8bb8\u4f60\u5728\u573a\u666f\u52a0\u8f7d\u6216\u5378\u8f7d\u65f6\u89e6\u53d1\u7279\u5b9a\u903b\u8f91\u3002"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:(0,c.jsx)(n.code,{children:"sceneLoaded"})}),": \u5f53\u4e00\u4e2a\u573a\u666f\u52a0\u8f7d\u5b8c\u6210\u65f6\u89e6\u53d1\u3002"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:(0,c.jsx)(n.code,{children:"sceneUnloaded"})}),": \u5f53\u4e00\u4e2a\u573a\u666f\u88ab\u5378\u8f7d\u65f6\u89e6\u53d1\u3002"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:(0,c.jsx)(n.code,{children:"activeSceneChanged"})}),": \u5f53\u6d3b\u52a8\u573a\u666f\u53d1\u751f\u53d8\u5316\u65f6\u89e6\u53d1\u3002"]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-csharp",children:'void OnEnable()\r\n{\r\n    // \u8ba2\u9605\u4e8b\u4ef6\r\n    SceneManager.sceneLoaded += OnSceneLoaded;\r\n}\r\n\r\nvoid OnDisable()\r\n{\r\n    // \u53d6\u6d88\u8ba2\u9605 (\u9632\u6b62\u5185\u5b58\u6cc4\u6f0f)\r\n    SceneManager.sceneLoaded -= OnSceneLoaded;\r\n}\r\n\r\nvoid OnSceneLoaded(Scene scene, LoadSceneMode mode)\r\n{\r\n    Debug.Log($"\u573a\u666f {scene.name} \u5df2\u52a0\u8f7d\uff01");\r\n}\n'})}),"\n",(0,c.jsx)(n.h3,{id:"5-\u5e38\u89c1\u9677\u9631build-settings",children:"5. \u5e38\u89c1\u9677\u9631\uff1aBuild Settings"}),"\n",(0,c.jsxs)(n.p,{children:["\u65e0\u8bba\u4f60\u60f3\u52a0\u8f7d\u54ea\u4e2a\u573a\u666f\uff0c",(0,c.jsx)(n.strong,{children:"\u5fc5\u987b"}),"\u5148\u5c06\u5b83\u4eec\u6dfb\u52a0\u5230 Unity \u7f16\u8f91\u5668\u7684 Build Settings \u4e2d\u3002"]}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\u70b9\u51fb\u83dc\u5355\u680f ",(0,c.jsx)(n.code,{children:"File"})," -> ",(0,c.jsx)(n.code,{children:"Build Settings"}),"\u3002"]}),"\n",(0,c.jsxs)(n.li,{children:["\u5c06 Project \u7a97\u53e3\u4e2d\u7684\u573a\u666f\u6587\u4ef6\u62d6\u5165 ",(0,c.jsx)(n.code,{children:"Scenes In Build"})," \u5217\u8868\u4e2d\u3002"]}),"\n",(0,c.jsxs)(n.li,{children:["\u5217\u8868\u53f3\u4fa7\u7684\u6570\u5b57\u5c31\u662f\u573a\u666f\u7684 ",(0,c.jsx)(n.code,{children:"buildIndex"}),"\u3002"]}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:["\u5982\u679c\u573a\u666f\u4e0d\u5728\u5217\u8868\u4e2d\uff0c\u8c03\u7528 ",(0,c.jsx)(n.code,{children:"LoadScene"})," \u4f1a\u62a5\u9519\u3002"]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h3,{id:"\u7efc\u5408\u4ee3\u7801\u793a\u4f8bloadingmanager",children:"\u7efc\u5408\u4ee3\u7801\u793a\u4f8b\uff1aLoadingManager"}),"\n",(0,c.jsxs)(n.p,{children:["\u4e0b\u9762\u662f\u4e00\u4e2a\u5305\u542b",(0,c.jsx)(n.strong,{children:"\u540c\u6b65\u52a0\u8f7d"}),"\u548c",(0,c.jsx)(n.strong,{children:"\u5e26\u6709\u4f2a\u8fdb\u5ea6\u6761\u7684\u5f02\u6b65\u52a0\u8f7d"}),"\u7684\u7ba1\u7406\u5668\u793a\u4f8b\uff1a"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-csharp",children:'using UnityEngine;\r\nusing UnityEngine.SceneManagement; \r\nusing System.Collections;\r\n\r\npublic class MyLevelLoader : MonoBehaviour\r\n{\r\n    // 1. \u666e\u901a\u5207\u6362\u5173\u5361\r\n    public void LoadNextLevel()\r\n    {\r\n        // \u83b7\u53d6\u5f53\u524d\u573a\u666f\u7d22\u5f15\u5e76 + 1\r\n        int nextIndex = SceneManager.GetActiveScene().buildIndex + 1;\r\n        \r\n        // \u68c0\u67e5\u7d22\u5f15\u662f\u5426\u8d8a\u754c (\u5373\u662f\u5426\u8fd8\u6709\u4e0b\u4e00\u5173)\r\n        if (nextIndex < SceneManager.sceneCountInBuildSettings)\r\n        {\r\n            SceneManager.LoadScene(nextIndex);\r\n        }\r\n        else\r\n        {\r\n            Debug.Log("\u5df2\u7ecf\u662f\u6700\u540e\u4e00\u5173\u4e86");\r\n        }\r\n    }\r\n\r\n    // 2. \u5f02\u6b65\u52a0\u8f7d\uff08\u5e26\u8fdb\u5ea6\u6761\u903b\u8f91\uff09\r\n    public void LoadLevelAsync(string levelName)\r\n    {\r\n        StartCoroutine(LoadAsyncSequence(levelName));\r\n    }\r\n\r\n    IEnumerator LoadAsyncSequence(string levelName)\r\n    {\r\n        // \u5f00\u59cb\u540e\u53f0\u52a0\u8f7d\r\n        AsyncOperation operation = SceneManager.LoadSceneAsync(levelName);\r\n\r\n        // \u963b\u6b62\u573a\u666f\u52a0\u8f7d\u5b8c\u81ea\u52a8\u8df3\u8f6c\uff0c\u65b9\u4fbf\u6211\u4eec\u6f14\u793a\u8fdb\u5ea6\u6761\r\n        operation.allowSceneActivation = false;\r\n\r\n        while (!operation.isDone)\r\n        {\r\n            // Unity \u7684\u52a0\u8f7d\u8fc7\u7a0b\u5728 0.9 \u65f6\u505c\u6b62\r\n            // \u6240\u4ee5\u6211\u4eec\u9700\u8981\u628a 0 ~ 0.9 \u6620\u5c04\u5230 0 ~ 1.0\r\n            float progress = Mathf.Clamp01(operation.progress / 0.9f);\r\n            \r\n            Debug.Log($"Loading Progress: {progress * 100}%");\r\n\r\n            // \u5f53\u52a0\u8f7d\u975e\u5e38\u63a5\u8fd1\u5b8c\u6210\u65f6\r\n            if (operation.progress >= 0.9f)\r\n            {\r\n                Debug.Log("\u6309\u4efb\u610f\u952e\u7ee7\u7eed...");\r\n                \r\n                if (Input.anyKeyDown)\r\n                {\r\n                    // \u5141\u8bb8\u8df3\u8f6c\r\n                    operation.allowSceneActivation = true;\r\n                }\r\n            }\r\n\r\n            yield return null; // \u7b49\u5f85\u4e0b\u4e00\u5e27\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,c.jsx)(n.h3,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:(0,c.jsx)(n.code,{children:"SceneManager.LoadScene"})}),": \u7b80\u5355\u7c97\u66b4\u7684\u5207\u5173\u3002"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:(0,c.jsx)(n.code,{children:"SceneManager.LoadSceneAsync"})}),": \u9002\u5408\u505a Loading \u9875\u9762\u3002"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:(0,c.jsx)(n.code,{children:"SceneManager.GetActiveScene"})}),": \u77e5\u9053\u81ea\u5df1\u5728\u54ea\u91cc\u3002"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"\u547d\u540d\u7a7a\u95f4"}),": \u6c38\u8fdc\u522b\u5fd8\u4e86 ",(0,c.jsx)(n.code,{children:"using UnityEngine.SceneManagement;"}),"\u3002"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(t,{...e})}):t(e)}}}]);