"use strict";(self.webpackChunknotes_3=self.webpackChunknotes_3||[]).push([[4102,7861],{7861:(e,t,s)=>{s.r(t),s.d(t,{YouTubeProvider:()=>l});var i=s(7962),o=s(1129),r=s(3196),n=s(4102);s(758);const a=0,c=1,d=2,h=3,u=5;class l extends r.h{$$PROVIDER_TYPE="YOUTUBE";scope=(0,i.createScope)();#e;#t=(0,i.signal)("");#s=-1;#i=null;#o=-1;#r=!1;#n=new Map;constructor(e,t){super(e),this.#e=t}language="en";color="red";cookies=!1;get currentSrc(){return this.#i}get type(){return"youtube"}get videoId(){return this.#t()}preconnect(){(0,o.TB)(this.getOrigin())}setup(){super.setup(),(0,i.effect)(this.#a.bind(this)),this.#e.notify("provider-setup",this)}destroy(){this.#c();for(const e of this.#n.values())for(const{reject:t}of e)t("provider destroyed");this.#n.clear()}async play(){return this.#d("playVideo")}#h(e){this.#u("playVideo")?.reject(e)}async pause(){return this.#d("pauseVideo")}#l(e){this.#u("pauseVideo")?.reject(e)}setMuted(e){e?this.#d("mute"):this.#d("unMute")}setCurrentTime(e){this.#d("seekTo",e),this.#e.notify("seeking",e)}setVolume(e){this.#d("setVolume",100*e)}setPlaybackRate(e){this.#d("setPlaybackRate",e)}async loadSource(e){if(!(0,i.isString)(e.src))return this.#i=null,void this.#t.set("");const t=(0,n.resolveYouTubeVideoId)(e.src);this.#t.set(t??""),this.#i=e}getOrigin(){return this.cookies?"https://www.youtube.com":"https://www.youtube-nocookie.com"}#a(){this.#c();const e=this.#t();e?(this.src.set(`${this.getOrigin()}/embed/${e}`),this.#e.notify("load-start")):this.src.set("")}buildParams(){const{keyDisabled:e}=this.#e.$props,{muted:t,playsInline:s,nativeControls:i}=this.#e.$state,o=i();return{autoplay:0,cc_lang_pref:this.language,cc_load_policy:o?1:void 0,color:this.color,controls:o?1:0,disablekb:!o||e()?1:0,enablejsapi:1,fs:1,hl:this.language,iv_load_policy:o?1:3,mute:t()?1:0,playsinline:s()?1:0}}#d(e,t){let s=(0,i.deferredPromise)(),o=this.#n.get(e);return o||this.#n.set(e,o=[]),o.push(s),this.postMessage({event:"command",func:e,args:t?[t]:void 0}),s.promise}onLoad(){window.setTimeout((()=>this.postMessage({event:"listening"})),100)}#m(e){this.#e.notify("loaded-metadata"),this.#e.notify("loaded-data"),this.#e.delegate.ready(void 0,e)}#p(e){this.#u("pauseVideo")?.resolve(),this.#e.notify("pause",void 0,e)}#g(e,t){const{duration:s,realCurrentTime:i}=this.#e.$state,o=this.#s===a,r=o?s():e;this.#e.notify("time-change",r,t),!o&&Math.abs(r-i())>1&&this.#e.notify("seeking",r,t)}#f(e,t,s){const i={buffered:new o.zJ(0,e),seekable:t};this.#e.notify("progress",i,s);const{seeking:r,realCurrentTime:n}=this.#e.$state;r()&&e>n()&&this.#y(s)}#y(e){const{paused:t,realCurrentTime:s}=this.#e.$state;window.clearTimeout(this.#o),this.#o=window.setTimeout((()=>{this.#e.notify("seeked",s(),e),this.#o=-1}),t()?100:0)}#v(e){const{seeking:t}=this.#e.$state;t()&&this.#y(e),this.#e.notify("pause",void 0,e),this.#e.notify("end",void 0,e)}#b(e,t){const{paused:s,seeking:i}=this.#e.$state,o=e===c,r=e===h,n=this.#w("playVideo"),l=s()&&(r||o);if(r&&this.#e.notify("waiting",void 0,t),i()&&o&&this.#y(t),this.#r&&o)return this.pause(),this.#r=!1,void this.setMuted(this.#e.$state.muted());if(!n&&l)return this.#r=!0,void this.setMuted(!0);switch(l&&(this.#u("playVideo")?.resolve(),this.#e.notify("play",void 0,t)),e){case u:this.#m(t);break;case c:this.#e.notify("playing",void 0,t);break;case d:this.#p(t);break;case a:this.#v(t)}this.#s=e}onMessage({info:e},t){if(!e)return;const{title:s,intrinsicDuration:r,playbackRate:n}=this.#e.$state;if((0,i.isObject)(e.videoData)&&e.videoData.title!==s()&&this.#e.notify("title-change",e.videoData.title,t),(0,i.isNumber)(e.duration)&&e.duration!==r()){if((0,i.isNumber)(e.videoLoadedFraction)){const s=e.progressState?.loaded??e.videoLoadedFraction*e.duration,i=new o.zJ(0,e.duration);this.#f(s,i,t)}this.#e.notify("duration-change",e.duration,t)}if((0,i.isNumber)(e.playbackRate)&&e.playbackRate!==n()&&this.#e.notify("rate-change",e.playbackRate,t),e.progressState){const{current:s,seekableStart:i,seekableEnd:n,loaded:a,duration:c}=e.progressState;this.#g(s,t),this.#f(a,new o.zJ(i,n),t),c!==r()&&this.#e.notify("duration-change",c,t)}if((0,i.isNumber)(e.volume)&&(0,i.isBoolean)(e.muted)&&!this.#r){const s={muted:e.muted,volume:e.volume/100};this.#e.notify("volume-change",s,t)}(0,i.isNumber)(e.playerState)&&e.playerState!==this.#s&&this.#b(e.playerState,t)}#c(){this.#s=-1,this.#o=-1,this.#r=!1}#u(e){return this.#n.get(e)?.shift()}#w(e){return Boolean(this.#n.get(e)?.length)}}},3196:(e,t,s)=>{s.d(t,{h:()=>r});var i=s(1129),o=s(7962);class r{#k;src=(0,o.signal)("");referrerPolicy=null;get iframe(){return this.#k}constructor(e){this.#k=e,e.setAttribute("frameBorder","0"),e.setAttribute("aria-hidden","true"),e.setAttribute("allow","autoplay; fullscreen; encrypted-media; picture-in-picture; accelerometer; gyroscope"),null!==this.referrerPolicy&&e.setAttribute("referrerpolicy",this.referrerPolicy)}setup(){(0,o.listenEvent)(window,"message",this.#x.bind(this)),(0,o.listenEvent)(this.#k,"load",this.onLoad.bind(this)),(0,o.effect)(this.#P.bind(this))}#P(){const e=this.src();if(!e.length)return void this.#k.setAttribute("src","");const t=(0,o.peek)((()=>this.buildParams()));this.#k.setAttribute("src",(0,i.xF)(e,t))}postMessage(e,t){i.X3||this.#k.contentWindow?.postMessage(JSON.stringify(e),t??"*")}#x(e){const t=this.getOrigin();if(!(null!==e.source&&e.source!==this.#k?.contentWindow||(0,o.isString)(t)&&t!==e.origin)){try{const t=JSON.parse(e.data);return void(t&&this.onMessage(t,e))}catch(s){}e.data&&this.onMessage(e.data,e)}}}},4102:(e,t,s)=>{s.d(t,{findYouTubePoster:()=>a,resolveYouTubeVideoId:()=>n});const i=/(?:youtu\.be|youtube|youtube\.com|youtube-nocookie\.com)\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=|)((?:\w|-){11})/,o=new Map,r=new Map;function n(e){return e.match(i)?.[1]}async function a(e,t){if(o.has(e))return o.get(e);if(r.has(e))return r.get(e);const s=new Promise((async s=>{const i=["maxresdefault","sddefault","hqdefault"];for(const r of i)for(const i of[!0,!1]){const n=c(e,r,i);if((await fetch(n,{mode:"no-cors",signal:t.signal})).status<400)return o.set(e,n),void s(n)}})).catch((()=>"")).finally((()=>r.delete(e)));return r.set(e,s),s}function c(e,t,s){return`https://i.ytimg.com/${s?"vi_webp":"vi"}/${e}/${t}.${s?"webp":"jpg"}`}}}]);