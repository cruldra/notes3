"use strict";(self.webpackChunknotes_3=self.webpackChunknotes_3||[]).push([[2477],{54213:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>a});var s=t(36672);const o={},i=s.createContext(o);function r(n){const e=s.useContext(i);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:r(n.components),s.createElement(i.Provider,{value:e},n.children)}},79219:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"AI/Agno/\u5de5\u5177/\u5f02\u5e38\u5904\u7406","title":"\u5f02\u5e38\u5904\u7406","description":"\u5982\u4f55\u5728Agno\u5de5\u5177\u4e2d\u4f7f\u7528\u5f02\u5e38\u5904\u7406","source":"@site/docs/AI/Agno/\u5de5\u5177/\u5f02\u5e38\u5904\u7406.mdx","sourceDirName":"AI/Agno/\u5de5\u5177","slug":"/AI/Agno/\u5de5\u5177/\u5f02\u5e38\u5904\u7406","permalink":"/notes3/docs/AI/Agno/\u5de5\u5177/\u5f02\u5e38\u5904\u7406","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/AI/Agno/\u5de5\u5177/\u5f02\u5e38\u5904\u7406.mdx","tags":[],"version":"current","frontMatter":{"title":"\u5f02\u5e38\u5904\u7406","description":"\u5982\u4f55\u5728Agno\u5de5\u5177\u4e2d\u4f7f\u7528\u5f02\u5e38\u5904\u7406"},"sidebar":"ai","previous":{"title":"\u524d\u7f6e\u548c\u540e\u7f6e\u94a9\u5b50","permalink":"/notes3/docs/AI/Agno/\u5de5\u5177/\u524d\u7f6e\u540e\u7f6e\u94a9\u5b50"},"next":{"title":"\u5f02\u6b65\u5de5\u5177","permalink":"/notes3/docs/AI/Agno/\u5de5\u5177/\u5f02\u6b65\u5de5\u5177"}}');var o=t(23420),i=t(54213);const r={title:"\u5f02\u5e38\u5904\u7406",description:"\u5982\u4f55\u5728Agno\u5de5\u5177\u4e2d\u4f7f\u7528\u5f02\u5e38\u5904\u7406"},a="\u5f02\u5e38\u5904\u7406",c={},l=[];function p(n){const e={code:"code",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"\u5f02\u5e38\u5904\u7406",children:"\u5f02\u5e38\u5904\u7406"})}),"\n",(0,o.jsx)(e.p,{children:'\u5982\u679c\u5728\u5de5\u5177\u8c03\u7528\u540e\u6211\u4eec\u9700\u8981\u4f7f\u7528\u4e0d\u540c\u7684\u6307\u4ee4\u96c6"\u91cd\u8bd5"\u6a21\u578b\u6216\u505c\u6b62\u4ee3\u7406\uff0c\u6211\u4eec\u53ef\u4ee5\u629b\u51fa\u4ee5\u4e0b\u5f02\u5e38\u4e4b\u4e00\uff1a'}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"RetryAgentRun"}),"\uff1a\u5f53\u60a8\u60f3\u7528\u4e0d\u540c\u7684\u6307\u4ee4\u96c6\u91cd\u8bd5\u4ee3\u7406\u8fd0\u884c\u65f6\u4f7f\u7528\u6b64\u5f02\u5e38\u3002"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"StopAgentRun"}),"\uff1a\u5f53\u60a8\u60f3\u505c\u6b62\u4ee3\u7406\u8fd0\u884c\u65f6\u4f7f\u7528\u6b64\u5f02\u5e38\u3002"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"AgentRunException"}),"\uff1a\u53ef\u7528\u4e8e\u91cd\u8bd5\u5de5\u5177\u8c03\u7528\u7684\u901a\u7528\u5f02\u5e38\u3002"]}),"\n"]}),"\n",(0,o.jsxs)(e.p,{children:["\u4ee5\u4e0b\u793a\u4f8b\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528",(0,o.jsx)(e.code,{children:"RetryAgentRun"}),"\u5f02\u5e38\u6765\u4f7f\u7528\u989d\u5916\u6307\u4ee4\u91cd\u8bd5\u4ee3\u7406\u3002"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:'from agno.agent import Agent\nfrom agno.exceptions import RetryAgentRun\nfrom agno.models.openai import OpenAIChat\nfrom agno.utils.log import logger\n\n\ndef add_item(agent: Agent, item: str) -> str:\n    """\u5c06\u9879\u76ee\u6dfb\u52a0\u5230\u8d2d\u7269\u6e05\u5355\u3002"""\n    agent.session_state["shopping_list"].append(item)\n    len_shopping_list = len(agent.session_state["shopping_list"])\n    if len_shopping_list < 3:\n        raise RetryAgentRun(\n            f"\u8d2d\u7269\u6e05\u5355\u662f\uff1a{agent.session_state[\'shopping_list\']}\u3002\u8d2d\u7269\u6e05\u5355\u81f3\u5c11\u9700\u89813\u4e2a\u9879\u76ee\u3002"\n            + f"\u518d\u6dfb\u52a0{3 - len_shopping_list}\u4e2a\u9879\u76ee\u3002",\n        )\n\n    logger.info(f"\u8d2d\u7269\u6e05\u5355\u73b0\u5728\u662f\uff1a{agent.session_state.get(\'shopping_list\')}")\n    return f"\u8d2d\u7269\u6e05\u5355\u73b0\u5728\u662f\uff1a{agent.session_state.get(\'shopping_list\')}"\n\n\nagent = Agent(\n    model=OpenAIChat(id="gpt-4o-mini"),\n    # \u521d\u59cb\u5316\u4f1a\u8bdd\u72b6\u6001\uff0c\u5305\u542b\u7a7a\u8d2d\u7269\u6e05\u5355\n    session_state={"shopping_list": []},\n    tools=[add_item],\n    markdown=True,\n)\nagent.print_response("\u6dfb\u52a0\u725b\u5976", stream=True)\nprint(f"\u6700\u7ec8\u4f1a\u8bdd\u72b6\u6001\uff1a{agent.session_state}")\n'})}),"\n",(0,o.jsxs)(e.p,{children:["\u786e\u4fdd\u8bbe\u7f6e",(0,o.jsx)(e.code,{children:"AGNO_DEBUG=True"}),"\u4ee5\u67e5\u770b\u8c03\u8bd5\u65e5\u5fd7\u3002"]})]})}function d(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(p,{...n})}):p(n)}}}]);