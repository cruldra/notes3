"use strict";(self.webpackChunknotes_3=self.webpackChunknotes_3||[]).push([[2912],{54213:(r,n,e)=>{e.d(n,{R:()=>i,x:()=>o});var t=e(36672);const s={},a=t.createContext(s);function i(r){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof r?r(n):{...n,...r}}),[n,r])}function o(r){let n;return n=r.disableParentContext?"function"==typeof r.components?r.components(s):r.components||s:i(r.components),t.createElement(a.Provider,{value:n},r.children)}},84447:(r,n,e)=>{e.r(n),e.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"FrontEnd/Miniapp/Uniapp/\u8e29\u8fc7\u7684\u5751","title":"\u8e29\u8fc7\u7684\u5751","description":"\u5c0f\u7a0b\u5e8f\u4e0d\u652f\u6301FormData","source":"@site/docs/FrontEnd/Miniapp/Uniapp/\u8e29\u8fc7\u7684\u5751.mdx","sourceDirName":"FrontEnd/Miniapp/Uniapp","slug":"/FrontEnd/Miniapp/Uniapp/\u8e29\u8fc7\u7684\u5751","permalink":"/notes3/docs/FrontEnd/Miniapp/Uniapp/\u8e29\u8fc7\u7684\u5751","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/FrontEnd/Miniapp/Uniapp/\u8e29\u8fc7\u7684\u5751.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"frontEnd","previous":{"title":"\u767b\u5f55","permalink":"/notes3/docs/FrontEnd/Miniapp/Uniapp/\u5fae\u4fe1/\u767b\u5f55"},"next":{"title":"React","permalink":"/notes3/docs/category/react"}}');var s=e(23420),a=e(54213);const i={},o=void 0,c={},l=[{value:"\u5c0f\u7a0b\u5e8f\u4e0d\u652f\u6301FormData",id:"\u5c0f\u7a0b\u5e8f\u4e0d\u652f\u6301formdata",level:2},{value:"\u5c0f\u7a0b\u5e8f\u4e2d\u5b9e\u73b0<code>base64</code>",id:"\u5c0f\u7a0b\u5e8f\u4e2d\u5b9e\u73b0base64",level:2}];function d(r){const n={code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,a.R)(),...r.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"\u5c0f\u7a0b\u5e8f\u4e0d\u652f\u6301formdata",children:"\u5c0f\u7a0b\u5e8f\u4e0d\u652f\u6301FormData"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// \u9009\u62e9\u5934\u50cf\r\nconst chooseAvatar = () => {\r\n  uni.chooseImage({\r\n    count: 1, // \u53ea\u9009\u62e9\u4e00\u5f20\u56fe\u7247\r\n    sizeType: ['compressed'], // \u538b\u7f29\u56fe\u7247\r\n    sourceType: ['album', 'camera'], // \u5141\u8bb8\u4ece\u76f8\u518c\u9009\u62e9\u548c\u62cd\u7167\r\n    success: (res) => {\r\n      //const a = res.tempFiles[0]\r\n      // uploadAvatar(res.tempFilePaths[0])\r\n      const formData = new FormData()\r\n      formData.append('file', (res.tempFiles as File[])[0])\r\n      fileService.upload(formData)\r\n    },\r\n    fail: () => {\r\n      uni.showToast({\r\n        title: '\u9009\u62e9\u56fe\u7247\u5931\u8d25',\r\n        icon: 'none'\r\n      })\r\n    }\r\n  })\r\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u4e0a\u9762\u7684\u4ee3\u7801\u5728\u5c0f\u7a0b\u5e8f\u4e2d\u4f1a\u62a5\u9519,\u5982\u56fe:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://github.com/cruldra/picx-images-hosting/raw/master/image.2verulb12u.webp",alt:""})}),"\n",(0,s.jsxs)(n.h2,{id:"\u5c0f\u7a0b\u5e8f\u4e2d\u5b9e\u73b0base64",children:["\u5c0f\u7a0b\u5e8f\u4e2d\u5b9e\u73b0",(0,s.jsx)(n.code,{children:"base64"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"//utils/base64.d.ts\r\n\r\n/**\r\n * Base64\u7f16\u7801\u89e3\u7801\u5de5\u5177\u7c7b\r\n */\r\nexport declare class Base64 {\r\n    /**\r\n     * \u6784\u9020\u51fd\u6570\r\n     */\r\n    constructor();\r\n\r\n    /**\r\n     * \u5c06\u5b57\u7b26\u4e32\u7f16\u7801\u4e3aBase64\u683c\u5f0f\r\n     * @param str \u9700\u8981\u7f16\u7801\u7684\u5b57\u7b26\u4e32\r\n     * @returns \u7f16\u7801\u540e\u7684Base64\u5b57\u7b26\u4e32\r\n     */\r\n    encode(str: string): string;\r\n\r\n    /**\r\n     * \u5c06Base64\u5b57\u7b26\u4e32\u89e3\u7801\u4e3a\u539f\u59cb\u5b57\u7b26\u4e32\r\n     * @param str Base64\u7f16\u7801\u7684\u5b57\u7b26\u4e32\r\n     * @returns \u89e3\u7801\u540e\u7684\u539f\u59cb\u5b57\u7b26\u4e32\r\n     */\r\n    decode(str: string): string;\r\n}\r\n\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"//utils/base64.js\r\n// \u5b9a\u4e49Base64\u5bf9\u8c61\r\nexport function Base64() {\r\n\r\n    // Base64\u5b57\u7b26\u96c6\r\n    const base64Chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\n\r\n    // \u7f16\u7801\u51fd\u6570\r\n    this.encode = function (str) {\r\n        let result = '';\r\n        for (let i = 0; i < str.length; i += 3) {\r\n            let a = str.charCodeAt(i);\r\n            let b = i + 1 < str.length ? str.charCodeAt(i + 1) : 0;\r\n            let c = i + 2 < str.length ? str.charCodeAt(i + 2) : 0;\r\n\r\n            let a1 = a >> 2, a2 = ((a & 3) << 4) | (b >> 4), a3 = ((b & 15) << 2) | (c >> 6), a4 = c & 63;\r\n\r\n            result += base64Chars[a1] + base64Chars[a2] + (i + 1 < str.length ? base64Chars[a3] : '=') + (i + 2 < str.length ? base64Chars[a4] : '=');\r\n        }\r\n        return result;\r\n    }\r\n\r\n    // \u89e3\u7801\u51fd\u6570\r\n    this.decode = function (str) {\r\n        let result = '';\r\n        let i = 0;\r\n        while (i < str.length) {\r\n            let a = base64Chars.indexOf(str.charAt(i++));\r\n            let b = base64Chars.indexOf(str.charAt(i++));\r\n            let c = base64Chars.indexOf(str.charAt(i++));\r\n            let d = base64Chars.indexOf(str.charAt(i++));\r\n\r\n            let a1 = (a << 2) | (b >> 4);\r\n            let a2 = ((b & 15) << 4) | (c >> 2);\r\n            let a3 = ((c & 3) << 6) | d;\r\n\r\n            result += String.fromCharCode(a1);\r\n            if (c != 64) {\r\n                result += String.fromCharCode(a2);\r\n            }\r\n            if (d != 64) {\r\n                result += String.fromCharCode(a3);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n}\r\n\n"})})]})}function p(r={}){const{wrapper:n}={...(0,a.R)(),...r.components};return n?(0,s.jsx)(n,{...r,children:(0,s.jsx)(d,{...r})}):d(r)}}}]);