"use strict";(self.webpackChunknotes_3=self.webpackChunknotes_3||[]).push([[6113],{2754:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"CodeSnippets/Loguru","title":"Loguru","description":"","source":"@site/docs/CodeSnippets/Loguru.mdx","sourceDirName":"CodeSnippets","slug":"/CodeSnippets/Loguru","permalink":"/notes3/docs/CodeSnippets/Loguru","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/CodeSnippets/Loguru.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"codeSnippets","previous":{"title":"Docker","permalink":"/notes3/docs/CodeSnippets/Docker"},"next":{"title":"Nextjs","permalink":"/notes3/docs/CodeSnippets/Nextjs"}}');var o=r(6070),s=r(5658);const a={},l=void 0,i={},c=[];function u(e){const n={code:"code",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'def configure_logger():\r\n    """\u914d\u7f6e\u65e5\u5fd7"""\r\n\r\n    # \u9879\u76ee\u6839\u76ee\u5f55\r\n    project_root = Path(__file__).parent\r\n\r\n    # \u65e5\u5fd7\u6587\u4ef6\u8def\u5f84\r\n    log_path = project_root / "logs"\r\n    log_path.mkdir(exist_ok=True)\r\n\r\n    # \u79fb\u9664\u9ed8\u8ba4\u5904\u7406\u5668\r\n    logger.remove()\r\n    level = "DEBUG" if settings.mode == "dev" else "INFO"\r\n    # \u6dfb\u52a0\u63a7\u5236\u53f0\u5904\u7406\u5668 (\u5f00\u53d1\u73af\u5883)\r\n    logger.add(\r\n        sys.stdout,\r\n        format="<green>{time:YYYY-MM-DD HH:mm:ss}</green> | "\r\n               "<level>{level: <8}</level> | "\r\n               "<cyan>{name}</cyan>:<cyan>{function}</cyan>:<cyan>{line}</cyan> - "\r\n               "<level>{message}</level>",\r\n        level=level,\r\n        enqueue=True\r\n    )\r\n\r\n    # \u6dfb\u52a0\u6587\u4ef6\u5904\u7406\u5668 (INFO\u7ea7\u522b)\r\n    logger.add(\r\n        log_path / "info.log",\r\n        format="{time:YYYY-MM-DD HH:mm:ss} | {level: <8} | {name}:{function}:{line} - {message}",\r\n        level=level,\r\n        rotation="1 day",  # \u6bcf\u5929\u8f6e\u8f6c\r\n        retention="30 days",  # \u4fdd\u755930\u5929\r\n        compression="zip",  # \u538b\u7f29\r\n        enqueue=True\r\n    )\r\n\r\n    # \u6dfb\u52a0\u6587\u4ef6\u5904\u7406\u5668 (ERROR\u7ea7\u522b)\r\n    logger.add(\r\n        log_path / "error.log",\r\n        format="{time:YYYY-MM-DD HH:mm:ss} | {level: <8} | {name}:{function}:{line} - {message}",\r\n        level="ERROR",\r\n        rotation="1 day",\r\n        retention="30 days",\r\n        compression="zip",\r\n        enqueue=True\r\n    )\r\n\r\n    # \u6dfb\u52a0\u6587\u4ef6\u5904\u7406\u5668 (\u652f\u4ed8\u76f8\u5173\uff0c\u5355\u72ec\u6587\u4ef6)\r\n    logger.add(\r\n        log_path / "payment.log",\r\n        format="{time:YYYY-MM-DD HH:mm:ss} | {level: <8} | {name}:{function}:{line} - {message}",\r\n        filter=lambda record: record.get("extra", {}).get("name") == "payment",\r\n        rotation="1 day",\r\n        level=level,\r\n        retention="30 days",\r\n        compression="zip",\r\n        enqueue=True\r\n    )\r\n\r\n    return logger\r\n\r\n\r\n# \u5168\u5c40logger\u5b9e\u4f8b\r\nlogger = configure_logger()\r\n\r\n\r\n\r\n# \u6b63\u786e\u7684\u4f7f\u7528\u65b9\u5f0f\u9700\u8981\u6307\u5b9a name="payment"\r\nlogger_payment = logger.bind(name="payment")\r\nlogger_payment.debug("1111")\r\nlogger_payment.info("\u5f00\u59cb\u5904\u7406\u652f\u4ed8\u8bf7\u6c42")  # \u8fd9\u6761\u65e5\u5fd7\u4f1a\u88ab\u8bb0\u5f55\u5230 payment.log\n'})})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},5658:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>l});var t=r(758);const o={},s=t.createContext(o);function a(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);