"use strict";(self.webpackChunknotes_3=self.webpackChunknotes_3||[]).push([[2391],{9485:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>o,contentTitle:()=>c,default:()=>a,frontMatter:()=>d,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"Tools/Comfyui/AI\u6a21\u578b\u6587\u4ef6\u5206\u53d1\u7b56\u7565\u5dee\u5f02\u5206\u6790","title":"AI\u6a21\u578b\u6587\u4ef6\u5206\u53d1\u7b56\u7565\u5dee\u5f02\u5206\u6790","description":"\u6982\u8ff0","source":"@site/docs/Tools/Comfyui/AI\u6a21\u578b\u6587\u4ef6\u5206\u53d1\u7b56\u7565\u5dee\u5f02\u5206\u6790.md","sourceDirName":"Tools/Comfyui","slug":"/Tools/Comfyui/AI\u6a21\u578b\u6587\u4ef6\u5206\u53d1\u7b56\u7565\u5dee\u5f02\u5206\u6790","permalink":"/notes3/docs/Tools/Comfyui/AI\u6a21\u578b\u6587\u4ef6\u5206\u53d1\u7b56\u7565\u5dee\u5f02\u5206\u6790","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Tools/Comfyui/AI\u6a21\u578b\u6587\u4ef6\u5206\u53d1\u7b56\u7565\u5dee\u5f02\u5206\u6790.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tools","previous":{"title":"Lux","permalink":"/notes3/docs/Tools/\u97f3\u89c6\u9891/Lux"},"next":{"title":"CLIPTextEncode \u8282\u70b9\u8be6\u7ec6\u5206\u6790","permalink":"/notes3/docs/Tools/Comfyui/CLIPTextEncode\u8282\u70b9\u8be6\u7ec6\u5206\u6790"}}');var l=i(23420),r=i(54213);const d={},c="AI\u6a21\u578b\u6587\u4ef6\u5206\u53d1\u7b56\u7565\u5dee\u5f02\u5206\u6790",o={},h=[{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:2},{value:"\u95ee\u9898\u80cc\u666f",id:"\u95ee\u9898\u80cc\u666f",level:2},{value:"\u89c2\u5bdf\u5230\u7684\u73b0\u8c61",id:"\u89c2\u5bdf\u5230\u7684\u73b0\u8c61",level:3},{value:"\u6838\u5fc3\u7591\u95ee",id:"\u6838\u5fc3\u7591\u95ee",level:3},{value:"\u6587\u4ef6\u5206\u53d1\u7b56\u7565\u5206\u6790",id:"\u6587\u4ef6\u5206\u53d1\u7b56\u7565\u5206\u6790",level:2},{value:"1. Hugging Face\u7684\u5206\u7247\u7b56\u7565",id:"1-hugging-face\u7684\u5206\u7247\u7b56\u7565",level:3},{value:"\u6280\u672f\u5b9e\u73b0",id:"\u6280\u672f\u5b9e\u73b0",level:4},{value:"\u5206\u7247\u4f18\u52bf",id:"\u5206\u7247\u4f18\u52bf",level:4},{value:"\u7d22\u5f15\u6587\u4ef6\u7ed3\u6784",id:"\u7d22\u5f15\u6587\u4ef6\u7ed3\u6784",level:4},{value:"2. LibLib\u7684\u5408\u5e76\u7b56\u7565",id:"2-liblib\u7684\u5408\u5e76\u7b56\u7565",level:3},{value:"\u6280\u672f\u5b9e\u73b0",id:"\u6280\u672f\u5b9e\u73b0-1",level:4},{value:"\u5408\u5e76\u4f18\u52bf",id:"\u5408\u5e76\u4f18\u52bf",level:4},{value:"\u6587\u4ef6\u5927\u5c0f\u5dee\u5f02\u5206\u6790",id:"\u6587\u4ef6\u5927\u5c0f\u5dee\u5f02\u5206\u6790",level:2},{value:"1. \u538b\u7f29\u7b97\u6cd5\u4f18\u5316",id:"1-\u538b\u7f29\u7b97\u6cd5\u4f18\u5316",level:3},{value:"Hugging Face\u539f\u59cb\u5206\u7247",id:"hugging-face\u539f\u59cb\u5206\u7247",level:4},{value:"LibLib\u4f18\u5316\u5408\u5e76",id:"liblib\u4f18\u5316\u5408\u5e76",level:4},{value:"2. \u53ef\u80fd\u7684\u4f18\u5316\u6280\u672f",id:"2-\u53ef\u80fd\u7684\u4f18\u5316\u6280\u672f",level:3},{value:"\u6570\u636e\u538b\u7f29",id:"\u6570\u636e\u538b\u7f29",level:4},{value:"\u5143\u6570\u636e\u4f18\u5316",id:"\u5143\u6570\u636e\u4f18\u5316",level:4},{value:"3. \u7248\u672c\u5dee\u5f02\u53ef\u80fd\u6027",id:"3-\u7248\u672c\u5dee\u5f02\u53ef\u80fd\u6027",level:3},{value:"\u6a21\u578b\u7248\u672c",id:"\u6a21\u578b\u7248\u672c",level:4},{value:"\u6280\u672f\u5b9e\u73b0\u7ec6\u8282",id:"\u6280\u672f\u5b9e\u73b0\u7ec6\u8282",level:2},{value:"1. \u5206\u7247\u6587\u4ef6\u7684\u52a0\u8f7d\u8fc7\u7a0b",id:"1-\u5206\u7247\u6587\u4ef6\u7684\u52a0\u8f7d\u8fc7\u7a0b",level:3},{value:"2. \u6a21\u578b\u5408\u5e76\u7684\u5b9e\u73b0",id:"2-\u6a21\u578b\u5408\u5e76\u7684\u5b9e\u73b0",level:3},{value:"3. \u6587\u4ef6\u5b8c\u6574\u6027\u9a8c\u8bc1",id:"3-\u6587\u4ef6\u5b8c\u6574\u6027\u9a8c\u8bc1",level:3},{value:"\u4f7f\u7528\u5efa\u8bae\u548c\u6700\u4f73\u5b9e\u8df5",id:"\u4f7f\u7528\u5efa\u8bae\u548c\u6700\u4f73\u5b9e\u8df5",level:2},{value:"1. \u5e73\u53f0\u9009\u62e9\u6307\u5357",id:"1-\u5e73\u53f0\u9009\u62e9\u6307\u5357",level:3},{value:"\u9009\u62e9Hugging Face\u7684\u60c5\u51b5",id:"\u9009\u62e9hugging-face\u7684\u60c5\u51b5",level:4},{value:"\u9009\u62e9LibLib\u7684\u60c5\u51b5",id:"\u9009\u62e9liblib\u7684\u60c5\u51b5",level:4},{value:"2. \u6a21\u578b\u9a8c\u8bc1\u6d41\u7a0b",id:"2-\u6a21\u578b\u9a8c\u8bc1\u6d41\u7a0b",level:3},{value:"3. \u6027\u80fd\u5bf9\u6bd4\u6d4b\u8bd5",id:"3-\u6027\u80fd\u5bf9\u6bd4\u6d4b\u8bd5",level:3},{value:"\u5e38\u89c1\u95ee\u9898\u89e3\u7b54",id:"\u5e38\u89c1\u95ee\u9898\u89e3\u7b54",level:2},{value:"Q1: \u4e24\u4e2a\u7248\u672c\u7684\u6a21\u578b\u529f\u80fd\u662f\u5426\u5b8c\u5168\u76f8\u540c\uff1f",id:"q1-\u4e24\u4e2a\u7248\u672c\u7684\u6a21\u578b\u529f\u80fd\u662f\u5426\u5b8c\u5168\u76f8\u540c",level:3},{value:"Q2: \u5982\u4f55\u9009\u62e9\u5408\u9002\u7684\u7248\u672c\uff1f",id:"q2-\u5982\u4f55\u9009\u62e9\u5408\u9002\u7684\u7248\u672c",level:3},{value:"Q3: \u6587\u4ef6\u5927\u5c0f\u5dee\u5f02\u662f\u5426\u5f71\u54cd\u6a21\u578b\u6027\u80fd\uff1f",id:"q3-\u6587\u4ef6\u5927\u5c0f\u5dee\u5f02\u662f\u5426\u5f71\u54cd\u6a21\u578b\u6027\u80fd",level:3},{value:"Q4: \u5982\u4f55\u9a8c\u8bc1\u6a21\u578b\u7684\u5b8c\u6574\u6027\uff1f",id:"q4-\u5982\u4f55\u9a8c\u8bc1\u6a21\u578b\u7684\u5b8c\u6574\u6027",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2},{value:"\u5173\u952e\u8981\u70b9",id:"\u5173\u952e\u8981\u70b9",level:3},{value:"\u6280\u672f\u542f\u793a",id:"\u6280\u672f\u542f\u793a",level:3},{value:"\u672a\u6765\u8d8b\u52bf",id:"\u672a\u6765\u8d8b\u52bf",level:3}];function t(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"ai\u6a21\u578b\u6587\u4ef6\u5206\u53d1\u7b56\u7565\u5dee\u5f02\u5206\u6790",children:"AI\u6a21\u578b\u6587\u4ef6\u5206\u53d1\u7b56\u7565\u5dee\u5f02\u5206\u6790"})}),"\n",(0,l.jsx)(e.h2,{id:"\u6982\u8ff0",children:"\u6982\u8ff0"}),"\n",(0,l.jsx)(e.p,{children:"\u672c\u6587\u6863\u5206\u6790\u4e86\u5927\u578bAI\u6a21\u578b\u5728\u4e0d\u540c\u5e73\u53f0\u4e0a\u7684\u6587\u4ef6\u5206\u53d1\u7b56\u7565\u5dee\u5f02\uff0c\u4ee5Qwen-Image\u6a21\u578b\u5728Hugging Face\u548cLibLib\u5e73\u53f0\u4e0a\u7684\u4e0d\u540c\u8868\u73b0\u4e3a\u4f8b\uff0c\u6df1\u5165\u63a2\u8ba8\u6587\u4ef6\u5206\u7247\u3001\u5408\u5e76\u3001\u538b\u7f29\u7b49\u6280\u672f\u7ec6\u8282\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"\u95ee\u9898\u80cc\u666f",children:"\u95ee\u9898\u80cc\u666f"}),"\n",(0,l.jsx)(e.h3,{id:"\u89c2\u5bdf\u5230\u7684\u73b0\u8c61",children:"\u89c2\u5bdf\u5230\u7684\u73b0\u8c61"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Hugging Face"}),": Qwen-Image\u6a21\u578b\u88ab\u5206\u6210\u591a\u4e2a\u6587\u4ef6\uff0c\u603b\u5927\u5c0f20+GB"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"LibLib"}),": \u540c\u4e00\u6a21\u578b\u5408\u5e76\u4e3a\u5355\u4e2a\u6587\u4ef6\uff0c\u5927\u5c0f\u7ea619GB"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u6838\u5fc3\u7591\u95ee",children:"\u6838\u5fc3\u7591\u95ee"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u4e3a\u4ec0\u4e48\u540c\u4e00\u6a21\u578b\u5728\u4e0d\u540c\u5e73\u53f0\u4e0a\u6587\u4ef6\u6570\u91cf\u4e0d\u540c\uff1f"}),"\n",(0,l.jsx)(e.li,{children:"\u4e3a\u4ec0\u4e48\u6587\u4ef6\u5927\u5c0f\u5b58\u5728\u5dee\u5f02\uff1f"}),"\n",(0,l.jsx)(e.li,{children:"\u8fd9\u79cd\u5dee\u5f02\u662f\u5426\u5f71\u54cd\u6a21\u578b\u529f\u80fd\uff1f"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u6587\u4ef6\u5206\u53d1\u7b56\u7565\u5206\u6790",children:"\u6587\u4ef6\u5206\u53d1\u7b56\u7565\u5206\u6790"}),"\n",(0,l.jsx)(e.h3,{id:"1-hugging-face\u7684\u5206\u7247\u7b56\u7565",children:"1. Hugging Face\u7684\u5206\u7247\u7b56\u7565"}),"\n",(0,l.jsx)(e.h4,{id:"\u6280\u672f\u5b9e\u73b0",children:"\u6280\u672f\u5b9e\u73b0"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u6587\u4ef6\u7ed3\u6784\u793a\u4f8b\uff1a\n\u251c\u2500\u2500 config.json                                    # 371 Bytes\n\u251c\u2500\u2500 diffusion_pytorch_model-00001-of-00009.safetensors  # 4.99 GB\n\u251c\u2500\u2500 diffusion_pytorch_model-00002-of-00009.safetensors  # 4.98 GB\n\u251c\u2500\u2500 diffusion_pytorch_model-00003-of-00009.safetensors  # 4.95 GB\n\u251c\u2500\u2500 diffusion_pytorch_model-00004-of-00009.safetensors  # 4.98 GB\n\u251c\u2500\u2500 diffusion_pytorch_model-00005-of-00009.safetensors  # 4.95 GB\n\u251c\u2500\u2500 diffusion_pytorch_model-00006-of-00009.safetensors  # 4.95 GB\n\u251c\u2500\u2500 diffusion_pytorch_model-00007-of-00009.safetensors  # 4.91 GB\n\u251c\u2500\u2500 diffusion_pytorch_model-00008-of-00009.safetensors  # 4.98 GB\n\u251c\u2500\u2500 diffusion_pytorch_model-00009-of-00009.safetensors  # 1.17 GB\n\u2514\u2500\u2500 diffusion_pytorch_model.safetensors.index.json     # 199 kB\n"})}),"\n",(0,l.jsx)(e.h4,{id:"\u5206\u7247\u4f18\u52bf",children:"\u5206\u7247\u4f18\u52bf"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4e0b\u8f7d\u7a33\u5b9a\u6027"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5927\u6587\u4ef6\u4e0b\u8f7d\u5bb9\u6613\u56e0\u7f51\u7edc\u95ee\u9898\u4e2d\u65ad"}),"\n",(0,l.jsx)(e.li,{children:"\u5206\u7247\u652f\u6301\u65ad\u70b9\u7eed\u4f20\uff0c\u63d0\u9ad8\u6210\u529f\u7387"}),"\n",(0,l.jsx)(e.li,{children:"\u5355\u4e2a\u5206\u7247\u635f\u574f\u4e0d\u5f71\u54cd\u5176\u4ed6\u90e8\u5206"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5e76\u884c\u5904\u7406"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u591a\u7ebf\u7a0b\u5e76\u884c\u4e0b\u8f7d"}),"\n",(0,l.jsx)(e.li,{children:"\u53ef\u4ee5\u9009\u62e9\u6027\u4e0b\u8f7d\u7279\u5b9a\u5206\u7247"}),"\n",(0,l.jsx)(e.li,{children:"\u63d0\u9ad8\u6574\u4f53\u4e0b\u8f7d\u901f\u5ea6"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5b58\u50a8\u7ba1\u7406"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u9002\u5e94Git LFS\u7684\u6587\u4ef6\u5927\u5c0f\u9650\u5236"}),"\n",(0,l.jsx)(e.li,{children:"\u4fbf\u4e8e\u7248\u672c\u63a7\u5236\u548c\u5dee\u5f02\u7ba1\u7406"}),"\n",(0,l.jsx)(e.li,{children:"\u51cf\u5c11\u5355\u6b21\u64cd\u4f5c\u7684\u5185\u5b58\u5360\u7528"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5e73\u53f0\u517c\u5bb9\u6027"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u67d0\u4e9b\u5e73\u53f0\u5bf9\u5355\u6587\u4ef6\u5927\u5c0f\u6709\u9650\u5236"}),"\n",(0,l.jsx)(e.li,{children:"\u9002\u5e94\u4e0d\u540c\u7684\u7f51\u7edc\u73af\u5883"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301CDN\u5206\u53d1\u4f18\u5316"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u7d22\u5f15\u6587\u4ef6\u7ed3\u6784",children:"\u7d22\u5f15\u6587\u4ef6\u7ed3\u6784"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-json",children:'{\n  "metadata": {\n    "total_size": 21474836480\n  },\n  "weight_map": {\n    "diffusion_model.input_blocks.0.0.weight": "diffusion_pytorch_model-00001-of-00009.safetensors",\n    "diffusion_model.input_blocks.0.0.bias": "diffusion_pytorch_model-00001-of-00009.safetensors",\n    ...\n  }\n}\n'})}),"\n",(0,l.jsx)(e.h3,{id:"2-liblib\u7684\u5408\u5e76\u7b56\u7565",children:"2. LibLib\u7684\u5408\u5e76\u7b56\u7565"}),"\n",(0,l.jsx)(e.h4,{id:"\u6280\u672f\u5b9e\u73b0-1",children:"\u6280\u672f\u5b9e\u73b0"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u6587\u4ef6\u7ed3\u6784\uff1a\n\u2514\u2500\u2500 qwen_image_model.safetensors  # 19.03 GB (\u5355\u6587\u4ef6)\n"})}),"\n",(0,l.jsx)(e.h4,{id:"\u5408\u5e76\u4f18\u52bf",children:"\u5408\u5e76\u4f18\u52bf"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7528\u6237\u4f53\u9a8c"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5355\u6587\u4ef6\u4e0b\u8f7d\u66f4\u7b80\u5355\u76f4\u89c2"}),"\n",(0,l.jsx)(e.li,{children:"\u51cf\u5c11\u7528\u6237\u64cd\u4f5c\u590d\u6742\u5ea6"}),"\n",(0,l.jsx)(e.li,{children:"\u907f\u514d\u6587\u4ef6\u7ba1\u7406\u56f0\u6270"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5b58\u50a8\u4f18\u5316"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6d88\u9664\u6587\u4ef6\u7cfb\u7edf\u788e\u7247"}),"\n",(0,l.jsx)(e.li,{children:"\u51cf\u5c11inode\u5360\u7528"}),"\n",(0,l.jsx)(e.li,{children:"\u4f18\u5316\u78c1\u76d8\u7a7a\u95f4\u5229\u7528"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5e73\u53f0\u7279\u6027"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u9002\u5e94\u56fd\u5185\u7528\u6237\u4e60\u60ef"}),"\n",(0,l.jsx)(e.li,{children:"\u7b80\u5316\u90e8\u7f72\u6d41\u7a0b"}),"\n",(0,l.jsx)(e.li,{children:"\u51cf\u5c11\u6280\u672f\u95e8\u69db"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u6587\u4ef6\u5927\u5c0f\u5dee\u5f02\u5206\u6790",children:"\u6587\u4ef6\u5927\u5c0f\u5dee\u5f02\u5206\u6790"}),"\n",(0,l.jsx)(e.h3,{id:"1-\u538b\u7f29\u7b97\u6cd5\u4f18\u5316",children:"1. \u538b\u7f29\u7b97\u6cd5\u4f18\u5316"}),"\n",(0,l.jsx)(e.h4,{id:"hugging-face\u539f\u59cb\u5206\u7247",children:"Hugging Face\u539f\u59cb\u5206\u7247"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:'# \u539f\u59cb\u5206\u7247\u6587\u4ef6\u7279\u70b9\ntotal_size = sum([4.99, 4.98, 4.95, 4.98, 4.95, 4.95, 4.91, 4.98, 1.17])  # \u2248 20.86 GB\ncompression_ratio = "\u6807\u51c6safetensors\u538b\u7f29"\nmetadata_overhead = "\u6bcf\u4e2a\u5206\u7247\u5305\u542b\u72ec\u7acb\u5143\u6570\u636e"\n'})}),"\n",(0,l.jsx)(e.h4,{id:"liblib\u4f18\u5316\u5408\u5e76",children:"LibLib\u4f18\u5316\u5408\u5e76"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:'# \u4f18\u5316\u540e\u5355\u6587\u4ef6\u7279\u70b9\noptimized_size = 19.03  # GB\ncompression_improvement = (20.86 - 19.03) / 20.86 * 100  # \u2248 8.8%\noptimization_methods = [\n    "\u9ad8\u6548\u538b\u7f29\u7b97\u6cd5",\n    "\u5143\u6570\u636e\u53bb\u91cd",\n    "\u6743\u91cd\u7cbe\u5ea6\u4f18\u5316",\n    "\u5197\u4f59\u6570\u636e\u6e05\u7406"\n]\n'})}),"\n",(0,l.jsx)(e.h3,{id:"2-\u53ef\u80fd\u7684\u4f18\u5316\u6280\u672f",children:"2. \u53ef\u80fd\u7684\u4f18\u5316\u6280\u672f"}),"\n",(0,l.jsx)(e.h4,{id:"\u6570\u636e\u538b\u7f29",children:"\u6570\u636e\u538b\u7f29"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u7b97\u6cd5\u5347\u7ea7"}),": \u4f7f\u7528\u66f4\u5148\u8fdb\u7684\u538b\u7f29\u7b97\u6cd5"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u7cbe\u5ea6\u8c03\u6574"}),": \u5728\u4e0d\u5f71\u54cd\u6027\u80fd\u7684\u524d\u63d0\u4e0b\u8c03\u6574\u6743\u91cd\u7cbe\u5ea6"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u91cf\u5316\u6280\u672f"}),": \u5e94\u7528\u6a21\u578b\u91cf\u5316\u51cf\u5c11\u5b58\u50a8\u9700\u6c42"]}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u5143\u6570\u636e\u4f18\u5316",children:"\u5143\u6570\u636e\u4f18\u5316"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u53bb\u91cd\u5904\u7406"}),": \u79fb\u9664\u91cd\u590d\u7684\u5143\u6570\u636e\u4fe1\u606f"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u7ed3\u6784\u4f18\u5316"}),": \u91cd\u65b0\u7ec4\u7ec7\u6570\u636e\u7ed3\u6784"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u7d22\u5f15\u7b80\u5316"}),": \u4f18\u5316\u5185\u90e8\u7d22\u5f15\u673a\u5236"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"3-\u7248\u672c\u5dee\u5f02\u53ef\u80fd\u6027",children:"3. \u7248\u672c\u5dee\u5f02\u53ef\u80fd\u6027"}),"\n",(0,l.jsx)(e.h4,{id:"\u6a21\u578b\u7248\u672c",children:"\u6a21\u578b\u7248\u672c"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:'# \u53ef\u80fd\u7684\u7248\u672c\u5dee\u5f02\nhuggingface_version = {\n    "model_version": "v1.0.0",\n    "checkpoint": "original",\n    "optimization": "none"\n}\n\nliblib_version = {\n    "model_version": "v1.0.1",  # \u53ef\u80fd\u7684\u66f4\u65b0\u7248\u672c\n    "checkpoint": "optimized",\n    "optimization": "compression + cleanup"\n}\n'})}),"\n",(0,l.jsx)(e.h2,{id:"\u6280\u672f\u5b9e\u73b0\u7ec6\u8282",children:"\u6280\u672f\u5b9e\u73b0\u7ec6\u8282"}),"\n",(0,l.jsx)(e.h3,{id:"1-\u5206\u7247\u6587\u4ef6\u7684\u52a0\u8f7d\u8fc7\u7a0b",children:"1. \u5206\u7247\u6587\u4ef6\u7684\u52a0\u8f7d\u8fc7\u7a0b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:'import torch\nimport json\nfrom safetensors import safe_open\n\ndef load_sharded_model(model_path):\n    """\u52a0\u8f7d\u5206\u7247\u6a21\u578b\u7684\u6807\u51c6\u6d41\u7a0b"""\n    \n    # 1. \u8bfb\u53d6\u7d22\u5f15\u6587\u4ef6\n    index_path = f"{model_path}/diffusion_pytorch_model.safetensors.index.json"\n    with open(index_path, \'r\') as f:\n        index = json.load(f)\n    \n    # 2. \u521d\u59cb\u5316\u6a21\u578b\u72b6\u6001\u5b57\u5178\n    state_dict = {}\n    \n    # 3. \u6309\u5206\u7247\u52a0\u8f7d\u6743\u91cd\n    for weight_name, shard_file in index["weight_map"].items():\n        shard_path = f"{model_path}/{shard_file}"\n        with safe_open(shard_path, framework="pt", device="cpu") as f:\n            state_dict[weight_name] = f.get_tensor(weight_name)\n    \n    return state_dict\n'})}),"\n",(0,l.jsx)(e.h3,{id:"2-\u6a21\u578b\u5408\u5e76\u7684\u5b9e\u73b0",children:"2. \u6a21\u578b\u5408\u5e76\u7684\u5b9e\u73b0"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:'def merge_sharded_model(input_path, output_path):\n    """\u5c06\u5206\u7247\u6a21\u578b\u5408\u5e76\u4e3a\u5355\u6587\u4ef6"""\n    \n    # 1. \u52a0\u8f7d\u6240\u6709\u5206\u7247\n    state_dict = load_sharded_model(input_path)\n    \n    # 2. \u5e94\u7528\u4f18\u5316\n    optimized_state_dict = optimize_model_weights(state_dict)\n    \n    # 3. \u4fdd\u5b58\u4e3a\u5355\u6587\u4ef6\n    from safetensors.torch import save_file\n    save_file(optimized_state_dict, output_path)\n    \n    return output_path\n\ndef optimize_model_weights(state_dict):\n    """\u6a21\u578b\u6743\u91cd\u4f18\u5316"""\n    optimized = {}\n    \n    for key, tensor in state_dict.items():\n        # \u7cbe\u5ea6\u4f18\u5316\uff08\u5982\u679c\u9002\u7528\uff09\n        if tensor.dtype == torch.float64:\n            tensor = tensor.to(torch.float32)\n        \n        # \u53bb\u9664\u4e0d\u5fc5\u8981\u7684\u68af\u5ea6\u4fe1\u606f\n        if tensor.requires_grad:\n            tensor = tensor.detach()\n        \n        optimized[key] = tensor\n    \n    return optimized\n'})}),"\n",(0,l.jsx)(e.h3,{id:"3-\u6587\u4ef6\u5b8c\u6574\u6027\u9a8c\u8bc1",children:"3. \u6587\u4ef6\u5b8c\u6574\u6027\u9a8c\u8bc1"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:'def verify_model_integrity(model_path_1, model_path_2):\n    """\u9a8c\u8bc1\u4e24\u4e2a\u6a21\u578b\u7684\u5b8c\u6574\u6027"""\n    \n    # \u52a0\u8f7d\u4e24\u4e2a\u6a21\u578b\n    model_1 = load_model(model_path_1)\n    model_2 = load_model(model_path_2)\n    \n    # \u6bd4\u8f83\u53c2\u6570\u6570\u91cf\n    params_1 = sum(p.numel() for p in model_1.parameters())\n    params_2 = sum(p.numel() for p in model_2.parameters())\n    \n    # \u6bd4\u8f83\u6a21\u578b\u7ed3\u6784\n    structure_match = str(model_1) == str(model_2)\n    \n    # \u6bd4\u8f83\u6743\u91cd\uff08\u91c7\u6837\u68c0\u67e5\uff09\n    weight_similarity = compare_weights_sample(model_1, model_2)\n    \n    return {\n        "parameter_count_match": params_1 == params_2,\n        "structure_match": structure_match,\n        "weight_similarity": weight_similarity,\n        "params_1": params_1,\n        "params_2": params_2\n    }\n'})}),"\n",(0,l.jsx)(e.h2,{id:"\u4f7f\u7528\u5efa\u8bae\u548c\u6700\u4f73\u5b9e\u8df5",children:"\u4f7f\u7528\u5efa\u8bae\u548c\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,l.jsx)(e.h3,{id:"1-\u5e73\u53f0\u9009\u62e9\u6307\u5357",children:"1. \u5e73\u53f0\u9009\u62e9\u6307\u5357"}),"\n",(0,l.jsx)(e.h4,{id:"\u9009\u62e9hugging-face\u7684\u60c5\u51b5",children:"\u9009\u62e9Hugging Face\u7684\u60c5\u51b5"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u7814\u7a76\u7528\u9014"}),": \u9700\u8981\u8bbf\u95ee\u539f\u59cb\u6a21\u578b\u548c\u5b8c\u6574\u5143\u6570\u636e"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u5f00\u53d1\u8c03\u8bd5"}),": \u9700\u8981\u5206\u6790\u6a21\u578b\u7ed3\u6784\u548c\u6743\u91cd\u5206\u5e03"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u56fd\u9645\u73af\u5883"}),": \u7f51\u7edc\u73af\u5883\u66f4\u9002\u5408\u8bbf\u95ee\u56fd\u5916\u5e73\u53f0"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u7248\u672c\u8ffd\u8e2a"}),": \u9700\u8981\u8ddf\u8e2a\u6a21\u578b\u7684\u7248\u672c\u5386\u53f2"]}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u9009\u62e9liblib\u7684\u60c5\u51b5",children:"\u9009\u62e9LibLib\u7684\u60c5\u51b5"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u751f\u4ea7\u90e8\u7f72"}),": \u7b80\u5316\u90e8\u7f72\u6d41\u7a0b\uff0c\u51cf\u5c11\u64cd\u4f5c\u590d\u6742\u5ea6"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u56fd\u5185\u73af\u5883"}),": \u7f51\u7edc\u8bbf\u95ee\u66f4\u7a33\u5b9a\uff0c\u4e0b\u8f7d\u901f\u5ea6\u66f4\u5feb"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u7528\u6237\u53cb\u597d"}),": \u56e2\u961f\u6280\u672f\u6c34\u5e73\u76f8\u5bf9\u8f83\u4f4e"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u5b58\u50a8\u4f18\u5316"}),": \u5bf9\u5b58\u50a8\u7a7a\u95f4\u6709\u4e25\u683c\u8981\u6c42"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"2-\u6a21\u578b\u9a8c\u8bc1\u6d41\u7a0b",children:"2. \u6a21\u578b\u9a8c\u8bc1\u6d41\u7a0b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:'def comprehensive_model_verification():\n    """\u5168\u9762\u7684\u6a21\u578b\u9a8c\u8bc1\u6d41\u7a0b"""\n    \n    verification_steps = [\n        "1. \u6587\u4ef6\u5b8c\u6574\u6027\u68c0\u67e5",\n        "2. \u6a21\u578b\u53c2\u6570\u6570\u91cf\u5bf9\u6bd4", \n        "3. \u6743\u91cd\u5206\u5e03\u7edf\u8ba1\u5206\u6790",\n        "4. \u63a8\u7406\u7ed3\u679c\u4e00\u81f4\u6027\u6d4b\u8bd5",\n        "5. \u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5"\n    ]\n    \n    for step in verification_steps:\n        print(f"\u6267\u884c: {step}")\n        # \u5177\u4f53\u9a8c\u8bc1\u903b\u8f91\n    \n    return verification_results\n'})}),"\n",(0,l.jsx)(e.h3,{id:"3-\u6027\u80fd\u5bf9\u6bd4\u6d4b\u8bd5",children:"3. \u6027\u80fd\u5bf9\u6bd4\u6d4b\u8bd5"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:'def performance_comparison():\n    """\u6027\u80fd\u5bf9\u6bd4\u6d4b\u8bd5"""\n    \n    test_cases = [\n        {"name": "\u52a0\u8f7d\u65f6\u95f4", "metric": "seconds"},\n        {"name": "\u5185\u5b58\u5360\u7528", "metric": "GB"},\n        {"name": "\u63a8\u7406\u901f\u5ea6", "metric": "images/second"},\n        {"name": "\u751f\u6210\u8d28\u91cf", "metric": "CLIP_score"}\n    ]\n    \n    results = {}\n    for case in test_cases:\n        results[case["name"]] = {\n            "huggingface": measure_performance("hf_model", case),\n            "liblib": measure_performance("liblib_model", case)\n        }\n    \n    return results\n'})}),"\n",(0,l.jsx)(e.h2,{id:"\u5e38\u89c1\u95ee\u9898\u89e3\u7b54",children:"\u5e38\u89c1\u95ee\u9898\u89e3\u7b54"}),"\n",(0,l.jsx)(e.h3,{id:"q1-\u4e24\u4e2a\u7248\u672c\u7684\u6a21\u578b\u529f\u80fd\u662f\u5426\u5b8c\u5168\u76f8\u540c",children:"Q1: \u4e24\u4e2a\u7248\u672c\u7684\u6a21\u578b\u529f\u80fd\u662f\u5426\u5b8c\u5168\u76f8\u540c\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"A"}),": \u7406\u8bba\u4e0a\u5e94\u8be5\u76f8\u540c\uff0c\u4f46\u5efa\u8bae\u8fdb\u884c\u9a8c\u8bc1\u6d4b\u8bd5\u3002\u4e3b\u8981\u68c0\u67e5\uff1a"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6a21\u578b\u53c2\u6570\u6570\u91cf"}),"\n",(0,l.jsx)(e.li,{children:"\u6743\u91cd\u5206\u5e03\u7edf\u8ba1"}),"\n",(0,l.jsx)(e.li,{children:"\u63a8\u7406\u7ed3\u679c\u4e00\u81f4\u6027"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"q2-\u5982\u4f55\u9009\u62e9\u5408\u9002\u7684\u7248\u672c",children:"Q2: \u5982\u4f55\u9009\u62e9\u5408\u9002\u7684\u7248\u672c\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"A"}),": \u6839\u636e\u5177\u4f53\u9700\u6c42\uff1a"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u7814\u7a76/\u5f00\u53d1"}),": \u63a8\u8350Hugging Face\u7248\u672c"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u751f\u4ea7/\u90e8\u7f72"}),": \u63a8\u8350LibLib\u7248\u672c"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u7f51\u7edc\u73af\u5883"}),": \u6839\u636e\u8bbf\u95ee\u901f\u5ea6\u9009\u62e9"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"q3-\u6587\u4ef6\u5927\u5c0f\u5dee\u5f02\u662f\u5426\u5f71\u54cd\u6a21\u578b\u6027\u80fd",children:"Q3: \u6587\u4ef6\u5927\u5c0f\u5dee\u5f02\u662f\u5426\u5f71\u54cd\u6a21\u578b\u6027\u80fd\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"A"}),": \u901a\u5e38\u4e0d\u4f1a\u5f71\u54cd\u6838\u5fc3\u6027\u80fd\uff0c\u5dee\u5f02\u4e3b\u8981\u6765\u81ea\uff1a"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u538b\u7f29\u7b97\u6cd5\u4f18\u5316"}),"\n",(0,l.jsx)(e.li,{children:"\u5143\u6570\u636e\u7cbe\u7b80"}),"\n",(0,l.jsx)(e.li,{children:"\u683c\u5f0f\u8f6c\u6362\u4f18\u5316"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"q4-\u5982\u4f55\u9a8c\u8bc1\u6a21\u578b\u7684\u5b8c\u6574\u6027",children:"Q4: \u5982\u4f55\u9a8c\u8bc1\u6a21\u578b\u7684\u5b8c\u6574\u6027\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"A"}),": \u5efa\u8bae\u7684\u9a8c\u8bc1\u6b65\u9aa4\uff1a"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u6bd4\u8f83\u53c2\u6570\u6570\u91cf"}),"\n",(0,l.jsx)(e.li,{children:"\u6d4b\u8bd5\u63a8\u7406\u7ed3\u679c"}),"\n",(0,l.jsx)(e.li,{children:"\u68c0\u67e5\u6a21\u578b\u67b6\u6784"}),"\n",(0,l.jsx)(e.li,{children:"\u8fdb\u884c\u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,l.jsx)(e.h3,{id:"\u5173\u952e\u8981\u70b9",children:"\u5173\u952e\u8981\u70b9"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u5206\u53d1\u7b56\u7565\u5dee\u5f02\u662f\u6b63\u5e38\u73b0\u8c61"}),"\uff0c\u53cd\u6620\u4e86\u4e0d\u540c\u5e73\u53f0\u7684\u6280\u672f\u9009\u62e9\u548c\u7528\u6237\u9700\u6c42"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u6587\u4ef6\u5927\u5c0f\u5dee\u5f02\u4e3b\u8981\u6765\u81ea\u4f18\u5316\u6280\u672f"}),"\uff0c\u800c\u975e\u6a21\u578b\u672c\u8eab\u7684\u529f\u80fd\u5dee\u5f02"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u9009\u62e9\u5408\u9002\u7684\u7248\u672c"}),"\u5e94\u57fa\u4e8e\u5177\u4f53\u7684\u4f7f\u7528\u573a\u666f\u548c\u6280\u672f\u9700\u6c42"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u9a8c\u8bc1\u6d4b\u8bd5\u662f\u5fc5\u8981\u7684"}),"\uff0c\u786e\u4fdd\u6a21\u578b\u5728\u4e0d\u540c\u7248\u672c\u95f4\u7684\u4e00\u81f4\u6027"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u6280\u672f\u542f\u793a",children:"\u6280\u672f\u542f\u793a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5927\u578b\u6a21\u578b\u7684\u5206\u53d1\u9700\u8981\u8003\u8651\u591a\u79cd\u56e0\u7d20\uff1a\u7f51\u7edc\u73af\u5883\u3001\u7528\u6237\u4f53\u9a8c\u3001\u5b58\u50a8\u6548\u7387"}),"\n",(0,l.jsx)(e.li,{children:"\u538b\u7f29\u548c\u4f18\u5316\u6280\u672f\u53ef\u4ee5\u663e\u8457\u51cf\u5c11\u5b58\u50a8\u9700\u6c42\u800c\u4e0d\u5f71\u54cd\u529f\u80fd"}),"\n",(0,l.jsx)(e.li,{children:"\u5e73\u53f0\u5dee\u5f02\u5316\u7b56\u7565\u6709\u52a9\u4e8e\u6ee1\u8db3\u4e0d\u540c\u7528\u6237\u7fa4\u4f53\u7684\u9700\u6c42"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u672a\u6765\u8d8b\u52bf",children:"\u672a\u6765\u8d8b\u52bf"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u66f4\u667a\u80fd\u7684\u81ea\u9002\u5e94\u5206\u53d1\u7b56\u7565"}),"\n",(0,l.jsx)(e.li,{children:"\u66f4\u9ad8\u6548\u7684\u6a21\u578b\u538b\u7f29\u6280\u672f"}),"\n",(0,l.jsx)(e.li,{children:"\u66f4\u5b8c\u5584\u7684\u8de8\u5e73\u53f0\u517c\u5bb9\u6027\u65b9\u6848"}),"\n"]})]})}function a(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(t,{...n})}):t(n)}},54213:(n,e,i)=>{i.d(e,{R:()=>d,x:()=>c});var s=i(36672);const l={},r=s.createContext(l);function d(n){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:d(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);