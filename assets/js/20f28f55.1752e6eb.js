"use strict";(self.webpackChunknotes_3=self.webpackChunknotes_3||[]).push([[77925],{54213:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>c});var r=s(36672);const t={},i=r.createContext(t);function l(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(i.Provider,{value:n},e.children)}},72514:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>a,frontMatter:()=>l,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"SoftwareEngineering/OAuth 2.0 \u7b2c\u4e09\u65b9\u767b\u5f55\u6280\u672f\u539f\u7406","title":"OAuth 2.0 \u7b2c\u4e09\u65b9\u767b\u5f55\u6280\u672f\u539f\u7406","description":"\u6982\u8ff0","source":"@site/docs/SoftwareEngineering/OAuth 2.0 \u7b2c\u4e09\u65b9\u767b\u5f55\u6280\u672f\u539f\u7406.md","sourceDirName":"SoftwareEngineering","slug":"/SoftwareEngineering/OAuth 2.0 \u7b2c\u4e09\u65b9\u767b\u5f55\u6280\u672f\u539f\u7406","permalink":"/notes3/docs/SoftwareEngineering/OAuth 2.0 \u7b2c\u4e09\u65b9\u767b\u5f55\u6280\u672f\u539f\u7406","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/SoftwareEngineering/OAuth 2.0 \u7b2c\u4e09\u65b9\u767b\u5f55\u6280\u672f\u539f\u7406.md","tags":[],"version":"current","frontMatter":{},"sidebar":"softwareEngineering","previous":{"title":"IaaS\u3001PaaS\u548cSaaS","permalink":"/notes3/docs/SoftwareEngineering/IaaS\u3001PaaS\u548cSaaS"},"next":{"title":"PR\u5ba1\u67e5","permalink":"/notes3/docs/SoftwareEngineering/PR\u5ba1\u67e5"}}');var t=s(23420),i=s(54213);const l={},c="OAuth 2.0 \u7b2c\u4e09\u65b9\u767b\u5f55\u6280\u672f\u539f\u7406",o={},h=[{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:2},{value:"\u6838\u5fc3\u6982\u5ff5",id:"\u6838\u5fc3\u6982\u5ff5",level:2},{value:"\u4ec0\u4e48\u662f OAuth 2.0?",id:"\u4ec0\u4e48\u662f-oauth-20",level:3},{value:"OAuth 2.0 \u4e2d\u7684\u89d2\u8272",id:"oauth-20-\u4e2d\u7684\u89d2\u8272",level:3},{value:"OAuth 2.0 \u6388\u6743\u7801\u6d41\u7a0b\u8be6\u89e3",id:"oauth-20-\u6388\u6743\u7801\u6d41\u7a0b\u8be6\u89e3",level:2},{value:"\u6d41\u7a0b\u56fe",id:"\u6d41\u7a0b\u56fe",level:3},{value:"\u8be6\u7ec6\u6b65\u9aa4\u8bf4\u660e",id:"\u8be6\u7ec6\u6b65\u9aa4\u8bf4\u660e",level:3},{value:"\u6b65\u9aa4 1: \u7528\u6237\u53d1\u8d77\u767b\u5f55\u8bf7\u6c42",id:"\u6b65\u9aa4-1-\u7528\u6237\u53d1\u8d77\u767b\u5f55\u8bf7\u6c42",level:4},{value:"\u6b65\u9aa4 2: \u91cd\u5b9a\u5411\u5230\u6388\u6743\u9875\u9762",id:"\u6b65\u9aa4-2-\u91cd\u5b9a\u5411\u5230\u6388\u6743\u9875\u9762",level:4},{value:"\u6b65\u9aa4 3: \u7528\u6237\u6388\u6743",id:"\u6b65\u9aa4-3-\u7528\u6237\u6388\u6743",level:4},{value:"\u6b65\u9aa4 4: \u56de\u8c03\u5e94\u7528",id:"\u6b65\u9aa4-4-\u56de\u8c03\u5e94\u7528",level:4},{value:"\u6b65\u9aa4 5: \u4ea4\u6362\u8bbf\u95ee\u4ee4\u724c",id:"\u6b65\u9aa4-5-\u4ea4\u6362\u8bbf\u95ee\u4ee4\u724c",level:4},{value:"\u6b65\u9aa4 6: \u4f7f\u7528\u8bbf\u95ee\u4ee4\u724c\u83b7\u53d6\u7528\u6237\u4fe1\u606f",id:"\u6b65\u9aa4-6-\u4f7f\u7528\u8bbf\u95ee\u4ee4\u724c\u83b7\u53d6\u7528\u6237\u4fe1\u606f",level:4},{value:"\u6b65\u9aa4 7: \u521b\u5efa\u672c\u5730\u4f1a\u8bdd",id:"\u6b65\u9aa4-7-\u521b\u5efa\u672c\u5730\u4f1a\u8bdd",level:4},{value:"\u5b89\u5168\u673a\u5236",id:"\u5b89\u5168\u673a\u5236",level:2},{value:"1. State \u53c2\u6570(\u9632 CSRF)",id:"1-state-\u53c2\u6570\u9632-csrf",level:3},{value:"2. Client Secret(\u5ba2\u6237\u7aef\u5bc6\u94a5)",id:"2-client-secret\u5ba2\u6237\u7aef\u5bc6\u94a5",level:3},{value:"3. HTTPS",id:"3-https",level:3},{value:"4. \u77ed\u671f\u6388\u6743\u7801",id:"4-\u77ed\u671f\u6388\u6743\u7801",level:3},{value:"5. \u8bbf\u95ee\u4ee4\u724c\u7684\u4f5c\u7528\u57df",id:"5-\u8bbf\u95ee\u4ee4\u724c\u7684\u4f5c\u7528\u57df",level:3},{value:"\u5e38\u89c1\u5e73\u53f0\u7684 OAuth \u914d\u7f6e",id:"\u5e38\u89c1\u5e73\u53f0\u7684-oauth-\u914d\u7f6e",level:2},{value:"GitHub",id:"github",level:3},{value:"Google",id:"google",level:3},{value:"QQ",id:"qq",level:3},{value:"\u5fae\u4fe1",id:"\u5fae\u4fe1",level:3},{value:"\u652f\u4ed8\u5b9d",id:"\u652f\u4ed8\u5b9d",level:3},{value:"\u4f18\u52bf",id:"\u4f18\u52bf",level:2},{value:"\u6ce8\u610f\u4e8b\u9879",id:"\u6ce8\u610f\u4e8b\u9879",level:2},{value:"Python \u5b9e\u73b0\u793a\u4f8b(Flask)",id:"python-\u5b9e\u73b0\u793a\u4f8bflask",level:2},{value:"\u4f7f\u7528\u8bf4\u660e",id:"\u4f7f\u7528\u8bf4\u660e",level:3},{value:"\u9002\u914d\u5176\u4ed6\u5e73\u53f0",id:"\u9002\u914d\u5176\u4ed6\u5e73\u53f0",level:3},{value:"\u53c2\u8003\u8d44\u6599",id:"\u53c2\u8003\u8d44\u6599",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"oauth-20-\u7b2c\u4e09\u65b9\u767b\u5f55\u6280\u672f\u539f\u7406",children:"OAuth 2.0 \u7b2c\u4e09\u65b9\u767b\u5f55\u6280\u672f\u539f\u7406"})}),"\n",(0,t.jsx)(n.h2,{id:"\u6982\u8ff0",children:"\u6982\u8ff0"}),"\n",(0,t.jsxs)(n.p,{children:["OAuth 2.0 \u662f\u4e00\u4e2a",(0,t.jsx)(n.strong,{children:"\u884c\u4e1a\u6807\u51c6\u7684\u6388\u6743\u6846\u67b6"}),",\u88ab\u5e7f\u6cdb\u5e94\u7528\u4e8e\u5404\u79cd\u7b2c\u4e09\u65b9\u767b\u5f55\u573a\u666f\u3002\u65e0\u8bba\u662f GitHub\u3001Google\u3001QQ\u3001\u5fae\u4fe1\u3001\u652f\u4ed8\u5b9d\u3001\u5fae\u535a\u7b49\u5e73\u53f0,\u90fd\u91c7\u7528 OAuth 2.0 \u534f\u8bae\u6765\u5b9e\u73b0\u7b2c\u4e09\u65b9\u767b\u5f55\u529f\u80fd\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"OAuth 2.0 \u6388\u6743\u7801\u6d41\u7a0b(Authorization Code Flow)"})," \u662f\u6700\u5e38\u7528\u7684\u6388\u6743\u65b9\u5f0f,\u5b83\u5141\u8bb8\u7b2c\u4e09\u65b9\u5e94\u7528\u5728\u7528\u6237\u6388\u6743\u7684\u60c5\u51b5\u4e0b\u8bbf\u95ee\u7528\u6237\u5728\u5404\u4e2a\u5e73\u53f0\u4e0a\u7684\u8d44\u6e90,\u800c\u65e0\u9700\u83b7\u53d6\u7528\u6237\u7684\u5bc6\u7801\u3002"]}),"\n",(0,t.jsx)(n.h2,{id:"\u6838\u5fc3\u6982\u5ff5",children:"\u6838\u5fc3\u6982\u5ff5"}),"\n",(0,t.jsx)(n.h3,{id:"\u4ec0\u4e48\u662f-oauth-20",children:"\u4ec0\u4e48\u662f OAuth 2.0?"}),"\n",(0,t.jsx)(n.p,{children:"OAuth 2.0 \u662f\u4e00\u4e2a\u6388\u6743\u6846\u67b6,\u5b83\u5b9a\u4e49\u4e86\u6388\u6743\u534f\u8bae\u548c\u5de5\u4f5c\u6d41\u7a0b\u3002\u4e3b\u8981\u89e3\u51b3\u7684\u95ee\u9898\u662f:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u7528\u6237"}),"\u4e0d\u9700\u8981\u5c06\u5bc6\u7801\u63d0\u4f9b\u7ed9\u7b2c\u4e09\u65b9\u5e94\u7528"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u7b2c\u4e09\u65b9\u5e94\u7528"}),"\u53ef\u4ee5\u5728\u7528\u6237\u6388\u6743\u4e0b\u8bbf\u95ee\u7528\u6237\u7684\u8d44\u6e90"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u8d44\u6e90\u670d\u52a1\u5668"}),"(\u5982 GitHub\u3001Google\u3001QQ \u7b49)\u53ef\u4ee5\u63a7\u5236\u7b2c\u4e09\u65b9\u5e94\u7528\u7684\u8bbf\u95ee\u6743\u9650"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"oauth-20-\u4e2d\u7684\u89d2\u8272",children:"OAuth 2.0 \u4e2d\u7684\u89d2\u8272"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Resource Owner(\u8d44\u6e90\u6240\u6709\u8005)"}),": \u7528\u6237\u672c\u4eba"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Client(\u5ba2\u6237\u7aef)"}),": \u7b2c\u4e09\u65b9\u5e94\u7528(\u4f60\u7684\u7f51\u7ad9)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Authorization Server(\u6388\u6743\u670d\u52a1\u5668)"}),": \u5404\u5e73\u53f0\u7684\u6388\u6743\u670d\u52a1\u5668(\u5982 GitHub\u3001Google\u3001QQ \u7b49)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Resource Server(\u8d44\u6e90\u670d\u52a1\u5668)"}),": \u5404\u5e73\u53f0\u7684 API \u670d\u52a1\u5668"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"oauth-20-\u6388\u6743\u7801\u6d41\u7a0b\u8be6\u89e3",children:"OAuth 2.0 \u6388\u6743\u7801\u6d41\u7a0b\u8be6\u89e3"}),"\n",(0,t.jsx)(n.h3,{id:"\u6d41\u7a0b\u56fe",children:"\u6d41\u7a0b\u56fe"}),"\n",(0,t.jsx)(n.mermaid,{value:'sequenceDiagram\n    participant User as \u7528\u6237\u6d4f\u89c8\u5668\n    participant App as \u7b2c\u4e09\u65b9\u5e94\u7528\n    participant OAuth as OAuth\u6388\u6743\u670d\u52a1\u5668<br/>(GitHub/Google/QQ\u7b49)\n    participant API as \u8d44\u6e90API\u670d\u52a1\u5668\n\n    Note over User,API: \u6b65\u9aa41: \u7528\u6237\u53d1\u8d77\u767b\u5f55\n    User->>App: 1. \u70b9\u51fb"\u4f7f\u7528XX\u767b\u5f55"\n\n    Note over User,API: \u6b65\u9aa42: \u91cd\u5b9a\u5411\u5230\u6388\u6743\u9875\u9762\n    App->>User: 2. \u91cd\u5b9a\u5411\u5230\u6388\u6743URL<br/>\u5305\u542bclient_id, redirect_uri, scope, state\n    User->>OAuth: 3. \u8bbf\u95ee\u6388\u6743\u9875\u9762\n\n    Note over User,API: \u6b65\u9aa43: \u7528\u6237\u6388\u6743\n    OAuth->>User: 4. \u663e\u793a\u6388\u6743\u786e\u8ba4\u9875\u9762<br/>"XXX\u5e94\u7528\u60f3\u8981\u8bbf\u95ee\u4f60\u7684\u4fe1\u606f"\n    User->>OAuth: 5. \u7528\u6237\u70b9\u51fb"\u6388\u6743"\n\n    Note over User,API: \u6b65\u9aa44: \u56de\u8c03\u5e94\u7528\n    OAuth->>User: 6. \u91cd\u5b9a\u5411\u56de\u5e94\u7528<br/>\u643a\u5e26code\u548cstate\u53c2\u6570\n    User->>App: 7. \u8bbf\u95ee\u56de\u8c03URL<br/>GET /callback?code=xxx&state=xxx\n\n    Note over User,API: \u6b65\u9aa45: \u4ea4\u6362\u8bbf\u95ee\u4ee4\u724c\n    App->>OAuth: 8. POST /oauth/token<br/>\u53d1\u9001client_id, client_secret, code\n    OAuth->>App: 9. \u8fd4\u56deaccess_token\n\n    Note over User,API: \u6b65\u9aa46: \u83b7\u53d6\u7528\u6237\u4fe1\u606f\n    App->>API: 10. GET /api/user<br/>Authorization: Bearer {access_token}\n    API->>App: 11. \u8fd4\u56de\u7528\u6237\u4fe1\u606f(id, name, email\u7b49)\n\n    Note over User,API: \u6b65\u9aa47: \u521b\u5efa\u4f1a\u8bdd\n    App->>App: 12. \u521b\u5efa\u672c\u5730\u7528\u6237\u4f1a\u8bdd\n    App->>User: 13. \u767b\u5f55\u6210\u529f,\u8fd4\u56de\u5e94\u7528\u9996\u9875'}),"\n",(0,t.jsx)(n.h3,{id:"\u8be6\u7ec6\u6b65\u9aa4\u8bf4\u660e",children:"\u8be6\u7ec6\u6b65\u9aa4\u8bf4\u660e"}),"\n",(0,t.jsx)(n.h4,{id:"\u6b65\u9aa4-1-\u7528\u6237\u53d1\u8d77\u767b\u5f55\u8bf7\u6c42",children:"\u6b65\u9aa4 1: \u7528\u6237\u53d1\u8d77\u767b\u5f55\u8bf7\u6c42"}),"\n",(0,t.jsx)(n.p,{children:'\u7528\u6237\u5728\u7b2c\u4e09\u65b9\u5e94\u7528\u4e0a\u70b9\u51fb"\u4f7f\u7528 XX \u767b\u5f55"\u6309\u94ae(\u5982"\u4f7f\u7528 GitHub \u767b\u5f55"\u3001"\u4f7f\u7528 Google \u767b\u5f55"\u7b49)\u3002'}),"\n",(0,t.jsx)(n.h4,{id:"\u6b65\u9aa4-2-\u91cd\u5b9a\u5411\u5230\u6388\u6743\u9875\u9762",children:"\u6b65\u9aa4 2: \u91cd\u5b9a\u5411\u5230\u6388\u6743\u9875\u9762"}),"\n",(0,t.jsx)(n.p,{children:"\u5e94\u7528\u5c06\u7528\u6237\u91cd\u5b9a\u5411\u5230 OAuth \u63d0\u4f9b\u5546\u7684\u6388\u6743\u7aef\u70b9\u3002\u4e0d\u540c\u5e73\u53f0\u7684\u6388\u6743 URL \u4e0d\u540c:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"GitHub \u793a\u4f8b:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"https://github.com/login/oauth/authorize?\n  client_id=YOUR_CLIENT_ID&\n  redirect_uri=https://yourapp.com/callback&\n  scope=user:email&\n  state=RANDOM_STRING\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Google \u793a\u4f8b:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"https://accounts.google.com/o/oauth2/v2/auth?\n  client_id=YOUR_CLIENT_ID&\n  redirect_uri=https://yourapp.com/callback&\n  scope=openid%20email%20profile&\n  response_type=code&\n  state=RANDOM_STRING\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"QQ \u793a\u4f8b:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"https://graph.qq.com/oauth2.0/authorize?\n  client_id=YOUR_APP_ID&\n  redirect_uri=https://yourapp.com/callback&\n  scope=get_user_info&\n  response_type=code&\n  state=RANDOM_STRING\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u53c2\u6570\u8bf4\u660e:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"client_id"}),": \u5728\u5e73\u53f0\u6ce8\u518c\u5e94\u7528\u65f6\u83b7\u5f97\u7684\u5ba2\u6237\u7aef ID(QQ \u79f0\u4e3a APP_ID)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"redirect_uri"}),": \u6388\u6743\u540e\u7684\u56de\u8c03\u5730\u5740(\u5fc5\u987b\u4e0e\u6ce8\u518c\u65f6\u586b\u5199\u7684\u4e00\u81f4)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"scope"}),": \u8bf7\u6c42\u7684\u6743\u9650\u8303\u56f4(\u4e0d\u540c\u5e73\u53f0\u7684 scope \u5b9a\u4e49\u4e0d\u540c)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"state"}),": \u968f\u673a\u5b57\u7b26\u4e32,\u7528\u4e8e\u9632\u6b62 CSRF \u653b\u51fb"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"response_type"}),": \u54cd\u5e94\u7c7b\u578b,\u6388\u6743\u7801\u6d41\u7a0b\u56fa\u5b9a\u4e3a ",(0,t.jsx)(n.code,{children:"code"})]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"\u6b65\u9aa4-3-\u7528\u6237\u6388\u6743",children:"\u6b65\u9aa4 3: \u7528\u6237\u6388\u6743"}),"\n",(0,t.jsx)(n.p,{children:'OAuth \u63d0\u4f9b\u5546\u663e\u793a\u6388\u6743\u9875\u9762,\u8be2\u95ee\u7528\u6237\u662f\u5426\u5141\u8bb8\u8be5\u5e94\u7528\u8bbf\u95ee\u5176\u4fe1\u606f\u3002\u7528\u6237\u70b9\u51fb"\u6388\u6743"\u6309\u94ae\u3002'}),"\n",(0,t.jsx)(n.h4,{id:"\u6b65\u9aa4-4-\u56de\u8c03\u5e94\u7528",children:"\u6b65\u9aa4 4: \u56de\u8c03\u5e94\u7528"}),"\n",(0,t.jsx)(n.p,{children:"OAuth \u63d0\u4f9b\u5546\u5c06\u7528\u6237\u91cd\u5b9a\u5411\u56de\u5e94\u7528\u7684\u56de\u8c03\u5730\u5740,\u5e76\u643a\u5e26\u6388\u6743\u7801:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"https://yourapp.com/callback?code=AUTHORIZATION_CODE&state=RANDOM_STRING\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u5e94\u7528\u9700\u8981\u9a8c\u8bc1 ",(0,t.jsx)(n.code,{children:"state"})," \u53c2\u6570\u662f\u5426\u4e0e\u4e4b\u524d\u53d1\u9001\u7684\u4e00\u81f4,\u4ee5\u9632\u6b62 CSRF \u653b\u51fb\u3002"]}),"\n",(0,t.jsx)(n.h4,{id:"\u6b65\u9aa4-5-\u4ea4\u6362\u8bbf\u95ee\u4ee4\u724c",children:"\u6b65\u9aa4 5: \u4ea4\u6362\u8bbf\u95ee\u4ee4\u724c"}),"\n",(0,t.jsx)(n.p,{children:"\u5e94\u7528\u4f7f\u7528\u6388\u6743\u7801\u5411 OAuth \u63d0\u4f9b\u5546\u8bf7\u6c42\u8bbf\u95ee\u4ee4\u724c\u3002"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"GitHub \u793a\u4f8b:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:'POST https://github.com/login/oauth/access_token\nContent-Type: application/json\n\n{\n  "client_id": "YOUR_CLIENT_ID",\n  "client_secret": "YOUR_CLIENT_SECRET",\n  "code": "AUTHORIZATION_CODE",\n  "redirect_uri": "https://yourapp.com/callback"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Google \u793a\u4f8b:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"POST https://oauth2.googleapis.com/token\nContent-Type: application/x-www-form-urlencoded\n\nclient_id=YOUR_CLIENT_ID&\nclient_secret=YOUR_CLIENT_SECRET&\ncode=AUTHORIZATION_CODE&\nredirect_uri=https://yourapp.com/callback&\ngrant_type=authorization_code\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u8fd4\u56de\u8bbf\u95ee\u4ee4\u724c:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "access_token": "ya29.a0AfH6SMBx...",\n  "token_type": "Bearer",\n  "expires_in": 3600,\n  "scope": "openid email profile"\n}\n'})}),"\n",(0,t.jsx)(n.h4,{id:"\u6b65\u9aa4-6-\u4f7f\u7528\u8bbf\u95ee\u4ee4\u724c\u83b7\u53d6\u7528\u6237\u4fe1\u606f",children:"\u6b65\u9aa4 6: \u4f7f\u7528\u8bbf\u95ee\u4ee4\u724c\u83b7\u53d6\u7528\u6237\u4fe1\u606f"}),"\n",(0,t.jsx)(n.p,{children:"\u5e94\u7528\u4f7f\u7528\u8bbf\u95ee\u4ee4\u724c\u8c03\u7528 API \u83b7\u53d6\u7528\u6237\u4fe1\u606f\u3002"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"GitHub \u793a\u4f8b:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"GET https://api.github.com/user\nAuthorization: Bearer gho_16C7e42F292c6912E7710c838347Ae178B4a\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Google \u793a\u4f8b:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"GET https://www.googleapis.com/oauth2/v2/userinfo\nAuthorization: Bearer ya29.a0AfH6SMBx...\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"QQ \u793a\u4f8b:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"GET https://graph.qq.com/user/get_user_info?\n  access_token=YOUR_ACCESS_TOKEN&\n  oauth_consumer_key=YOUR_APP_ID&\n  openid=USER_OPENID\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u8fd4\u56de\u7528\u6237\u4fe1\u606f(\u4e0d\u540c\u5e73\u53f0\u683c\u5f0f\u4e0d\u540c):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "id": "123456",\n  "name": "\u5f20\u4e09",\n  "email": "zhangsan@example.com",\n  "avatar": "https://example.com/avatar.jpg"\n}\n'})}),"\n",(0,t.jsx)(n.h4,{id:"\u6b65\u9aa4-7-\u521b\u5efa\u672c\u5730\u4f1a\u8bdd",children:"\u6b65\u9aa4 7: \u521b\u5efa\u672c\u5730\u4f1a\u8bdd"}),"\n",(0,t.jsx)(n.p,{children:"\u5e94\u7528\u6839\u636e\u83b7\u53d6\u7684\u7528\u6237\u4fe1\u606f\u521b\u5efa\u672c\u5730\u7528\u6237\u4f1a\u8bdd,\u5b8c\u6210\u767b\u5f55\u6d41\u7a0b\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u5b89\u5168\u673a\u5236",children:"\u5b89\u5168\u673a\u5236"}),"\n",(0,t.jsx)(n.h3,{id:"1-state-\u53c2\u6570\u9632-csrf",children:"1. State \u53c2\u6570(\u9632 CSRF)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"state"})," \u53c2\u6570\u662f\u4e00\u4e2a\u968f\u673a\u5b57\u7b26\u4e32,\u7528\u4e8e\u9632\u6b62\u8de8\u7ad9\u8bf7\u6c42\u4f2a\u9020(CSRF)\u653b\u51fb:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u5e94\u7528\u5728\u53d1\u8d77\u6388\u6743\u8bf7\u6c42\u65f6\u751f\u6210\u968f\u673a state"}),"\n",(0,t.jsx)(n.li,{children:"OAuth \u63d0\u4f9b\u5546\u5728\u56de\u8c03\u65f6\u539f\u6837\u8fd4\u56de state"}),"\n",(0,t.jsx)(n.li,{children:"\u5e94\u7528\u9a8c\u8bc1\u8fd4\u56de\u7684 state \u662f\u5426\u4e0e\u53d1\u9001\u7684\u4e00\u81f4"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"2-client-secret\u5ba2\u6237\u7aef\u5bc6\u94a5",children:"2. Client Secret(\u5ba2\u6237\u7aef\u5bc6\u94a5)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"client_secret"})," \u53ea\u5728\u670d\u52a1\u5668\u7aef\u4f7f\u7528,\u6c38\u8fdc\u4e0d\u5e94\u8be5\u66b4\u9732\u7ed9\u5ba2\u6237\u7aef(\u6d4f\u89c8\u5668),\u786e\u4fdd\u53ea\u6709\u5408\u6cd5\u7684\u5e94\u7528\u670d\u52a1\u5668\u624d\u80fd\u4ea4\u6362\u8bbf\u95ee\u4ee4\u724c\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"3-https",children:"3. HTTPS"}),"\n",(0,t.jsx)(n.p,{children:"\u6574\u4e2a\u6d41\u7a0b\u5fc5\u987b\u4f7f\u7528 HTTPS,\u786e\u4fdd\u6570\u636e\u4f20\u8f93\u7684\u5b89\u5168\u6027\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"4-\u77ed\u671f\u6388\u6743\u7801",children:"4. \u77ed\u671f\u6388\u6743\u7801"}),"\n",(0,t.jsx)(n.p,{children:"\u6388\u6743\u7801(code)\u6709\u6548\u671f\u5f88\u77ed(\u901a\u5e38 10 \u5206\u949f),\u4e14\u53ea\u80fd\u4f7f\u7528\u4e00\u6b21,\u964d\u4f4e\u88ab\u7a83\u53d6\u7684\u98ce\u9669\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"5-\u8bbf\u95ee\u4ee4\u724c\u7684\u4f5c\u7528\u57df",children:"5. \u8bbf\u95ee\u4ee4\u724c\u7684\u4f5c\u7528\u57df"}),"\n",(0,t.jsxs)(n.p,{children:["\u901a\u8fc7 ",(0,t.jsx)(n.code,{children:"scope"})," \u53c2\u6570\u9650\u5236\u5e94\u7528\u7684\u8bbf\u95ee\u6743\u9650,\u9075\u5faa\u6700\u5c0f\u6743\u9650\u539f\u5219\u3002"]}),"\n",(0,t.jsx)(n.h2,{id:"\u5e38\u89c1\u5e73\u53f0\u7684-oauth-\u914d\u7f6e",children:"\u5e38\u89c1\u5e73\u53f0\u7684 OAuth \u914d\u7f6e"}),"\n",(0,t.jsx)(n.h3,{id:"github",children:"GitHub"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u6388\u6743\u7aef\u70b9"}),": ",(0,t.jsx)(n.code,{children:"https://github.com/login/oauth/authorize"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u4ee4\u724c\u7aef\u70b9"}),": ",(0,t.jsx)(n.code,{children:"https://github.com/login/oauth/access_token"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u7528\u6237\u4fe1\u606f"}),": ",(0,t.jsx)(n.code,{children:"https://api.github.com/user"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u5e38\u7528 Scope"}),": ",(0,t.jsx)(n.code,{children:"user"}),", ",(0,t.jsx)(n.code,{children:"user:email"}),", ",(0,t.jsx)(n.code,{children:"repo"}),", ",(0,t.jsx)(n.code,{children:"read:org"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"google",children:"Google"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u6388\u6743\u7aef\u70b9"}),": ",(0,t.jsx)(n.code,{children:"https://accounts.google.com/o/oauth2/v2/auth"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u4ee4\u724c\u7aef\u70b9"}),": ",(0,t.jsx)(n.code,{children:"https://oauth2.googleapis.com/token"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u7528\u6237\u4fe1\u606f"}),": ",(0,t.jsx)(n.code,{children:"https://www.googleapis.com/oauth2/v2/userinfo"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u5e38\u7528 Scope"}),": ",(0,t.jsx)(n.code,{children:"openid"}),", ",(0,t.jsx)(n.code,{children:"email"}),", ",(0,t.jsx)(n.code,{children:"profile"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"qq",children:"QQ"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u6388\u6743\u7aef\u70b9"}),": ",(0,t.jsx)(n.code,{children:"https://graph.qq.com/oauth2.0/authorize"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u4ee4\u724c\u7aef\u70b9"}),": ",(0,t.jsx)(n.code,{children:"https://graph.qq.com/oauth2.0/token"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u7528\u6237\u4fe1\u606f"}),": ",(0,t.jsx)(n.code,{children:"https://graph.qq.com/user/get_user_info"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u5e38\u7528 Scope"}),": ",(0,t.jsx)(n.code,{children:"get_user_info"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u5fae\u4fe1",children:"\u5fae\u4fe1"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u6388\u6743\u7aef\u70b9"}),": ",(0,t.jsx)(n.code,{children:"https://open.weixin.qq.com/connect/qrconnect"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u4ee4\u724c\u7aef\u70b9"}),": ",(0,t.jsx)(n.code,{children:"https://api.weixin.qq.com/sns/oauth2/access_token"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u7528\u6237\u4fe1\u606f"}),": ",(0,t.jsx)(n.code,{children:"https://api.weixin.qq.com/sns/userinfo"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u5e38\u7528 Scope"}),": ",(0,t.jsx)(n.code,{children:"snsapi_login"}),", ",(0,t.jsx)(n.code,{children:"snsapi_userinfo"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u652f\u4ed8\u5b9d",children:"\u652f\u4ed8\u5b9d"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u6388\u6743\u7aef\u70b9"}),": ",(0,t.jsx)(n.code,{children:"https://openauth.alipay.com/oauth2/publicAppAuthorize.htm"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u4ee4\u724c\u7aef\u70b9"}),": ",(0,t.jsx)(n.code,{children:"https://openapi.alipay.com/gateway.do"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u7528\u6237\u4fe1\u606f"}),": \u901a\u8fc7 ",(0,t.jsx)(n.code,{children:"alipay.user.info.share"})," \u63a5\u53e3\u83b7\u53d6"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u5e38\u7528 Scope"}),": ",(0,t.jsx)(n.code,{children:"auth_user"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\u4f18\u52bf",children:"\u4f18\u52bf"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u5b89\u5168\u6027\u9ad8"}),": \u7528\u6237\u5bc6\u7801\u4e0d\u4f1a\u6cc4\u9732\u7ed9\u7b2c\u4e09\u65b9\u5e94\u7528"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u7528\u6237\u4f53\u9a8c\u597d"}),": \u7528\u6237\u65e0\u9700\u91cd\u590d\u6ce8\u518c,\u4e00\u952e\u767b\u5f55"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u6743\u9650\u53ef\u63a7"}),": \u7528\u6237\u53ef\u4ee5\u968f\u65f6\u64a4\u9500\u6388\u6743"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u6807\u51c6\u5316"}),": OAuth 2.0 \u662f\u884c\u4e1a\u6807\u51c6,\u88ab\u5e7f\u6cdb\u652f\u6301"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\u6ce8\u610f\u4e8b\u9879",children:"\u6ce8\u610f\u4e8b\u9879"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u56de\u8c03\u5730\u5740\u5fc5\u987b\u5339\u914d"}),": redirect_uri \u5fc5\u987b\u4e0e\u5728\u5e73\u53f0\u6ce8\u518c\u65f6\u586b\u5199\u7684\u5b8c\u5168\u4e00\u81f4"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u4fdd\u62a4 Client Secret"}),": \u7edd\u4e0d\u80fd\u5728\u524d\u7aef\u4ee3\u7801\u4e2d\u66b4\u9732"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u9a8c\u8bc1 State"}),": \u5fc5\u987b\u9a8c\u8bc1 state \u53c2\u6570\u9632\u6b62 CSRF \u653b\u51fb"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u4ee4\u724c\u5b58\u50a8"}),": \u8bbf\u95ee\u4ee4\u724c\u5e94\u5b89\u5168\u5b58\u50a8,\u4e0d\u8981\u66b4\u9732\u7ed9\u5ba2\u6237\u7aef"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u4ee4\u724c\u5237\u65b0"}),": \u8bbf\u95ee\u4ee4\u724c\u53ef\u80fd\u4f1a\u8fc7\u671f,\u9700\u8981\u5b9e\u73b0\u5237\u65b0\u673a\u5236"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u5e73\u53f0\u5dee\u5f02"}),": \u4e0d\u540c\u5e73\u53f0\u7684 OAuth \u5b9e\u73b0\u7ec6\u8282\u53ef\u80fd\u6709\u5dee\u5f02,\u9700\u8981\u67e5\u9605\u5404\u5e73\u53f0\u7684\u5b98\u65b9\u6587\u6863"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"python-\u5b9e\u73b0\u793a\u4f8bflask",children:"Python \u5b9e\u73b0\u793a\u4f8b(Flask)"}),"\n",(0,t.jsx)(n.p,{children:"\u4ee5\u4e0b\u662f\u4f7f\u7528 Flask \u5b9e\u73b0 GitHub OAuth \u767b\u5f55\u7684\u5b8c\u6574\u793a\u4f8b\u4ee3\u7801:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"\"\"\"\nOAuth 2.0 \u7b2c\u4e09\u65b9\u767b\u5f55\u793a\u4f8b - \u4ee5 GitHub \u4e3a\u4f8b\n\u5176\u4ed6\u5e73\u53f0(Google\u3001QQ\u3001\u5fae\u4fe1\u7b49)\u7684\u5b9e\u73b0\u6d41\u7a0b\u7c7b\u4f3c,\u53ea\u9700\u4fee\u6539\u76f8\u5e94\u7684 URL \u548c\u53c2\u6570\n\"\"\"\n\nimport os\nimport secrets\nfrom flask import Flask, redirect, request, session, jsonify\nimport requests\n\napp = Flask(__name__)\napp.secret_key = os.getenv('FLASK_SECRET_KEY', secrets.token_hex(32))\n\n# OAuth \u914d\u7f6e(\u4ee5 GitHub \u4e3a\u4f8b)\nOAUTH_CONFIG = {\n    'client_id': os.getenv('GITHUB_CLIENT_ID'),\n    'client_secret': os.getenv('GITHUB_CLIENT_SECRET'),\n    'authorize_url': 'https://github.com/login/oauth/authorize',\n    'token_url': 'https://github.com/login/oauth/access_token',\n    'user_info_url': 'https://api.github.com/user',\n    'redirect_uri': 'http://localhost:5000/callback',\n    'scope': 'user:email'\n}\n\n@app.route('/')\ndef index():\n    \"\"\"\u9996\u9875\"\"\"\n    user = session.get('user')\n    if user:\n        return f\"\"\"\n        <h1>\u6b22\u8fce, {user['name']}!</h1>\n        <img src=\"{user['avatar_url']}\" width=\"100\" />\n        <p>\u7528\u6237\u540d: {user['login']}</p>\n        <p>\u90ae\u7bb1: {user.get('email', '\u672a\u516c\u5f00')}</p>\n        <a href=\"/logout\">\u9000\u51fa\u767b\u5f55</a>\n        \"\"\"\n    return '<h1>OAuth 2.0 \u767b\u5f55\u793a\u4f8b</h1><a href=\"/login\">\u4f7f\u7528 GitHub \u767b\u5f55</a>'\n\n@app.route('/login')\ndef login():\n    \"\"\"\u6b65\u9aa4 1-2: \u91cd\u5b9a\u5411\u5230 OAuth \u6388\u6743\u9875\u9762\"\"\"\n    # \u751f\u6210\u968f\u673a state \u9632\u6b62 CSRF \u653b\u51fb\n    state = secrets.token_urlsafe(32)\n    session['oauth_state'] = state\n\n    # \u6784\u5efa\u6388\u6743 URL\n    params = {\n        'client_id': OAUTH_CONFIG['client_id'],\n        'redirect_uri': OAUTH_CONFIG['redirect_uri'],\n        'scope': OAUTH_CONFIG['scope'],\n        'state': state\n    }\n    auth_url = f\"{OAUTH_CONFIG['authorize_url']}?{'&'.join([f'{k}={v}' for k, v in params.items()])}\"\n    return redirect(auth_url)\n\n@app.route('/callback')\ndef callback():\n    \"\"\"\u6b65\u9aa4 4-7: \u5904\u7406\u56de\u8c03,\u4ea4\u6362\u4ee4\u724c,\u83b7\u53d6\u7528\u6237\u4fe1\u606f\"\"\"\n    # \u83b7\u53d6\u56de\u8c03\u53c2\u6570\n    code = request.args.get('code')\n    state = request.args.get('state')\n\n    # \u9a8c\u8bc1 state \u53c2\u6570\n    if not state or state != session.get('oauth_state'):\n        return \"State \u9a8c\u8bc1\u5931\u8d25\", 400\n\n    session.pop('oauth_state', None)\n\n    if not code:\n        return \"\u7f3a\u5c11\u6388\u6743\u7801\", 400\n\n    # \u6b65\u9aa4 5: \u4ea4\u6362\u8bbf\u95ee\u4ee4\u724c\n    token_data = {\n        'client_id': OAUTH_CONFIG['client_id'],\n        'client_secret': OAUTH_CONFIG['client_secret'],\n        'code': code,\n        'redirect_uri': OAUTH_CONFIG['redirect_uri']\n    }\n\n    token_response = requests.post(\n        OAUTH_CONFIG['token_url'],\n        data=token_data,\n        headers={'Accept': 'application/json'}\n    )\n\n    if token_response.status_code != 200:\n        return f\"\u83b7\u53d6\u4ee4\u724c\u5931\u8d25: {token_response.text}\", 500\n\n    access_token = token_response.json().get('access_token')\n    if not access_token:\n        return \"\u83b7\u53d6\u4ee4\u724c\u5931\u8d25\", 500\n\n    # \u6b65\u9aa4 6: \u83b7\u53d6\u7528\u6237\u4fe1\u606f\n    user_response = requests.get(\n        OAUTH_CONFIG['user_info_url'],\n        headers={'Authorization': f'Bearer {access_token}'}\n    )\n\n    if user_response.status_code != 200:\n        return \"\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25\", 500\n\n    user_data = user_response.json()\n\n    # \u6b65\u9aa4 7: \u521b\u5efa\u4f1a\u8bdd\n    session['user'] = {\n        'id': user_data['id'],\n        'login': user_data['login'],\n        'name': user_data.get('name', user_data['login']),\n        'email': user_data.get('email'),\n        'avatar_url': user_data['avatar_url']\n    }\n\n    return redirect('/')\n\n@app.route('/logout')\ndef logout():\n    \"\"\"\u9000\u51fa\u767b\u5f55\"\"\"\n    session.clear()\n    return redirect('/')\n\nif __name__ == '__main__':\n    app.run(debug=True, port=5000)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u4f7f\u7528\u8bf4\u660e",children:"\u4f7f\u7528\u8bf4\u660e"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u6ce8\u518c OAuth \u5e94\u7528"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["GitHub: ",(0,t.jsx)(n.a,{href:"https://github.com/settings/developers",children:"https://github.com/settings/developers"})]}),"\n",(0,t.jsxs)(n.li,{children:["Google: ",(0,t.jsx)(n.a,{href:"https://console.cloud.google.com/",children:"https://console.cloud.google.com/"})]}),"\n",(0,t.jsxs)(n.li,{children:["QQ: ",(0,t.jsx)(n.a,{href:"https://connect.qq.com/",children:"https://connect.qq.com/"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"export GITHUB_CLIENT_ID=your_client_id\nexport GITHUB_CLIENT_SECRET=your_client_secret\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u5b89\u88c5\u4f9d\u8d56"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pip install flask requests\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u8fd0\u884c\u5e94\u7528"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"python app.py\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u9002\u914d\u5176\u4ed6\u5e73\u53f0",children:"\u9002\u914d\u5176\u4ed6\u5e73\u53f0"}),"\n",(0,t.jsxs)(n.p,{children:["\u8981\u9002\u914d\u5176\u4ed6 OAuth \u63d0\u4f9b\u5546,\u53ea\u9700\u4fee\u6539 ",(0,t.jsx)(n.code,{children:"OAUTH_CONFIG"})," \u4e2d\u7684 URL \u548c\u53c2\u6570:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"# Google \u914d\u7f6e\u793a\u4f8b\nOAUTH_CONFIG = {\n    'client_id': os.getenv('GOOGLE_CLIENT_ID'),\n    'client_secret': os.getenv('GOOGLE_CLIENT_SECRET'),\n    'authorize_url': 'https://accounts.google.com/o/oauth2/v2/auth',\n    'token_url': 'https://oauth2.googleapis.com/token',\n    'user_info_url': 'https://www.googleapis.com/oauth2/v2/userinfo',\n    'redirect_uri': 'http://localhost:5000/callback',\n    'scope': 'openid email profile'\n}\n\n# QQ \u914d\u7f6e\u793a\u4f8b\nOAUTH_CONFIG = {\n    'client_id': os.getenv('QQ_APP_ID'),\n    'client_secret': os.getenv('QQ_APP_KEY'),\n    'authorize_url': 'https://graph.qq.com/oauth2.0/authorize',\n    'token_url': 'https://graph.qq.com/oauth2.0/token',\n    'user_info_url': 'https://graph.qq.com/user/get_user_info',\n    'redirect_uri': 'http://localhost:5000/callback',\n    'scope': 'get_user_info'\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u53c2\u8003\u8d44\u6599",children:"\u53c2\u8003\u8d44\u6599"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://tools.ietf.org/html/rfc6749",children:"OAuth 2.0 RFC 6749"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://auth0.com/docs/get-started/authentication-and-authorization-flow/authorization-code-flow",children:"OAuth 2.0 \u6388\u6743\u7801\u6d41\u7a0b"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/authorizing-oauth-apps",children:"GitHub OAuth Apps \u5b98\u65b9\u6587\u6863"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://developers.google.com/identity/protocols/oauth2",children:"Google OAuth 2.0 \u6587\u6863"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://wiki.connect.qq.com/",children:"QQ \u4e92\u8054\u6587\u6863"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://developers.weixin.qq.com/doc/oplatform/Website_App/WeChat_Login/Wechat_Login.html",children:"\u5fae\u4fe1\u5f00\u653e\u5e73\u53f0\u6587\u6863"})}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);