"use strict";(self.webpackChunknotes_3=self.webpackChunknotes_3||[]).push([[81701],{26662:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"AI/\u63d0\u793a\u8bcd\u5de5\u7a0b/DSPy/\u5b66\u4e60/\u7f16\u7a0b/\u7b7e\u540d","title":"\u7b7e\u540d","description":"\u5f53\u6211\u4eec\u5728 DSPy \u4e2d\u4e3a LM \u5206\u914d\u4efb\u52a1\u65f6\uff0c\u6211\u4eec\u4ee5\u7b7e\u540d (Signature) \u7684\u5f62\u5f0f\u6307\u5b9a\u6211\u4eec\u9700\u8981\u7684\u884c\u4e3a\u3002","source":"@site/docs/AI/\u63d0\u793a\u8bcd\u5de5\u7a0b/DSPy/\u5b66\u4e60/\u7f16\u7a0b/\u7b7e\u540d.md","sourceDirName":"AI/\u63d0\u793a\u8bcd\u5de5\u7a0b/DSPy/\u5b66\u4e60/\u7f16\u7a0b","slug":"/AI/\u63d0\u793a\u8bcd\u5de5\u7a0b/DSPy/\u5b66\u4e60/\u7f16\u7a0b/\u7b7e\u540d","permalink":"/notes3/docs/AI/\u63d0\u793a\u8bcd\u5de5\u7a0b/DSPy/\u5b66\u4e60/\u7f16\u7a0b/\u7b7e\u540d","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/AI/\u63d0\u793a\u8bcd\u5de5\u7a0b/DSPy/\u5b66\u4e60/\u7f16\u7a0b/\u7b7e\u540d.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"ai","previous":{"title":"\u6a21\u578b","permalink":"/notes3/docs/AI/\u63d0\u793a\u8bcd\u5de5\u7a0b/DSPy/\u5b66\u4e60/\u7f16\u7a0b/\u6a21\u578b"},"next":{"title":"mcp","permalink":"/notes3/docs/AI/\u63d0\u793a\u8bcd\u5de5\u7a0b/DSPy/\u5b66\u4e60/\u7f16\u7a0b/mcp"}}');var r=s(23420),i=s(54213);const c={sidebar_position:2},d=void 0,l={},o=[{value:"\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528 DSPy \u7b7e\u540d\uff1f",id:"\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528-dspy-\u7b7e\u540d",level:2},{value:"<strong>\u5185\u8054</strong> DSPy \u7b7e\u540d",id:"\u5185\u8054-dspy-\u7b7e\u540d",level:2},{value:"\u793a\u4f8b A: \u60c5\u611f\u5206\u7c7b",id:"\u793a\u4f8b-a-\u60c5\u611f\u5206\u7c7b",level:3},{value:"\u793a\u4f8b B: \u6458\u8981",id:"\u793a\u4f8b-b-\u6458\u8981",level:3},{value:"<strong>\u57fa\u4e8e\u7c7b</strong>\u7684 DSPy \u7b7e\u540d",id:"\u57fa\u4e8e\u7c7b\u7684-dspy-\u7b7e\u540d",level:2},{value:"\u793a\u4f8b C: \u5206\u7c7b",id:"\u793a\u4f8b-c-\u5206\u7c7b",level:3},{value:"\u793a\u4f8b D: \u8bc4\u4f30\u5f15\u7528\u5fe0\u5b9e\u5ea6\u7684\u6307\u6807",id:"\u793a\u4f8b-d-\u8bc4\u4f30\u5f15\u7528\u5fe0\u5b9e\u5ea6\u7684\u6307\u6807",level:3},{value:"\u793a\u4f8b E: \u591a\u6a21\u6001\u56fe\u50cf\u5206\u7c7b",id:"\u793a\u4f8b-e-\u591a\u6a21\u6001\u56fe\u50cf\u5206\u7c7b",level:3},{value:"\u7b7e\u540d\u4e2d\u7684\u7c7b\u578b\u89e3\u6790",id:"\u7b7e\u540d\u4e2d\u7684\u7c7b\u578b\u89e3\u6790",level:2},{value:"\u4f7f\u7528\u81ea\u5b9a\u4e49\u7c7b\u578b",id:"\u4f7f\u7528\u81ea\u5b9a\u4e49\u7c7b\u578b",level:3},{value:"\u4f7f\u7528\u7b7e\u540d\u6784\u5efa\u6a21\u5757\u5e76\u7f16\u8bd1\u5b83\u4eec",id:"\u4f7f\u7528\u7b7e\u540d\u6784\u5efa\u6a21\u5757\u5e76\u7f16\u8bd1\u5b83\u4eec",level:2}];function a(e){const n={code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"\u5f53\u6211\u4eec\u5728 DSPy \u4e2d\u4e3a LM \u5206\u914d\u4efb\u52a1\u65f6\uff0c\u6211\u4eec\u4ee5\u7b7e\u540d (Signature) \u7684\u5f62\u5f0f\u6307\u5b9a\u6211\u4eec\u9700\u8981\u7684\u884c\u4e3a\u3002"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u7b7e\u540d\u662f DSPy \u6a21\u5757\u8f93\u5165/\u8f93\u51fa\u884c\u4e3a\u7684\u58f0\u660e\u6027\u89c4\u8303\u3002"})," \u7b7e\u540d\u5141\u8bb8\u4f60\u544a\u8bc9 LM ",(0,r.jsx)(n.em,{children:"\u505a\u4ec0\u4e48"}),"\uff0c\u800c\u4e0d\u662f\u6307\u5b9a\u6211\u4eec\u5e94\u8be5",(0,r.jsx)(n.em,{children:"\u5982\u4f55"}),"\u8981\u6c42 LM \u53bb\u505a\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u4f60\u53ef\u80fd\u719f\u6089\u51fd\u6570\u7b7e\u540d\uff0c\u5b83\u6307\u5b9a\u4e86\u8f93\u5165\u548c\u8f93\u51fa\u53c2\u6570\u53ca\u5176\u7c7b\u578b\u3002DSPy \u7b7e\u540d\u7c7b\u4f3c\uff0c\u4f46\u6709\u4e00\u4e9b\u533a\u522b\u3002\u5178\u578b\u7684\u51fd\u6570\u7b7e\u540d\u53ea\u662f ",(0,r.jsx)(n.em,{children:"\u63cf\u8ff0"})," \u4e8b\u7269\uff0c\u800c DSPy \u7b7e\u540d ",(0,r.jsx)(n.em,{children:"\u58f0\u660e\u5e76\u521d\u59cb\u5316"})," \u6a21\u5757\u7684\u884c\u4e3a\u3002\u6b64\u5916\uff0c\u5b57\u6bb5\u540d\u79f0\u5728 DSPy \u7b7e\u540d\u4e2d\u5f88\u91cd\u8981\u3002\u4f60\u7528\u7b80\u5355\u7684\u82f1\u8bed\u8868\u8fbe\u8bed\u4e49\u89d2\u8272\uff1a",(0,r.jsx)(n.code,{children:"question"}),"\uff08\u95ee\u9898\uff09\u4e0d\u540c\u4e8e ",(0,r.jsx)(n.code,{children:"answer"}),"\uff08\u7b54\u6848\uff09\uff0c",(0,r.jsx)(n.code,{children:"sql_query"}),"\uff08SQL \u67e5\u8be2\uff09\u4e0d\u540c\u4e8e ",(0,r.jsx)(n.code,{children:"python_code"}),"\uff08Python \u4ee3\u7801\uff09\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528-dspy-\u7b7e\u540d",children:"\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528 DSPy \u7b7e\u540d\uff1f"}),"\n",(0,r.jsx)(n.p,{children:"\u4e3a\u4e86\u6a21\u5757\u5316\u548c\u6574\u6d01\u7684\u4ee3\u7801\uff0c\u5176\u4e2d LM \u8c03\u7528\u53ef\u4ee5\u88ab\u4f18\u5316\u4e3a\u9ad8\u8d28\u91cf\u7684\u63d0\u793a\uff08\u6216\u81ea\u52a8\u5fae\u8c03\uff09\u3002\u5927\u591a\u6570\u4eba\u901a\u8fc7\u7f16\u5199\u957f\u800c\u8106\u5f31\u7684\u63d0\u793a\u6765\u5f3a\u5236 LM \u6267\u884c\u4efb\u52a1\u3002\u6216\u8005\u901a\u8fc7\u6536\u96c6/\u751f\u6210\u6570\u636e\u8fdb\u884c\u5fae\u8c03\u3002\u7f16\u5199\u7b7e\u540d\u6bd4\u7f16\u5199\u63d0\u793a\u6216\u5fae\u8c03\u66f4\u6a21\u5757\u5316\u3001\u66f4\u5177\u9002\u5e94\u6027\u548c\u53ef\u91cd\u73b0\u6027\u3002DSPy \u7f16\u8bd1\u5668\u4f1a\u627e\u51fa\u5982\u4f55\u4e3a\u4f60\u7684 LM\uff08\u6216\u5fae\u8c03\u4f60\u7684\u5c0f LM\uff09\u9488\u5bf9\u4f60\u7684\u7b7e\u540d\u3001\u5728\u4f60\u7684\u6570\u636e\u4e0a\u3001\u5728\u4f60\u7684\u7ba1\u9053\u5185\u6784\u5efa\u9ad8\u5ea6\u4f18\u5316\u7684\u63d0\u793a\u3002\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53d1\u73b0\u7f16\u8bd1\u4ea7\u751f\u7684\u63d0\u793a\u6bd4\u4eba\u7c7b\u7f16\u5199\u7684\u66f4\u597d\u3002\u8fd9\u5e76\u4e0d\u662f\u56e0\u4e3a DSPy \u4f18\u5316\u5668\u6bd4\u4eba\u7c7b\u66f4\u6709\u521b\u9020\u529b\uff0c\u800c\u4ec5\u4ec5\u662f\u56e0\u4e3a\u5b83\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u66f4\u591a\u7684\u4e8b\u60c5\u5e76\u76f4\u63a5\u8c03\u6574\u6307\u6807\u3002"}),"\n",(0,r.jsxs)(n.h2,{id:"\u5185\u8054-dspy-\u7b7e\u540d",children:[(0,r.jsx)(n.strong,{children:"\u5185\u8054"})," DSPy \u7b7e\u540d"]}),"\n",(0,r.jsx)(n.p,{children:"\u7b7e\u540d\u53ef\u4ee5\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u77ed\u5b57\u7b26\u4e32\uff0c\u5e26\u6709\u53c2\u6570\u540d\u79f0\u548c\u53ef\u9009\u7c7b\u578b\uff0c\u5b9a\u4e49\u8f93\u5165/\u8f93\u51fa\u7684\u8bed\u4e49\u89d2\u8272\u3002"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u95ee\u7b54\uff1a",(0,r.jsx)(n.code,{children:'"question -> answer"'}),"\uff0c\u8fd9\u7b49\u540c\u4e8e ",(0,r.jsx)(n.code,{children:'"question: str -> answer: str"'}),"\uff0c\u56e0\u4e3a\u9ed8\u8ba4\u7c7b\u578b\u603b\u662f ",(0,r.jsx)(n.code,{children:"str"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u60c5\u611f\u5206\u7c7b\uff1a",(0,r.jsx)(n.code,{children:'"sentence -> sentiment: bool"'}),"\uff0c\u4f8b\u5982\u5982\u679c\u662f\u79ef\u6781\u7684\u5219\u4e3a ",(0,r.jsx)(n.code,{children:"True"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u6458\u8981\uff1a",(0,r.jsx)(n.code,{children:'"document -> summary"'})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u4f60\u7684\u7b7e\u540d\u4e5f\u53ef\u4ee5\u6709\u591a\u4e2a\u5e26\u7c7b\u578b\u7684\u8f93\u5165/\u8f93\u51fa\u5b57\u6bb5\uff1a"}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u68c0\u7d22\u589e\u5f3a\u95ee\u7b54\uff1a",(0,r.jsx)(n.code,{children:'"context: list[str], question: str -> answer: str"'})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u5e26\u63a8\u7406\u7684\u591a\u9879\u9009\u62e9\u95ee\u7b54\uff1a",(0,r.jsx)(n.code,{children:'"question, choices: list[str] -> reasoning: str, selection: int"'})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u63d0\u793a\uff1a"})," \u5bf9\u4e8e\u5b57\u6bb5\uff0c\u4efb\u4f55\u6709\u6548\u7684\u53d8\u91cf\u540d\u90fd\u53ef\u4ee5\uff01\u5b57\u6bb5\u540d\u5e94\u8be5\u5177\u6709\u8bed\u4e49\u610f\u4e49\uff0c\u4f46\u4ece\u7b80\u5355\u7684\u5f00\u59cb\uff0c\u4e0d\u8981\u8fc7\u65e9\u4f18\u5316\u5173\u952e\u8bcd\uff01\u628a\u8fd9\u79cd\u9ed1\u5ba2\u884c\u4e3a\u7559\u7ed9 DSPy \u7f16\u8bd1\u5668\u3002\u4f8b\u5982\uff0c\u5bf9\u4e8e\u6458\u8981\uff0c\u8bf4 ",(0,r.jsx)(n.code,{children:'"document -> summary"'}),"\u3001",(0,r.jsx)(n.code,{children:'"text -> gist"'})," \u6216 ",(0,r.jsx)(n.code,{children:'"long_context -> tldr"'})," \u53ef\u80fd\u90fd\u662f\u53ef\u4ee5\u7684\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u4f60\u8fd8\u53ef\u4ee5\u5411\u5185\u8054\u7b7e\u540d\u6dfb\u52a0\u6307\u4ee4\uff0c\u8fd9\u4e9b\u6307\u4ee4\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u4f7f\u7528\u53d8\u91cf\u3002\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"instructions"})," \u5173\u952e\u5b57\u53c2\u6570\u5411\u4f60\u7684\u7b7e\u540d\u6dfb\u52a0\u6307\u4ee4\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'toxicity = dspy.Predict(\n    dspy.Signature(\n        "comment -> toxic: bool",\n        instructions="Mark as \'toxic\' if the comment includes insults, harassment, or sarcastic derogatory remarks.",\n    )\n)\ncomment = "you are beautiful."\ntoxicity(comment=comment).toxic\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u8f93\u51fa:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"False\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u793a\u4f8b-a-\u60c5\u611f\u5206\u7c7b",children:"\u793a\u4f8b A: \u60c5\u611f\u5206\u7c7b"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"sentence = \"it's a charming and often affecting journey.\"  # \u6765\u81ea SST-2 \u6570\u636e\u96c6\u7684\u793a\u4f8b\u3002\n\nclassify = dspy.Predict('sentence -> sentiment: bool')  # \u6211\u4eec\u7a0d\u540e\u4f1a\u770b\u5230\u4e00\u4e2a\u5e26\u6709 Literal[] \u7684\u4f8b\u5b50\nclassify(sentence=sentence).sentiment\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u8f93\u51fa:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"True\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u793a\u4f8b-b-\u6458\u8981",children:"\u793a\u4f8b B: \u6458\u8981"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# \u6765\u81ea XSum \u6570\u636e\u96c6\u7684\u793a\u4f8b\u3002\ndocument = """The 21-year-old made seven appearances for the Hammers and netted his only goal for them in a Europa League qualification round match against Andorran side FC Lustrains last season. Lee had two loan spells in League One last term, with Blackpool and then Colchester United. He scored twice for the U\'s but was unable to save them from relegation. The length of Lee\'s contract with the promoted Tykes has not been revealed. Find all the latest football transfers on our dedicated page."""\n\nsummarize = dspy.ChainOfThought(\'document -> summary\')\nresponse = summarize(document=document)\n\nprint(response.summary)\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u53ef\u80fd\u7684\u8f93\u51fa:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"The 21-year-old Lee made seven appearances and scored one goal for West Ham last season. He had loan spells in League One with Blackpool and Colchester United, scoring twice for the latter. He has now signed a contract with Barnsley, but the length of the contract has not been revealed.\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u8bb8\u591a DSPy \u6a21\u5757\uff08",(0,r.jsx)(n.code,{children:"dspy.Predict"})," \u9664\u5916\uff09\u901a\u8fc7\u5728\u5e55\u540e\u6269\u5c55\u4f60\u7684\u7b7e\u540d\u6765\u8fd4\u56de\u8f85\u52a9\u4fe1\u606f\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u4f8b\u5982\uff0c",(0,r.jsx)(n.code,{children:"dspy.ChainOfThought"})," \u8fd8\u5728\u751f\u6210\u8f93\u51fa ",(0,r.jsx)(n.code,{children:"summary"})," \u4e4b\u524d\u6dfb\u52a0\u4e86\u4e00\u4e2a ",(0,r.jsx)(n.code,{children:"reasoning"})," \u5b57\u6bb5\uff0c\u5176\u4e2d\u5305\u542b LM \u7684\u63a8\u7406\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'print("Reasoning:", response.reasoning)\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u53ef\u80fd\u7684\u8f93\u51fa:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"Reasoning: We need to highlight Lee's performance for West Ham, his loan spells in League One, and his new contract with Barnsley. We also need to mention that his contract length has not been disclosed.\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"\u57fa\u4e8e\u7c7b\u7684-dspy-\u7b7e\u540d",children:[(0,r.jsx)(n.strong,{children:"\u57fa\u4e8e\u7c7b"}),"\u7684 DSPy \u7b7e\u540d"]}),"\n",(0,r.jsx)(n.p,{children:"\u5bf9\u4e8e\u67d0\u4e9b\u9ad8\u7ea7\u4efb\u52a1\uff0c\u4f60\u9700\u8981\u66f4\u8be6\u7ec6\u7684\u7b7e\u540d\u3002\u8fd9\u901a\u5e38\u662f\u4e3a\u4e86\uff1a"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u6f84\u6e05\u4efb\u52a1\u6027\u8d28\u7684\u67d0\u4e9b\u65b9\u9762\uff08\u5728\u4e0b\u9762\u8868\u793a\u4e3a ",(0,r.jsx)(n.code,{children:"docstring"}),"\uff09\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u63d0\u4f9b\u5173\u4e8e\u8f93\u5165\u5b57\u6bb5\u6027\u8d28\u7684\u63d0\u793a\uff0c\u8868\u793a\u4e3a ",(0,r.jsx)(n.code,{children:"dspy.InputField"})," \u7684 ",(0,r.jsx)(n.code,{children:"desc"})," \u5173\u952e\u5b57\u53c2\u6570\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u63d0\u4f9b\u5bf9\u8f93\u51fa\u5b57\u6bb5\u7684\u7ea6\u675f\uff0c\u8868\u793a\u4e3a ",(0,r.jsx)(n.code,{children:"dspy.OutputField"})," \u7684 ",(0,r.jsx)(n.code,{children:"desc"})," \u5173\u952e\u5b57\u53c2\u6570\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u793a\u4f8b-c-\u5206\u7c7b",children:"\u793a\u4f8b C: \u5206\u7c7b"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from typing import Literal\n\nclass Emotion(dspy.Signature):\n    \"\"\"Classify emotion.\"\"\"\n    \n    sentence: str = dspy.InputField()\n    sentiment: Literal['sadness', 'joy', 'love', 'anger', 'fear', 'surprise'] = dspy.OutputField()\n\nsentence = \"i started feeling a little vulnerable when the giant spotlight started blinding me\"  # \u6765\u81ea dair-ai/emotion\n\nclassify = dspy.Predict(Emotion)\nclassify(sentence=sentence)\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u53ef\u80fd\u7684\u8f93\u51fa:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"Prediction(\n    sentiment='fear'\n)\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u63d0\u793a\uff1a"})," \u66f4\u6e05\u695a\u5730\u5411 LM \u6307\u5b9a\u4f60\u7684\u8bf7\u6c42\u6ca1\u6709\u4efb\u4f55\u95ee\u9898\u3002\u57fa\u4e8e\u7c7b\u7684\u7b7e\u540d\u53ef\u4ee5\u5e2e\u52a9\u4f60\u505a\u5230\u8fd9\u4e00\u70b9\u3002\u4f46\u662f\uff0c\u4e0d\u8981\u8fc7\u65e9\u5730\u624b\u52a8\u8c03\u6574\u7b7e\u540d\u7684\u5173\u952e\u8bcd\u3002DSPy \u4f18\u5316\u5668\u53ef\u80fd\u4f1a\u505a\u5f97\u66f4\u597d\uff08\u5e76\u4e14\u5c06\u5728 LM \u4e4b\u95f4\u66f4\u597d\u5730\u8fc1\u79fb\uff09\u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"\u793a\u4f8b-d-\u8bc4\u4f30\u5f15\u7528\u5fe0\u5b9e\u5ea6\u7684\u6307\u6807",children:"\u793a\u4f8b D: \u8bc4\u4f30\u5f15\u7528\u5fe0\u5b9e\u5ea6\u7684\u6307\u6807"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'class CheckCitationFaithfulness(dspy.Signature):\n    """Verify that the text is based on the provided context."""\n\n    context: str = dspy.InputField(desc="facts here are assumed to be true")\n    text: str = dspy.InputField()\n    faithfulness: bool = dspy.OutputField()\n    evidence: dict[str, list[str]] = dspy.OutputField(desc="Supporting evidence for claims")\n\ncontext = "The 21-year-old made seven appearances for the Hammers and netted his only goal for them in a Europa League qualification round match against Andorran side FC Lustrains last season. Lee had two loan spells in League One last term, with Blackpool and then Colchester United. He scored twice for the U\'s but was unable to save them from relegation. The length of Lee\'s contract with the promoted Tykes has not been revealed. Find all the latest football transfers on our dedicated page."\n\ntext = "Lee scored 3 goals for Colchester United."\n\nfaithfulness = dspy.ChainOfThought(CheckCitationFaithfulness)\nfaithfulness(context=context, text=text)\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u53ef\u80fd\u7684\u8f93\u51fa:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"Prediction(\n    reasoning=\"Let's check the claims against the context. The text states Lee scored 3 goals for Colchester United, but the context clearly states 'He scored twice for the U's'. This is a direct contradiction.\",\n    faithfulness=False,\n    evidence={'goal_count': [\"scored twice for the U's\"]}\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u793a\u4f8b-e-\u591a\u6a21\u6001\u56fe\u50cf\u5206\u7c7b",children:"\u793a\u4f8b E: \u591a\u6a21\u6001\u56fe\u50cf\u5206\u7c7b"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'class DogPictureSignature(dspy.Signature):\n    """Output the dog breed of the dog in the image."""\n    image_1: dspy.Image = dspy.InputField(desc="An image of a dog")\n    answer: str = dspy.OutputField(desc="The dog breed of the dog in the image")\n\nimage_url = "https://picsum.photos/id/237/200/300"\nclassify = dspy.Predict(DogPictureSignature)\nclassify(image_1=dspy.Image.from_url(image_url))\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u53ef\u80fd\u7684\u8f93\u51fa:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"Prediction(\n    answer='Labrador Retriever'\n)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u7b7e\u540d\u4e2d\u7684\u7c7b\u578b\u89e3\u6790",children:"\u7b7e\u540d\u4e2d\u7684\u7c7b\u578b\u89e3\u6790"}),"\n",(0,r.jsx)(n.p,{children:"DSPy \u7b7e\u540d\u652f\u6301\u5404\u79cd\u6ce8\u91ca\u7c7b\u578b\uff1a"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u57fa\u672c\u7c7b\u578b"})," \u5982 ",(0,r.jsx)(n.code,{children:"str"}),", ",(0,r.jsx)(n.code,{children:"int"}),", ",(0,r.jsx)(n.code,{children:"bool"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Typing \u6a21\u5757\u7c7b\u578b"})," \u5982 ",(0,r.jsx)(n.code,{children:"list[str]"}),", ",(0,r.jsx)(n.code,{children:"dict[str, int]"}),", ",(0,r.jsx)(n.code,{children:"Optional[float]"}),", ",(0,r.jsx)(n.code,{children:"Union[str, int]"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u81ea\u5b9a\u4e49\u7c7b\u578b"})," \u5728\u4f60\u7684\u4ee3\u7801\u4e2d\u5b9a\u4e49"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u70b9\u7b26\u53f7"})," \u7528\u4e8e\u5177\u6709\u9002\u5f53\u914d\u7f6e\u7684\u5d4c\u5957\u7c7b\u578b"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u7279\u6b8a\u6570\u636e\u7c7b\u578b"})," \u5982 ",(0,r.jsx)(n.code,{children:"dspy.Image, dspy.History"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u4f7f\u7528\u81ea\u5b9a\u4e49\u7c7b\u578b",children:"\u4f7f\u7528\u81ea\u5b9a\u4e49\u7c7b\u578b"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# \u7b80\u5355\u7684\u81ea\u5b9a\u4e49\u7c7b\u578b\nclass QueryResult(pydantic.BaseModel):\n    text: str\n    score: float\n\nsignature = dspy.Signature("query: str -> result: QueryResult")\n\nclass MyContainer:\n    class Query(pydantic.BaseModel):\n        text: str\n    class Score(pydantic.BaseModel):\n        score: float\n\nsignature = dspy.Signature("query: MyContainer.Query -> score: MyContainer.Score")\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u4f7f\u7528\u7b7e\u540d\u6784\u5efa\u6a21\u5757\u5e76\u7f16\u8bd1\u5b83\u4eec",children:"\u4f7f\u7528\u7b7e\u540d\u6784\u5efa\u6a21\u5757\u5e76\u7f16\u8bd1\u5b83\u4eec"}),"\n",(0,r.jsx)(n.p,{children:"\u867d\u7136\u7b7e\u540d\u5bf9\u4e8e\u4f7f\u7528\u7ed3\u6784\u5316\u8f93\u5165/\u8f93\u51fa\u8fdb\u884c\u539f\u578b\u8bbe\u8ba1\u5f88\u65b9\u4fbf\uff0c\u4f46\u8fd9\u5e76\u4e0d\u662f\u4f7f\u7528\u5b83\u4eec\u7684\u552f\u4e00\u539f\u56e0\uff01"}),"\n",(0,r.jsx)(n.p,{children:"\u4f60\u5e94\u8be5\u5c06\u591a\u4e2a\u7b7e\u540d\u7ec4\u5408\u6210\u66f4\u5927\u7684 DSPy \u6a21\u5757\uff0c\u5e76\u5c06\u8fd9\u4e9b\u6a21\u5757\u7f16\u8bd1\u4e3a\u4f18\u5316\u7684\u63d0\u793a\u548c\u5fae\u8c03\u3002"})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},54213:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>d});var t=s(36672);const r={},i=t.createContext(r);function c(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);