"use strict";(self.webpackChunknotes_3=self.webpackChunknotes_3||[]).push([[7649],{6773:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>s,metadata:()=>l,toc:()=>i});const l=JSON.parse('{"id":"JVM/Libraries/\u65e5\u5fd7/Logback","title":"Logback","description":"Logback\u662fLog4j\u7684\u7ee7\u4efb\u8005,\u5b83\u6bd4Log4j\u66f4\u8f7b\u91cf,\u6027\u80fd\u66f4\u597d.","source":"@site/docs/JVM/Libraries/\u65e5\u5fd7/Logback.mdx","sourceDirName":"JVM/Libraries/\u65e5\u5fd7","slug":"/JVM/Libraries/\u65e5\u5fd7/Logback","permalink":"/notes3/docs/JVM/Libraries/\u65e5\u5fd7/Logback","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/JVM/Libraries/\u65e5\u5fd7/Logback.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"jvmEcosystem","previous":{"title":"Slf4j","permalink":"/notes3/docs/JVM/Libraries/\u65e5\u5fd7/Slf4j"},"next":{"title":"\u81ea\u7136\u8bed\u8a00\u5904\u7406","permalink":"/notes3/docs/category/\u81ea\u7136\u8bed\u8a00\u5904\u7406"}}');var c=r(6070),o=r(5658);const s={sidebar_position:2},a=void 0,d={},i=[{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2},{value:"\u914d\u7f6e",id:"\u914d\u7f6e",level:2},{value:"\u793a\u4f8b\u914d\u7f6e",id:"\u793a\u4f8b\u914d\u7f6e",level:3},{value:"Appender",id:"appender",level:3},{value:"\u8f93\u51fa\u5230\u63a7\u5236\u53f0",id:"\u8f93\u51fa\u5230\u63a7\u5236\u53f0",level:4},{value:"\u8f93\u51fa\u5230\u6587\u4ef6",id:"\u8f93\u51fa\u5230\u6587\u4ef6",level:4},{value:"Encoder",id:"encoder",level:3},{value:"\u57fa\u672c\u7528\u6cd5",id:"\u57fa\u672c\u7528\u6cd5",level:4},{value:"\u5f69\u8272\u65e5\u5fd7",id:"\u5f69\u8272\u65e5\u5fd7",level:4},{value:"FAQ",id:"faq",level:2}];function t(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.a,{href:"https://logback.qos.ch/",children:"Logback"}),"\u662f",(0,c.jsx)(n.code,{children:"Log4j"}),"\u7684\u7ee7\u4efb\u8005,\u5b83\u6bd4",(0,c.jsx)(n.code,{children:"Log4j"}),"\u66f4\u8f7b\u91cf,\u6027\u80fd\u66f4\u597d."]}),"\n",(0,c.jsx)(n.h2,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-xml",children:"<dependency>\r\n    <groupId>ch.qos.logback</groupId>\r\n    <artifactId>logback-classic</artifactId>\r\n    <version>1.5.12</version>\r\n    <scope>test</scope>\r\n</dependency>\n"})}),"\n",(0,c.jsx)(n.h2,{id:"\u914d\u7f6e",children:"\u914d\u7f6e"}),"\n",(0,c.jsxs)(n.p,{children:["\u5728",(0,c.jsx)(n.code,{children:"src/main/resources"}),"\u76ee\u5f55\u4e0b\u521b\u5efa",(0,c.jsx)(n.code,{children:"logback.xml"}),"\u6587\u4ef6"]}),"\n",(0,c.jsx)(n.h3,{id:"\u793a\u4f8b\u914d\u7f6e",children:"\u793a\u4f8b\u914d\u7f6e"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" encoding="UTF-8"?>\r\n<configuration debug="false">\r\n    \x3c!-- \u63a7\u5236\u53f0\u8f93\u51fa --\x3e\r\n    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">\r\n        <encoder>\r\n            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n</pattern>\r\n        </encoder>\r\n    </appender>\r\n\r\n    \x3c!-- \u6587\u4ef6\u8f93\u51fa --\x3e\r\n    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">\r\n        \x3c!-- \u6587\u4ef6\u8def\u5f84 --\x3e\r\n        <file>logs/app.log</file>\r\n\r\n        \x3c!-- \u6eda\u52a8\u7b56\u7565 --\x3e\r\n        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">\r\n            \x3c!-- \u6309\u5929\u6eda\u52a8 --\x3e\r\n            <fileNamePattern>logs/app.%d{yyyy-MM-dd}.log</fileNamePattern>\r\n            \x3c!-- \u4fdd\u755930\u5929\u7684\u5386\u53f2\u8bb0\u5f55 --\x3e\r\n            <maxHistory>30</maxHistory>\r\n        </rollingPolicy>\r\n\r\n        <encoder>\r\n            <pattern>%date{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>\r\n        </encoder>\r\n    </appender>\r\n\r\n    \x3c!-- \u5f02\u6b65\u8f93\u51fa --\x3e\r\n    <appender name="ASYNC" class="ch.qos.logback.classic.AsyncAppender">\r\n        <appender-ref ref="FILE" />\r\n        \x3c!-- \u961f\u5217\u5927\u5c0f --\x3e\r\n        <queueSize>512</queueSize>\r\n    </appender>\r\n\r\n    \x3c!-- \u6309\u5305\u914d\u7f6e\u7ea7\u522b --\x3e\r\n    <logger name="com.example.dao" level="DEBUG"/>\r\n    <logger name="com.example.service" level="INFO"/>\r\n\r\n    \x3c!-- \u6839\u65e5\u5fd7\u7ea7\u522b --\x3e\r\n    <root level="INFO">\r\n        <appender-ref ref="CONSOLE" />\r\n        <appender-ref ref="ASYNC" />\r\n    </root>\r\n</configuration>\n'})}),"\n",(0,c.jsx)(n.h3,{id:"appender",children:"Appender"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"Appender"}),"\u662f\u65e5\u5fd7\u7684\u8f93\u51fa\u76ee\u7684\u5730,\u5b83\u8d1f\u8d23\u5c06\u65e5\u5fd7\u8f93\u51fa\u5230\u4e0d\u540c\u7684\u76ee\u7684\u5730,\u4f8b\u5982\u63a7\u5236\u53f0\u3001\u6587\u4ef6\u3001\u6570\u636e\u5e93\u7b49."]}),"\n",(0,c.jsx)(n.h4,{id:"\u8f93\u51fa\u5230\u63a7\u5236\u53f0",children:"\u8f93\u51fa\u5230\u63a7\u5236\u53f0"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-xml",children:'<appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">\r\n    <encoder>\r\n        <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n</pattern>\r\n    </encoder>\r\n</appender>\n'})}),"\n",(0,c.jsx)(n.h4,{id:"\u8f93\u51fa\u5230\u6587\u4ef6",children:"\u8f93\u51fa\u5230\u6587\u4ef6"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-xml",children:'<appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">\r\n    \x3c!-- \u6587\u4ef6\u8def\u5f84 --\x3e\r\n    <file>logs/app.log</file>\r\n    \x3c!-- \u6eda\u52a8\u7b56\u7565 --\x3e\r\n    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">\r\n    \x3c!-- \u6309\u5929\u6eda\u52a8\u7684\u65e5\u5fd7\u540d\u79f0\u683c\u5f0f --\x3e\r\n        <fileNamePattern>logs/app.%d{yyyy-MM-dd}.log</fileNamePattern>\r\n        \x3c!-- \u4fdd\u755930\u5929\u7684\u5386\u53f2\u8bb0\u5f55 --\x3e\r\n        <maxHistory>30</maxHistory>\r\n        \x3c!-- \u65e5\u5fd7\u6587\u4ef6\u7684\u603b\u5927\u5c0f\u9650\u5236 --\x3e\r\n        <totalSizeCap>3GB</totalSizeCap>\r\n    </rollingPolicy>\r\n\r\n    \x3c!-- \u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f\u89e6\u53d1\u7b56\u7565 --\x3e\r\n    <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">\r\n        \x3c!-- \u5355\u4e2a\u65e5\u5fd7\u6587\u4ef6\u6700\u5927100MB --\x3e\r\n        <maxFileSize>100MB</maxFileSize>\r\n    </triggeringPolicy>\r\n\r\n    <encoder>\r\n        <pattern>%date{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>\r\n        <charset>UTF-8</charset>\r\n    </encoder>\r\n\r\n    \x3c!-- \u662f\u5426\u8ffd\u52a0\u5230\u6587\u4ef6\u672b\u5c3e --\x3e\r\n    <append>true</append>\r\n\r\n    \x3c!-- \u65e5\u5fd7\u7ea7\u522b\u8fc7\u6ee4\u5668 --\x3e\r\n    <filter class="ch.qos.logback.classic.filter.ThresholdFilter">\r\n        <level>INFO</level>\r\n    </filter>\r\n</appender>\n'})}),"\n",(0,c.jsx)(n.h3,{id:"encoder",children:"Encoder"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"Encoder"}),"\u8d1f\u8d23\u5c06\u65e5\u5fd7\u4e8b\u4ef6\u8f6c\u6362\u4e3a\u5b57\u8282\u6570\u7ec4,\u51b3\u5b9a\u4e86\u65e5\u5fd7\u7684\u8f93\u51fa\u683c\u5f0f.\u6700\u5e38\u7528\u7684\u662f",(0,c.jsx)(n.code,{children:"PatternLayoutEncoder"})]}),"\n",(0,c.jsx)(n.h4,{id:"\u57fa\u672c\u7528\u6cd5",children:"\u57fa\u672c\u7528\u6cd5"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-xml",children:'<appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">\r\n    <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">\r\n        <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>\r\n        <charset>UTF-8</charset>\r\n    </encoder>\r\n</appender>\n'})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u5e38\u7528Pattern\u8bf4\u660e"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-text",children:"\x3c!-- \u65f6\u95f4\u76f8\u5173 --\x3e\r\n%d{yyyy - MM - dd HH:mm:ss.SSS} - \u5b8c\u6574\u65f6\u95f4\r\n\r\n%d{HH:mm:ss.SSS} - \u65f6\u5206\u79d2\u6beb\u79d2\r\n\r\n%date - \u540c %d\r\n\r\n\x3c!-- \u7ea7\u522b\u76f8\u5173 --\x3e\r\n%-5level - \u65e5\u5fd7\u7ea7\u522b\uff0c\u5de6\u5bf9\u9f505\u5b57\u7b26\r\n\r\n%p - \u65e5\u5fd7\u7ea7\u522b\u7b80\u5199\r\n\r\n%le - \u65e5\u5fd7\u7ea7\u522b\u5c0f\u5199\r\n\r\n\x3c!-- \u7ebf\u7a0b\u76f8\u5173 --\x3e\r\n%thread - \u7ebf\u7a0b\u540d\r\n\r\n%t - \u7ebf\u7a0b\u540d\u7b80\u5199\r\n\r\n\x3c!-- \u7c7b\u4fe1\u606f --\x3e\r\n%logger{36} - logger\u540d\u79f0(\u6700\u5927\u957f\u5ea636)\r\n\r\n%c - \u540clogger\r\n\r\n%C - \u5b8c\u6574\u7c7b\u540d\r\n\r\n%class - \u5b8c\u6574\u7c7b\u540d\r\n\r\n%method - \u65b9\u6cd5\u540d\r\n\r\n%line - \u884c\u53f7\r\n\r\n\x3c!-- \u5176\u4ed6 --\x3e\r\n%msg \u6216 %message - \u65e5\u5fd7\u6d88\u606f\r\n\r\n%n - \u6362\u884c\r\n\r\n%X{key} - MDC\u503c\r\n\r\n%mdc - \u6240\u6709MDC\u503c\n"})}),"\n",(0,c.jsx)(n.h4,{id:"\u5f69\u8272\u65e5\u5fd7",children:"\u5f69\u8272\u65e5\u5fd7"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-xml",children:'<appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">\r\n    <encoder>\r\n        <pattern>%red(%d{HH:mm:ss.SSS}) %green([%thread]) %highlight(%-5level) %boldMagenta(%logger{36}) - %blue(%msg%n)</pattern>\r\n    </encoder>\r\n</appender>\n'})}),"\n",(0,c.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsx)(n.li,{children:"\u5982\u4f55\u5728\u8fd0\u884c\u671f\u95f4\u52a8\u6001\u4fee\u6539\u65e5\u5fd7\u7ea7\u522b"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-kotlin",children:'(LoggerFactory.getLogger("root") as Logger).level = Level.DEBUG\n'})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(t,{...e})}):t(e)}},5658:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>a});var l=r(758);const c={},o=l.createContext(c);function s(e){const n=l.useContext(o);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:s(e.components),l.createElement(o.Provider,{value:n},e.children)}}}]);