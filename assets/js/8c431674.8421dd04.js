"use strict";(self.webpackChunknotes_3=self.webpackChunknotes_3||[]).push([[31155],{43527:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>a,contentTitle:()=>o,default:()=>d,frontMatter:()=>c,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"AI/\u63d0\u793a\u8bcd\u5de5\u7a0b/DSPy/\u793a\u4f8b/\u7528 DSPy ReAct \u548c Yahoo Finance News \u8fdb\u884c\u8d22\u52a1\u5206\u6790","title":"\u7528 DSPy ReAct \u548c Yahoo Finance News \u8fdb\u884c\u8d22\u52a1\u5206\u6790","description":"\u672c\u6559\u7a0b\u6f14\u793a\u5982\u4f55\u4f7f\u7528 DSPy ReAct \u7ed3\u5408 LangChain \u7684 Yahoo Finance News \u5de5\u5177 \u6765\u6784\u5efa\u4e00\u4e2a\u7528\u4e8e\u5b9e\u65f6\u5e02\u573a\u5206\u6790\u7684\u8d22\u52a1\u5206\u6790\u4ee3\u7406\u3002","source":"@site/docs/AI/\u63d0\u793a\u8bcd\u5de5\u7a0b/DSPy/\u793a\u4f8b/\u7528 DSPy ReAct \u548c Yahoo Finance News \u8fdb\u884c\u8d22\u52a1\u5206\u6790.md","sourceDirName":"AI/\u63d0\u793a\u8bcd\u5de5\u7a0b/DSPy/\u793a\u4f8b","slug":"/AI/\u63d0\u793a\u8bcd\u5de5\u7a0b/DSPy/\u793a\u4f8b/\u7528 DSPy ReAct \u548c Yahoo Finance News \u8fdb\u884c\u8d22\u52a1\u5206\u6790","permalink":"/notes3/docs/AI/\u63d0\u793a\u8bcd\u5de5\u7a0b/DSPy/\u793a\u4f8b/\u7528 DSPy ReAct \u548c Yahoo Finance News \u8fdb\u884c\u8d22\u52a1\u5206\u6790","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/AI/\u63d0\u793a\u8bcd\u5de5\u7a0b/DSPy/\u793a\u4f8b/\u7528 DSPy ReAct \u548c Yahoo Finance News \u8fdb\u884c\u8d22\u52a1\u5206\u6790.md","tags":[],"version":"current","frontMatter":{},"sidebar":"ai","previous":{"title":"\u7528 DSPy ReAct \u548c Mem0 \u6784\u5efa\u5177\u6709\u8bb0\u5fc6\u80fd\u529b\u7684\u667a\u80fd\u4f53","permalink":"/notes3/docs/AI/\u63d0\u793a\u8bcd\u5de5\u7a0b/DSPy/\u793a\u4f8b/\u7528 DSPy ReAct \u548c Mem0 \u6784\u5efa\u5177\u6709\u8bb0\u5fc6\u80fd\u529b\u7684\u667a\u80fd\u4f53"},"next":{"title":"\u7b80\u4ecb","permalink":"/notes3/docs/AI/\u63d0\u793a\u8bcd\u5de5\u7a0b/DSPy/\u7b80\u4ecb"}}');var t=s(23420),r=s(54213);const c={},o=void 0,a={},l=[{value:"\u60a8\u5c06\u6784\u5efa\u7684\u5185\u5bb9",id:"\u60a8\u5c06\u6784\u5efa\u7684\u5185\u5bb9",level:2},{value:"\u8bbe\u7f6e",id:"\u8bbe\u7f6e",level:2},{value:"\u7b2c 1 \u6b65\uff1a\u5c06 LangChain \u5de5\u5177\u8f6c\u6362\u4e3a DSPy \u5de5\u5177",id:"\u7b2c-1-\u6b65\u5c06-langchain-\u5de5\u5177\u8f6c\u6362\u4e3a-dspy-\u5de5\u5177",level:2},{value:"\u7b2c 2 \u6b65\uff1a\u521b\u5efa\u8f85\u52a9\u8d22\u52a1\u5de5\u5177",id:"\u7b2c-2-\u6b65\u521b\u5efa\u8f85\u52a9\u8d22\u52a1\u5de5\u5177",level:2},{value:"\u7b2c 3 \u6b65\uff1a\u6784\u5efa\u8d22\u52a1 ReAct \u4ee3\u7406",id:"\u7b2c-3-\u6b65\u6784\u5efa\u8d22\u52a1-react-\u4ee3\u7406",level:2},{value:"\u7b2c 4 \u6b65\uff1a\u8fd0\u884c\u8d22\u52a1\u5206\u6790",id:"\u7b2c-4-\u6b65\u8fd0\u884c\u8d22\u52a1\u5206\u6790",level:2},{value:"\u793a\u4f8b\u8f93\u51fa",id:"\u793a\u4f8b\u8f93\u51fa",level:2},{value:"\u4f7f\u7528\u5f02\u6b65\u5de5\u5177",id:"\u4f7f\u7528\u5f02\u6b65\u5de5\u5177",level:2},{value:"\u4e3b\u8981\u4f18\u52bf",id:"\u4e3b\u8981\u4f18\u52bf",level:2}];function p(n){const e={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.p,{children:["\u672c\u6559\u7a0b\u6f14\u793a\u5982\u4f55\u4f7f\u7528 DSPy ReAct \u7ed3\u5408 ",(0,t.jsx)(e.a,{href:"https://python.langchain.com/docs/integrations/tools/yahoo_finance_news/",children:"LangChain \u7684 Yahoo Finance News \u5de5\u5177"})," \u6765\u6784\u5efa\u4e00\u4e2a\u7528\u4e8e\u5b9e\u65f6\u5e02\u573a\u5206\u6790\u7684\u8d22\u52a1\u5206\u6790\u4ee3\u7406\u3002"]}),"\n",(0,t.jsx)(e.h2,{id:"\u60a8\u5c06\u6784\u5efa\u7684\u5185\u5bb9",children:"\u60a8\u5c06\u6784\u5efa\u7684\u5185\u5bb9"}),"\n",(0,t.jsx)(e.p,{children:"\u4e00\u4e2a\u80fd\u591f\u83b7\u53d6\u65b0\u95fb\u3001\u5206\u6790\u60c5\u7eea\u5e76\u63d0\u4f9b\u6295\u8d44\u89c1\u89e3\u7684\u8d22\u52a1\u4ee3\u7406\u3002"}),"\n",(0,t.jsx)(e.h2,{id:"\u8bbe\u7f6e",children:"\u8bbe\u7f6e"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"pip install dspy langchain langchain-community yfinance\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\u7b2c-1-\u6b65\u5c06-langchain-\u5de5\u5177\u8f6c\u6362\u4e3a-dspy-\u5de5\u5177",children:"\u7b2c 1 \u6b65\uff1a\u5c06 LangChain \u5de5\u5177\u8f6c\u6362\u4e3a DSPy \u5de5\u5177"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:"import dspy\nfrom langchain_community.tools.yahoo_finance_news import YahooFinanceNewsTool\nfrom dspy.adapters.types.tool import Tool\nimport json\nimport yfinance as yf\n\n# \u914d\u7f6e DSPy\nlm = dspy.LM(model='openai/gpt-4o-mini')\ndspy.configure(lm=lm, allow_tool_async_sync_conversion=True)\n\n# \u5c06 LangChain Yahoo Finance \u5de5\u5177\u8f6c\u6362\u4e3a DSPy \u5de5\u5177\nyahoo_finance_tool = YahooFinanceNewsTool()\nfinance_news_tool = Tool.from_langchain(yahoo_finance_tool)\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\u7b2c-2-\u6b65\u521b\u5efa\u8f85\u52a9\u8d22\u52a1\u5de5\u5177",children:"\u7b2c 2 \u6b65\uff1a\u521b\u5efa\u8f85\u52a9\u8d22\u52a1\u5de5\u5177"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'def get_stock_price(ticker: str) -> str:\n    """\u83b7\u53d6\u5f53\u524d\u80a1\u7968\u4ef7\u683c\u548c\u57fa\u672c\u4fe1\u606f\u3002"""\n    try:\n        stock = yf.Ticker(ticker)\n        info = stock.info\n        hist = stock.history(period="1d")\n        \n        if hist.empty:\n            return f"Could not retrieve data for {ticker}"\n        \n        current_price = hist[\'Close\'].iloc[-1]\n        prev_close = info.get(\'previousClose\', current_price)\n        change_pct = ((current_price - prev_close) / prev_close * 100) if prev_close else 0\n        \n        result = {\n            "ticker": ticker,\n            "price": round(current_price, 2),\n            "change_percent": round(change_pct, 2),\n            "company": info.get(\'longName\', ticker)\n        }\n        \n        return json.dumps(result)\n    except Exception as e:\n        return f"Error: {str(e)}"\n\ndef compare_stocks(tickers: str) -> str:\n    """\u6bd4\u8f83\u591a\u53ea\u80a1\u7968\uff08\u4ee5\u9017\u53f7\u5206\u9694\uff09\u3002"""\n    try:\n        ticker_list = [t.strip().upper() for t in tickers.split(\',\')]\n        comparison = []\n        \n        for ticker in ticker_list:\n            stock = yf.Ticker(ticker)\n            info = stock.info\n            hist = stock.history(period="1d")\n            \n            if not hist.empty:\n                current_price = hist[\'Close\'].iloc[-1]\n                prev_close = info.get(\'previousClose\', current_price)\n                change_pct = ((current_price - prev_close) / prev_close * 100) if prev_close else 0\n                \n                comparison.append({\n                    "ticker": ticker,\n                    "price": round(current_price, 2),\n                    "change_percent": round(change_pct, 2)\n                })\n        \n        return json.dumps(comparison)\n    except Exception as e:\n        return f"Error: {str(e)}"\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u7b2c-3-\u6b65\u6784\u5efa\u8d22\u52a1-react-\u4ee3\u7406",children:"\u7b2c 3 \u6b65\uff1a\u6784\u5efa\u8d22\u52a1 ReAct \u4ee3\u7406"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'class FinancialAnalysisAgent(dspy.Module):\n    """\u4f7f\u7528 Yahoo Finance \u6570\u636e\u8fdb\u884c\u8d22\u52a1\u5206\u6790\u7684 ReAct \u4ee3\u7406\u3002"""\n    \n    def __init__(self):\n        super().__init__()\n        \n        # \u7ec4\u5408\u6240\u6709\u5de5\u5177\n        self.tools = [\n            finance_news_tool,  # LangChain Yahoo Finance News\n            get_stock_price,\n            compare_stocks\n        ]\n        \n        # \u521d\u59cb\u5316 ReAct\n        self.react = dspy.ReAct(\n            signature="financial_query -> analysis_response",\n            tools=self.tools,\n            max_iters=6\n        )\n    \n    def forward(self, financial_query: str):\n        return self.react(financial_query=financial_query)\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u7b2c-4-\u6b65\u8fd0\u884c\u8d22\u52a1\u5206\u6790",children:"\u7b2c 4 \u6b65\uff1a\u8fd0\u884c\u8d22\u52a1\u5206\u6790"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'def run_financial_demo():\n    """\u8d22\u52a1\u5206\u6790\u4ee3\u7406\u7684\u6f14\u793a\u3002"""\n    \n    # \u521d\u59cb\u5316\u4ee3\u7406\n    agent = FinancialAnalysisAgent()\n    \n    # \u793a\u4f8b\u67e5\u8be2\n    queries = [\n        "What\'s the latest news about Apple (AAPL) and how might it affect the stock price?",\n        "Compare AAPL, GOOGL, and MSFT performance",\n        "Find recent Tesla news and analyze sentiment"\n    ]\n    \n    for query in queries:\n        print(f"Query: {query}")\n        response = agent(financial_query=query)\n        print(f"Analysis: {response.analysis_response}")\n        print("-" * 50)\n\n# \u8fd0\u884c\u6f14\u793a\nif __name__ == "__main__":\n    run_financial_demo()\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u793a\u4f8b\u8f93\u51fa",children:"\u793a\u4f8b\u8f93\u51fa"}),"\n",(0,t.jsx)(e.p,{children:"\u5f53\u60a8\u4f7f\u7528\u7c7b\u4f3c\u201c\u5173\u4e8e\u82f9\u679c\u7684\u6700\u65b0\u6d88\u606f\u662f\u4ec0\u4e48\uff1f\u201d\u7684\u67e5\u8be2\u8fd0\u884c\u4ee3\u7406\u65f6\uff0c\u5b83\u5c06\uff1a"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"\u4f7f\u7528 Yahoo Finance News \u5de5\u5177\u83b7\u53d6\u6700\u8fd1\u7684\u82f9\u679c\u65b0\u95fb"}),"\n",(0,t.jsx)(e.li,{children:"\u83b7\u53d6\u5f53\u524d\u80a1\u7968\u4ef7\u683c\u6570\u636e"}),"\n",(0,t.jsx)(e.li,{children:"\u5206\u6790\u4fe1\u606f\u5e76\u63d0\u4f9b\u89c1\u89e3"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u54cd\u5e94\u793a\u4f8b\uff1a"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"Analysis: Given the current price of Apple (AAPL) at $196.58 and the slight increase of 0.48%, it appears that the stock is performing steadily in the market. However, the inability to access the latest news means that any significant developments that could influence investor sentiment and stock price are unknown. Investors should keep an eye on upcoming announcements or market trends that could impact Apple's performance, especially in comparison to other tech stocks like Microsoft (MSFT), which is also showing a positive trend.\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\u4f7f\u7528\u5f02\u6b65\u5de5\u5177",children:"\u4f7f\u7528\u5f02\u6b65\u5de5\u5177"}),"\n",(0,t.jsx)(e.p,{children:"\u8bb8\u591a Langchain \u5de5\u5177\u4f7f\u7528\u5f02\u6b65\u64cd\u4f5c\u4ee5\u83b7\u5f97\u66f4\u597d\u7684\u6027\u80fd\u3002\u6709\u5173\u5f02\u6b65\u5de5\u5177\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u5de5\u5177\u6587\u6863\u3002"}),"\n",(0,t.jsx)(e.h2,{id:"\u4e3b\u8981\u4f18\u52bf",children:"\u4e3b\u8981\u4f18\u52bf"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"\u5de5\u5177\u96c6\u6210"}),"\uff1a\u5c06 LangChain \u5de5\u5177\u4e0e DSPy ReAct \u65e0\u7f1d\u7ed3\u5408"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"\u5b9e\u65f6\u6570\u636e"}),"\uff1a\u8bbf\u95ee\u5f53\u524d\u5e02\u573a\u6570\u636e\u548c\u65b0\u95fb"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"\u53ef\u6269\u5c55"}),"\uff1a\u6613\u4e8e\u6dfb\u52a0\u66f4\u591a\u8d22\u52a1\u5206\u6790\u5de5\u5177"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"\u667a\u80fd\u63a8\u7406"}),"\uff1aReAct \u6846\u67b6\u63d0\u4f9b\u9010\u6b65\u5206\u6790"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"\u672c\u6559\u7a0b\u5c55\u793a\u4e86 DSPy \u7684 ReAct \u6846\u67b6\u5982\u4f55\u4e0e LangChain \u7684\u8d22\u52a1\u5de5\u5177\u914d\u5408\u4f7f\u7528\uff0c\u4ee5\u521b\u5efa\u667a\u80fd\u5e02\u573a\u5206\u6790\u4ee3\u7406\u3002"})]})}function d(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(p,{...n})}):p(n)}},54213:(n,e,s)=>{s.d(e,{R:()=>c,x:()=>o});var i=s(36672);const t={},r=i.createContext(t);function c(n){const e=i.useContext(r);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:c(n.components),i.createElement(r.Provider,{value:e},n.children)}}}]);