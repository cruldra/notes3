"use strict";(self.webpackChunknotes_3=self.webpackChunknotes_3||[]).push([[19432],{46950:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"Python/\u5185\u7f6e\u6a21\u5757/\u7c7b\u578b\u7cfb\u7edf/\u7b80\u4ecb","title":"\u7b80\u4ecb","description":"1. \u6982\u8ff0 (Introduction)","source":"@site/docs/Python/\u5185\u7f6e\u6a21\u5757/\u7c7b\u578b\u7cfb\u7edf/\u7b80\u4ecb.md","sourceDirName":"Python/\u5185\u7f6e\u6a21\u5757/\u7c7b\u578b\u7cfb\u7edf","slug":"/Python/\u5185\u7f6e\u6a21\u5757/\u7c7b\u578b\u7cfb\u7edf/\u7b80\u4ecb","permalink":"/notes3/docs/Python/\u5185\u7f6e\u6a21\u5757/\u7c7b\u578b\u7cfb\u7edf/\u7b80\u4ecb","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Python/\u5185\u7f6e\u6a21\u5757/\u7c7b\u578b\u7cfb\u7edf/\u7b80\u4ecb.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"python","previous":{"title":"subprocess","permalink":"/notes3/docs/Python/\u5185\u7f6e\u6a21\u5757/subprocess"},"next":{"title":"tuple","permalink":"/notes3/docs/Python/\u5185\u7f6e\u6a21\u5757/\u7c7b\u578b\u7cfb\u7edf/tuple"}}');var a=n(23420),t=n(54213);const r={sidebar_position:1},i=void 0,c={},d=[{value:"1. \u6982\u8ff0 (Introduction)",id:"1-\u6982\u8ff0-introduction",level:2},{value:"2. \u7c7b\u578b\u7cfb\u7edf\u67b6\u6784 (Type System Architecture)",id:"2-\u7c7b\u578b\u7cfb\u7edf\u67b6\u6784-type-system-architecture",level:2},{value:"3. \u6cdb\u578b\u4e0e\u53d8\u53d8\u6027 (Generics &amp; Variance)",id:"3-\u6cdb\u578b\u4e0e\u53d8\u53d8\u6027-generics--variance",level:2},{value:"3.1 \u53d8\u53d8\u6027\u5206\u7c7b",id:"31-\u53d8\u53d8\u6027\u5206\u7c7b",level:3},{value:"3.2 \u5b9a\u4e49\u6cdb\u578b (Python 3.12+ Syntax)",id:"32-\u5b9a\u4e49\u6cdb\u578b-python-312-syntax",level:3},{value:"3.3 \u663e\u5f0f\u63a7\u5236 Variance (\u65e7\u8bed\u6cd5)",id:"33-\u663e\u5f0f\u63a7\u5236-variance-\u65e7\u8bed\u6cd5",level:3},{value:"4. \u7ed3\u6784\u5316\u5b50\u7c7b\u578b (Structural Subtyping / Protocols)",id:"4-\u7ed3\u6784\u5316\u5b50\u7c7b\u578b-structural-subtyping--protocols",level:2},{value:"5. \u9ad8\u7ea7\u7c7b\u578b\u6784\u9020 (Advanced Type Constructors)",id:"5-\u9ad8\u7ea7\u7c7b\u578b\u6784\u9020-advanced-type-constructors",level:2},{value:"5.1 <code>Annotated</code>",id:"51-annotated",level:3},{value:"5.2 <code>TypeVarTuple</code> (Variadic Generics)",id:"52-typevartuple-variadic-generics",level:3},{value:"5.3 <code>ParamSpec</code>",id:"53-paramspec",level:3},{value:"6. \u7c7b\u578b\u5b57\u5178\u4e0e\u5b57\u9762\u91cf (TypedDict &amp; Literal)",id:"6-\u7c7b\u578b\u5b57\u5178\u4e0e\u5b57\u9762\u91cf-typeddict--literal",level:2},{value:"6.1 <code>TypedDict</code>",id:"61-typeddict",level:3},{value:"6.2 <code>Literal</code>",id:"62-literal",level:3},{value:"7. \u6700\u4f73\u5b9e\u8df5 (Best Practices)",id:"7-\u6700\u4f73\u5b9e\u8df5-best-practices",level:2},{value:"\u53c2\u8003\u8d44\u6599",id:"\u53c2\u8003\u8d44\u6599",level:2}];function h(e){const s={a:"a",annotation:"annotation",code:"code",h2:"h2",h3:"h3",li:"li",math:"math",mermaid:"mermaid",mi:"mi",mo:"mo",mrow:"mrow",mtext:"mtext",ol:"ol",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.h2,{id:"1-\u6982\u8ff0-introduction",children:"1. \u6982\u8ff0 (Introduction)"}),"\n",(0,a.jsxs)(s.p,{children:["Python \u7684\u7c7b\u578b\u7cfb\u7edf\u662f",(0,a.jsx)(s.strong,{children:"\u6e10\u8fdb\u5f0f (Gradual Typing)"})," \u7684\u3002\u8fd9\u610f\u5473\u7740 Python \u5141\u8bb8\u7a0b\u5e8f\u4e2d\u90e8\u5206\u4ee3\u7801\u662f\u52a8\u6001\u7c7b\u578b\u7684\uff08\u9ed8\u8ba4\u884c\u4e3a\uff09\uff0c\u800c\u90e8\u5206\u4ee3\u7801\u662f\u9759\u6001\u7c7b\u578b\u7684\uff08\u901a\u8fc7\u7c7b\u578b\u63d0\u793a\uff09\u3002",(0,a.jsx)(s.code,{children:"typing"})," \u6a21\u5757\u662f\u8fd9\u4e00\u4f53\u7cfb\u7684\u6838\u5fc3\uff0c\u63d0\u4f9b\u4e86\u6784\u5efa\u590d\u6742\u7c7b\u578b\u7b7e\u540d\u7684\u8bcd\u6c47\u8868\u3002"]}),"\n",(0,a.jsxs)(s.p,{children:["\u4e0e Java \u6216 C++ \u7b49\u9759\u6001\u8bed\u8a00\u4e0d\u540c\uff0cPython \u7684\u7c7b\u578b\u6ce8\u89e3",(0,a.jsx)(s.strong,{children:"\u4e0d\u4f1a\u5f71\u54cd\u8fd0\u884c\u65f6\u884c\u4e3a"}),"\uff08\u9664\u4e86\u6781\u5c11\u6570\u4f8b\u5916\uff0c\u5982 ",(0,a.jsx)(s.code,{children:"dataclasses"})," \u6216 ",(0,a.jsx)(s.code,{children:"singledispatch"}),"\uff09\u3002\u5b83\u4eec\u4e3b\u8981\u7528\u4e8e\uff1a"]}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"\u9759\u6001\u5206\u6790"}),"\uff1a\u4f9b ",(0,a.jsx)(s.code,{children:"mypy"}),"\u3001",(0,a.jsx)(s.code,{children:"pyright"})," \u7b49\u5de5\u5177\u5728\u4ee3\u7801\u8fd0\u884c\u524d\u6355\u83b7\u9519\u8bef\u3002"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"IDE \u652f\u6301"}),"\uff1a\u63d0\u4f9b\u66f4\u7cbe\u51c6\u7684\u4ee3\u7801\u8865\u5168\u548c\u91cd\u6784\u5efa\u8bae\u3002"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"\u6587\u6863\u5316"}),"\uff1a\u4f5c\u4e3a\u673a\u5668\u53ef\u8bfb\u7684\u6587\u6863\u3002"]}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"2-\u7c7b\u578b\u7cfb\u7edf\u67b6\u6784-type-system-architecture",children:"2. \u7c7b\u578b\u7cfb\u7edf\u67b6\u6784 (Type System Architecture)"}),"\n",(0,a.jsx)(s.p,{children:"Python \u7684\u7c7b\u578b\u5c42\u7ea7\u7ed3\u6784\u5177\u6709\u72ec\u7279\u7684\u201c\u53cc\u9876\u7aef\u201d\u7279\u6027\u3002"}),"\n",(0,a.jsx)(s.mermaid,{value:'graph TB\n    Any["Any<br/>(\u7279\u6b8a\u5f62\u5f0f)<br/>\u517c\u5bb9\u6240\u6709\u7c7b\u578b<br/>\u6240\u6709\u7c7b\u578b\u4e5f\u517c\u5bb9\u5b83"]\n    Object["object<br/>(\u6839\u7c7b\u578b)<br/>\u6240\u6709\u7c7b\u578b\u7684\u57fa\u7c7b"]\n    Concrete["\u5177\u4f53\u7c7b\u578b<br/>int, str, \u7528\u6237\u7c7b"]\n    Proto["\u534f\u8bae\u7c7b\u578b<br/>Iterable, Callable"]\n    Bottom["Never/NoReturn<br/>(\u5e95\u7c7b\u578b)<br/>\u7a7a\u96c6"]\n    \n    Any -.\u517c\u5bb9.-> Object\n    Object --\x3e Concrete\n    Object --\x3e Proto\n    Concrete --\x3e Bottom'}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:(0,a.jsx)(s.code,{children:"Any"})}),": \u65e2\u662f\u6240\u6709\u7c7b\u578b\u7684\u5b50\u7c7b\u578b\uff08Subtype\uff09\uff0c\u4e5f\u662f\u6240\u6709\u7c7b\u578b\u7684\u7236\u7c7b\u578b\uff08Supertype\uff09\u3002\u5b83\u662f\u9759\u6001\u7c7b\u578b\u68c0\u67e5\u7684\u201c\u9003\u751f\u8231\u201d\uff0c\u4efb\u4f55\u5bf9\u8c61\u90fd\u53ef\u4ee5\u8d4b\u503c\u7ed9 ",(0,a.jsx)(s.code,{children:"Any"}),"\uff0c",(0,a.jsx)(s.code,{children:"Any"})," \u4e5f\u53ef\u4ee5\u8d4b\u503c\u7ed9\u4efb\u4f55\u5bf9\u8c61\u3002"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:(0,a.jsx)(s.code,{children:"object"})}),": \u771f\u6b63\u7684\u7c7b\u5c42\u7ea7\u9876\u7aef\u3002\u6240\u6709\u7c7b\u578b\u90fd\u662f ",(0,a.jsx)(s.code,{children:"object"})," \u7684\u5b50\u7c7b\u3002\u4f46 ",(0,a.jsx)(s.code,{children:"object"})," \u4e0d\u80fd\u8d4b\u503c\u7ed9\u5177\u4f53\u7684\u7c7b\u578b\uff08\u5982 ",(0,a.jsx)(s.code,{children:"int"}),"\uff09\u3002"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsxs)(s.strong,{children:[(0,a.jsx)(s.code,{children:"Never"})," (\u6216 ",(0,a.jsx)(s.code,{children:"NoReturn"}),")"]}),": \u5e95\u7c7b\u578b\uff08Bottom Type\uff09\u3002\u6ca1\u6709\u4efb\u4f55\u503c\u5c5e\u4e8e\u6b64\u7c7b\u578b\uff0c\u901a\u5e38\u7528\u4e8e\u8868\u793a\u4e0d\u53ef\u8fbe\u4ee3\u7801\u6216\u6b7b\u5faa\u73af\u51fd\u6570\u7684\u8fd4\u56de\u503c\u3002"]}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"3-\u6cdb\u578b\u4e0e\u53d8\u53d8\u6027-generics--variance",children:"3. \u6cdb\u578b\u4e0e\u53d8\u53d8\u6027 (Generics & Variance)"}),"\n",(0,a.jsxs)(s.p,{children:["\u6cdb\u578b\u5141\u8bb8\u5b9a\u4e49\u5173\u4e8e\u7c7b\u578b\u53c2\u6570\u7684\u7c7b\u6216\u51fd\u6570\u3002\u7406\u89e3\u6cdb\u578b\u7684\u6838\u5fc3\u5728\u4e8e\u7406\u89e3",(0,a.jsx)(s.strong,{children:"\u53d8\u53d8\u6027 (Variance)"}),"\uff0c\u5373\u590d\u5408\u7c7b\u578b\u7684\u5b50\u7c7b\u578b\u5173\u7cfb\u5982\u4f55\u968f\u5176\u7ec4\u4ef6\u7c7b\u578b\u7684\u5b50\u7c7b\u578b\u5173\u7cfb\u53d8\u5316\u3002"]}),"\n",(0,a.jsxs)(s.p,{children:["\u5047\u8bbe ",(0,a.jsx)(s.code,{children:"Cat"})," \u662f ",(0,a.jsx)(s.code,{children:"Animal"})," \u7684\u5b50\u7c7b (",(0,a.jsx)(s.code,{children:"Cat <: Animal"}),")\uff1a"]}),"\n",(0,a.jsx)(s.h3,{id:"31-\u53d8\u53d8\u6027\u5206\u7c7b",children:"3.1 \u53d8\u53d8\u6027\u5206\u7c7b"}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{style:{textAlign:"left"},children:"\u7c7b\u578b"}),(0,a.jsx)(s.th,{style:{textAlign:"left"},children:"\u63cf\u8ff0"}),(0,a.jsx)(s.th,{style:{textAlign:"left"},children:"\u6570\u5b66\u7b26\u53f7"}),(0,a.jsx)(s.th,{style:{textAlign:"left"},children:"\u793a\u4f8b"})]})}),(0,a.jsxs)(s.tbody,{children:[(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{style:{textAlign:"left"},children:(0,a.jsx)(s.strong,{children:"\u534f\u53d8 (Covariant)"})}),(0,a.jsx)(s.td,{style:{textAlign:"left"},children:"\u4fdd\u6301\u5b50\u7c7b\u578b\u5173\u7cfb"}),(0,a.jsx)(s.td,{style:{textAlign:"left"},children:(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"T"}),(0,a.jsx)(s.mo,{children:"<"}),(0,a.jsx)(s.mo,{children:":"}),(0,a.jsx)(s.mi,{children:"U"}),(0,a.jsx)(s.mtext,{children:"\u2005\u200a"}),(0,a.jsx)(s.mo,{children:"\u27f9"}),(0,a.jsx)(s.mtext,{children:"\u2005\u200a"}),(0,a.jsx)(s.mi,{children:"C"}),(0,a.jsx)(s.mo,{stretchy:"false",children:"["}),(0,a.jsx)(s.mi,{children:"T"}),(0,a.jsx)(s.mo,{stretchy:"false",children:"]"}),(0,a.jsx)(s.mo,{children:"<"}),(0,a.jsx)(s.mo,{children:":"}),(0,a.jsx)(s.mi,{children:"C"}),(0,a.jsx)(s.mo,{stretchy:"false",children:"["}),(0,a.jsx)(s.mi,{children:"U"}),(0,a.jsx)(s.mo,{stretchy:"false",children:"]"})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"T <: U \\implies C[T] <: C[U]"})]})})}),(0,a.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.7224em",verticalAlign:"-0.0391em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"T"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel",children:"<:"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.7073em",verticalAlign:"-0.024em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"U"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel",children:"\u27f9"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"}),(0,a.jsx)(s.span,{className:"mopen",children:"["}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"T"}),(0,a.jsx)(s.span,{className:"mclose",children:"]"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel",children:"<:"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"}),(0,a.jsx)(s.span,{className:"mopen",children:"["}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"U"}),(0,a.jsx)(s.span,{className:"mclose",children:"]"})]})]})]})}),(0,a.jsxs)(s.td,{style:{textAlign:"left"},children:[(0,a.jsx)(s.code,{children:"Sequence[Cat] <: Sequence[Animal]"})," (\u53ea\u8bfb\u5bb9\u5668\u901a\u5e38\u662f\u534f\u53d8\u7684)"]})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{style:{textAlign:"left"},children:(0,a.jsx)(s.strong,{children:"\u9006\u53d8 (Contravariant)"})}),(0,a.jsx)(s.td,{style:{textAlign:"left"},children:"\u7ffb\u8f6c\u5b50\u7c7b\u578b\u5173\u7cfb"}),(0,a.jsx)(s.td,{style:{textAlign:"left"},children:(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"T"}),(0,a.jsx)(s.mo,{children:"<"}),(0,a.jsx)(s.mo,{children:":"}),(0,a.jsx)(s.mi,{children:"U"}),(0,a.jsx)(s.mtext,{children:"\u2005\u200a"}),(0,a.jsx)(s.mo,{children:"\u27f9"}),(0,a.jsx)(s.mtext,{children:"\u2005\u200a"}),(0,a.jsx)(s.mi,{children:"C"}),(0,a.jsx)(s.mo,{stretchy:"false",children:"["}),(0,a.jsx)(s.mi,{children:"U"}),(0,a.jsx)(s.mo,{stretchy:"false",children:"]"}),(0,a.jsx)(s.mo,{children:"<"}),(0,a.jsx)(s.mo,{children:":"}),(0,a.jsx)(s.mi,{children:"C"}),(0,a.jsx)(s.mo,{stretchy:"false",children:"["}),(0,a.jsx)(s.mi,{children:"T"}),(0,a.jsx)(s.mo,{stretchy:"false",children:"]"})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"T <: U \\implies C[U] <: C[T]"})]})})}),(0,a.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.7224em",verticalAlign:"-0.0391em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"T"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel",children:"<:"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.7073em",verticalAlign:"-0.024em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"U"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel",children:"\u27f9"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"}),(0,a.jsx)(s.span,{className:"mopen",children:"["}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"U"}),(0,a.jsx)(s.span,{className:"mclose",children:"]"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel",children:"<:"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"}),(0,a.jsx)(s.span,{className:"mopen",children:"["}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"T"}),(0,a.jsx)(s.span,{className:"mclose",children:"]"})]})]})]})}),(0,a.jsxs)(s.td,{style:{textAlign:"left"},children:[(0,a.jsx)(s.code,{children:"Callable[[Animal], None] <: Callable[[Cat], None]"})," (\u51fd\u6570\u53c2\u6570\u901a\u5e38\u662f\u9006\u53d8\u7684)"]})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{style:{textAlign:"left"},children:(0,a.jsx)(s.strong,{children:"\u4e0d\u53d8 (Invariant)"})}),(0,a.jsx)(s.td,{style:{textAlign:"left"},children:"\u65e0\u5b50\u7c7b\u578b\u5173\u7cfb"}),(0,a.jsx)(s.td,{style:{textAlign:"left"},children:(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"T"}),(0,a.jsx)(s.mo,{children:"<"}),(0,a.jsx)(s.mo,{children:":"}),(0,a.jsx)(s.mi,{children:"U"}),(0,a.jsx)(s.mo,{children:"\u21cf"}),(0,a.jsx)(s.mi,{children:"C"}),(0,a.jsx)(s.mo,{stretchy:"false",children:"["}),(0,a.jsx)(s.mi,{children:"T"}),(0,a.jsx)(s.mo,{stretchy:"false",children:"]"}),(0,a.jsx)(s.mo,{children:"\u223c"}),(0,a.jsx)(s.mi,{children:"C"}),(0,a.jsx)(s.mo,{stretchy:"false",children:"["}),(0,a.jsx)(s.mi,{children:"U"}),(0,a.jsx)(s.mo,{stretchy:"false",children:"]"})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"T <: U \\nRightarrow C[T] \\sim C[U]"})]})})}),(0,a.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.7224em",verticalAlign:"-0.0391em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"T"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel",children:"<:"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.6833em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"U"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel amsrm",children:"\u21cf"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"}),(0,a.jsx)(s.span,{className:"mopen",children:"["}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"T"}),(0,a.jsx)(s.span,{className:"mclose",children:"]"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel",children:"\u223c"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"}),(0,a.jsx)(s.span,{className:"mopen",children:"["}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"U"}),(0,a.jsx)(s.span,{className:"mclose",children:"]"})]})]})]})}),(0,a.jsxs)(s.td,{style:{textAlign:"left"},children:[(0,a.jsx)(s.code,{children:"List[Cat]"})," \u4e0e ",(0,a.jsx)(s.code,{children:"List[Animal]"})," \u4e92\u4e0d\u517c\u5bb9 (\u53ef\u53d8\u5bb9\u5668\u5fc5\u987b\u662f\u4e0d\u53d8\u7684)"]})]})]})]}),"\n",(0,a.jsx)(s.h3,{id:"32-\u5b9a\u4e49\u6cdb\u578b-python-312-syntax",children:"3.2 \u5b9a\u4e49\u6cdb\u578b (Python 3.12+ Syntax)"}),"\n",(0,a.jsxs)(s.p,{children:["Python 3.12 \u5f15\u5165\u4e86 ",(0,a.jsx)(s.strong,{children:"PEP 695"}),"\uff0c\u5927\u5927\u7b80\u5316\u4e86\u6cdb\u578b\u8bed\u6cd5\u3002"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-python",children:'# \u65e7\u8bed\u6cd5 (Pre-3.12)\nfrom typing import TypeVar, Generic, Sequence\n\nT = TypeVar("T")  # \u9ed8\u8ba4\u4e3a Invariant\nclass Stack(Generic[T]):\n    def push(self, item: T) -> None: ...\n\n# \u65b0\u8bed\u6cd5 (Python 3.12+)\nclass Stack[T]:  # \u81ea\u52a8\u63a8\u65ad variance\n    def push(self, item: T) -> None: ...\n\n# \u5b9a\u4e49\u534f\u53d8\u6cdb\u578b (\u53ea\u8bfb)\nclass ReadOnlyBox[T]: \n    # \u5982\u679c\u4ec5\u4f5c\u4e3a\u8fd4\u56de\u503c\uff0cT \u4f1a\u88ab\u81ea\u52a8\u63a8\u65ad\u4e3a\u534f\u53d8\n    def get(self) -> T: ... \n'})}),"\n",(0,a.jsx)(s.h3,{id:"33-\u663e\u5f0f\u63a7\u5236-variance-\u65e7\u8bed\u6cd5",children:"3.3 \u663e\u5f0f\u63a7\u5236 Variance (\u65e7\u8bed\u6cd5)"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-python",children:'from typing import TypeVar\n\nT_co = TypeVar("T_co", covariant=True)      # \u534f\u53d8\nT_contra = TypeVar("T_contra", contravariant=True) # \u9006\u53d8\n\nclass Producer(Generic[T_co]): ...          # \u53ea\u51fa\u4e0d\u8fdb\nclass Consumer(Generic[T_contra]): ...      # \u53ea\u8fdb\u4e0d\u51fa\n'})}),"\n",(0,a.jsx)(s.h2,{id:"4-\u7ed3\u6784\u5316\u5b50\u7c7b\u578b-structural-subtyping--protocols",children:"4. \u7ed3\u6784\u5316\u5b50\u7c7b\u578b (Structural Subtyping / Protocols)"}),"\n",(0,a.jsxs)(s.p,{children:["Python \u4f20\u7edf\u4e0a\u4f7f\u7528\u201c\u9e2d\u5b50\u7c7b\u578b\u201d (Duck Typing)\u3002",(0,a.jsx)(s.code,{children:"typing.Protocol"})," \u5c06\u8fd9\u79cd\u52a8\u6001\u6982\u5ff5\u5f15\u5165\u4e86\u9759\u6001\u7c7b\u578b\u7cfb\u7edf\uff0c\u79f0\u4e3a",(0,a.jsx)(s.strong,{children:"\u7ed3\u6784\u5316\u5b50\u7c7b\u578b (Structural Subtyping)"}),"\u3002"]}),"\n",(0,a.jsx)(s.p,{children:"\u4e0e\u540d\u4e49\u5b50\u7c7b\u578b (Nominal Subtyping, \u5982\u7ee7\u627f) \u4e0d\u540c\uff0c\u7ed3\u6784\u5316\u5b50\u7c7b\u578b\u53ea\u5173\u5fc3\u201c\u5b83\u6709\u4ec0\u4e48\u65b9\u6cd5/\u5c5e\u6027\u201d\uff0c\u800c\u4e0d\u5173\u5fc3\u201c\u5b83\u7ee7\u627f\u81ea\u8c01\u201d\u3002"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-python",children:'from typing import Protocol, runtime_checkable\n\n@runtime_checkable\nclass Renderable(Protocol):\n    """\u5b9a\u4e49\u4e00\u4e2a\u534f\u8bae\uff1a\u4efb\u4f55\u5177\u6709 render \u65b9\u6cd5\u5e76\u8fd4\u56de str \u7684\u7c7b\u90fd\u6ee1\u8db3\u6b64\u534f\u8bae"""\n    def render(self) -> str: ...\n\nclass Report:\n    # \u4e0d\u9700\u8981\u7ee7\u627f Renderable\n    def render(self) -> str:\n        return "Report Content"\n\ndef display(item: Renderable):\n    print(item.render())\n\ndisplay(Report())  # \u2705 \u901a\u8fc7\u9759\u6001\u68c0\u67e5\n'})}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:(0,a.jsx)(s.code,{children:"@runtime_checkable"})}),": \u5141\u8bb8\u5728\u8fd0\u884c\u65f6\u4f7f\u7528 ",(0,a.jsx)(s.code,{children:"isinstance(obj, Renderable)"}),"\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cProtocol \u4ec5\u7528\u4e8e\u9759\u6001\u5206\u6790\u3002"]}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"5-\u9ad8\u7ea7\u7c7b\u578b\u6784\u9020-advanced-type-constructors",children:"5. \u9ad8\u7ea7\u7c7b\u578b\u6784\u9020 (Advanced Type Constructors)"}),"\n",(0,a.jsxs)(s.h3,{id:"51-annotated",children:["5.1 ",(0,a.jsx)(s.code,{children:"Annotated"})]}),"\n",(0,a.jsx)(s.p,{children:"\u7528\u4e8e\u9644\u52a0\u5143\u6570\u636e\uff0c\u8fd9\u4e9b\u5143\u6570\u636e\u4f1a\u88ab\u7c7b\u578b\u68c0\u67e5\u5668\u5ffd\u7565\uff0c\u4f46\u53ef\u4f9b\u8fd0\u884c\u65f6\u6846\u67b6\uff08\u5982 FastAPI, Pydantic\uff09\u4f7f\u7528\u3002"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-python",children:'from typing import Annotated\n\n# "Metadata" \u5bf9\u7c7b\u578b\u68c0\u67e5\u5668\u4e0d\u53ef\u89c1\uff0c\u4f46\u5e93\u53ef\u4ee5\u8bfb\u53d6\u5b83\u8fdb\u884c\u9a8c\u8bc1\nAge = Annotated[int, "\u5fc5\u987b\u5927\u4e8e0", "\u5c0f\u4e8e120"]\n'})}),"\n",(0,a.jsxs)(s.h3,{id:"52-typevartuple-variadic-generics",children:["5.2 ",(0,a.jsx)(s.code,{children:"TypeVarTuple"})," (Variadic Generics)"]}),"\n",(0,a.jsxs)(s.p,{children:["\u7528\u4e8e\u5904\u7406\u4e0d\u5b9a\u6570\u91cf\u7684\u7c7b\u578b\u53c2\u6570\uff0c\u5e38\u89c1\u4e8e\u5f20\u91cf\u5e93\uff08\u5982 PyTorch, TensorFlow\uff09\u6216\u7c7b\u4f3c ",(0,a.jsx)(s.code,{children:"zip"})," \u7684\u51fd\u6570\u3002"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-python",children:'from typing import TypeVarTuple, Unpack\n\nTs = TypeVarTuple("Ts")\n\ndef move_first_to_last(tup: tuple[int, Unpack[Ts]]) -> tuple[Unpack[Ts], int]:\n    return (*tup[1:], tup[0])\n'})}),"\n",(0,a.jsxs)(s.h3,{id:"53-paramspec",children:["5.3 ",(0,a.jsx)(s.code,{children:"ParamSpec"})]}),"\n",(0,a.jsx)(s.p,{children:"\u7528\u4e8e\u7cbe\u786e\u4fdd\u7559\u88ab\u88c5\u9970\u51fd\u6570\u7684\u53c2\u6570\u7b7e\u540d\u3002\u8fd9\u662f\u7f16\u5199\u88c5\u9970\u5668\u65f6\u7684\u6700\u4f73\u5b9e\u8df5\u3002"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-python",children:'from typing import Callable, TypeVar, ParamSpec\n\nP = ParamSpec("P")\nR = TypeVar("R")\n\ndef logging_decorator(func: Callable[P, R]) -> Callable[P, R]:\n    def wrapper(*args: P.args, **kwargs: P.kwargs) -> R:\n        print("Calling...")\n        return func(*args, **kwargs)\n    return wrapper\n'})}),"\n",(0,a.jsx)(s.h2,{id:"6-\u7c7b\u578b\u5b57\u5178\u4e0e\u5b57\u9762\u91cf-typeddict--literal",children:"6. \u7c7b\u578b\u5b57\u5178\u4e0e\u5b57\u9762\u91cf (TypedDict & Literal)"}),"\n",(0,a.jsxs)(s.h3,{id:"61-typeddict",children:["6.1 ",(0,a.jsx)(s.code,{children:"TypedDict"})]}),"\n",(0,a.jsxs)(s.p,{children:["\u7528\u4e8e\u4e3a\u5b57\u5178\u63d0\u4f9b\u7ed3\u6784\u5316\u7c7b\u578b\u63d0\u793a\uff0c\u9002\u7528\u4e8e\u5904\u7406 JSON \u6570\u636e\u3002\u652f\u6301 ",(0,a.jsx)(s.code,{children:"total=False"})," (\u6240\u6709\u952e\u53ef\u9009) \u6216\u4f7f\u7528 ",(0,a.jsx)(s.code,{children:"Required"}),"/",(0,a.jsx)(s.code,{children:"NotRequired"})," (Python 3.11+)\u3002"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-python",children:'from typing import TypedDict, NotRequired\n\nclass Movie(TypedDict):\n    title: str\n    year: int\n    rating: NotRequired[float]  # \u8be5\u952e\u53ef\u4ee5\u4e0d\u5b58\u5728\n\nm: Movie = {"title": "Matrix", "year": 1999}  # \u2705 OK\n'})}),"\n",(0,a.jsxs)(s.h3,{id:"62-literal",children:["6.2 ",(0,a.jsx)(s.code,{children:"Literal"})]}),"\n",(0,a.jsx)(s.p,{children:"\u9650\u5236\u53d8\u91cf\u53ea\u80fd\u662f\u7279\u5b9a\u7684\u5b57\u9762\u503c\u3002"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-python",children:"from typing import Literal\n\ndef open_file(mode: Literal['r', 'w', 'rb', 'wb']) -> None: ...\n\nopen_file('r')    # \u2705 OK\nopen_file('rw')   # \u274c Type Error\n"})}),"\n",(0,a.jsx)(s.h2,{id:"7-\u6700\u4f73\u5b9e\u8df5-best-practices",children:"7. \u6700\u4f73\u5b9e\u8df5 (Best Practices)"}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"\u4f18\u5148\u4f7f\u7528\u5185\u7f6e\u96c6\u5408\u7c7b\u578b"})," (Python 3.9+): \u4f7f\u7528 ",(0,a.jsx)(s.code,{children:"list[int]"})," \u800c\u975e ",(0,a.jsx)(s.code,{children:"List[int]"}),"\uff0c\u4f7f\u7528 ",(0,a.jsx)(s.code,{children:"dict[str, int]"})," \u800c\u975e ",(0,a.jsx)(s.code,{children:"Dict"}),"\u3002"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"\u65b0\u8bed\u6cd5\u4f18\u5148"}),": \u5728 Python 3.10+ \u4e2d\u4f7f\u7528 ",(0,a.jsx)(s.code,{children:"X | Y"})," \u4ee3\u66ff ",(0,a.jsx)(s.code,{children:"Union[X, Y]"}),"\u3002"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"\u914d\u7f6e\u4e25\u683c\u6a21\u5f0f"}),": ",(0,a.jsx)(s.code,{children:"mypy"})," \u9ed8\u8ba4\u8f83\u4e3a\u5bbd\u677e\u3002\u5efa\u8bae\u5f00\u542f ",(0,a.jsx)(s.code,{children:"--strict"})," \u6216\u81f3\u5c11 ",(0,a.jsx)(s.code,{children:"--disallow-untyped-defs"})," \u4ee5\u83b7\u5f97\u771f\u6b63\u7684\u7c7b\u578b\u5b89\u5168\u6536\u76ca\u3002"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsxs)(s.strong,{children:["\u907f\u514d\u8fc7\u5ea6\u4f7f\u7528 ",(0,a.jsx)(s.code,{children:"Any"})]}),": \u6bcf\u5f53\u4f60\u4f7f\u7528 ",(0,a.jsx)(s.code,{children:"Any"}),"\uff0c\u4f60\u5c31\u5173\u95ed\u4e86\u90a3\u4e00\u90e8\u5206\u4ee3\u7801\u7684\u7c7b\u578b\u68c0\u67e5\u3002\u5982\u679c\u4e0d\u77e5\u9053\u7c7b\u578b\uff0c\u8003\u8651\u4f7f\u7528 ",(0,a.jsx)(s.code,{children:"object"})," (\u53ea\u8bfb) \u6216\u6cdb\u578b\u3002"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsxs)(s.strong,{children:["\u4f7f\u7528 ",(0,a.jsx)(s.code,{children:"Self"})]}),": \u5728\u8fd4\u56de\u81ea\u8eab\u5b9e\u4f8b\u7684\u65b9\u6cd5\uff08\u5982\u6784\u5efa\u5668\u6a21\u5f0f\uff09\u4e2d\u4f7f\u7528 ",(0,a.jsx)(s.code,{children:"Self"})," \u7c7b\u578b (Python 3.11+)\uff0c\u8fd9\u6bd4\u4f7f\u7528 TypeVar \u7ed1\u5b9a\u66f4\u7b80\u6d01\u3002"]}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"\u53c2\u8003\u8d44\u6599",children:"\u53c2\u8003\u8d44\u6599"}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"https://docs.python.org/3/library/typing.html",children:"Python 3.14.2 Documentation - typing"})}),"\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"https://typing.python.org/en/latest/reference/generics.html",children:"Typing Documentation - Generics"})}),"\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"https://typing.python.org/en/latest/spec/protocol.html",children:"Typing Documentation - Protocols"})}),"\n"]})]})}function m(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},54213:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>i});var l=n(36672);const a={},t=l.createContext(a);function r(e){const s=l.useContext(t);return l.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),l.createElement(t.Provider,{value:s},e.children)}}}]);