"use strict";(self.webpackChunknotes_3=self.webpackChunknotes_3||[]).push([[4187],{35567:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"Tools/Jenkins","title":"Jenkins","description":"\u4f7f\u7528Jenkins\u5bb9\u5668","source":"@site/docs/Tools/Jenkins.mdx","sourceDirName":"Tools","slug":"/Tools/Jenkins","permalink":"/notes3/docs/Tools/Jenkins","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Tools/Jenkins.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"tools","previous":{"title":"GitHub\u4ee3\u7801\u641c\u7d22\u8bed\u6cd5\u6307\u5357","permalink":"/notes3/docs/Tools/Github/\u9ad8\u7ea7\u641c\u7d22\u8bed\u6cd5"},"next":{"title":"Ollama","permalink":"/notes3/docs/Tools/Ollama"}}');var o=r(23420),c=r(54213);const i={},t=void 0,l={},d=[{value:"\u4f7f\u7528<code>Jenkins</code>\u5bb9\u5668",id:"\u4f7f\u7528jenkins\u5bb9\u5668",level:2},{value:"<code>docker</code>\u547d\u4ee4",id:"docker\u547d\u4ee4",level:3},{value:"<code>node</code>\u547d\u4ee4",id:"node\u547d\u4ee4",level:3}];function a(n){const e={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,c.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(e.h2,{id:"\u4f7f\u7528jenkins\u5bb9\u5668",children:["\u4f7f\u7528",(0,o.jsx)(e.code,{children:"Jenkins"}),"\u5bb9\u5668"]}),"\n",(0,o.jsxs)(e.h3,{id:"docker\u547d\u4ee4",children:[(0,o.jsx)(e.code,{children:"docker"}),"\u547d\u4ee4"]}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsxs)(e.p,{children:["\u9996\u5148\u628a\u5bbf\u4e3b\u673a\u4e2d\u7684",(0,o.jsx)(e.code,{children:"docker.sock"}),"\u6620\u5c04\u5230\u5bb9\u5668\u4e2d"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:'jenkins:\r\nimage: jenkins/jenkins:latest\r\nuser: root\r\ncontainer_name: jenkins\r\nports:\r\n  - "8880:8080"\r\n  - "5030:5000"\r\nvolumes:\r\n  - /etc/localtime:/etc/localtime:ro\r\n  - ./jenkins/data:/var/jenkins_home\r\n  - /var/run/docker.sock:/var/run/docker.sock\r\nrestart: always\n'})}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsxs)(e.p,{children:["\u7136\u540e\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u5728",(0,o.jsx)(e.code,{children:"jenkins"}),"\u5bb9\u5668\u4e2d\u5b89\u88c5",(0,o.jsx)(e.code,{children:"docker cli"})]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:'# \u8fdb\u5165 Jenkins \u5bb9\u5668\r\ndocker exec -it jenkins bash\r\n\r\n# \u66f4\u65b0\u8f6f\u4ef6\u5305\u5217\u8868\r\napt-get update\r\n\r\n# \u5b89\u88c5\u4f9d\u8d56\r\napt-get install -y apt-transport-https ca-certificates curl gnupg lsb-release\r\n\r\n# \u6dfb\u52a0 Docker \u5b98\u65b9 GPG \u5bc6\u94a5\r\ncurl -fsSL https://download.docker.com/linux/debian/gpg | gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg\r\n\r\n# \u8bbe\u7f6e Docker \u7a33\u5b9a\u7248\u4ed3\u5e93\r\necho "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/debian $(lsb_release -cs) stable" | tee /etc/apt/sources.list.d/docker.list > /dev/null\r\n\r\n# \u518d\u6b21\u66f4\u65b0\u8f6f\u4ef6\u5305\u5217\u8868\r\napt-get update\r\n\r\n# \u53ea\u5b89\u88c5 Docker CLI (\u4e0d\u5b89\u88c5\u5b8c\u6574\u7684 Docker Engine)\r\napt-get install -y docker-ce-cli\n'})}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsx)(e.p,{children:"\u9a8c\u8bc1"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"docker --version\r\ndocker ps\n"})}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(e.h3,{id:"node\u547d\u4ee4",children:[(0,o.jsx)(e.code,{children:"node"}),"\u547d\u4ee4"]}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsxs)(e.p,{children:["\u5728\u5bb9\u5668\u4e2d\u5b89\u88c5",(0,o.jsx)(e.code,{children:"node"})]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:'# \u8fdb\u5165 Jenkins \u5bb9\u5668\r\ndocker exec -it jenkins bash\r\n\r\n# \u5b89\u88c5 NVM \u7684\u4f9d\u8d56\r\napt-get update\r\napt-get install -y curl build-essential libssl-dev\r\n\r\n# \u4ee5 Jenkins \u7528\u6237\u8eab\u4efd\u5b89\u88c5 NVM\r\nsu - jenkins\r\n\r\n# \u4e0b\u8f7d\u5e76\u5b89\u88c5 NVM\r\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.3/install.sh | bash\r\n\r\n# \u52a0\u8f7d NVM\r\nexport NVM_DIR="$HOME/.nvm"\r\n[ -s "$NVM_DIR/nvm.sh" ] && \\. "$NVM_DIR/nvm.sh"\r\n\r\n# \u5b89\u88c5\u7279\u5b9a\u7248\u672c\u7684 Node.js\r\nnvm install 16\r\n\r\n# \u8bbe\u7f6e\u9ed8\u8ba4\u7248\u672c\r\nnvm alias default 16\r\n\r\n# \u9a8c\u8bc1\u5b89\u88c5\r\nnode --version\r\nnpm --version\r\n\r\n# \u9000\u51fa jenkins \u7528\u6237\u4f1a\u8bdd\r\nexit\n'})}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsxs)(e.p,{children:["\u628a\u53ef\u6267\u884c\u6587\u4ef6\u94fe\u63a5\u5230",(0,o.jsx)(e.code,{children:"/usr/bin"})]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# \u8fdb\u5165 Jenkins \u5bb9\u5668\r\ndocker exec -it jenkins bash\r\n\r\n# \u521b\u5efa\u7b26\u53f7\u94fe\u63a5\r\nln -sf /root/.nvm/versions/node/v22.14.0/bin/pnpm /usr/bin/pnpm\r\nln -sf /root/.nvm/versions/node/v22.14.0/bin/npm /usr/bin/npm\r\nln -sf /root/.nvm/versions/node/v22.14.0/bin/node /usr/bin/node\n"})}),"\n"]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,c.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(a,{...n})}):a(n)}},54213:(n,e,r)=>{r.d(e,{R:()=>i,x:()=>t});var s=r(36672);const o={},c=s.createContext(o);function i(n){const e=s.useContext(c);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:i(n.components),s.createElement(c.Provider,{value:e},n.children)}}}]);